This file is a merged representation of a subset of the codebase, containing files not matching ignore patterns, combined into a single document by Repomix.
The content has been processed where comments have been removed, line numbers have been added.

================================================================
File Summary
================================================================

Purpose:
--------
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.

File Format:
------------
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  a. A separator line (================)
  b. The file path (File: path/to/file)
  c. Another separator line
  d. The full contents of the file
  e. A blank line

Usage Guidelines:
-----------------
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.

Notes:
------
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching these patterns are excluded: logs, *.log, npm-debug.log*, yarn-debug.log*, yarn-error.log*, pnpm-debug.log*, lerna-debug.log*, .cache/, .parcel-cache/, node_modules, dist, dist-ssr, *.local, .vscode/*, *.suo, *.ntvs*, *.njsproj, *.sln, *.sw?, ._*, .Spotlight-V100, .Trashes, ehthumbs.db, Thumbs.db, .vscode/, .idea/, .env.local, .env.development.local, .env.test.local, .env.production.local, *.tmp, *.temp
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Code comments have been removed from supported file types
- Line numbers have been added to the beginning of each line
- Files are sorted by Git change count (files with more changes are at the bottom)


================================================================
Directory Structure
================================================================
playwright/
  .auth/
    user.json
playwright-report/
  index.html
public/
  vite.svg
scripts/
  lighthouse-ci.js
src/
  __tests__/
    components/
      AddPlant.test.tsx
      BulkActivityModal.test.tsx
      CareLogForm.test.tsx
      Dashboard.test.tsx
      LogCare.test.tsx
      PlantRegistrationForm.test.tsx
      PlantReminderSettings.test.tsx
      PlantStageDisplay.test.tsx
      ReminderPreferencesSection.test.tsx
      SoilMixtureSelector.test.tsx
    database/
      plantService.test.ts
      varietyService.test.ts
    e2e/
      plant-registration.spec.ts
    integration/
      plantDetailReminderSettings.test.tsx
      plantRegistrationFlow.test.tsx
      smartDefaultsIntegration.test.tsx
      stageCalculationDisplay.test.tsx
    services/
      careSchedulingService.test.ts
      dynamicSchedulingService.test.ts
      growthRateService.test.ts
      smartDefaultsService.test.ts
      useDynamicStage.test.ts
    setup/
      mockFirebase.ts
    utils/
      dateUtils.test.ts
      growthStage.test.ts
      plantDisplay.test.ts
      plantGrouping.test.ts
      plantRegistration.test.ts
      testHelpers.tsx
      varietyGrowthStages.test.ts
  assets/
    react.svg
  components/
    dashboard/
      StageAlertCard.tsx
    fertilization/
      FertilizationDashboardSection.tsx
      FertilizationTaskCard.tsx
    layouts/
      EmptyState.tsx
      Welcome.tsx
    plant/
      BulkActivityModal.tsx
      CareActivityItem.tsx
      CareHistory.tsx
      CustomVarietyForm.tsx
      NextActivityCard.tsx
      PlantGroupCard.tsx
      PlantInfoCard.tsx
      PlantRegistrationForm.tsx
      PlantReminderSettings.tsx
      PlantStageDisplay.tsx
      ReminderPreferencesSection.tsx
      SoilMixtureSelector.tsx
      StageUpdateModal.tsx
    ui/
      Badge.tsx
      Button.tsx
      Card.tsx
      DarkModeToggle.tsx
      Dialog.tsx
      Input.tsx
      LoadingSpinner.tsx
      LocationToggle.tsx
      OfflineIndicator.tsx
      StatusBadge.tsx
      Switch.tsx
    AuthForm.tsx
    Navigation.tsx
  data/
    seedVarieties.ts
    visualCues.ts
  db/
    seedData.ts
  hooks/
    useAppInitialization.ts
    useDarkMode.ts
    useDynamicStage.ts
    useFirebaseAuth.ts
    useFirebaseCareActivities.ts
    useFirebasePlants.ts
    useFirstTimeUser.ts
    useNextPlantTask.ts
    useProactiveStageAlerts.ts
    useScheduledTasks.ts
  pages/
    care/
      CareLogForm.tsx
      LogCare.tsx
      PhotoCapture.tsx
      QuickCompletionButtons.tsx
    dashboard/
      index.tsx
      TaskGroup.tsx
      TaskItem.tsx
    plants/
      AddPlant.tsx
      PlantDetail.tsx
      Plants.tsx
    settings/
      index.tsx
  services/
    firebase/
      __mocks__/
        config.ts
      authService.ts
      careActivityService.ts
      config.prod.ts
      config.test.ts
      config.ts
      plantService.ts
      scheduledTaskService.ts
    bulkActivityService.ts
    careSchedulingService.ts
    dynamicSchedulingService.ts
    GrowthRateService.ts
    index.ts
    PlantRegistrationService.ts
    ProtocolTranspilerService.ts
    smartDefaultsService.ts
    StageManagementService.ts
  styles/
    globals.css
  types/
    core.ts
    database.ts
    firebase.ts
    index.ts
    protocols.ts
    scheduling.ts
    user.ts
  utils/
    cn.ts
    dateUtils.ts
    fertilizationUtils.ts
    growthStage.ts
    plantDisplay.ts
    plantGrouping.ts
    plantStage.ts
  App.css
  App.tsx
  index.css
  jest.polyfills.ts
  main.tsx
  setupTests.ts
  vite-env.d.ts
tests/
  e2e/
    helpers/
      auth-helper.ts
      auth.setup.ts
      debug-setup.js
      global-setup.ts
      simple-global-setup.ts
    utils/
      test-data-helper.ts
    pwa-functionality.spec.ts
  playwright/
    .auth/
      user.json
.firebaserc
.gitignore
eslint.config.js
firebase.json
firestore.indexes.json
firestore.rules
index.html
jest.config.ts
package.json
playwright.config.ts
postcss.config.js
print_structure.py
README.md
repomix.config.json
storage.rules
tailwind.config.js
tsconfig.app.json
tsconfig.json
tsconfig.node.json
tsconfig.tsbuildinfo
vite.config.ts

================================================================
Files
================================================================

================
File: src/__tests__/services/dynamicSchedulingService.test.ts
================
  1: import { DynamicSchedulingService } from "@/services/dynamicSchedulingService";
  2: import { db, TaskCompletionRecord } from "@/types/database";
  3: import { addDays, subDays } from "date-fns";
  4: 
  5: 
  6: const createMockCompletion = (
  7:   overrides: Partial<TaskCompletionRecord>
  8: ): TaskCompletionRecord => {
  9:   return {
 10:     id: crypto.randomUUID(),
 11:     plantId: "plant-1",
 12:     taskType: "water",
 13:     scheduledDate: new Date(),
 14:     actualCompletionDate: new Date(),
 15:     varianceDays: 0,
 16:     careActivityId: "care-1",
 17:     plantStage: "vegetative",
 18:     createdAt: new Date(),
 19:     updatedAt: new Date(),
 20:     ...overrides,
 21:   };
 22: };
 23: 
 24: describe("DynamicSchedulingService", () => {
 25:   const plantId = "plant-1";
 26:   const careActivityId = "care-1";
 27: 
 28:   beforeEach(async () => {
 29:     await db.taskCompletions.clear();
 30:   });
 31: 
 32:   describe("recordTaskCompletion", () => {
 33:     it("should correctly calculate and store varianceDays", async () => {
 34: 
 35:       const onTimeDate = new Date("2025-06-20");
 36:       await DynamicSchedulingService.recordTaskCompletion(
 37:         plantId,
 38:         "water",
 39:         onTimeDate,
 40:         onTimeDate,
 41:         careActivityId,
 42:         "vegetative"
 43:       );
 44: 
 45: 
 46:       const earlyDateScheduled = new Date("2025-06-22");
 47:       const earlyDateCompleted = new Date("2025-06-20");
 48:       await DynamicSchedulingService.recordTaskCompletion(
 49:         plantId,
 50:         "water",
 51:         earlyDateScheduled,
 52:         earlyDateCompleted,
 53:         careActivityId,
 54:         "vegetative"
 55:       );
 56: 
 57: 
 58:       const lateDateScheduled = new Date("2025-06-20");
 59:       const lateDateCompleted = new Date("2025-06-23");
 60:       await DynamicSchedulingService.recordTaskCompletion(
 61:         plantId,
 62:         "water",
 63:         lateDateScheduled,
 64:         lateDateCompleted,
 65:         careActivityId,
 66:         "vegetative"
 67:       );
 68: 
 69:       const onTimeCompletion = await db.taskCompletions
 70:         .where({ scheduledDate: onTimeDate, actualCompletionDate: onTimeDate })
 71:         .first();
 72:       const earlyCompletion = await db.taskCompletions
 73:         .where({
 74:           scheduledDate: earlyDateScheduled,
 75:           actualCompletionDate: earlyDateCompleted,
 76:         })
 77:         .first();
 78:       const lateCompletion = await db.taskCompletions
 79:         .where({
 80:           scheduledDate: lateDateScheduled,
 81:           actualCompletionDate: lateDateCompleted,
 82:         })
 83:         .first();
 84: 
 85:       expect(onTimeCompletion?.varianceDays).toBe(0);
 86:       expect(earlyCompletion?.varianceDays).toBe(-2);
 87:       expect(lateCompletion?.varianceDays).toBe(3);
 88:     });
 89:   });
 90: 
 91:   describe("getCompletionPatterns", () => {
 92:     it("should return zeros if there are fewer than 3 data points", async () => {
 93:       await db.taskCompletions.add(
 94:         createMockCompletion({ plantId, taskType: "water" })
 95:       );
 96:       await db.taskCompletions.add(
 97:         createMockCompletion({ plantId, taskType: "water" })
 98:       );
 99: 
100:       const patterns = await DynamicSchedulingService.getCompletionPatterns(
101:         plantId,
102:         "water"
103:       );
104:       expect(patterns.averageVariance).toBe(0);
105:       expect(patterns.consistency).toBe(0);
106:       expect(patterns.recommendedAdjustment).toBe(0);
107:     });
108: 
109:     it("should calculate patterns for a consistently late user", async () => {
110:       for (let i = 0; i < 5; i++) {
111:         await DynamicSchedulingService.recordTaskCompletion(
112:           plantId,
113:           "water",
114:           new Date(),
115:           addDays(new Date(), 3),
116:           `care-${i}`,
117:           "vegetative"
118:         );
119:       }
120: 
121:       const patterns = await DynamicSchedulingService.getCompletionPatterns(
122:         plantId,
123:         "water"
124:       );
125:       expect(patterns.averageVariance).toBe(3);
126:       expect(patterns.consistency).toBe(1);
127:       expect(patterns.recommendedAdjustment).toBe(2);
128:     });
129:   });
130: 
131:   describe("getNextDueDateForTask", () => {
132:     it("should return the default interval if there is not enough data", async () => {
133:       const lastCompletion = new Date("2025-06-20");
134:       const nextDueDate = await DynamicSchedulingService.getNextDueDateForTask(
135:         plantId,
136:         "water",
137:         lastCompletion
138:       );
139:       expect(nextDueDate).toEqual(addDays(lastCompletion, 7));
140:     });
141: 
142:     it("should adjust the due date based on consistent late completions", async () => {
143:       for (let i = 0; i < 5; i++) {
144:         await DynamicSchedulingService.recordTaskCompletion(
145:           plantId,
146:           "water",
147:           subDays(new Date(), i),
148:           addDays(subDays(new Date(), i), 3),
149:           `care-${i}`,
150:           "vegetative"
151:         );
152:       }
153: 
154:       const lastCompletion = new Date("2025-06-20");
155:       const nextDueDate = await DynamicSchedulingService.getNextDueDateForTask(
156:         plantId,
157:         "water",
158:         lastCompletion
159:       );
160: 
161: 
162: 
163:       expect(nextDueDate).toEqual(addDays(lastCompletion, 9));
164:     });
165:   });
166: });

================
File: src/__tests__/services/growthRateService.test.ts
================
  1: import { GrowthRateService } from "@/services/GrowthRateService";
  2: import {
  3:   plantService,
  4:   varietyService,
  5:   PlantRecord,
  6:   VarietyRecord,
  7: } from "@/types/database";
  8: 
  9: 
 10: jest.mock("@/types/database", () => ({
 11:   ...jest.requireActual("@/types/database"),
 12:   plantService: {
 13:     getPlant: jest.fn(),
 14:     updatePlant: jest.fn(),
 15:   },
 16:   varietyService: {
 17:     getVariety: jest.fn(),
 18:   },
 19: }));
 20: 
 21: const mockPlantService = plantService as jest.Mocked<typeof plantService>;
 22: const mockVarietyService = varietyService as jest.Mocked<typeof varietyService>;
 23: 
 24: describe("GrowthRateService", () => {
 25:   const plantId = "plant-1";
 26: 
 27:   const mockVariety: VarietyRecord = {
 28:     id: "v1",
 29:     name: "Test Variety",
 30:     growthTimeline: {
 31:       germination: 10,
 32:       seedling: 20,
 33:       vegetative: 30,
 34:       maturation: 60,
 35:     },
 36:   } as VarietyRecord;
 37: 
 38:   beforeEach(() => {
 39:     jest.clearAllMocks();
 40:     mockVarietyService.getVariety.mockResolvedValue(mockVariety);
 41:   });
 42: 
 43:   it("should do nothing if the plant has no confirmed stage", async () => {
 44:     const plantWithoutConfirmation = {
 45:       id: plantId,
 46:       plantedDate: new Date(),
 47:     } as PlantRecord;
 48:     mockPlantService.getPlant.mockResolvedValue(plantWithoutConfirmation);
 49: 
 50:     await GrowthRateService.updateGrowthRateModifier(plantId);
 51: 
 52:     expect(mockPlantService.updatePlant).not.toHaveBeenCalled();
 53:   });
 54: 
 55:   it("should calculate a modifier < 1 for a plant growing faster than expected", async () => {
 56:     const plantedDate = new Date("2025-06-01");
 57: 
 58: 
 59:     const stageConfirmedDate = new Date("2025-06-09");
 60:     const mockPlant = {
 61:       id: plantId,
 62:       plantedDate,
 63:       varietyId: "v1",
 64:       confirmedStage: "seedling",
 65:       stageConfirmedDate,
 66:     } as PlantRecord;
 67: 
 68:     mockPlantService.getPlant.mockResolvedValue(mockPlant);
 69: 
 70:     await GrowthRateService.updateGrowthRateModifier(plantId);
 71: 
 72: 
 73:     expect(mockPlantService.updatePlant).toHaveBeenCalledWith(plantId, {
 74:       growthRateModifier: 0.8,
 75:     });
 76:   });
 77: 
 78:   it("should calculate a modifier > 1 for a plant growing slower than expected", async () => {
 79:     const plantedDate = new Date("2025-06-01");
 80: 
 81: 
 82:     const stageConfirmedDate = new Date("2025-06-16");
 83:     const mockPlant = {
 84:       id: plantId,
 85:       plantedDate,
 86:       varietyId: "v1",
 87:       confirmedStage: "seedling",
 88:       stageConfirmedDate,
 89:     } as PlantRecord;
 90: 
 91:     mockPlantService.getPlant.mockResolvedValue(mockPlant);
 92: 
 93:     await GrowthRateService.updateGrowthRateModifier(plantId);
 94: 
 95: 
 96:     expect(mockPlantService.updatePlant).toHaveBeenCalledWith(plantId, {
 97:       growthRateModifier: 1.5,
 98:     });
 99:   });
100: 
101:   it("should calculate a modifier of 1 for a plant growing exactly on schedule", async () => {
102:     const plantedDate = new Date("2025-06-01");
103: 
104:     const stageConfirmedDate = new Date("2025-06-11");
105:     const mockPlant = {
106:       id: plantId,
107:       plantedDate,
108:       varietyId: "v1",
109:       confirmedStage: "seedling",
110:       stageConfirmedDate,
111:     } as PlantRecord;
112: 
113:     mockPlantService.getPlant.mockResolvedValue(mockPlant);
114: 
115:     await GrowthRateService.updateGrowthRateModifier(plantId);
116: 
117: 
118:     expect(mockPlantService.updatePlant).toHaveBeenCalledWith(plantId, {
119:       growthRateModifier: 1.0,
120:     });
121:   });
122: });

================
File: src/components/dashboard/StageAlertCard.tsx
================
 1: import React from "react";
 2: import { Card, CardContent } from "@/components/ui/Card";
 3: import { Button } from "@/components/ui/Button";
 4: import { Badge } from "@/components/ui/Badge";
 5: import { StageAlert } from "@/hooks/useProactiveStageAlerts";
 6: import { getPlantDisplayName } from "@/utils/plantDisplay";
 7: import { ArrowRight, Check, X } from "lucide-react";
 8: import { GrowthStage } from "@/types";
 9: 
10: interface StageAlertCardProps {
11:   alert: StageAlert;
12:   onConfirm: (plantId: string, newStage: GrowthStage) => void;
13:   onDismiss: (plantId: string) => void;
14: }
15: 
16: const StageAlertCard: React.FC<StageAlertCardProps> = ({
17:   alert,
18:   onConfirm,
19:   onDismiss,
20: }) => {
21:   const { plant, predictedNextStage, daysUntilTransition } = alert;
22: 
23:   const getTransitionText = () => {
24:     if (daysUntilTransition === 0) {
25:       return "Predicted for today";
26:     }
27:     if (daysUntilTransition === 1) {
28:       return "Predicted for tomorrow";
29:     }
30:     return `Predicted in ${daysUntilTransition} days`;
31:   };
32: 
33:   return (
34:     <Card className="bg-gradient-to-br from-emerald-50 to-green-50 dark:from-emerald-950/30 dark:to-green-950/30 border-emerald-200 dark:border-emerald-800">
35:       <CardContent className="p-4 flex flex-col space-y-3">
36:         <div>
37:           <p className="text-sm font-semibold text-emerald-800 dark:text-emerald-200">
38:             Stage Transition Alert
39:           </p>
40:           <h4 className="text-lg font-bold text-foreground">
41:             {getPlantDisplayName(plant)}
42:           </h4>
43:         </div>
44: 
45:         <div className="flex items-center justify-center space-x-3 text-center">
46:           <Badge variant="secondary" className="capitalize">
47:             {plant.confirmedStage || "germination"}
48:           </Badge>
49:           <ArrowRight className="h-5 w-5 text-muted-foreground" />
50:           <Badge className="capitalize bg-emerald-600 hover:bg-emerald-700 text-white">
51:             {predictedNextStage}
52:           </Badge>
53:         </div>
54:         <p className="text-center text-sm text-muted-foreground">
55:           {getTransitionText()}
56:         </p>
57: 
58:         <div className="flex gap-2 pt-2">
59:           <Button
60:             variant="outline"
61:             size="sm"
62:             className="flex-1 border-emerald-200 text-emerald-700 hover:bg-emerald-50"
63:             onClick={() => onDismiss(plant.id)}
64:           >
65:             <X className="h-4 w-4 mr-2" />
66:             Not Yet
67:           </Button>
68:           <Button
69:             size="sm"
70:             className="flex-1 bg-emerald-600 hover:bg-emerald-700 text-white"
71:             onClick={() => onConfirm(plant.id, predictedNextStage)}
72:           >
73:             <Check className="h-4 w-4 mr-2" />
74:             Confirm Stage
75:           </Button>
76:         </div>
77:       </CardContent>
78:     </Card>
79:   );
80: };
81: 
82: export default StageAlertCard;

================
File: src/components/ui/Dialog.tsx
================
  1: import * as React from "react";
  2: import { X } from "lucide-react";
  3: import { cn } from "@/utils/cn";
  4: 
  5: interface DialogProps {
  6:   isOpen: boolean;
  7:   onClose: () => void;
  8:   children: React.ReactNode;
  9: }
 10: 
 11: const Dialog = ({ isOpen, onClose, children }: DialogProps) => {
 12:   React.useEffect(() => {
 13:     const handleEscape = (event: KeyboardEvent) => {
 14:       if (event.key === "Escape") {
 15:         onClose();
 16:       }
 17:     };
 18: 
 19:     if (isOpen) {
 20:       document.addEventListener("keydown", handleEscape);
 21:     }
 22: 
 23:     return () => {
 24:       document.removeEventListener("keydown", handleEscape);
 25:     };
 26:   }, [isOpen, onClose]);
 27: 
 28:   if (!isOpen) {
 29:     return null;
 30:   }
 31: 
 32:   return (
 33: 
 34:     <div
 35:       aria-modal="true"
 36:       role="dialog"
 37:       className="fixed inset-0 z-50 flex items-center justify-center"
 38:     >
 39:       {}
 40:       <div
 41:         className="fixed inset-0 bg-background/80 backdrop-blur-sm"
 42:         onClick={onClose}
 43:       />
 44: 
 45:       {}
 46:       <div
 47:         className={cn(
 48:           "fixed z-50 grid w-full max-w-lg gap-4 border bg-background p-6 shadow-lg sm:rounded-lg",
 49:           "mx-4"
 50:         )}
 51:       >
 52:         {children}
 53:         <button
 54:           onClick={onClose}
 55:           className="absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"
 56:         >
 57:           <X className="h-4 w-4" />
 58:           <span className="sr-only">Close</span>
 59:         </button>
 60:       </div>
 61:     </div>
 62:   );
 63: };
 64: 
 65: 
 66: const DialogContent = ({
 67:   className,
 68:   children,
 69: }: React.HTMLAttributes<HTMLDivElement>) => (
 70:   <div className={cn("flex flex-col", className)}>{children}</div>
 71: );
 72: 
 73: const DialogHeader = ({
 74:   className,
 75:   children,
 76: }: React.HTMLAttributes<HTMLDivElement>) => (
 77:   <div
 78:     className={cn(
 79:       "flex flex-col space-y-1.5 text-center sm:text-left",
 80:       className
 81:     )}
 82:   >
 83:     {children}
 84:   </div>
 85: );
 86: 
 87: const DialogTitle = ({
 88:   className,
 89:   children,
 90: }: React.HTMLAttributes<HTMLHeadingElement>) => (
 91:   <h2
 92:     className={cn(
 93:       "text-lg font-semibold leading-none tracking-tight",
 94:       className
 95:     )}
 96:   >
 97:     {children}
 98:   </h2>
 99: );
100: 
101: const DialogDescription = ({
102:   className,
103:   children,
104: }: React.HTMLAttributes<HTMLParagraphElement>) => (
105:   <p className={cn("text-sm text-muted-foreground", className)}>{children}</p>
106: );
107: 
108: const DialogFooter = ({
109:   className,
110:   children,
111: }: React.HTMLAttributes<HTMLDivElement>) => (
112:   <div
113:     className={cn(
114:       "flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",
115:       className
116:     )}
117:   >
118:     {children}
119:   </div>
120: );
121: 
122: export {
123:   Dialog,
124:   DialogContent,
125:   DialogHeader,
126:   DialogFooter,
127:   DialogTitle,
128:   DialogDescription,
129: };

================
File: src/hooks/useProactiveStageAlerts.ts
================
 1: import { useState, useEffect } from "react";
 2: import { useFirebasePlants } from "./useFirebasePlants";
 3: import { varietyService, PlantRecord } from "@/types/database";
 4: import { GrowthStage } from "@/types/core";
 5: import { estimateStageTransition, getNextStage } from "@/utils/growthStage";
 6: import { addDays, differenceInDays } from "date-fns";
 7: 
 8: export interface StageAlert {
 9:   plant: PlantRecord;
10:   predictedNextStage: GrowthStage;
11:   predictedTransitionDate: Date;
12:   daysUntilTransition: number;
13: }
14: 
15: export const useProactiveStageAlerts = (): {
16:   alerts: StageAlert[];
17:   isLoading: boolean;
18: } => {
19:   const { plants, loading: plantsLoading } = useFirebasePlants();
20:   const [alerts, setAlerts] = useState<StageAlert[]>([]);
21:   const [isLoading, setIsLoading] = useState(true);
22: 
23:   useEffect(() => {
24:     const calculateAlerts = async () => {
25:       if (plantsLoading) return;
26: 
27:       const potentialAlerts: StageAlert[] = [];
28: 
29:       for (const plant of plants) {
30:         if (!plant.isActive) continue;
31: 
32:         const variety = await varietyService.getVariety(plant.varietyId);
33:         if (!variety) continue;
34: 
35:         const currentStage = plant.confirmedStage || "germination";
36:         const nextStage = getNextStage(currentStage);
37:         if (!nextStage) continue;
38: 
39: 
40:         const originalExpectedDate = estimateStageTransition(
41:           plant.plantedDate,
42:           variety.growthTimeline,
43:           nextStage
44:         );
45: 
46:         let predictedTransitionDate = originalExpectedDate;
47: 
48: 
49:         if (plant.growthRateModifier && plant.growthRateModifier !== 1) {
50:           const originalDuration = differenceInDays(
51:             originalExpectedDate,
52:             plant.plantedDate
53:           );
54:           const adjustedDuration = Math.round(
55:             originalDuration * plant.growthRateModifier
56:           );
57:           predictedTransitionDate = addDays(
58:             plant.plantedDate,
59:             adjustedDuration
60:           );
61:         }
62: 
63: 
64:         const daysUntilTransition = differenceInDays(
65:           predictedTransitionDate,
66:           new Date()
67:         );
68:         if (daysUntilTransition <= 2 && daysUntilTransition >= 0) {
69:           potentialAlerts.push({
70:             plant,
71:             predictedNextStage: nextStage,
72:             predictedTransitionDate,
73:             daysUntilTransition,
74:           });
75:         }
76:       }
77: 
78:       setAlerts(
79:         potentialAlerts.sort(
80:           (a, b) => a.daysUntilTransition - b.daysUntilTransition
81:         )
82:       );
83:       setIsLoading(false);
84:     };
85: 
86:     calculateAlerts();
87:   }, [plants, plantsLoading]);
88: 
89:   return { alerts, isLoading };
90: };

================
File: src/services/firebase/config.prod.ts
================
 1: import { initializeApp } from "firebase/app";
 2: import { getFirestore } from "firebase/firestore";
 3: import { getAuth } from "firebase/auth";
 4: import { getStorage } from "firebase/storage";
 5: 
 6: const firebaseConfig = {
 7:   apiKey: import.meta.env.VITE_FIREBASE_API_KEY,
 8:   authDomain: import.meta.env.VITE_FIREBASE_AUTH_DOMAIN,
 9:   projectId: import.meta.env.VITE_FIREBASE_PROJECT_ID,
10:   storageBucket: import.meta.env.VITE_FIREBASE_STORAGE_BUCKET,
11:   messagingSenderId: import.meta.env.VITE_FIREBASE_MESSAGING_SENDER_ID,
12:   appId: import.meta.env.VITE_FIREBASE_APP_ID,
13: };
14: 
15: 
16: const app = initializeApp(firebaseConfig);
17: 
18: 
19: export const db = getFirestore(app);
20: export const auth = getAuth(app);
21: export const storage = getStorage(app);

================
File: src/services/firebase/config.test.ts
================
1: export const db = {};
2: export const auth = {};
3: export const storage = {};

================
File: src/services/GrowthRateService.ts
================
 1: import { plantService, varietyService } from "@/types/database";
 2: import { differenceInDays } from "date-fns";
 3: import { estimateStageTransition } from "@/utils/growthStage";
 4: 
 5: export class GrowthRateService {
 6: 
 7: 
 8: 
 9: 
10: 
11:   static async updateGrowthRateModifier(plantId: string): Promise<void> {
12:     try {
13:       const plant = await plantService.getPlant(plantId);
14:       if (!plant) throw new Error("Plant not found for growth rate analysis.");
15: 
16:       const variety = await varietyService.getVariety(plant.varietyId);
17:       if (!variety)
18:         throw new Error("Variety not found for growth rate analysis.");
19: 
20: 
21: 
22:       if (!plant.confirmedStage || !plant.stageConfirmedDate) {
23:         console.log(
24:           `Skipping growth rate update for ${plantId}: No confirmed stages.`
25:         );
26:         return;
27:       }
28: 
29: 
30:       const expectedTransitionDate = estimateStageTransition(
31:         plant.plantedDate,
32:         variety.growthTimeline,
33:         plant.confirmedStage
34:       );
35: 
36: 
37: 
38: 
39:       const varianceDays = differenceInDays(
40:         plant.stageConfirmedDate,
41:         expectedTransitionDate
42:       );
43: 
44: 
45:       const expectedDuration = differenceInDays(
46:         expectedTransitionDate,
47:         plant.plantedDate
48:       );
49:       if (expectedDuration <= 0) {
50:         console.warn(
51:           `Cannot calculate growth rate for plant ${plantId}: Invalid expected duration.`
52:         );
53:         return;
54:       }
55: 
56: 
57: 
58: 
59:       const actualDuration = expectedDuration + varianceDays;
60:       const growthRateModifier = actualDuration / expectedDuration;
61: 
62: 
63:       await plantService.updatePlant(plant.id, {
64:         growthRateModifier,
65:       });
66: 
67:       console.log(
68:         `Updated growth rate modifier for ${plantId} to ${growthRateModifier.toFixed(
69:           2
70:         )}`
71:       );
72:     } catch (error) {
73:       console.error("Failed to update growth rate modifier:", error);
74: 
75:     }
76:   }
77: }

================
File: playwright/.auth/user.json
================
 1: {
 2:   "cookies": [],
 3:   "origins": [
 4:     {
 5:       "origin": "http://localhost:5173",
 6:       "localStorage": [
 7:         {
 8:           "name": "darkMode",
 9:           "value": "false"
10:         }
11:       ]
12:     }
13:   ]
14: }

================
File: playwright-report/index.html
================
 1: <!DOCTYPE html>
 2: <html style='scrollbar-gutter: stable both-edges;'>
 3:   <head>
 4:     <meta charset='UTF-8'>
 5:     <meta name='color-scheme' content='dark light'>
 6:     <meta name='viewport' content='width=device-width, initial-scale=1.0'>
 7:     <title>Playwright Test Report</title>
 8:     <script type="module">var _h=Object.defineProperty;var $h=(l,s,r)=>s in l?_h(l,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[s]=r;var Gt=(l,s,r)=>$h(l,typeof s!="symbol"?s+"":s,r);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function r(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(c){if(c.ep)return;c.ep=!0;const f=r(c);fetch(c.href,f)}})();function e1(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var bo={exports:{}},hi={},zo={exports:{}},he={};/**
 9:  * @license React
10:  * react.production.min.js
11:  *
12:  * Copyright (c) Facebook, Inc. and its affiliates.
13:  *
14:  * This source code is licensed under the MIT license found in the
15:  * LICENSE file in the root directory of this source tree.
16:  */var jf;function t1(){if(jf)return he;jf=1;var l=Symbol.for("react.element"),s=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),k=Symbol.iterator;function I(R){return R===null||typeof R!="object"?null:(R=k&&R[k]||R["@@iterator"],typeof R=="function"?R:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,w={};function v(R,H,$){this.props=R,this.context=H,this.refs=w,this.updater=$||j}v.prototype.isReactComponent={},v.prototype.setState=function(R,H){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,H,"setState")},v.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function E(){}E.prototype=v.prototype;function P(R,H,$){this.props=R,this.context=H,this.refs=w,this.updater=$||j}var M=P.prototype=new E;M.constructor=P,F(M,v.prototype),M.isPureReactComponent=!0;var L=Array.isArray,z=Object.prototype.hasOwnProperty,D={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function Q(R,H,$){var pe,me={},ge=null,Ee=null;if(H!=null)for(pe in H.ref!==void 0&&(Ee=H.ref),H.key!==void 0&&(ge=""+H.key),H)z.call(H,pe)&&!B.hasOwnProperty(pe)&&(me[pe]=H[pe]);var xe=arguments.length-2;if(xe===1)me.children=$;else if(1<xe){for(var Se=Array(xe),Xe=0;Xe<xe;Xe++)Se[Xe]=arguments[Xe+2];me.children=Se}if(R&&R.defaultProps)for(pe in xe=R.defaultProps,xe)me[pe]===void 0&&(me[pe]=xe[pe]);return{$$typeof:l,type:R,key:ge,ref:Ee,props:me,_owner:D.current}}function G(R,H){return{$$typeof:l,type:R.type,key:H,ref:R.ref,props:R.props,_owner:R._owner}}function W(R){return typeof R=="object"&&R!==null&&R.$$typeof===l}function V(R){var H={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function($){return H[$]})}var re=/\/+/g;function J(R,H){return typeof R=="object"&&R!==null&&R.key!=null?V(""+R.key):H.toString(36)}function ce(R,H,$,pe,me){var ge=typeof R;(ge==="undefined"||ge==="boolean")&&(R=null);var Ee=!1;if(R===null)Ee=!0;else switch(ge){case"string":case"number":Ee=!0;break;case"object":switch(R.$$typeof){case l:case s:Ee=!0}}if(Ee)return Ee=R,me=me(Ee),R=pe===""?"."+J(Ee,0):pe,L(me)?($="",R!=null&&($=R.replace(re,"$&/")+"/"),ce(me,H,$,"",function(Xe){return Xe})):me!=null&&(W(me)&&(me=G(me,$+(!me.key||Ee&&Ee.key===me.key?"":(""+me.key).replace(re,"$&/")+"/")+R)),H.push(me)),1;if(Ee=0,pe=pe===""?".":pe+":",L(R))for(var xe=0;xe<R.length;xe++){ge=R[xe];var Se=pe+J(ge,xe);Ee+=ce(ge,H,$,Se,me)}else if(Se=I(R),typeof Se=="function")for(R=Se.call(R),xe=0;!(ge=R.next()).done;)ge=ge.value,Se=pe+J(ge,xe++),Ee+=ce(ge,H,$,Se,me);else if(ge==="object")throw H=String(R),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return Ee}function oe(R,H,$){if(R==null)return R;var pe=[],me=0;return ce(R,pe,"","",function(ge){return H.call($,ge,me++)}),pe}function ie(R){if(R._status===-1){var H=R._result;H=H(),H.then(function($){(R._status===0||R._status===-1)&&(R._status=1,R._result=$)},function($){(R._status===0||R._status===-1)&&(R._status=2,R._result=$)}),R._status===-1&&(R._status=0,R._result=H)}if(R._status===1)return R._result.default;throw R._result}var de={current:null},Y={transition:null},ee={ReactCurrentDispatcher:de,ReactCurrentBatchConfig:Y,ReactCurrentOwner:D};function U(){throw Error("act(...) is not supported in production builds of React.")}return he.Children={map:oe,forEach:function(R,H,$){oe(R,function(){H.apply(this,arguments)},$)},count:function(R){var H=0;return oe(R,function(){H++}),H},toArray:function(R){return oe(R,function(H){return H})||[]},only:function(R){if(!W(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},he.Component=v,he.Fragment=r,he.Profiler=c,he.PureComponent=P,he.StrictMode=a,he.Suspense=g,he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,he.act=U,he.cloneElement=function(R,H,$){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var pe=F({},R.props),me=R.key,ge=R.ref,Ee=R._owner;if(H!=null){if(H.ref!==void 0&&(ge=H.ref,Ee=D.current),H.key!==void 0&&(me=""+H.key),R.type&&R.type.defaultProps)var xe=R.type.defaultProps;for(Se in H)z.call(H,Se)&&!B.hasOwnProperty(Se)&&(pe[Se]=H[Se]===void 0&&xe!==void 0?xe[Se]:H[Se])}var Se=arguments.length-2;if(Se===1)pe.children=$;else if(1<Se){xe=Array(Se);for(var Xe=0;Xe<Se;Xe++)xe[Xe]=arguments[Xe+2];pe.children=xe}return{$$typeof:l,type:R.type,key:me,ref:ge,props:pe,_owner:Ee}},he.createContext=function(R){return R={$$typeof:d,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:f,_context:R},R.Consumer=R},he.createElement=Q,he.createFactory=function(R){var H=Q.bind(null,R);return H.type=R,H},he.createRef=function(){return{current:null}},he.forwardRef=function(R){return{$$typeof:m,render:R}},he.isValidElement=W,he.lazy=function(R){return{$$typeof:x,_payload:{_status:-1,_result:R},_init:ie}},he.memo=function(R,H){return{$$typeof:A,type:R,compare:H===void 0?null:H}},he.startTransition=function(R){var H=Y.transition;Y.transition={};try{R()}finally{Y.transition=H}},he.unstable_act=U,he.useCallback=function(R,H){return de.current.useCallback(R,H)},he.useContext=function(R){return de.current.useContext(R)},he.useDebugValue=function(){},he.useDeferredValue=function(R){return de.current.useDeferredValue(R)},he.useEffect=function(R,H){return de.current.useEffect(R,H)},he.useId=function(){return de.current.useId()},he.useImperativeHandle=function(R,H,$){return de.current.useImperativeHandle(R,H,$)},he.useInsertionEffect=function(R,H){return de.current.useInsertionEffect(R,H)},he.useLayoutEffect=function(R,H){return de.current.useLayoutEffect(R,H)},he.useMemo=function(R,H){return de.current.useMemo(R,H)},he.useReducer=function(R,H,$){return de.current.useReducer(R,H,$)},he.useRef=function(R){return de.current.useRef(R)},he.useState=function(R){return de.current.useState(R)},he.useSyncExternalStore=function(R,H,$){return de.current.useSyncExternalStore(R,H,$)},he.useTransition=function(){return de.current.useTransition()},he.version="18.3.1",he}var Pf;function ya(){return Pf||(Pf=1,zo.exports=t1()),zo.exports}/**
17:  * @license React
18:  * react-jsx-runtime.production.min.js
19:  *
20:  * Copyright (c) Facebook, Inc. and its affiliates.
21:  *
22:  * This source code is licensed under the MIT license found in the
23:  * LICENSE file in the root directory of this source tree.
24:  */var Of;function n1(){if(Of)return hi;Of=1;var l=ya(),s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,c=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function d(m,g,A){var x,k={},I=null,j=null;A!==void 0&&(I=""+A),g.key!==void 0&&(I=""+g.key),g.ref!==void 0&&(j=g.ref);for(x in g)a.call(g,x)&&!f.hasOwnProperty(x)&&(k[x]=g[x]);if(m&&m.defaultProps)for(x in g=m.defaultProps,g)k[x]===void 0&&(k[x]=g[x]);return{$$typeof:s,type:m,key:I,ref:j,props:k,_owner:c.current}}return hi.Fragment=r,hi.jsx=d,hi.jsxs=d,hi}var Df;function r1(){return Df||(Df=1,bo.exports=n1()),bo.exports}var h=r1();const i1=15,ye=0,Jt=1,l1=2,at=-2,Re=-3,Nf=-4,qt=-5,pt=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],Qd=1440,s1=0,o1=4,a1=9,u1=5,c1=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],f1=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],d1=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],p1=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],h1=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],m1=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],wn=15;function sa(){const l=this;let s,r,a,c,f,d;function m(A,x,k,I,j,F,w,v,E,P,M){let L,z,D,B,Q,G,W,V,re,J,ce,oe,ie,de,Y;J=0,Q=k;do a[A[x+J]]++,J++,Q--;while(Q!==0);if(a[0]==k)return w[0]=-1,v[0]=0,ye;for(V=v[0],G=1;G<=wn&&a[G]===0;G++);for(W=G,V<G&&(V=G),Q=wn;Q!==0&&a[Q]===0;Q--);for(D=Q,V>Q&&(V=Q),v[0]=V,de=1<<G;G<Q;G++,de<<=1)if((de-=a[G])<0)return Re;if((de-=a[Q])<0)return Re;for(a[Q]+=de,d[1]=G=0,J=1,ie=2;--Q!==0;)d[ie]=G+=a[J],ie++,J++;Q=0,J=0;do(G=A[x+J])!==0&&(M[d[G]++]=Q),J++;while(++Q<k);for(k=d[D],d[0]=Q=0,J=0,B=-1,oe=-V,f[0]=0,ce=0,Y=0;W<=D;W++)for(L=a[W];L--!==0;){for(;W>oe+V;){if(B++,oe+=V,Y=D-oe,Y=Y>V?V:Y,(z=1<<(G=W-oe))>L+1&&(z-=L+1,ie=W,G<Y))for(;++G<Y&&!((z<<=1)<=a[++ie]);)z-=a[ie];if(Y=1<<G,P[0]+Y>Qd)return Re;f[B]=ce=P[0],P[0]+=Y,B!==0?(d[B]=Q,c[0]=G,c[1]=V,G=Q>>>oe-V,c[2]=ce-f[B-1]-G,E.set(c,(f[B-1]+G)*3)):w[0]=ce}for(c[1]=W-oe,J>=k?c[0]=192:M[J]<I?(c[0]=M[J]<256?0:96,c[2]=M[J++]):(c[0]=F[M[J]-I]+16+64,c[2]=j[M[J++]-I]),z=1<<W-oe,G=Q>>>oe;G<Y;G+=z)E.set(c,(ce+G)*3);for(G=1<<W-1;(Q&G)!==0;G>>>=1)Q^=G;for(Q^=G,re=(1<<oe)-1;(Q&re)!=d[B];)B--,oe-=V,re=(1<<oe)-1}return de!==0&&D!=1?qt:ye}function g(A){let x;for(s||(s=[],r=[],a=new Int32Array(wn+1),c=[],f=new Int32Array(wn),d=new Int32Array(wn+1)),r.length<A&&(r=[]),x=0;x<A;x++)r[x]=0;for(x=0;x<wn+1;x++)a[x]=0;for(x=0;x<3;x++)c[x]=0;f.set(a.subarray(0,wn),0),d.set(a.subarray(0,wn+1),0)}l.inflate_trees_bits=function(A,x,k,I,j){let F;return g(19),s[0]=0,F=m(A,0,19,19,null,null,k,x,I,s,r),F==Re?j.msg="oversubscribed dynamic bit lengths tree":(F==qt||x[0]===0)&&(j.msg="incomplete dynamic bit lengths tree",F=Re),F},l.inflate_trees_dynamic=function(A,x,k,I,j,F,w,v,E){let P;return g(288),s[0]=0,P=m(k,0,A,257,d1,p1,F,I,v,s,r),P!=ye||I[0]===0?(P==Re?E.msg="oversubscribed literal/length tree":P!=Nf&&(E.msg="incomplete literal/length tree",P=Re),P):(g(288),P=m(k,A,x,0,h1,m1,w,j,v,s,r),P!=ye||j[0]===0&&A>257?(P==Re?E.msg="oversubscribed distance tree":P==qt?(E.msg="incomplete distance tree",P=Re):P!=Nf&&(E.msg="empty distance tree with lengths",P=Re),P):ye)}}sa.inflate_trees_fixed=function(l,s,r,a){return l[0]=a1,s[0]=u1,r[0]=c1,a[0]=f1,ye};const Ml=0,Mf=1,Bf=2,Hf=3,Ff=4,Lf=5,Qf=6,Xo=7,Uf=8,Bl=9;function g1(){const l=this;let s,r=0,a,c=0,f=0,d=0,m=0,g=0,A=0,x=0,k,I=0,j,F=0;function w(v,E,P,M,L,z,D,B){let Q,G,W,V,re,J,ce,oe,ie,de,Y,ee,U,R,H,$;ce=B.next_in_index,oe=B.avail_in,re=D.bitb,J=D.bitk,ie=D.write,de=ie<D.read?D.read-ie-1:D.end-ie,Y=pt[v],ee=pt[E];do{for(;J<20;)oe--,re|=(B.read_byte(ce++)&255)<<J,J+=8;if(Q=re&Y,G=P,W=M,$=(W+Q)*3,(V=G[$])===0){re>>=G[$+1],J-=G[$+1],D.win[ie++]=G[$+2],de--;continue}do{if(re>>=G[$+1],J-=G[$+1],(V&16)!==0){for(V&=15,U=G[$+2]+(re&pt[V]),re>>=V,J-=V;J<15;)oe--,re|=(B.read_byte(ce++)&255)<<J,J+=8;Q=re&ee,G=L,W=z,$=(W+Q)*3,V=G[$];do if(re>>=G[$+1],J-=G[$+1],(V&16)!==0){for(V&=15;J<V;)oe--,re|=(B.read_byte(ce++)&255)<<J,J+=8;if(R=G[$+2]+(re&pt[V]),re>>=V,J-=V,de-=U,ie>=R)H=ie-R,ie-H>0&&2>ie-H?(D.win[ie++]=D.win[H++],D.win[ie++]=D.win[H++],U-=2):(D.win.set(D.win.subarray(H,H+2),ie),ie+=2,H+=2,U-=2);else{H=ie-R;do H+=D.end;while(H<0);if(V=D.end-H,U>V){if(U-=V,ie-H>0&&V>ie-H)do D.win[ie++]=D.win[H++];while(--V!==0);else D.win.set(D.win.subarray(H,H+V),ie),ie+=V,H+=V,V=0;H=0}}if(ie-H>0&&U>ie-H)do D.win[ie++]=D.win[H++];while(--U!==0);else D.win.set(D.win.subarray(H,H+U),ie),ie+=U,H+=U,U=0;break}else if((V&64)===0)Q+=G[$+2],Q+=re&pt[V],$=(W+Q)*3,V=G[$];else return B.msg="invalid distance code",U=B.avail_in-oe,U=J>>3<U?J>>3:U,oe+=U,ce-=U,J-=U<<3,D.bitb=re,D.bitk=J,B.avail_in=oe,B.total_in+=ce-B.next_in_index,B.next_in_index=ce,D.write=ie,Re;while(!0);break}if((V&64)===0){if(Q+=G[$+2],Q+=re&pt[V],$=(W+Q)*3,(V=G[$])===0){re>>=G[$+1],J-=G[$+1],D.win[ie++]=G[$+2],de--;break}}else return(V&32)!==0?(U=B.avail_in-oe,U=J>>3<U?J>>3:U,oe+=U,ce-=U,J-=U<<3,D.bitb=re,D.bitk=J,B.avail_in=oe,B.total_in+=ce-B.next_in_index,B.next_in_index=ce,D.write=ie,Jt):(B.msg="invalid literal/length code",U=B.avail_in-oe,U=J>>3<U?J>>3:U,oe+=U,ce-=U,J-=U<<3,D.bitb=re,D.bitk=J,B.avail_in=oe,B.total_in+=ce-B.next_in_index,B.next_in_index=ce,D.write=ie,Re)}while(!0)}while(de>=258&&oe>=10);return U=B.avail_in-oe,U=J>>3<U?J>>3:U,oe+=U,ce-=U,J-=U<<3,D.bitb=re,D.bitk=J,B.avail_in=oe,B.total_in+=ce-B.next_in_index,B.next_in_index=ce,D.write=ie,ye}l.init=function(v,E,P,M,L,z){s=Ml,A=v,x=E,k=P,I=M,j=L,F=z,a=null},l.proc=function(v,E,P){let M,L,z,D=0,B=0,Q=0,G,W,V,re;for(Q=E.next_in_index,G=E.avail_in,D=v.bitb,B=v.bitk,W=v.write,V=W<v.read?v.read-W-1:v.end-W;;)switch(s){case Ml:if(V>=258&&G>=10&&(v.bitb=D,v.bitk=B,E.avail_in=G,E.total_in+=Q-E.next_in_index,E.next_in_index=Q,v.write=W,P=w(A,x,k,I,j,F,v,E),Q=E.next_in_index,G=E.avail_in,D=v.bitb,B=v.bitk,W=v.write,V=W<v.read?v.read-W-1:v.end-W,P!=ye)){s=P==Jt?Xo:Bl;break}f=A,a=k,c=I,s=Mf;case Mf:for(M=f;B<M;){if(G!==0)P=ye;else return v.bitb=D,v.bitk=B,E.avail_in=G,E.total_in+=Q-E.next_in_index,E.next_in_index=Q,v.write=W,v.inflate_flush(E,P);G--,D|=(E.read_byte(Q++)&255)<<B,B+=8}if(L=(c+(D&pt[M]))*3,D>>>=a[L+1],B-=a[L+1],z=a[L],z===0){d=a[L+2],s=Qf;break}if((z&16)!==0){m=z&15,r=a[L+2],s=Bf;break}if((z&64)===0){f=z,c=L/3+a[L+2];break}if((z&32)!==0){s=Xo;break}return s=Bl,E.msg="invalid literal/length code",P=Re,v.bitb=D,v.bitk=B,E.avail_in=G,E.total_in+=Q-E.next_in_index,E.next_in_index=Q,v.write=W,v.inflate_flush(E,P);case Bf:for(M=m;B<M;){if(G!==0)P=ye;else return v.bitb=D,v.bitk=B,E.avail_in=G,E.total_in+=Q-E.next_in_index,E.next_in_index=Q,v.write=W,v.inflate_flush(E,P);G--,D|=(E.read_byte(Q++)&255)<<B,B+=8}r+=D&pt[M],D>>=M,B-=M,f=x,a=j,c=F,s=Hf;case Hf:for(M=f;B<M;){if(G!==0)P=ye;else return v.bitb=D,v.bitk=B,E.avail_in=G,E.total_in+=Q-E.next_in_index,E.next_in_index=Q,v.write=W,v.inflate_flush(E,P);G--,D|=(E.read_byte(Q++)&255)<<B,B+=8}if(L=(c+(D&pt[M]))*3,D>>=a[L+1],B-=a[L+1],z=a[L],(z&16)!==0){m=z&15,g=a[L+2],s=Ff;break}if((z&64)===0){f=z,c=L/3+a[L+2];break}return s=Bl,E.msg="invalid distance code",P=Re,v.bitb=D,v.bitk=B,E.avail_in=G,E.total_in+=Q-E.next_in_index,E.next_in_index=Q,v.write=W,v.inflate_flush(E,P);case Ff:for(M=m;B<M;){if(G!==0)P=ye;else return v.bitb=D,v.bitk=B,E.avail_in=G,E.total_in+=Q-E.next_in_index,E.next_in_index=Q,v.write=W,v.inflate_flush(E,P);G--,D|=(E.read_byte(Q++)&255)<<B,B+=8}g+=D&pt[M],D>>=M,B-=M,s=Lf;case Lf:for(re=W-g;re<0;)re+=v.end;for(;r!==0;){if(V===0&&(W==v.end&&v.read!==0&&(W=0,V=W<v.read?v.read-W-1:v.end-W),V===0&&(v.write=W,P=v.inflate_flush(E,P),W=v.write,V=W<v.read?v.read-W-1:v.end-W,W==v.end&&v.read!==0&&(W=0,V=W<v.read?v.read-W-1:v.end-W),V===0)))return v.bitb=D,v.bitk=B,E.avail_in=G,E.total_in+=Q-E.next_in_index,E.next_in_index=Q,v.write=W,v.inflate_flush(E,P);v.win[W++]=v.win[re++],V--,re==v.end&&(re=0),r--}s=Ml;break;case Qf:if(V===0&&(W==v.end&&v.read!==0&&(W=0,V=W<v.read?v.read-W-1:v.end-W),V===0&&(v.write=W,P=v.inflate_flush(E,P),W=v.write,V=W<v.read?v.read-W-1:v.end-W,W==v.end&&v.read!==0&&(W=0,V=W<v.read?v.read-W-1:v.end-W),V===0)))return v.bitb=D,v.bitk=B,E.avail_in=G,E.total_in+=Q-E.next_in_index,E.next_in_index=Q,v.write=W,v.inflate_flush(E,P);P=ye,v.win[W++]=d,V--,s=Ml;break;case Xo:if(B>7&&(B-=8,G++,Q--),v.write=W,P=v.inflate_flush(E,P),W=v.write,V=W<v.read?v.read-W-1:v.end-W,v.read!=v.write)return v.bitb=D,v.bitk=B,E.avail_in=G,E.total_in+=Q-E.next_in_index,E.next_in_index=Q,v.write=W,v.inflate_flush(E,P);s=Uf;case Uf:return P=Jt,v.bitb=D,v.bitk=B,E.avail_in=G,E.total_in+=Q-E.next_in_index,E.next_in_index=Q,v.write=W,v.inflate_flush(E,P);case Bl:return P=Re,v.bitb=D,v.bitk=B,E.avail_in=G,E.total_in+=Q-E.next_in_index,E.next_in_index=Q,v.write=W,v.inflate_flush(E,P);default:return P=at,v.bitb=D,v.bitk=B,E.avail_in=G,E.total_in+=Q-E.next_in_index,E.next_in_index=Q,v.write=W,v.inflate_flush(E,P)}},l.free=function(){}}const Wf=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ar=0,Go=1,Vf=2,Yf=3,bf=4,zf=5,Hl=6,Fl=7,Xf=8,Xn=9;function v1(l,s){const r=this;let a=Ar,c=0,f=0,d=0,m;const g=[0],A=[0],x=new g1;let k=0,I=new Int32Array(Qd*3);const j=0,F=new sa;r.bitk=0,r.bitb=0,r.win=new Uint8Array(s),r.end=s,r.read=0,r.write=0,r.reset=function(w,v){v&&(v[0]=j),a==Hl&&x.free(w),a=Ar,r.bitk=0,r.bitb=0,r.read=r.write=0},r.reset(l,null),r.inflate_flush=function(w,v){let E,P,M;return P=w.next_out_index,M=r.read,E=(M<=r.write?r.write:r.end)-M,E>w.avail_out&&(E=w.avail_out),E!==0&&v==qt&&(v=ye),w.avail_out-=E,w.total_out+=E,w.next_out.set(r.win.subarray(M,M+E),P),P+=E,M+=E,M==r.end&&(M=0,r.write==r.end&&(r.write=0),E=r.write-M,E>w.avail_out&&(E=w.avail_out),E!==0&&v==qt&&(v=ye),w.avail_out-=E,w.total_out+=E,w.next_out.set(r.win.subarray(M,M+E),P),P+=E,M+=E),w.next_out_index=P,r.read=M,v},r.proc=function(w,v){let E,P,M,L,z,D,B,Q;for(L=w.next_in_index,z=w.avail_in,P=r.bitb,M=r.bitk,D=r.write,B=D<r.read?r.read-D-1:r.end-D;;){let G,W,V,re,J,ce,oe,ie;switch(a){case Ar:for(;M<3;){if(z!==0)v=ye;else return r.bitb=P,r.bitk=M,w.avail_in=z,w.total_in+=L-w.next_in_index,w.next_in_index=L,r.write=D,r.inflate_flush(w,v);z--,P|=(w.read_byte(L++)&255)<<M,M+=8}switch(E=P&7,k=E&1,E>>>1){case 0:P>>>=3,M-=3,E=M&7,P>>>=E,M-=E,a=Go;break;case 1:G=[],W=[],V=[[]],re=[[]],sa.inflate_trees_fixed(G,W,V,re),x.init(G[0],W[0],V[0],0,re[0],0),P>>>=3,M-=3,a=Hl;break;case 2:P>>>=3,M-=3,a=Yf;break;case 3:return P>>>=3,M-=3,a=Xn,w.msg="invalid block type",v=Re,r.bitb=P,r.bitk=M,w.avail_in=z,w.total_in+=L-w.next_in_index,w.next_in_index=L,r.write=D,r.inflate_flush(w,v)}break;case Go:for(;M<32;){if(z!==0)v=ye;else return r.bitb=P,r.bitk=M,w.avail_in=z,w.total_in+=L-w.next_in_index,w.next_in_index=L,r.write=D,r.inflate_flush(w,v);z--,P|=(w.read_byte(L++)&255)<<M,M+=8}if((~P>>>16&65535)!=(P&65535))return a=Xn,w.msg="invalid stored block lengths",v=Re,r.bitb=P,r.bitk=M,w.avail_in=z,w.total_in+=L-w.next_in_index,w.next_in_index=L,r.write=D,r.inflate_flush(w,v);c=P&65535,P=M=0,a=c!==0?Vf:k!==0?Fl:Ar;break;case Vf:if(z===0||B===0&&(D==r.end&&r.read!==0&&(D=0,B=D<r.read?r.read-D-1:r.end-D),B===0&&(r.write=D,v=r.inflate_flush(w,v),D=r.write,B=D<r.read?r.read-D-1:r.end-D,D==r.end&&r.read!==0&&(D=0,B=D<r.read?r.read-D-1:r.end-D),B===0)))return r.bitb=P,r.bitk=M,w.avail_in=z,w.total_in+=L-w.next_in_index,w.next_in_index=L,r.write=D,r.inflate_flush(w,v);if(v=ye,E=c,E>z&&(E=z),E>B&&(E=B),r.win.set(w.read_buf(L,E),D),L+=E,z-=E,D+=E,B-=E,(c-=E)!==0)break;a=k!==0?Fl:Ar;break;case Yf:for(;M<14;){if(z!==0)v=ye;else return r.bitb=P,r.bitk=M,w.avail_in=z,w.total_in+=L-w.next_in_index,w.next_in_index=L,r.write=D,r.inflate_flush(w,v);z--,P|=(w.read_byte(L++)&255)<<M,M+=8}if(f=E=P&16383,(E&31)>29||(E>>5&31)>29)return a=Xn,w.msg="too many length or distance symbols",v=Re,r.bitb=P,r.bitk=M,w.avail_in=z,w.total_in+=L-w.next_in_index,w.next_in_index=L,r.write=D,r.inflate_flush(w,v);if(E=258+(E&31)+(E>>5&31),!m||m.length<E)m=[];else for(Q=0;Q<E;Q++)m[Q]=0;P>>>=14,M-=14,d=0,a=bf;case bf:for(;d<4+(f>>>10);){for(;M<3;){if(z!==0)v=ye;else return r.bitb=P,r.bitk=M,w.avail_in=z,w.total_in+=L-w.next_in_index,w.next_in_index=L,r.write=D,r.inflate_flush(w,v);z--,P|=(w.read_byte(L++)&255)<<M,M+=8}m[Wf[d++]]=P&7,P>>>=3,M-=3}for(;d<19;)m[Wf[d++]]=0;if(g[0]=7,E=F.inflate_trees_bits(m,g,A,I,w),E!=ye)return v=E,v==Re&&(m=null,a=Xn),r.bitb=P,r.bitk=M,w.avail_in=z,w.total_in+=L-w.next_in_index,w.next_in_index=L,r.write=D,r.inflate_flush(w,v);d=0,a=zf;case zf:for(;E=f,!(d>=258+(E&31)+(E>>5&31));){let de,Y;for(E=g[0];M<E;){if(z!==0)v=ye;else return r.bitb=P,r.bitk=M,w.avail_in=z,w.total_in+=L-w.next_in_index,w.next_in_index=L,r.write=D,r.inflate_flush(w,v);z--,P|=(w.read_byte(L++)&255)<<M,M+=8}if(E=I[(A[0]+(P&pt[E]))*3+1],Y=I[(A[0]+(P&pt[E]))*3+2],Y<16)P>>>=E,M-=E,m[d++]=Y;else{for(Q=Y==18?7:Y-14,de=Y==18?11:3;M<E+Q;){if(z!==0)v=ye;else return r.bitb=P,r.bitk=M,w.avail_in=z,w.total_in+=L-w.next_in_index,w.next_in_index=L,r.write=D,r.inflate_flush(w,v);z--,P|=(w.read_byte(L++)&255)<<M,M+=8}if(P>>>=E,M-=E,de+=P&pt[Q],P>>>=Q,M-=Q,Q=d,E=f,Q+de>258+(E&31)+(E>>5&31)||Y==16&&Q<1)return m=null,a=Xn,w.msg="invalid bit length repeat",v=Re,r.bitb=P,r.bitk=M,w.avail_in=z,w.total_in+=L-w.next_in_index,w.next_in_index=L,r.write=D,r.inflate_flush(w,v);Y=Y==16?m[Q-1]:0;do m[Q++]=Y;while(--de!==0);d=Q}}if(A[0]=-1,J=[],ce=[],oe=[],ie=[],J[0]=9,ce[0]=6,E=f,E=F.inflate_trees_dynamic(257+(E&31),1+(E>>5&31),m,J,ce,oe,ie,I,w),E!=ye)return E==Re&&(m=null,a=Xn),v=E,r.bitb=P,r.bitk=M,w.avail_in=z,w.total_in+=L-w.next_in_index,w.next_in_index=L,r.write=D,r.inflate_flush(w,v);x.init(J[0],ce[0],I,oe[0],I,ie[0]),a=Hl;case Hl:if(r.bitb=P,r.bitk=M,w.avail_in=z,w.total_in+=L-w.next_in_index,w.next_in_index=L,r.write=D,(v=x.proc(r,w,v))!=Jt)return r.inflate_flush(w,v);if(v=ye,x.free(w),L=w.next_in_index,z=w.avail_in,P=r.bitb,M=r.bitk,D=r.write,B=D<r.read?r.read-D-1:r.end-D,k===0){a=Ar;break}a=Fl;case Fl:if(r.write=D,v=r.inflate_flush(w,v),D=r.write,B=D<r.read?r.read-D-1:r.end-D,r.read!=r.write)return r.bitb=P,r.bitk=M,w.avail_in=z,w.total_in+=L-w.next_in_index,w.next_in_index=L,r.write=D,r.inflate_flush(w,v);a=Xf;case Xf:return v=Jt,r.bitb=P,r.bitk=M,w.avail_in=z,w.total_in+=L-w.next_in_index,w.next_in_index=L,r.write=D,r.inflate_flush(w,v);case Xn:return v=Re,r.bitb=P,r.bitk=M,w.avail_in=z,w.total_in+=L-w.next_in_index,w.next_in_index=L,r.write=D,r.inflate_flush(w,v);default:return v=at,r.bitb=P,r.bitk=M,w.avail_in=z,w.total_in+=L-w.next_in_index,w.next_in_index=L,r.write=D,r.inflate_flush(w,v)}}},r.free=function(w){r.reset(w,null),r.win=null,I=null},r.set_dictionary=function(w,v,E){r.win.set(w.subarray(v,v+E),0),r.read=r.write=E},r.sync_point=function(){return a==Go?1:0}}const y1=32,x1=8,w1=0,Gf=1,Kf=2,Zf=3,Jf=4,qf=5,Ko=6,mi=7,_f=12,An=13,A1=[0,0,255,255];function E1(){const l=this;l.mode=0,l.method=0,l.was=[0],l.need=0,l.marker=0,l.wbits=0;function s(r){return!r||!r.istate?at:(r.total_in=r.total_out=0,r.msg=null,r.istate.mode=mi,r.istate.blocks.reset(r,null),ye)}l.inflateEnd=function(r){return l.blocks&&l.blocks.free(r),l.blocks=null,ye},l.inflateInit=function(r,a){return r.msg=null,l.blocks=null,a<8||a>15?(l.inflateEnd(r),at):(l.wbits=a,r.istate.blocks=new v1(r,1<<a),s(r),ye)},l.inflate=function(r,a){let c,f;if(!r||!r.istate||!r.next_in)return at;const d=r.istate;for(a=a==o1?qt:ye,c=qt;;)switch(d.mode){case w1:if(r.avail_in===0)return c;if(c=a,r.avail_in--,r.total_in++,((d.method=r.read_byte(r.next_in_index++))&15)!=x1){d.mode=An,r.msg="unknown compression method",d.marker=5;break}if((d.method>>4)+8>d.wbits){d.mode=An,r.msg="invalid win size",d.marker=5;break}d.mode=Gf;case Gf:if(r.avail_in===0)return c;if(c=a,r.avail_in--,r.total_in++,f=r.read_byte(r.next_in_index++)&255,((d.method<<8)+f)%31!==0){d.mode=An,r.msg="incorrect header check",d.marker=5;break}if((f&y1)===0){d.mode=mi;break}d.mode=Kf;case Kf:if(r.avail_in===0)return c;c=a,r.avail_in--,r.total_in++,d.need=(r.read_byte(r.next_in_index++)&255)<<24&4278190080,d.mode=Zf;case Zf:if(r.avail_in===0)return c;c=a,r.avail_in--,r.total_in++,d.need+=(r.read_byte(r.next_in_index++)&255)<<16&16711680,d.mode=Jf;case Jf:if(r.avail_in===0)return c;c=a,r.avail_in--,r.total_in++,d.need+=(r.read_byte(r.next_in_index++)&255)<<8&65280,d.mode=qf;case qf:return r.avail_in===0?c:(c=a,r.avail_in--,r.total_in++,d.need+=r.read_byte(r.next_in_index++)&255,d.mode=Ko,l1);case Ko:return d.mode=An,r.msg="need dictionary",d.marker=0,at;case mi:if(c=d.blocks.proc(r,c),c==Re){d.mode=An,d.marker=0;break}if(c==ye&&(c=a),c!=Jt)return c;c=a,d.blocks.reset(r,d.was),d.mode=_f;case _f:return r.avail_in=0,Jt;case An:return Re;default:return at}},l.inflateSetDictionary=function(r,a,c){let f=0,d=c;if(!r||!r.istate||r.istate.mode!=Ko)return at;const m=r.istate;return d>=1<<m.wbits&&(d=(1<<m.wbits)-1,f=c-d),m.blocks.set_dictionary(a,f,d),m.mode=mi,ye},l.inflateSync=function(r){let a,c,f,d,m;if(!r||!r.istate)return at;const g=r.istate;if(g.mode!=An&&(g.mode=An,g.marker=0),(a=r.avail_in)===0)return qt;for(c=r.next_in_index,f=g.marker;a!==0&&f<4;)r.read_byte(c)==A1[f]?f++:r.read_byte(c)!==0?f=0:f=4-f,c++,a--;return r.total_in+=c-r.next_in_index,r.next_in_index=c,r.avail_in=a,g.marker=f,f!=4?Re:(d=r.total_in,m=r.total_out,s(r),r.total_in=d,r.total_out=m,g.mode=mi,ye)},l.inflateSyncPoint=function(r){return!r||!r.istate||!r.istate.blocks?at:r.istate.blocks.sync_point()}}function Ud(){}Ud.prototype={inflateInit(l){const s=this;return s.istate=new E1,l||(l=i1),s.istate.inflateInit(s,l)},inflate(l){const s=this;return s.istate?s.istate.inflate(s,l):at},inflateEnd(){const l=this;if(!l.istate)return at;const s=l.istate.inflateEnd(l);return l.istate=null,s},inflateSync(){const l=this;return l.istate?l.istate.inflateSync(l):at},inflateSetDictionary(l,s){const r=this;return r.istate?r.istate.inflateSetDictionary(r,l,s):at},read_byte(l){return this.next_in[l]},read_buf(l,s){return this.next_in.subarray(l,l+s)}};function S1(l){const s=this,r=new Ud,a=l&&l.chunkSize?Math.floor(l.chunkSize*2):128*1024,c=s1,f=new Uint8Array(a);let d=!1;r.inflateInit(),r.next_out=f,s.append=function(m,g){const A=[];let x,k,I=0,j=0,F=0;if(m.length!==0){r.next_in_index=0,r.next_in=m,r.avail_in=m.length;do{if(r.next_out_index=0,r.avail_out=a,r.avail_in===0&&!d&&(r.next_in_index=0,d=!0),x=r.inflate(c),d&&x===qt){if(r.avail_in!==0)throw new Error("inflating: bad input")}else if(x!==ye&&x!==Jt)throw new Error("inflating: "+r.msg);if((d||x===Jt)&&r.avail_in===m.length)throw new Error("inflating: bad input");r.next_out_index&&(r.next_out_index===a?A.push(new Uint8Array(f)):A.push(f.subarray(0,r.next_out_index))),F+=r.next_out_index,g&&r.next_in_index>0&&r.next_in_index!=I&&(g(r.next_in_index),I=r.next_in_index)}while(r.avail_in>0||r.avail_out===0);return A.length>1?(k=new Uint8Array(F),A.forEach(function(w){k.set(w,j),j+=w.length})):k=A[0]?new Uint8Array(A[0]):new Uint8Array,k}},s.flush=function(){r.inflateEnd()}}const Gn=4294967295,Cn=65535,C1=8,k1=0,I1=99,R1=67324752,T1=134695760,$f=33639248,j1=101010256,ed=101075792,P1=117853008,kn=22,Zo=20,Jo=56,O1=1,D1=39169,N1=10,M1=1,B1=21589,H1=28789,F1=25461,L1=6534,td=1,Q1=6,nd=8,rd=2048,id=16,ld=16384,sd=73,od="/",qe=void 0,Tn="undefined",Si="function";class ad{constructor(s){return class extends TransformStream{constructor(r,a){const c=new s(a);super({transform(f,d){d.enqueue(c.append(f))},flush(f){const d=c.flush();d&&f.enqueue(d)}})}}}}const U1=64;let Wd=2;try{typeof navigator!=Tn&&navigator.hardwareConcurrency&&(Wd=navigator.hardwareConcurrency)}catch{}const W1={chunkSize:512*1024,maxWorkers:Wd,terminateWorkerTimeout:5e3,useWebWorkers:!0,useCompressionStream:!0,workerScripts:qe,CompressionStreamNative:typeof CompressionStream!=Tn&&CompressionStream,DecompressionStreamNative:typeof DecompressionStream!=Tn&&DecompressionStream},In=Object.assign({},W1);function Vd(){return In}function V1(l){return Math.max(l.chunkSize,U1)}function Yd(l){const{baseURL:s,chunkSize:r,maxWorkers:a,terminateWorkerTimeout:c,useCompressionStream:f,useWebWorkers:d,Deflate:m,Inflate:g,CompressionStream:A,DecompressionStream:x,workerScripts:k}=l;if(En("baseURL",s),En("chunkSize",r),En("maxWorkers",a),En("terminateWorkerTimeout",c),En("useCompressionStream",f),En("useWebWorkers",d),m&&(In.CompressionStream=new ad(m)),g&&(In.DecompressionStream=new ad(g)),En("CompressionStream",A),En("DecompressionStream",x),k!==qe){const{deflate:I,inflate:j}=k;if((I||j)&&(In.workerScripts||(In.workerScripts={})),I){if(!Array.isArray(I))throw new Error("workerScripts.deflate must be an array");In.workerScripts.deflate=I}if(j){if(!Array.isArray(j))throw new Error("workerScripts.inflate must be an array");In.workerScripts.inflate=j}}}function En(l,s){s!==qe&&(In[l]=s)}function Y1(){return"application/octet-stream"}const bd=[];for(let l=0;l<256;l++){let s=l;for(let r=0;r<8;r++)s&1?s=s>>>1^3988292384:s=s>>>1;bd[l]=s}class bl{constructor(s){this.crc=s||-1}append(s){let r=this.crc|0;for(let a=0,c=s.length|0;a<c;a++)r=r>>>8^bd[(r^s[a])&255];this.crc=r}get(){return~this.crc}}class zd extends TransformStream{constructor(){let s;const r=new bl;super({transform(a,c){r.append(a),c.enqueue(a)},flush(){const a=new Uint8Array(4);new DataView(a.buffer).setUint32(0,r.get()),s.value=a}}),s=this}}function b1(l){if(typeof TextEncoder==Tn){l=unescape(encodeURIComponent(l));const s=new Uint8Array(l.length);for(let r=0;r<s.length;r++)s[r]=l.charCodeAt(r);return s}else return new TextEncoder().encode(l)}const tt={concat(l,s){if(l.length===0||s.length===0)return l.concat(s);const r=l[l.length-1],a=tt.getPartial(r);return a===32?l.concat(s):tt._shiftRight(s,a,r|0,l.slice(0,l.length-1))},bitLength(l){const s=l.length;if(s===0)return 0;const r=l[s-1];return(s-1)*32+tt.getPartial(r)},clamp(l,s){if(l.length*32<s)return l;l=l.slice(0,Math.ceil(s/32));const r=l.length;return s=s&31,r>0&&s&&(l[r-1]=tt.partial(s,l[r-1]&2147483648>>s-1,1)),l},partial(l,s,r){return l===32?s:(r?s|0:s<<32-l)+l*1099511627776},getPartial(l){return Math.round(l/1099511627776)||32},_shiftRight(l,s,r,a){for(a===void 0&&(a=[]);s>=32;s-=32)a.push(r),r=0;if(s===0)return a.concat(l);for(let d=0;d<l.length;d++)a.push(r|l[d]>>>s),r=l[d]<<32-s;const c=l.length?l[l.length-1]:0,f=tt.getPartial(c);return a.push(tt.partial(s+f&31,s+f>32?r:a.pop(),1)),a}},zl={bytes:{fromBits(l){const r=tt.bitLength(l)/8,a=new Uint8Array(r);let c;for(let f=0;f<r;f++)(f&3)===0&&(c=l[f/4]),a[f]=c>>>24,c<<=8;return a},toBits(l){const s=[];let r,a=0;for(r=0;r<l.length;r++)a=a<<8|l[r],(r&3)===3&&(s.push(a),a=0);return r&3&&s.push(tt.partial(8*(r&3),a)),s}}},Xd={};Xd.sha1=class{constructor(l){const s=this;s.blockSize=512,s._init=[1732584193,4023233417,2562383102,271733878,3285377520],s._key=[1518500249,1859775393,2400959708,3395469782],l?(s._h=l._h.slice(0),s._buffer=l._buffer.slice(0),s._length=l._length):s.reset()}reset(){const l=this;return l._h=l._init.slice(0),l._buffer=[],l._length=0,l}update(l){const s=this;typeof l=="string"&&(l=zl.utf8String.toBits(l));const r=s._buffer=tt.concat(s._buffer,l),a=s._length,c=s._length=a+tt.bitLength(l);if(c>9007199254740991)throw new Error("Cannot hash more than 2^53 - 1 bits");const f=new Uint32Array(r);let d=0;for(let m=s.blockSize+a-(s.blockSize+a&s.blockSize-1);m<=c;m+=s.blockSize)s._block(f.subarray(16*d,16*(d+1))),d+=1;return r.splice(0,16*d),s}finalize(){const l=this;let s=l._buffer;const r=l._h;s=tt.concat(s,[tt.partial(1,1)]);for(let a=s.length+2;a&15;a++)s.push(0);for(s.push(Math.floor(l._length/4294967296)),s.push(l._length|0);s.length;)l._block(s.splice(0,16));return l.reset(),r}_f(l,s,r,a){if(l<=19)return s&r|~s&a;if(l<=39)return s^r^a;if(l<=59)return s&r|s&a|r&a;if(l<=79)return s^r^a}_S(l,s){return s<<l|s>>>32-l}_block(l){const s=this,r=s._h,a=Array(80);for(let A=0;A<16;A++)a[A]=l[A];let c=r[0],f=r[1],d=r[2],m=r[3],g=r[4];for(let A=0;A<=79;A++){A>=16&&(a[A]=s._S(1,a[A-3]^a[A-8]^a[A-14]^a[A-16]));const x=s._S(5,c)+s._f(A,f,d,m)+g+a[A]+s._key[Math.floor(A/20)]|0;g=m,m=d,d=s._S(30,f),f=c,c=x}r[0]=r[0]+c|0,r[1]=r[1]+f|0,r[2]=r[2]+d|0,r[3]=r[3]+m|0,r[4]=r[4]+g|0}};const Gd={};Gd.aes=class{constructor(l){const s=this;s._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],s._tables[0][0][0]||s._precompute();const r=s._tables[0][4],a=s._tables[1],c=l.length;let f,d,m,g=1;if(c!==4&&c!==6&&c!==8)throw new Error("invalid aes key size");for(s._key=[d=l.slice(0),m=[]],f=c;f<4*c+28;f++){let A=d[f-1];(f%c===0||c===8&&f%c===4)&&(A=r[A>>>24]<<24^r[A>>16&255]<<16^r[A>>8&255]<<8^r[A&255],f%c===0&&(A=A<<8^A>>>24^g<<24,g=g<<1^(g>>7)*283)),d[f]=d[f-c]^A}for(let A=0;f;A++,f--){const x=d[A&3?f:f-4];f<=4||A<4?m[A]=x:m[A]=a[0][r[x>>>24]]^a[1][r[x>>16&255]]^a[2][r[x>>8&255]]^a[3][r[x&255]]}}encrypt(l){return this._crypt(l,0)}decrypt(l){return this._crypt(l,1)}_precompute(){const l=this._tables[0],s=this._tables[1],r=l[4],a=s[4],c=[],f=[];let d,m,g,A;for(let x=0;x<256;x++)f[(c[x]=x<<1^(x>>7)*283)^x]=x;for(let x=d=0;!r[x];x^=m||1,d=f[d]||1){let k=d^d<<1^d<<2^d<<3^d<<4;k=k>>8^k&255^99,r[x]=k,a[k]=x,A=c[g=c[m=c[x]]];let I=A*16843009^g*65537^m*257^x*16843008,j=c[k]*257^k*16843008;for(let F=0;F<4;F++)l[F][x]=j=j<<24^j>>>8,s[F][k]=I=I<<24^I>>>8}for(let x=0;x<5;x++)l[x]=l[x].slice(0),s[x]=s[x].slice(0)}_crypt(l,s){if(l.length!==4)throw new Error("invalid aes block size");const r=this._key[s],a=r.length/4-2,c=[0,0,0,0],f=this._tables[s],d=f[0],m=f[1],g=f[2],A=f[3],x=f[4];let k=l[0]^r[0],I=l[s?3:1]^r[1],j=l[2]^r[2],F=l[s?1:3]^r[3],w=4,v,E,P;for(let M=0;M<a;M++)v=d[k>>>24]^m[I>>16&255]^g[j>>8&255]^A[F&255]^r[w],E=d[I>>>24]^m[j>>16&255]^g[F>>8&255]^A[k&255]^r[w+1],P=d[j>>>24]^m[F>>16&255]^g[k>>8&255]^A[I&255]^r[w+2],F=d[F>>>24]^m[k>>16&255]^g[I>>8&255]^A[j&255]^r[w+3],w+=4,k=v,I=E,j=P;for(let M=0;M<4;M++)c[s?3&-M:M]=x[k>>>24]<<24^x[I>>16&255]<<16^x[j>>8&255]<<8^x[F&255]^r[w++],v=k,k=I,I=j,j=F,F=v;return c}};const z1={getRandomValues(l){const s=new Uint32Array(l.buffer),r=a=>{let c=987654321;const f=4294967295;return function(){return c=36969*(c&65535)+(c>>16)&f,a=18e3*(a&65535)+(a>>16)&f,(((c<<16)+a&f)/4294967296+.5)*(Math.random()>.5?1:-1)}};for(let a=0,c;a<l.length;a+=4){const f=r((c||Math.random())*4294967296);c=f()*987654071,s[a/4]=f()*4294967296|0}return l}},Kd={};Kd.ctrGladman=class{constructor(l,s){this._prf=l,this._initIv=s,this._iv=s}reset(){this._iv=this._initIv}update(l){return this.calculate(this._prf,l,this._iv)}incWord(l){if((l>>24&255)===255){let s=l>>16&255,r=l>>8&255,a=l&255;s===255?(s=0,r===255?(r=0,a===255?a=0:++a):++r):++s,l=0,l+=s<<16,l+=r<<8,l+=a}else l+=1<<24;return l}incCounter(l){(l[0]=this.incWord(l[0]))===0&&(l[1]=this.incWord(l[1]))}calculate(l,s,r){let a;if(!(a=s.length))return[];const c=tt.bitLength(s);for(let f=0;f<a;f+=4){this.incCounter(r);const d=l.encrypt(r);s[f]^=d[0],s[f+1]^=d[1],s[f+2]^=d[2],s[f+3]^=d[3]}return tt.clamp(s,c)}};const Kn={importKey(l){return new Kn.hmacSha1(zl.bytes.toBits(l))},pbkdf2(l,s,r,a){if(r=r||1e4,a<0||r<0)throw new Error("invalid params to pbkdf2");const c=(a>>5)+1<<2;let f,d,m,g,A;const x=new ArrayBuffer(c),k=new DataView(x);let I=0;const j=tt;for(s=zl.bytes.toBits(s),A=1;I<(c||1);A++){for(f=d=l.encrypt(j.concat(s,[A])),m=1;m<r;m++)for(d=l.encrypt(d),g=0;g<d.length;g++)f[g]^=d[g];for(m=0;I<(c||1)&&m<f.length;m++)k.setInt32(I,f[m]),I+=4}return x.slice(0,a/8)}};Kn.hmacSha1=class{constructor(l){const s=this,r=s._hash=Xd.sha1,a=[[],[]];s._baseHash=[new r,new r];const c=s._baseHash[0].blockSize/32;l.length>c&&(l=new r().update(l).finalize());for(let f=0;f<c;f++)a[0][f]=l[f]^909522486,a[1][f]=l[f]^1549556828;s._baseHash[0].update(a[0]),s._baseHash[1].update(a[1]),s._resultHash=new r(s._baseHash[0])}reset(){const l=this;l._resultHash=new l._hash(l._baseHash[0]),l._updated=!1}update(l){const s=this;s._updated=!0,s._resultHash.update(l)}digest(){const l=this,s=l._resultHash.finalize(),r=new l._hash(l._baseHash[1]).update(s).finalize();return l.reset(),r}encrypt(l){if(this._updated)throw new Error("encrypt on already updated hmac called!");return this.update(l),this.digest(l)}};const X1=typeof crypto!=Tn&&typeof crypto.getRandomValues==Si,xa="Invalid password",wa="Invalid signature",Aa="zipjs-abort-check-password";function Zd(l){return X1?crypto.getRandomValues(l):z1.getRandomValues(l)}const Er=16,G1="raw",Jd={name:"PBKDF2"},K1={name:"HMAC"},Z1="SHA-1",J1=Object.assign({hash:K1},Jd),oa=Object.assign({iterations:1e3,hash:{name:Z1}},Jd),q1=["deriveBits"],yi=[8,12,16],gi=[16,24,32],Sn=10,_1=[0,0,0,0],Jl=typeof crypto!=Tn,Ci=Jl&&crypto.subtle,qd=Jl&&typeof Ci!=Tn,Ht=zl.bytes,$1=Gd.aes,e2=Kd.ctrGladman,t2=Kn.hmacSha1;let ud=Jl&&qd&&typeof Ci.importKey==Si,cd=Jl&&qd&&typeof Ci.deriveBits==Si;class n2 extends TransformStream{constructor({password:s,rawPassword:r,signed:a,encryptionStrength:c,checkPasswordOnly:f}){super({start(){Object.assign(this,{ready:new Promise(d=>this.resolveReady=d),password:e0(s,r),signed:a,strength:c-1,pending:new Uint8Array})},async transform(d,m){const g=this,{password:A,strength:x,resolveReady:k,ready:I}=g;A?(await i2(g,x,A,At(d,0,yi[x]+2)),d=At(d,yi[x]+2),f?m.error(new Error(Aa)):k()):await I;const j=new Uint8Array(d.length-Sn-(d.length-Sn)%Er);m.enqueue(_d(g,d,j,0,Sn,!0))},async flush(d){const{signed:m,ctr:g,hmac:A,pending:x,ready:k}=this;if(A&&g){await k;const I=At(x,0,x.length-Sn),j=At(x,x.length-Sn);let F=new Uint8Array;if(I.length){const w=wi(Ht,I);A.update(w);const v=g.update(w);F=xi(Ht,v)}if(m){const w=At(xi(Ht,A.digest()),0,Sn);for(let v=0;v<Sn;v++)if(w[v]!=j[v])throw new Error(wa)}d.enqueue(F)}}})}}class r2 extends TransformStream{constructor({password:s,rawPassword:r,encryptionStrength:a}){let c;super({start(){Object.assign(this,{ready:new Promise(f=>this.resolveReady=f),password:e0(s,r),strength:a-1,pending:new Uint8Array})},async transform(f,d){const m=this,{password:g,strength:A,resolveReady:x,ready:k}=m;let I=new Uint8Array;g?(I=await l2(m,A,g),x()):await k;const j=new Uint8Array(I.length+f.length-f.length%Er);j.set(I,0),d.enqueue(_d(m,f,j,I.length,0))},async flush(f){const{ctr:d,hmac:m,pending:g,ready:A}=this;if(m&&d){await A;let x=new Uint8Array;if(g.length){const k=d.update(wi(Ht,g));m.update(k),x=xi(Ht,k)}c.signature=xi(Ht,m.digest()).slice(0,Sn),f.enqueue(Ea(x,c.signature))}}}),c=this}}function _d(l,s,r,a,c,f){const{ctr:d,hmac:m,pending:g}=l,A=s.length-c;g.length&&(s=Ea(g,s),r=a2(r,A-A%Er));let x;for(x=0;x<=A-Er;x+=Er){const k=wi(Ht,At(s,x,x+Er));f&&m.update(k);const I=d.update(k);f||m.update(I),r.set(xi(Ht,I),x+a)}return l.pending=At(s,x),r}async function i2(l,s,r,a){const c=await $d(l,s,r,At(a,0,yi[s])),f=At(a,yi[s]);if(c[0]!=f[0]||c[1]!=f[1])throw new Error(xa)}async function l2(l,s,r){const a=Zd(new Uint8Array(yi[s])),c=await $d(l,s,r,a);return Ea(a,c)}async function $d(l,s,r,a){l.password=null;const c=await s2(G1,r,J1,!1,q1),f=await o2(Object.assign({salt:a},oa),c,8*(gi[s]*2+2)),d=new Uint8Array(f),m=wi(Ht,At(d,0,gi[s])),g=wi(Ht,At(d,gi[s],gi[s]*2)),A=At(d,gi[s]*2);return Object.assign(l,{keys:{key:m,authentication:g,passwordVerification:A},ctr:new e2(new $1(m),Array.from(_1)),hmac:new t2(g)}),A}async function s2(l,s,r,a,c){if(ud)try{return await Ci.importKey(l,s,r,a,c)}catch{return ud=!1,Kn.importKey(s)}else return Kn.importKey(s)}async function o2(l,s,r){if(cd)try{return await Ci.deriveBits(l,s,r)}catch{return cd=!1,Kn.pbkdf2(s,l.salt,oa.iterations,r)}else return Kn.pbkdf2(s,l.salt,oa.iterations,r)}function e0(l,s){return s===qe?b1(l):s}function Ea(l,s){let r=l;return l.length+s.length&&(r=new Uint8Array(l.length+s.length),r.set(l,0),r.set(s,l.length)),r}function a2(l,s){if(s&&s>l.length){const r=l;l=new Uint8Array(s),l.set(r,0)}return l}function At(l,s,r){return l.subarray(s,r)}function xi(l,s){return l.fromBits(s)}function wi(l,s){return l.toBits(s)}const Sr=12;class u2 extends TransformStream{constructor({password:s,passwordVerification:r,checkPasswordOnly:a}){super({start(){Object.assign(this,{password:s,passwordVerification:r}),t0(this,s)},transform(c,f){const d=this;if(d.password){const m=fd(d,c.subarray(0,Sr));if(d.password=null,m[Sr-1]!=d.passwordVerification)throw new Error(xa);c=c.subarray(Sr)}a?f.error(new Error(Aa)):f.enqueue(fd(d,c))}})}}class c2 extends TransformStream{constructor({password:s,passwordVerification:r}){super({start(){Object.assign(this,{password:s,passwordVerification:r}),t0(this,s)},transform(a,c){const f=this;let d,m;if(f.password){f.password=null;const g=Zd(new Uint8Array(Sr));g[Sr-1]=f.passwordVerification,d=new Uint8Array(a.length+g.length),d.set(dd(f,g),0),m=Sr}else d=new Uint8Array(a.length),m=0;d.set(dd(f,a),m),c.enqueue(d)}})}}function fd(l,s){const r=new Uint8Array(s.length);for(let a=0;a<s.length;a++)r[a]=n0(l)^s[a],Sa(l,r[a]);return r}function dd(l,s){const r=new Uint8Array(s.length);for(let a=0;a<s.length;a++)r[a]=n0(l)^s[a],Sa(l,s[a]);return r}function t0(l,s){const r=[305419896,591751049,878082192];Object.assign(l,{keys:r,crcKey0:new bl(r[0]),crcKey2:new bl(r[2])});for(let a=0;a<s.length;a++)Sa(l,s.charCodeAt(a))}function Sa(l,s){let[r,a,c]=l.keys;l.crcKey0.append([s]),r=~l.crcKey0.get(),a=pd(Math.imul(pd(a+r0(r)),134775813)+1),l.crcKey2.append([a>>>24]),c=~l.crcKey2.get(),l.keys=[r,a,c]}function n0(l){const s=l.keys[2]|2;return r0(Math.imul(s,s^1)>>>8)}function r0(l){return l&255}function pd(l){return l&4294967295}const hd="deflate-raw";class f2 extends TransformStream{constructor(s,{chunkSize:r,CompressionStream:a,CompressionStreamNative:c}){super({});const{compressed:f,encrypted:d,useCompressionStream:m,zipCrypto:g,signed:A,level:x}=s,k=this;let I,j,F=i0(super.readable);(!d||g)&&A&&(I=new zd,F=Ft(F,I)),f&&(F=s0(F,m,{level:x,chunkSize:r},c,a)),d&&(g?F=Ft(F,new c2(s)):(j=new r2(s),F=Ft(F,j))),l0(k,F,()=>{let w;d&&!g&&(w=j.signature),(!d||g)&&A&&(w=new DataView(I.value.buffer).getUint32(0)),k.signature=w})}}class d2 extends TransformStream{constructor(s,{chunkSize:r,DecompressionStream:a,DecompressionStreamNative:c}){super({});const{zipCrypto:f,encrypted:d,signed:m,signature:g,compressed:A,useCompressionStream:x}=s;let k,I,j=i0(super.readable);d&&(f?j=Ft(j,new u2(s)):(I=new n2(s),j=Ft(j,I))),A&&(j=s0(j,x,{chunkSize:r},c,a)),(!d||f)&&m&&(k=new zd,j=Ft(j,k)),l0(this,j,()=>{if((!d||f)&&m){const F=new DataView(k.value.buffer);if(g!=F.getUint32(0,!1))throw new Error(wa)}})}}function i0(l){return Ft(l,new TransformStream({transform(s,r){s&&s.length&&r.enqueue(s)}}))}function l0(l,s,r){s=Ft(s,new TransformStream({flush:r})),Object.defineProperty(l,"readable",{get(){return s}})}function s0(l,s,r,a,c){try{const f=s&&a?a:c;l=Ft(l,new f(hd,r))}catch{if(s)try{l=Ft(l,new c(hd,r))}catch{return l}else return l}return l}function Ft(l,s){return l.pipeThrough(s)}const p2="message",h2="start",m2="pull",md="data",g2="ack",gd="close",v2="deflate",o0="inflate";class y2 extends TransformStream{constructor(s,r){super({});const a=this,{codecType:c}=s;let f;c.startsWith(v2)?f=f2:c.startsWith(o0)&&(f=d2);let d=0,m=0;const g=new f(s,r),A=super.readable,x=new TransformStream({transform(I,j){I&&I.length&&(m+=I.length,j.enqueue(I))},flush(){Object.assign(a,{inputSize:m})}}),k=new TransformStream({transform(I,j){I&&I.length&&(d+=I.length,j.enqueue(I))},flush(){const{signature:I}=g;Object.assign(a,{signature:I,outputSize:d,inputSize:m})}});Object.defineProperty(a,"readable",{get(){return A.pipeThrough(x).pipeThrough(g).pipeThrough(k)}})}}class x2 extends TransformStream{constructor(s){let r;super({transform:a,flush(c){r&&r.length&&c.enqueue(r)}});function a(c,f){if(r){const d=new Uint8Array(r.length+c.length);d.set(r),d.set(c,r.length),c=d,r=null}c.length>s?(f.enqueue(c.slice(0,s)),a(c.slice(s),f)):r=c}}}let a0=typeof Worker!=Tn;class qo{constructor(s,{readable:r,writable:a},{options:c,config:f,streamOptions:d,useWebWorkers:m,transferStreams:g,scripts:A},x){const{signal:k}=d;return Object.assign(s,{busy:!0,readable:r.pipeThrough(new x2(f.chunkSize)).pipeThrough(new w2(r,d),{signal:k}),writable:a,options:Object.assign({},c),scripts:A,transferStreams:g,terminate(){return new Promise(I=>{const{worker:j,busy:F}=s;j?(F?s.resolveTerminated=I:(j.terminate(),I()),s.interface=null):I()})},onTaskFinished(){const{resolveTerminated:I}=s;I&&(s.resolveTerminated=null,s.terminated=!0,s.worker.terminate(),I()),s.busy=!1,x(s)}}),(m&&a0?A2:u0)(s,f)}}class w2 extends TransformStream{constructor(s,{onstart:r,onprogress:a,size:c,onend:f}){let d=0;super({async start(){r&&await _o(r,c)},async transform(m,g){d+=m.length,a&&await _o(a,d,c),g.enqueue(m)},async flush(){s.size=d,f&&await _o(f,d)}})}}async function _o(l,...s){try{await l(...s)}catch{}}function u0(l,s){return{run:()=>E2(l,s)}}function A2(l,s){const{baseURL:r,chunkSize:a}=s;if(!l.interface){let c;try{c=k2(l.scripts[0],r,l)}catch{return a0=!1,u0(l,s)}Object.assign(l,{worker:c,interface:{run:()=>S2(l,{chunkSize:a})}})}return l.interface}async function E2({options:l,readable:s,writable:r,onTaskFinished:a},c){try{const f=new y2(l,c);await s.pipeThrough(f).pipeTo(r,{preventClose:!0,preventAbort:!0});const{signature:d,inputSize:m,outputSize:g}=f;return{signature:d,inputSize:m,outputSize:g}}finally{a()}}async function S2(l,s){let r,a;const c=new Promise((I,j)=>{r=I,a=j});Object.assign(l,{reader:null,writer:null,resolveResult:r,rejectResult:a,result:c});const{readable:f,options:d,scripts:m}=l,{writable:g,closed:A}=C2(l.writable),x=Ul({type:h2,scripts:m.slice(1),options:d,config:s,readable:f,writable:g},l);x||Object.assign(l,{reader:f.getReader(),writer:g.getWriter()});const k=await c;return x||await g.getWriter().close(),await A,k}function C2(l){let s;const r=new Promise(c=>s=c);return{writable:new WritableStream({async write(c){const f=l.getWriter();await f.ready,await f.write(c),f.releaseLock()},close(){s()},abort(c){return l.getWriter().abort(c)}}),closed:r}}let vd=!0,yd=!0;function k2(l,s,r){const a={type:"module"};let c,f;typeof l==Si&&(l=l());try{c=new URL(l,s)}catch{c=l}if(vd)try{f=new Worker(c)}catch{vd=!1,f=new Worker(c,a)}else f=new Worker(c,a);return f.addEventListener(p2,d=>I2(d,r)),f}function Ul(l,{worker:s,writer:r,onTaskFinished:a,transferStreams:c}){try{const{value:f,readable:d,writable:m}=l,g=[];if(f&&(f.byteLength<f.buffer.byteLength?l.value=f.buffer.slice(0,f.byteLength):l.value=f.buffer,g.push(l.value)),c&&yd?(d&&g.push(d),m&&g.push(m)):l.readable=l.writable=null,g.length)try{return s.postMessage(l,g),!0}catch{yd=!1,l.readable=l.writable=null,s.postMessage(l)}else s.postMessage(l)}catch(f){throw r&&r.releaseLock(),a(),f}}async function I2({data:l},s){const{type:r,value:a,messageId:c,result:f,error:d}=l,{reader:m,writer:g,resolveResult:A,rejectResult:x,onTaskFinished:k}=s;try{if(d){const{message:j,stack:F,code:w,name:v}=d,E=new Error(j);Object.assign(E,{stack:F,code:w,name:v}),I(E)}else{if(r==m2){const{value:j,done:F}=await m.read();Ul({type:md,value:j,done:F,messageId:c},s)}r==md&&(await g.ready,await g.write(new Uint8Array(a)),Ul({type:g2,messageId:c},s)),r==gd&&I(null,f)}}catch(j){Ul({type:gd,messageId:c},s),I(j)}function I(j,F){j?x(j):A(F),g&&g.releaseLock(),k()}}let Rn=[];const $o=[];let xd=0;async function R2(l,s){const{options:r,config:a}=s,{transferStreams:c,useWebWorkers:f,useCompressionStream:d,codecType:m,compressed:g,signed:A,encrypted:x}=r,{workerScripts:k,maxWorkers:I}=a;s.transferStreams=c||c===qe;const j=!g&&!A&&!x&&!s.transferStreams;return s.useWebWorkers=!j&&(f||f===qe&&a.useWebWorkers),s.scripts=s.useWebWorkers&&k?k[m]:[],r.useCompressionStream=d||d===qe&&a.useCompressionStream,(await F()).run();async function F(){const v=Rn.find(E=>!E.busy);if(v)return aa(v),new qo(v,l,s,w);if(Rn.length<I){const E={indexWorker:xd};return xd++,Rn.push(E),new qo(E,l,s,w)}else return new Promise(E=>$o.push({resolve:E,stream:l,workerOptions:s}))}function w(v){if($o.length){const[{resolve:E,stream:P,workerOptions:M}]=$o.splice(0,1);E(new qo(v,P,M,w))}else v.worker?(aa(v),T2(v,s)):Rn=Rn.filter(E=>E!=v)}}function T2(l,s){const{config:r}=s,{terminateWorkerTimeout:a}=r;Number.isFinite(a)&&a>=0&&(l.terminated?l.terminated=!1:l.terminateTimeout=setTimeout(async()=>{Rn=Rn.filter(c=>c!=l);try{await l.terminate()}catch{}},a))}function aa(l){const{terminateTimeout:s}=l;s&&(clearTimeout(s),l.terminateTimeout=null)}async function j2(){await Promise.allSettled(Rn.map(l=>(aa(l),l.terminate())))}const c0="HTTP error ",ki="HTTP Range not supported",f0="Writer iterator completed too soon",P2="text/plain",O2="Content-Length",D2="Content-Range",N2="Accept-Ranges",M2="Range",B2="Content-Type",H2="HEAD",Ca="GET",d0="bytes",F2=64*1024,ka="writable";class ql{constructor(){this.size=0}init(){this.initialized=!0}}class jn extends ql{get readable(){const s=this,{chunkSize:r=F2}=s,a=new ReadableStream({start(){this.chunkOffset=0},async pull(c){const{offset:f=0,size:d,diskNumberStart:m}=a,{chunkOffset:g}=this;c.enqueue(await ze(s,f+g,Math.min(r,d-g),m)),g+r>d?c.close():this.chunkOffset+=r}});return a}}class Ia extends ql{constructor(){super();const s=this,r=new WritableStream({write(a){return s.writeUint8Array(a)}});Object.defineProperty(s,ka,{get(){return r}})}writeUint8Array(){}}class L2 extends jn{constructor(s){super();let r=s.length;for(;s.charAt(r-1)=="=";)r--;const a=s.indexOf(",")+1;Object.assign(this,{dataURI:s,dataStart:a,size:Math.floor((r-a)*.75)})}readUint8Array(s,r){const{dataStart:a,dataURI:c}=this,f=new Uint8Array(r),d=Math.floor(s/3)*4,m=atob(c.substring(d+a,Math.ceil((s+r)/3)*4+a)),g=s-Math.floor(d/4)*3;for(let A=g;A<g+r;A++)f[A-g]=m.charCodeAt(A);return f}}class Q2 extends Ia{constructor(s){super(),Object.assign(this,{data:"data:"+(s||"")+";base64,",pending:[]})}writeUint8Array(s){const r=this;let a=0,c=r.pending;const f=r.pending.length;for(r.pending="",a=0;a<Math.floor((f+s.length)/3)*3-f;a++)c+=String.fromCharCode(s[a]);for(;a<s.length;a++)r.pending+=String.fromCharCode(s[a]);c.length>2?r.data+=btoa(c):r.pending=c}getData(){return this.data+btoa(this.pending)}}class Ra extends jn{constructor(s){super(),Object.assign(this,{blob:s,size:s.size})}async readUint8Array(s,r){const a=this,c=s+r;let d=await(s||c<a.size?a.blob.slice(s,c):a.blob).arrayBuffer();return d.byteLength>r&&(d=d.slice(s,c)),new Uint8Array(d)}}class p0 extends ql{constructor(s){super();const r=this,a=new TransformStream,c=[];s&&c.push([B2,s]),Object.defineProperty(r,ka,{get(){return a.writable}}),r.blob=new Response(a.readable,{headers:c}).blob()}getData(){return this.blob}}class U2 extends Ra{constructor(s){super(new Blob([s],{type:P2}))}}class W2 extends p0{constructor(s){super(s),Object.assign(this,{encoding:s,utf8:!s||s.toLowerCase()=="utf-8"})}async getData(){const{encoding:s,utf8:r}=this,a=await super.getData();if(a.text&&r)return a.text();{const c=new FileReader;return new Promise((f,d)=>{Object.assign(c,{onload:({target:m})=>f(m.result),onerror:()=>d(c.error)}),c.readAsText(a,s)})}}}class V2 extends jn{constructor(s,r){super(),h0(this,s,r)}async init(){await m0(this,ua,wd),super.init()}readUint8Array(s,r){return g0(this,s,r,ua,wd)}}class Y2 extends jn{constructor(s,r){super(),h0(this,s,r)}async init(){await m0(this,ca,Ad),super.init()}readUint8Array(s,r){return g0(this,s,r,ca,Ad)}}function h0(l,s,r){const{preventHeadRequest:a,useRangeHeader:c,forceRangeRequests:f,combineSizeEocd:d}=r;r=Object.assign({},r),delete r.preventHeadRequest,delete r.useRangeHeader,delete r.forceRangeRequests,delete r.combineSizeEocd,delete r.useXHR,Object.assign(l,{url:s,options:r,preventHeadRequest:a,useRangeHeader:c,forceRangeRequests:f,combineSizeEocd:d})}async function m0(l,s,r){const{url:a,preventHeadRequest:c,useRangeHeader:f,forceRangeRequests:d,combineSizeEocd:m}=l;if(G2(a)&&(f||d)&&(typeof c>"u"||c)){const g=await s(Ca,l,v0(l,m?-22:void 0));if(!d&&g.headers.get(N2)!=d0)throw new Error(ki);{m&&(l.eocdCache=new Uint8Array(await g.arrayBuffer()));let A;const x=g.headers.get(D2);if(x){const k=x.trim().split(/\s*\/\s*/);if(k.length){const I=k[1];I&&I!="*"&&(A=Number(I))}}A===qe?await Ed(l,s,r):l.size=A}}else await Ed(l,s,r)}async function g0(l,s,r,a,c){const{useRangeHeader:f,forceRangeRequests:d,eocdCache:m,size:g,options:A}=l;if(f||d){if(m&&s==g-kn&&r==kn)return m;const x=await a(Ca,l,v0(l,s,r));if(x.status!=206)throw new Error(ki);return new Uint8Array(await x.arrayBuffer())}else{const{data:x}=l;return x||await c(l,A),new Uint8Array(l.data.subarray(s,s+r))}}function v0(l,s=0,r=1){return Object.assign({},Ta(l),{[M2]:d0+"="+(s<0?s:s+"-"+(s+r-1))})}function Ta({options:l}){const{headers:s}=l;if(s)return Symbol.iterator in s?Object.fromEntries(s):s}async function wd(l){await y0(l,ua)}async function Ad(l){await y0(l,ca)}async function y0(l,s){const r=await s(Ca,l,Ta(l));l.data=new Uint8Array(await r.arrayBuffer()),l.size||(l.size=l.data.length)}async function Ed(l,s,r){if(l.preventHeadRequest)await r(l,l.options);else{const c=(await s(H2,l,Ta(l))).headers.get(O2);c?l.size=Number(c):await r(l,l.options)}}async function ua(l,{options:s,url:r},a){const c=await fetch(r,Object.assign({},s,{method:l,headers:a}));if(c.status<400)return c;throw c.status==416?new Error(ki):new Error(c0+(c.statusText||c.status))}function ca(l,{url:s},r){return new Promise((a,c)=>{const f=new XMLHttpRequest;if(f.addEventListener("load",()=>{if(f.status<400){const d=[];f.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach(m=>{const g=m.trim().split(/\s*:\s*/);g[0]=g[0].trim().replace(/^[a-z]|-[a-z]/g,A=>A.toUpperCase()),d.push(g)}),a({status:f.status,arrayBuffer:()=>f.response,headers:new Map(d)})}else c(f.status==416?new Error(ki):new Error(c0+(f.statusText||f.status)))},!1),f.addEventListener("error",d=>c(d.detail?d.detail.error:new Error("Network error")),!1),f.open(l,s),r)for(const d of Object.entries(r))f.setRequestHeader(d[0],d[1]);f.responseType="arraybuffer",f.send()})}class x0 extends jn{constructor(s,r={}){super(),Object.assign(this,{url:s,reader:r.useXHR?new Y2(s,r):new V2(s,r)})}set size(s){}get size(){return this.reader.size}async init(){await this.reader.init(),super.init()}readUint8Array(s,r){return this.reader.readUint8Array(s,r)}}class b2 extends x0{constructor(s,r={}){r.useRangeHeader=!0,super(s,r)}}class z2 extends jn{constructor(s){super(),Object.assign(this,{array:s,size:s.length})}readUint8Array(s,r){return this.array.slice(s,s+r)}}class X2 extends Ia{init(s=0){Object.assign(this,{offset:0,array:new Uint8Array(s)}),super.init()}writeUint8Array(s){const r=this;if(r.offset+s.length>r.array.length){const a=r.array;r.array=new Uint8Array(a.length+s.length),r.array.set(a)}r.array.set(s,r.offset),r.offset+=s.length}getData(){return this.array}}class ja extends jn{constructor(s){super(),this.readers=s}async init(){const s=this,{readers:r}=s;s.lastDiskNumber=0,s.lastDiskOffset=0,await Promise.all(r.map(async(a,c)=>{await a.init(),c!=r.length-1&&(s.lastDiskOffset+=a.size),s.size+=a.size})),super.init()}async readUint8Array(s,r,a=0){const c=this,{readers:f}=this;let d,m=a;m==-1&&(m=f.length-1);let g=s;for(;g>=f[m].size;)g-=f[m].size,m++;const A=f[m],x=A.size;if(g+r<=x)d=await ze(A,g,r);else{const k=x-g;d=new Uint8Array(r),d.set(await ze(A,g,k)),d.set(await c.readUint8Array(s+k,r-k,a),k)}return c.lastDiskNumber=Math.max(m,c.lastDiskNumber),d}}class Xl extends ql{constructor(s,r=4294967295){super();const a=this;Object.assign(a,{diskNumber:0,diskOffset:0,size:0,maxSize:r,availableSize:r});let c,f,d;const m=new WritableStream({async write(x){const{availableSize:k}=a;if(d)x.length>=k?(await g(x.slice(0,k)),await A(),a.diskOffset+=c.size,a.diskNumber++,d=null,await this.write(x.slice(k))):await g(x);else{const{value:I,done:j}=await s.next();if(j&&!I)throw new Error(f0);c=I,c.size=0,c.maxSize&&(a.maxSize=c.maxSize),a.availableSize=a.maxSize,await Ai(c),f=I.writable,d=f.getWriter(),await this.write(x)}},async close(){await d.ready,await A()}});Object.defineProperty(a,ka,{get(){return m}});async function g(x){const k=x.length;k&&(await d.ready,await d.write(x),c.size+=k,a.size+=k,a.availableSize-=k)}async function A(){f.size=c.size,await d.close()}}}function G2(l){const{baseURL:s}=Vd(),{protocol:r}=new URL(l,s);return r=="http:"||r=="https:"}async function Ai(l,s){if(l.init&&!l.initialized)await l.init(s);else return Promise.resolve()}function w0(l){return Array.isArray(l)&&(l=new ja(l)),l instanceof ReadableStream&&(l={readable:l}),l}function A0(l){l.writable===qe&&typeof l.next==Si&&(l=new Xl(l)),l instanceof WritableStream&&(l={writable:l});const{writable:s}=l;return s.size===qe&&(s.size=0),l instanceof Xl||Object.assign(l,{diskNumber:0,diskOffset:0,availableSize:1/0,maxSize:1/0}),l}function ze(l,s,r,a){return l.readUint8Array(s,r,a)}const K2=ja,Z2=Xl,E0="\0 !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~ ".split(""),J2=E0.length==256;function q2(l){if(J2){let s="";for(let r=0;r<l.length;r++)s+=E0[l[r]];return s}else return new TextDecoder().decode(l)}function Wl(l,s){return s&&s.trim().toLowerCase()=="cp437"?q2(l):new TextDecoder(s).decode(l)}const S0="filename",C0="rawFilename",k0="comment",I0="rawComment",R0="uncompressedSize",T0="compressedSize",j0="offset",fa="diskNumberStart",da="lastModDate",pa="rawLastModDate",P0="lastAccessDate",_2="rawLastAccessDate",O0="creationDate",$2="rawCreationDate",em="internalFileAttribute",tm="internalFileAttributes",nm="externalFileAttribute",rm="externalFileAttributes",im="msDosCompatible",lm="zip64",sm="encrypted",om="version",am="versionMadeBy",um="zipCrypto",cm="directory",fm="executable",dm=[S0,C0,T0,R0,da,pa,k0,I0,P0,O0,j0,fa,fa,em,tm,nm,rm,im,lm,sm,om,am,um,cm,fm,"bitFlag","signature","filenameUTF8","commentUTF8","compressionMethod","extraField","rawExtraField","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES","extraFieldNTFS","extraFieldExtendedTimestamp"];class Sd{constructor(s){dm.forEach(r=>this[r]=s[r])}}const Vl="File format is not recognized",D0="End of central directory not found",N0="End of Zip64 central directory locator not found",M0="Central directory header not found",B0="Local file header not found",H0="Zip64 extra field not found",F0="File contains encrypted entry",L0="Encryption method not supported",ha="Compression method not supported",ma="Split zip file",Cd="utf-8",kd="cp437",pm=[[R0,Gn],[T0,Gn],[j0,Gn],[fa,Cn]],hm={[Cn]:{getValue:Me,bytes:4},[Gn]:{getValue:Yl,bytes:8}};class Q0{constructor(s,r={}){Object.assign(this,{reader:w0(s),options:r,config:Vd()})}async*getEntriesGenerator(s={}){const r=this;let{reader:a}=r;const{config:c}=r;if(await Ai(a),(a.size===qe||!a.readUint8Array)&&(a=new Ra(await new Response(a.readable).blob()),await Ai(a)),a.size<kn)throw new Error(Vl);a.chunkSize=V1(c);const f=await Am(a,j1,a.size,kn,Cn*16);if(!f){const W=await ze(a,0,4),V=Ve(W);throw Me(V)==T1?new Error(ma):new Error(D0)}const d=Ve(f);let m=Me(d,12),g=Me(d,16);const A=f.offset,x=We(d,20),k=A+kn+x;let I=We(d,4);const j=a.lastDiskNumber||0;let F=We(d,6),w=We(d,8),v=0,E=0;if(g==Gn||m==Gn||w==Cn||F==Cn){const W=await ze(a,f.offset-Zo,Zo),V=Ve(W);if(Me(V,0)==P1){g=Yl(V,8);let re=await ze(a,g,Jo,-1),J=Ve(re);const ce=f.offset-Zo-Jo;if(Me(J,0)!=ed&&g!=ce){const oe=g;g=ce,v=g-oe,re=await ze(a,g,Jo,-1),J=Ve(re)}if(Me(J,0)!=ed)throw new Error(N0);I==Cn&&(I=Me(J,16)),F==Cn&&(F=Me(J,20)),w==Cn&&(w=Yl(J,32)),m==Gn&&(m=Yl(J,40)),g-=m}}if(g>=a.size&&(v=a.size-g-m-kn,g=a.size-m-kn),j!=I)throw new Error(ma);if(g<0)throw new Error(Vl);let P=0,M=await ze(a,g,m,F),L=Ve(M);if(m){const W=f.offset-m;if(Me(L,P)!=$f&&g!=W){const V=g;g=W,v+=g-V,M=await ze(a,g,m,F),L=Ve(M)}}const z=f.offset-g-(a.lastDiskOffset||0);if(m!=z&&z>=0&&(m=z,M=await ze(a,g,m,F),L=Ve(M)),g<0||g>=a.size)throw new Error(Vl);const D=et(r,s,"filenameEncoding"),B=et(r,s,"commentEncoding");for(let W=0;W<w;W++){const V=new gm(a,c,r.options);if(Me(L,P)!=$f)throw new Error(M0);U0(V,L,P+6);const re=!!V.bitFlag.languageEncodingFlag,J=P+46,ce=J+V.filenameLength,oe=ce+V.extraFieldLength,ie=We(L,P+4),de=ie>>8==0,Y=ie>>8==3,ee=M.subarray(J,ce),U=We(L,P+32),R=oe+U,H=M.subarray(oe,R),$=re,pe=re,me=Me(L,P+38),ge=de&&(Cr(L,P+38)&id)==id||Y&&(me>>16&ld)==ld||ee.length&&ee[ee.length-1]==od.charCodeAt(0),Ee=Y&&(me>>16&sd)==sd,xe=Me(L,P+42)+v;Object.assign(V,{versionMadeBy:ie,msDosCompatible:de,compressedSize:0,uncompressedSize:0,commentLength:U,directory:ge,offset:xe,diskNumberStart:We(L,P+34),internalFileAttributes:We(L,P+36),externalFileAttributes:me,rawFilename:ee,filenameUTF8:$,commentUTF8:pe,rawExtraField:M.subarray(ce,oe),executable:Ee}),V.internalFileAttribute=V.internalFileAttributes,V.externalFileAttribute=V.externalFileAttributes;const Se=et(r,s,"decodeText")||Wl,Xe=$?Cd:D||kd,Pn=pe?Cd:B||kd;let On=Se(ee,Xe);On===qe&&(On=Wl(ee,Xe));let $t=Se(H,Pn);$t===qe&&($t=Wl(H,Pn)),Object.assign(V,{rawComment:H,filename:On,comment:$t,directory:ge||On.endsWith(od)}),E=Math.max(xe,E),W0(V,V,L,P+6),V.zipCrypto=V.encrypted&&!V.extraFieldAES;const Dn=new Sd(V);Dn.getData=(Rr,Tr)=>V.getData(Rr,Dn,Tr),P=R;const{onprogress:Ir}=s;if(Ir)try{await Ir(W+1,w,new Sd(V))}catch{}yield Dn}const Q=et(r,s,"extractPrependedData"),G=et(r,s,"extractAppendedData");return Q&&(r.prependedData=E>0?await ze(a,0,E):new Uint8Array),r.comment=x?await ze(a,A+kn,x):new Uint8Array,G&&(r.appendedData=k<a.size?await ze(a,k,a.size-k):new Uint8Array),!0}async getEntries(s={}){const r=[];for await(const a of this.getEntriesGenerator(s))r.push(a);return r}async close(){}}class mm{constructor(s={}){const{readable:r,writable:a}=new TransformStream,c=new Q0(r,s).getEntriesGenerator();this.readable=new ReadableStream({async pull(f){const{done:d,value:m}=await c.next();if(d)return f.close();const g={...m,readable:function(){const{readable:A,writable:x}=new TransformStream;if(m.getData)return m.getData(x),A}()};delete g.getData,f.enqueue(g)}}),this.writable=a}}class gm{constructor(s,r,a){Object.assign(this,{reader:s,config:r,options:a})}async getData(s,r,a={}){const c=this,{reader:f,offset:d,diskNumberStart:m,extraFieldAES:g,compressionMethod:A,config:x,bitFlag:k,signature:I,rawLastModDate:j,uncompressedSize:F,compressedSize:w}=c,v=r.localDirectory={},E=await ze(f,d,30,m),P=Ve(E);let M=et(c,a,"password"),L=et(c,a,"rawPassword");const z=et(c,a,"passThrough");if(M=M&&M.length&&M,L=L&&L.length&&L,g&&g.originalCompressionMethod!=I1)throw new Error(ha);if(A!=k1&&A!=C1&&!z)throw new Error(ha);if(Me(P,0)!=R1)throw new Error(B0);U0(v,P,4),v.rawExtraField=v.extraFieldLength?await ze(f,d+30+v.filenameLength,v.extraFieldLength,m):new Uint8Array,W0(c,v,P,4,!0),Object.assign(r,{lastAccessDate:v.lastAccessDate,creationDate:v.creationDate});const D=c.encrypted&&v.encrypted&&!z,B=D&&!g;if(z||(r.zipCrypto=B),D){if(!B&&g.strength===qe)throw new Error(L0);if(!M&&!L)throw new Error(F0)}const Q=d+30+v.filenameLength+v.extraFieldLength,G=w,W=f.readable;Object.assign(W,{diskNumberStart:m,offset:Q,size:G});const V=et(c,a,"signal"),re=et(c,a,"checkPasswordOnly");re&&(s=new WritableStream),s=A0(s),await Ai(s,z?w:F);const{writable:J}=s,{onstart:ce,onprogress:oe,onend:ie}=a,de={options:{codecType:o0,password:M,rawPassword:L,zipCrypto:B,encryptionStrength:g&&g.strength,signed:et(c,a,"checkSignature")&&!z,passwordVerification:B&&(k.dataDescriptor?j>>>8&255:I>>>24&255),signature:I,compressed:A!=0&&!z,encrypted:c.encrypted&&!z,useWebWorkers:et(c,a,"useWebWorkers"),useCompressionStream:et(c,a,"useCompressionStream"),transferStreams:et(c,a,"transferStreams"),checkPasswordOnly:re},config:x,streamOptions:{signal:V,size:G,onstart:ce,onprogress:oe,onend:ie}};let Y=0;try{({outputSize:Y}=await R2({readable:W,writable:J},de))}catch(ee){if(!re||ee.message!=Aa)throw ee}finally{const ee=et(c,a,"preventClose");J.size+=Y,!ee&&!J.locked&&await J.getWriter().close()}return re?qe:s.getData?s.getData():J}}function U0(l,s,r){const a=l.rawBitFlag=We(s,r+2),c=(a&td)==td,f=Me(s,r+6);Object.assign(l,{encrypted:c,version:We(s,r),bitFlag:{level:(a&Q1)>>1,dataDescriptor:(a&nd)==nd,languageEncodingFlag:(a&rd)==rd},rawLastModDate:f,lastModDate:Em(f),filenameLength:We(s,r+22),extraFieldLength:We(s,r+24)})}function W0(l,s,r,a,c){const{rawExtraField:f}=s,d=s.extraField=new Map,m=Ve(new Uint8Array(f));let g=0;try{for(;g<f.length;){const E=We(m,g),P=We(m,g+2);d.set(E,{type:E,data:f.slice(g+4,g+4+P)}),g+=4+P}}catch{}const A=We(r,a+4);Object.assign(s,{signature:Me(r,a+10),uncompressedSize:Me(r,a+18),compressedSize:Me(r,a+14)});const x=d.get(O1);x&&(vm(x,s),s.extraFieldZip64=x);const k=d.get(H1);k&&(Id(k,S0,C0,s,l),s.extraFieldUnicodePath=k);const I=d.get(F1);I&&(Id(I,k0,I0,s,l),s.extraFieldUnicodeComment=I);const j=d.get(D1);j?(ym(j,s,A),s.extraFieldAES=j):s.compressionMethod=A;const F=d.get(N1);F&&(xm(F,s),s.extraFieldNTFS=F);const w=d.get(B1);w&&(wm(w,s,c),s.extraFieldExtendedTimestamp=w);const v=d.get(L1);v&&(s.extraFieldUSDZ=v)}function vm(l,s){s.zip64=!0;const r=Ve(l.data),a=pm.filter(([c,f])=>s[c]==f);for(let c=0,f=0;c<a.length;c++){const[d,m]=a[c];if(s[d]==m){const g=hm[m];s[d]=l[d]=g.getValue(r,f),f+=g.bytes}else if(l[d])throw new Error(H0)}}function Id(l,s,r,a,c){const f=Ve(l.data),d=new bl;d.append(c[r]);const m=Ve(new Uint8Array(4));m.setUint32(0,d.get(),!0);const g=Me(f,1);Object.assign(l,{version:Cr(f,0),[s]:Wl(l.data.subarray(5)),valid:!c.bitFlag.languageEncodingFlag&&g==Me(m,0)}),l.valid&&(a[s]=l[s],a[s+"UTF8"]=!0)}function ym(l,s,r){const a=Ve(l.data),c=Cr(a,4);Object.assign(l,{vendorVersion:Cr(a,0),vendorId:Cr(a,2),strength:c,originalCompressionMethod:r,compressionMethod:We(a,5)}),s.compressionMethod=l.compressionMethod}function xm(l,s){const r=Ve(l.data);let a=4,c;try{for(;a<l.data.length&&!c;){const f=We(r,a),d=We(r,a+2);f==M1&&(c=l.data.slice(a+4,a+4+d)),a+=4+d}}catch{}try{if(c&&c.length==24){const f=Ve(c),d=f.getBigUint64(0,!0),m=f.getBigUint64(8,!0),g=f.getBigUint64(16,!0);Object.assign(l,{rawLastModDate:d,rawLastAccessDate:m,rawCreationDate:g});const A=ea(d),x=ea(m),k=ea(g),I={lastModDate:A,lastAccessDate:x,creationDate:k};Object.assign(l,I),Object.assign(s,I)}}catch{}}function wm(l,s,r){const a=Ve(l.data),c=Cr(a,0),f=[],d=[];r?((c&1)==1&&(f.push(da),d.push(pa)),(c&2)==2&&(f.push(P0),d.push(_2)),(c&4)==4&&(f.push(O0),d.push($2))):l.data.length>=5&&(f.push(da),d.push(pa));let m=1;f.forEach((g,A)=>{if(l.data.length>=m+4){const x=Me(a,m);s[g]=l[g]=new Date(x*1e3);const k=d[A];l[k]=x}m+=4})}async function Am(l,s,r,a,c){const f=new Uint8Array(4),d=Ve(f);Sm(d,0,s);const m=a+c;return await g(a)||await g(Math.min(m,r));async function g(A){const x=r-A,k=await ze(l,x,A);for(let I=k.length-a;I>=0;I--)if(k[I]==f[0]&&k[I+1]==f[1]&&k[I+2]==f[2]&&k[I+3]==f[3])return{offset:x+I,buffer:k.slice(I,I+a).buffer}}}function et(l,s,r){return s[r]===qe?l.options[r]:s[r]}function Em(l){const s=(l&4294901760)>>16,r=l&65535;try{return new Date(1980+((s&65024)>>9),((s&480)>>5)-1,s&31,(r&63488)>>11,(r&2016)>>5,(r&31)*2,0)}catch{}}function ea(l){return new Date(Number(l/BigInt(1e4)-BigInt(116444736e5)))}function Cr(l,s){return l.getUint8(s)}function We(l,s){return l.getUint16(s,!0)}function Me(l,s){return l.getUint32(s,!0)}function Yl(l,s){return Number(l.getBigUint64(s,!0))}function Sm(l,s,r){l.setUint32(s,r,!0)}function Ve(l){return new DataView(l.buffer)}Yd({Inflate:S1});const Cm=Object.freeze(Object.defineProperty({__proto__:null,BlobReader:Ra,BlobWriter:p0,Data64URIReader:L2,Data64URIWriter:Q2,ERR_BAD_FORMAT:Vl,ERR_CENTRAL_DIRECTORY_NOT_FOUND:M0,ERR_ENCRYPTED:F0,ERR_EOCDR_LOCATOR_ZIP64_NOT_FOUND:N0,ERR_EOCDR_NOT_FOUND:D0,ERR_EXTRAFIELD_ZIP64_NOT_FOUND:H0,ERR_HTTP_RANGE:ki,ERR_INVALID_PASSWORD:xa,ERR_INVALID_SIGNATURE:wa,ERR_ITERATOR_COMPLETED_TOO_SOON:f0,ERR_LOCAL_FILE_HEADER_NOT_FOUND:B0,ERR_SPLIT_ZIP_FILE:ma,ERR_UNSUPPORTED_COMPRESSION:ha,ERR_UNSUPPORTED_ENCRYPTION:L0,HttpRangeReader:b2,HttpReader:x0,Reader:jn,SplitDataReader:ja,SplitDataWriter:Xl,SplitZipReader:K2,SplitZipWriter:Z2,TextReader:U2,TextWriter:W2,Uint8ArrayReader:z2,Uint8ArrayWriter:X2,Writer:Ia,ZipReader:Q0,ZipReaderStream:mm,configure:Yd,getMimeType:Y1,initReader:w0,initStream:Ai,initWriter:A0,readUint8Array:ze,terminateWorkers:j2},Symbol.toStringTag,{value:"Module"}));var se=ya();const _t=e1(se);var Ll={},ta={exports:{}},ot={},na={exports:{}},ra={};/**
25:  * @license React
26:  * scheduler.production.min.js
27:  *
28:  * Copyright (c) Facebook, Inc. and its affiliates.
29:  *
30:  * This source code is licensed under the MIT license found in the
31:  * LICENSE file in the root directory of this source tree.
32:  */var Rd;function km(){return Rd||(Rd=1,function(l){function s(Y,ee){var U=Y.length;Y.push(ee);e:for(;0<U;){var R=U-1>>>1,H=Y[R];if(0<c(H,ee))Y[R]=ee,Y[U]=H,U=R;else break e}}function r(Y){return Y.length===0?null:Y[0]}function a(Y){if(Y.length===0)return null;var ee=Y[0],U=Y.pop();if(U!==ee){Y[0]=U;e:for(var R=0,H=Y.length,$=H>>>1;R<$;){var pe=2*(R+1)-1,me=Y[pe],ge=pe+1,Ee=Y[ge];if(0>c(me,U))ge<H&&0>c(Ee,me)?(Y[R]=Ee,Y[ge]=U,R=ge):(Y[R]=me,Y[pe]=U,R=pe);else if(ge<H&&0>c(Ee,U))Y[R]=Ee,Y[ge]=U,R=ge;else break e}}return ee}function c(Y,ee){var U=Y.sortIndex-ee.sortIndex;return U!==0?U:Y.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;l.unstable_now=function(){return f.now()}}else{var d=Date,m=d.now();l.unstable_now=function(){return d.now()-m}}var g=[],A=[],x=1,k=null,I=3,j=!1,F=!1,w=!1,v=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(Y){for(var ee=r(A);ee!==null;){if(ee.callback===null)a(A);else if(ee.startTime<=Y)a(A),ee.sortIndex=ee.expirationTime,s(g,ee);else break;ee=r(A)}}function L(Y){if(w=!1,M(Y),!F)if(r(g)!==null)F=!0,ie(z);else{var ee=r(A);ee!==null&&de(L,ee.startTime-Y)}}function z(Y,ee){F=!1,w&&(w=!1,E(Q),Q=-1),j=!0;var U=I;try{for(M(ee),k=r(g);k!==null&&(!(k.expirationTime>ee)||Y&&!V());){var R=k.callback;if(typeof R=="function"){k.callback=null,I=k.priorityLevel;var H=R(k.expirationTime<=ee);ee=l.unstable_now(),typeof H=="function"?k.callback=H:k===r(g)&&a(g),M(ee)}else a(g);k=r(g)}if(k!==null)var $=!0;else{var pe=r(A);pe!==null&&de(L,pe.startTime-ee),$=!1}return $}finally{k=null,I=U,j=!1}}var D=!1,B=null,Q=-1,G=5,W=-1;function V(){return!(l.unstable_now()-W<G)}function re(){if(B!==null){var Y=l.unstable_now();W=Y;var ee=!0;try{ee=B(!0,Y)}finally{ee?J():(D=!1,B=null)}}else D=!1}var J;if(typeof P=="function")J=function(){P(re)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,oe=ce.port2;ce.port1.onmessage=re,J=function(){oe.postMessage(null)}}else J=function(){v(re,0)};function ie(Y){B=Y,D||(D=!0,J())}function de(Y,ee){Q=v(function(){Y(l.unstable_now())},ee)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(Y){Y.callback=null},l.unstable_continueExecution=function(){F||j||(F=!0,ie(z))},l.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<Y?Math.floor(1e3/Y):5},l.unstable_getCurrentPriorityLevel=function(){return I},l.unstable_getFirstCallbackNode=function(){return r(g)},l.unstable_next=function(Y){switch(I){case 1:case 2:case 3:var ee=3;break;default:ee=I}var U=I;I=ee;try{return Y()}finally{I=U}},l.unstable_pauseExecution=function(){},l.unstable_requestPaint=function(){},l.unstable_runWithPriority=function(Y,ee){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var U=I;I=Y;try{return ee()}finally{I=U}},l.unstable_scheduleCallback=function(Y,ee,U){var R=l.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?R+U:R):U=R,Y){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=U+H,Y={id:x++,callback:ee,priorityLevel:Y,startTime:U,expirationTime:H,sortIndex:-1},U>R?(Y.sortIndex=U,s(A,Y),r(g)===null&&Y===r(A)&&(w?(E(Q),Q=-1):w=!0,de(L,U-R))):(Y.sortIndex=H,s(g,Y),F||j||(F=!0,ie(z))),Y},l.unstable_shouldYield=V,l.unstable_wrapCallback=function(Y){var ee=I;return function(){var U=I;I=ee;try{return Y.apply(this,arguments)}finally{I=U}}}}(ra)),ra}var Td;function Im(){return Td||(Td=1,na.exports=km()),na.exports}/**
33:  * @license React
34:  * react-dom.production.min.js
35:  *
36:  * Copyright (c) Facebook, Inc. and its affiliates.
37:  *
38:  * This source code is licensed under the MIT license found in the
39:  * LICENSE file in the root directory of this source tree.
40:  */var jd;function Rm(){if(jd)return ot;jd=1;var l=ya(),s=Im();function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,c={};function f(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(c[e]=t,e=0;e<t.length;e++)a.add(t[e])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,A=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},k={};function I(e){return g.call(k,e)?!0:g.call(x,e)?!1:A.test(e)?k[e]=!0:(x[e]=!0,!1)}function j(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function F(e,t,n,i){if(t===null||typeof t>"u"||j(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function w(e,t,n,i,o,u,p){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=u,this.removeEmptyString=p}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){v[e]=new w(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];v[t]=new w(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){v[e]=new w(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){v[e]=new w(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){v[e]=new w(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){v[e]=new w(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){v[e]=new w(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){v[e]=new w(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){v[e]=new w(e,5,!1,e.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function P(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(E,P);v[t]=new w(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(E,P);v[t]=new w(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(E,P);v[t]=new w(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){v[e]=new w(e,1,!1,e.toLowerCase(),null,!1,!1)}),v.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){v[e]=new w(e,1,!1,e.toLowerCase(),null,!0,!0)});function M(e,t,n,i){var o=v.hasOwnProperty(t)?v[t]:null;(o!==null?o.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(F(t,n,o,i)&&(n=null),i||o===null?I(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,i=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var L=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),D=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),V=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),de=Symbol.for("react.offscreen"),Y=Symbol.iterator;function ee(e){return e===null||typeof e!="object"?null:(e=Y&&e[Y]||e["@@iterator"],typeof e=="function"?e:null)}var U=Object.assign,R;function H(e){if(R===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return`
41: `+R+e}var $=!1;function pe(e,t){if(!e||$)return"";$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(N){var i=N}Reflect.construct(e,[],t)}else{try{t.call()}catch(N){i=N}e.call(t.prototype)}else{try{throw Error()}catch(N){i=N}e()}}catch(N){if(N&&i&&typeof N.stack=="string"){for(var o=N.stack.split(`
42: `),u=i.stack.split(`
43: `),p=o.length-1,y=u.length-1;1<=p&&0<=y&&o[p]!==u[y];)y--;for(;1<=p&&0<=y;p--,y--)if(o[p]!==u[y]){if(p!==1||y!==1)do if(p--,y--,0>y||o[p]!==u[y]){var S=`
44: `+o[p].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=p&&0<=y);break}}}finally{$=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?H(e):""}function me(e){switch(e.tag){case 5:return H(e.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return e=pe(e.type,!1),e;case 11:return e=pe(e.type.render,!1),e;case 1:return e=pe(e.type,!0),e;default:return""}}function ge(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case B:return"Fragment";case D:return"Portal";case G:return"Profiler";case Q:return"StrictMode";case J:return"Suspense";case ce:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case V:return(e.displayName||"Context")+".Consumer";case W:return(e._context.displayName||"Context")+".Provider";case re:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case oe:return t=e.displayName||null,t!==null?t:ge(e.type)||"Memo";case ie:t=e._payload,e=e._init;try{return ge(e(t))}catch{}}return null}function Ee(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ge(t);case 8:return t===Q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Se(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Xe(e){var t=Se(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,u=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(p){i=""+p,u.call(this,p)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(p){i=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pn(e){e._valueTracker||(e._valueTracker=Xe(e))}function On(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Se(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function $t(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Dn(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ir(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=xe(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Rr(e,t){t=t.checked,t!=null&&M(e,"checked",t,!1)}function Tr(e,t){Rr(e,t);var n=xe(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?_l(e,t.type,n):t.hasOwnProperty("defaultValue")&&_l(e,t.type,xe(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Fa(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function _l(e,t,n){(t!=="number"||$t(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var jr=Array.isArray;function Jn(e,t,n,i){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&i&&(e[n].defaultSelected=!0)}else{for(n=""+xe(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function $l(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(r(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function La(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(r(92));if(jr(n)){if(1<n.length)throw Error(r(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:xe(n)}}function Qa(e,t){var n=xe(t.value),i=xe(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function Ua(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Wa(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function es(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Wa(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ii,Va=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ii=Ii||document.createElement("div"),Ii.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ii.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Pr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Or={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},np=["Webkit","ms","Moz","O"];Object.keys(Or).forEach(function(e){np.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Or[t]=Or[e]})});function Ya(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Or.hasOwnProperty(e)&&Or[e]?(""+t).trim():t+"px"}function ba(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,o=Ya(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,o):e[n]=o}}var rp=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ts(e,t){if(t){if(rp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(r(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(r(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(t.style!=null&&typeof t.style!="object")throw Error(r(62))}}function ns(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rs=null;function is(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ls=null,qn=null,_n=null;function za(e){if(e=$r(e)){if(typeof ls!="function")throw Error(r(280));var t=e.stateNode;t&&(t=Zi(t),ls(e.stateNode,e.type,t))}}function Xa(e){qn?_n?_n.push(e):_n=[e]:qn=e}function Ga(){if(qn){var e=qn,t=_n;if(_n=qn=null,za(e),t)for(e=0;e<t.length;e++)za(t[e])}}function Ka(e,t){return e(t)}function Za(){}var ss=!1;function Ja(e,t,n){if(ss)return e(t,n);ss=!0;try{return Ka(e,t,n)}finally{ss=!1,(qn!==null||_n!==null)&&(Za(),Ga())}}function Dr(e,t){var n=e.stateNode;if(n===null)return null;var i=Zi(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(r(231,t,typeof n));return n}var os=!1;if(m)try{var Nr={};Object.defineProperty(Nr,"passive",{get:function(){os=!0}}),window.addEventListener("test",Nr,Nr),window.removeEventListener("test",Nr,Nr)}catch{os=!1}function ip(e,t,n,i,o,u,p,y,S){var N=Array.prototype.slice.call(arguments,3);try{t.apply(n,N)}catch(X){this.onError(X)}}var Mr=!1,Ri=null,Ti=!1,as=null,lp={onError:function(e){Mr=!0,Ri=e}};function sp(e,t,n,i,o,u,p,y,S){Mr=!1,Ri=null,ip.apply(lp,arguments)}function op(e,t,n,i,o,u,p,y,S){if(sp.apply(this,arguments),Mr){if(Mr){var N=Ri;Mr=!1,Ri=null}else throw Error(r(198));Ti||(Ti=!0,as=N)}}function Nn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function qa(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _a(e){if(Nn(e)!==e)throw Error(r(188))}function ap(e){var t=e.alternate;if(!t){if(t=Nn(e),t===null)throw Error(r(188));return t!==e?null:e}for(var n=e,i=t;;){var o=n.return;if(o===null)break;var u=o.alternate;if(u===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===u.child){for(u=o.child;u;){if(u===n)return _a(o),e;if(u===i)return _a(o),t;u=u.sibling}throw Error(r(188))}if(n.return!==i.return)n=o,i=u;else{for(var p=!1,y=o.child;y;){if(y===n){p=!0,n=o,i=u;break}if(y===i){p=!0,i=o,n=u;break}y=y.sibling}if(!p){for(y=u.child;y;){if(y===n){p=!0,n=u,i=o;break}if(y===i){p=!0,i=u,n=o;break}y=y.sibling}if(!p)throw Error(r(189))}}if(n.alternate!==i)throw Error(r(190))}if(n.tag!==3)throw Error(r(188));return n.stateNode.current===n?e:t}function $a(e){return e=ap(e),e!==null?eu(e):null}function eu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=eu(e);if(t!==null)return t;e=e.sibling}return null}var tu=s.unstable_scheduleCallback,nu=s.unstable_cancelCallback,up=s.unstable_shouldYield,cp=s.unstable_requestPaint,De=s.unstable_now,fp=s.unstable_getCurrentPriorityLevel,us=s.unstable_ImmediatePriority,ru=s.unstable_UserBlockingPriority,ji=s.unstable_NormalPriority,dp=s.unstable_LowPriority,iu=s.unstable_IdlePriority,Pi=null,Pt=null;function pp(e){if(Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(Pi,e,void 0,(e.current.flags&128)===128)}catch{}}var St=Math.clz32?Math.clz32:gp,hp=Math.log,mp=Math.LN2;function gp(e){return e>>>=0,e===0?32:31-(hp(e)/mp|0)|0}var Oi=64,Di=4194304;function Br(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ni(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,o=e.suspendedLanes,u=e.pingedLanes,p=n&268435455;if(p!==0){var y=p&~o;y!==0?i=Br(y):(u&=p,u!==0&&(i=Br(u)))}else p=n&~o,p!==0?i=Br(p):u!==0&&(i=Br(u));if(i===0)return 0;if(t!==0&&t!==i&&(t&o)===0&&(o=i&-i,u=t&-t,o>=u||o===16&&(u&4194240)!==0))return t;if((i&4)!==0&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-St(t),o=1<<n,i|=e[n],t&=~o;return i}function vp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yp(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,u=e.pendingLanes;0<u;){var p=31-St(u),y=1<<p,S=o[p];S===-1?((y&n)===0||(y&i)!==0)&&(o[p]=vp(y,t)):S<=t&&(e.expiredLanes|=y),u&=~y}}function cs(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function lu(){var e=Oi;return Oi<<=1,(Oi&4194240)===0&&(Oi=64),e}function fs(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Hr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-St(t),e[t]=n}function xp(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-St(n),u=1<<o;t[o]=0,i[o]=-1,e[o]=-1,n&=~u}}function ds(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-St(n),o=1<<i;o&t|e[i]&t&&(e[i]|=t),n&=~o}}var Ae=0;function su(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var ou,ps,au,uu,cu,hs=!1,Mi=[],en=null,tn=null,nn=null,Fr=new Map,Lr=new Map,rn=[],wp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fu(e,t){switch(e){case"focusin":case"focusout":en=null;break;case"dragenter":case"dragleave":tn=null;break;case"mouseover":case"mouseout":nn=null;break;case"pointerover":case"pointerout":Fr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lr.delete(t.pointerId)}}function Qr(e,t,n,i,o,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:u,targetContainers:[o]},t!==null&&(t=$r(t),t!==null&&ps(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Ap(e,t,n,i,o){switch(t){case"focusin":return en=Qr(en,e,t,n,i,o),!0;case"dragenter":return tn=Qr(tn,e,t,n,i,o),!0;case"mouseover":return nn=Qr(nn,e,t,n,i,o),!0;case"pointerover":var u=o.pointerId;return Fr.set(u,Qr(Fr.get(u)||null,e,t,n,i,o)),!0;case"gotpointercapture":return u=o.pointerId,Lr.set(u,Qr(Lr.get(u)||null,e,t,n,i,o)),!0}return!1}function du(e){var t=Mn(e.target);if(t!==null){var n=Nn(t);if(n!==null){if(t=n.tag,t===13){if(t=qa(n),t!==null){e.blockedOn=t,cu(e.priority,function(){au(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Bi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=gs(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);rs=i,n.target.dispatchEvent(i),rs=null}else return t=$r(n),t!==null&&ps(t),e.blockedOn=n,!1;t.shift()}return!0}function pu(e,t,n){Bi(e)&&n.delete(t)}function Ep(){hs=!1,en!==null&&Bi(en)&&(en=null),tn!==null&&Bi(tn)&&(tn=null),nn!==null&&Bi(nn)&&(nn=null),Fr.forEach(pu),Lr.forEach(pu)}function Ur(e,t){e.blockedOn===t&&(e.blockedOn=null,hs||(hs=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ep)))}function Wr(e){function t(o){return Ur(o,e)}if(0<Mi.length){Ur(Mi[0],e);for(var n=1;n<Mi.length;n++){var i=Mi[n];i.blockedOn===e&&(i.blockedOn=null)}}for(en!==null&&Ur(en,e),tn!==null&&Ur(tn,e),nn!==null&&Ur(nn,e),Fr.forEach(t),Lr.forEach(t),n=0;n<rn.length;n++)i=rn[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<rn.length&&(n=rn[0],n.blockedOn===null);)du(n),n.blockedOn===null&&rn.shift()}var $n=L.ReactCurrentBatchConfig,Hi=!0;function Sp(e,t,n,i){var o=Ae,u=$n.transition;$n.transition=null;try{Ae=1,ms(e,t,n,i)}finally{Ae=o,$n.transition=u}}function Cp(e,t,n,i){var o=Ae,u=$n.transition;$n.transition=null;try{Ae=4,ms(e,t,n,i)}finally{Ae=o,$n.transition=u}}function ms(e,t,n,i){if(Hi){var o=gs(e,t,n,i);if(o===null)Ns(e,t,i,Fi,n),fu(e,i);else if(Ap(o,e,t,n,i))i.stopPropagation();else if(fu(e,i),t&4&&-1<wp.indexOf(e)){for(;o!==null;){var u=$r(o);if(u!==null&&ou(u),u=gs(e,t,n,i),u===null&&Ns(e,t,i,Fi,n),u===o)break;o=u}o!==null&&i.stopPropagation()}else Ns(e,t,i,null,n)}}var Fi=null;function gs(e,t,n,i){if(Fi=null,e=is(i),e=Mn(e),e!==null)if(t=Nn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=qa(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fi=e,null}function hu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fp()){case us:return 1;case ru:return 4;case ji:case dp:return 16;case iu:return 536870912;default:return 16}default:return 16}}var ln=null,vs=null,Li=null;function mu(){if(Li)return Li;var e,t=vs,n=t.length,i,o="value"in ln?ln.value:ln.textContent,u=o.length;for(e=0;e<n&&t[e]===o[e];e++);var p=n-e;for(i=1;i<=p&&t[n-i]===o[u-i];i++);return Li=o.slice(e,1<i?1-i:void 0)}function Qi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ui(){return!0}function gu(){return!1}function ut(e){function t(n,i,o,u,p){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=u,this.target=p,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(n=e[y],this[y]=n?n(u):u[y]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Ui:gu,this.isPropagationStopped=gu,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),t}var er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ys=ut(er),Vr=U({},er,{view:0,detail:0}),kp=ut(Vr),xs,ws,Yr,Wi=U({},Vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Es,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yr&&(Yr&&e.type==="mousemove"?(xs=e.screenX-Yr.screenX,ws=e.screenY-Yr.screenY):ws=xs=0,Yr=e),xs)},movementY:function(e){return"movementY"in e?e.movementY:ws}}),vu=ut(Wi),Ip=U({},Wi,{dataTransfer:0}),Rp=ut(Ip),Tp=U({},Vr,{relatedTarget:0}),As=ut(Tp),jp=U({},er,{animationName:0,elapsedTime:0,pseudoElement:0}),Pp=ut(jp),Op=U({},er,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dp=ut(Op),Np=U({},er,{data:0}),yu=ut(Np),Mp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Hp[e])?!!t[e]:!1}function Es(){return Fp}var Lp=U({},Vr,{key:function(e){if(e.key){var t=Mp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Qi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Bp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Es,charCode:function(e){return e.type==="keypress"?Qi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Qp=ut(Lp),Up=U({},Wi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xu=ut(Up),Wp=U({},Vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Es}),Vp=ut(Wp),Yp=U({},er,{propertyName:0,elapsedTime:0,pseudoElement:0}),bp=ut(Yp),zp=U({},Wi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Xp=ut(zp),Gp=[9,13,27,32],Ss=m&&"CompositionEvent"in window,br=null;m&&"documentMode"in document&&(br=document.documentMode);var Kp=m&&"TextEvent"in window&&!br,wu=m&&(!Ss||br&&8<br&&11>=br),Au=" ",Eu=!1;function Su(e,t){switch(e){case"keyup":return Gp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var tr=!1;function Zp(e,t){switch(e){case"compositionend":return Cu(t);case"keypress":return t.which!==32?null:(Eu=!0,Au);case"textInput":return e=t.data,e===Au&&Eu?null:e;default:return null}}function Jp(e,t){if(tr)return e==="compositionend"||!Ss&&Su(e,t)?(e=mu(),Li=vs=ln=null,tr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return wu&&t.locale!=="ko"?null:t.data;default:return null}}var qp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ku(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!qp[e.type]:t==="textarea"}function Iu(e,t,n,i){Xa(i),t=Xi(t,"onChange"),0<t.length&&(n=new ys("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var zr=null,Xr=null;function _p(e){bu(e,0)}function Vi(e){var t=sr(e);if(On(t))return e}function $p(e,t){if(e==="change")return t}var Ru=!1;if(m){var Cs;if(m){var ks="oninput"in document;if(!ks){var Tu=document.createElement("div");Tu.setAttribute("oninput","return;"),ks=typeof Tu.oninput=="function"}Cs=ks}else Cs=!1;Ru=Cs&&(!document.documentMode||9<document.documentMode)}function ju(){zr&&(zr.detachEvent("onpropertychange",Pu),Xr=zr=null)}function Pu(e){if(e.propertyName==="value"&&Vi(Xr)){var t=[];Iu(t,Xr,e,is(e)),Ja(_p,t)}}function eh(e,t,n){e==="focusin"?(ju(),zr=t,Xr=n,zr.attachEvent("onpropertychange",Pu)):e==="focusout"&&ju()}function th(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vi(Xr)}function nh(e,t){if(e==="click")return Vi(t)}function rh(e,t){if(e==="input"||e==="change")return Vi(t)}function ih(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ct=typeof Object.is=="function"?Object.is:ih;function Gr(e,t){if(Ct(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!g.call(t,o)||!Ct(e[o],t[o]))return!1}return!0}function Ou(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Du(e,t){var n=Ou(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ou(n)}}function Nu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Nu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Mu(){for(var e=window,t=$t();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=$t(e.document)}return t}function Is(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function lh(e){var t=Mu(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Nu(n.ownerDocument.documentElement,n)){if(i!==null&&Is(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,u=Math.min(i.start,o);i=i.end===void 0?u:Math.min(i.end,o),!e.extend&&u>i&&(o=i,i=u,u=o),o=Du(n,u);var p=Du(n,i);o&&p&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==p.node||e.focusOffset!==p.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),u>i?(e.addRange(t),e.extend(p.node,p.offset)):(t.setEnd(p.node,p.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sh=m&&"documentMode"in document&&11>=document.documentMode,nr=null,Rs=null,Kr=null,Ts=!1;function Bu(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ts||nr==null||nr!==$t(i)||(i=nr,"selectionStart"in i&&Is(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Kr&&Gr(Kr,i)||(Kr=i,i=Xi(Rs,"onSelect"),0<i.length&&(t=new ys("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=nr)))}function Yi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var rr={animationend:Yi("Animation","AnimationEnd"),animationiteration:Yi("Animation","AnimationIteration"),animationstart:Yi("Animation","AnimationStart"),transitionend:Yi("Transition","TransitionEnd")},js={},Hu={};m&&(Hu=document.createElement("div").style,"AnimationEvent"in window||(delete rr.animationend.animation,delete rr.animationiteration.animation,delete rr.animationstart.animation),"TransitionEvent"in window||delete rr.transitionend.transition);function bi(e){if(js[e])return js[e];if(!rr[e])return e;var t=rr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Hu)return js[e]=t[n];return e}var Fu=bi("animationend"),Lu=bi("animationiteration"),Qu=bi("animationstart"),Uu=bi("transitionend"),Wu=new Map,Vu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sn(e,t){Wu.set(e,t),f(t,[e])}for(var Ps=0;Ps<Vu.length;Ps++){var Os=Vu[Ps],oh=Os.toLowerCase(),ah=Os[0].toUpperCase()+Os.slice(1);sn(oh,"on"+ah)}sn(Fu,"onAnimationEnd"),sn(Lu,"onAnimationIteration"),sn(Qu,"onAnimationStart"),sn("dblclick","onDoubleClick"),sn("focusin","onFocus"),sn("focusout","onBlur"),sn(Uu,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),f("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),f("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),f("onBeforeInput",["compositionend","keypress","textInput","paste"]),f("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zr));function Yu(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,op(i,t,void 0,e),e.currentTarget=null}function bu(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],o=i.event;i=i.listeners;e:{var u=void 0;if(t)for(var p=i.length-1;0<=p;p--){var y=i[p],S=y.instance,N=y.currentTarget;if(y=y.listener,S!==u&&o.isPropagationStopped())break e;Yu(o,y,N),u=S}else for(p=0;p<i.length;p++){if(y=i[p],S=y.instance,N=y.currentTarget,y=y.listener,S!==u&&o.isPropagationStopped())break e;Yu(o,y,N),u=S}}}if(Ti)throw e=as,Ti=!1,as=null,e}function ke(e,t){var n=t[Qs];n===void 0&&(n=t[Qs]=new Set);var i=e+"__bubble";n.has(i)||(zu(t,e,2,!1),n.add(i))}function Ds(e,t,n){var i=0;t&&(i|=4),zu(n,e,i,t)}var zi="_reactListening"+Math.random().toString(36).slice(2);function Jr(e){if(!e[zi]){e[zi]=!0,a.forEach(function(n){n!=="selectionchange"&&(uh.has(n)||Ds(n,!1,e),Ds(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[zi]||(t[zi]=!0,Ds("selectionchange",!1,t))}}function zu(e,t,n,i){switch(hu(t)){case 1:var o=Sp;break;case 4:o=Cp;break;default:o=ms}n=o.bind(null,t,n,e),o=void 0,!os||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Ns(e,t,n,i,o){var u=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var p=i.tag;if(p===3||p===4){var y=i.stateNode.containerInfo;if(y===o||y.nodeType===8&&y.parentNode===o)break;if(p===4)for(p=i.return;p!==null;){var S=p.tag;if((S===3||S===4)&&(S=p.stateNode.containerInfo,S===o||S.nodeType===8&&S.parentNode===o))return;p=p.return}for(;y!==null;){if(p=Mn(y),p===null)return;if(S=p.tag,S===5||S===6){i=u=p;continue e}y=y.parentNode}}i=i.return}Ja(function(){var N=u,X=is(n),K=[];e:{var b=Wu.get(e);if(b!==void 0){var q=ys,te=e;switch(e){case"keypress":if(Qi(n)===0)break e;case"keydown":case"keyup":q=Qp;break;case"focusin":te="focus",q=As;break;case"focusout":te="blur",q=As;break;case"beforeblur":case"afterblur":q=As;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=vu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=Rp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Vp;break;case Fu:case Lu:case Qu:q=Pp;break;case Uu:q=bp;break;case"scroll":q=kp;break;case"wheel":q=Xp;break;case"copy":case"cut":case"paste":q=Dp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=xu}var ne=(t&4)!==0,Ne=!ne&&e==="scroll",T=ne?b!==null?b+"Capture":null:b;ne=[];for(var C=N,O;C!==null;){O=C;var Z=O.stateNode;if(O.tag===5&&Z!==null&&(O=Z,T!==null&&(Z=Dr(C,T),Z!=null&&ne.push(qr(C,Z,O)))),Ne)break;C=C.return}0<ne.length&&(b=new q(b,te,null,n,X),K.push({event:b,listeners:ne}))}}if((t&7)===0){e:{if(b=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",b&&n!==rs&&(te=n.relatedTarget||n.fromElement)&&(Mn(te)||te[Qt]))break e;if((q||b)&&(b=X.window===X?X:(b=X.ownerDocument)?b.defaultView||b.parentWindow:window,q?(te=n.relatedTarget||n.toElement,q=N,te=te?Mn(te):null,te!==null&&(Ne=Nn(te),te!==Ne||te.tag!==5&&te.tag!==6)&&(te=null)):(q=null,te=N),q!==te)){if(ne=vu,Z="onMouseLeave",T="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(ne=xu,Z="onPointerLeave",T="onPointerEnter",C="pointer"),Ne=q==null?b:sr(q),O=te==null?b:sr(te),b=new ne(Z,C+"leave",q,n,X),b.target=Ne,b.relatedTarget=O,Z=null,Mn(X)===N&&(ne=new ne(T,C+"enter",te,n,X),ne.target=O,ne.relatedTarget=Ne,Z=ne),Ne=Z,q&&te)t:{for(ne=q,T=te,C=0,O=ne;O;O=ir(O))C++;for(O=0,Z=T;Z;Z=ir(Z))O++;for(;0<C-O;)ne=ir(ne),C--;for(;0<O-C;)T=ir(T),O--;for(;C--;){if(ne===T||T!==null&&ne===T.alternate)break t;ne=ir(ne),T=ir(T)}ne=null}else ne=null;q!==null&&Xu(K,b,q,ne,!1),te!==null&&Ne!==null&&Xu(K,Ne,te,ne,!0)}}e:{if(b=N?sr(N):window,q=b.nodeName&&b.nodeName.toLowerCase(),q==="select"||q==="input"&&b.type==="file")var le=$p;else if(ku(b))if(Ru)le=rh;else{le=th;var ae=eh}else(q=b.nodeName)&&q.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(le=nh);if(le&&(le=le(e,N))){Iu(K,le,n,X);break e}ae&&ae(e,b,N),e==="focusout"&&(ae=b._wrapperState)&&ae.controlled&&b.type==="number"&&_l(b,"number",b.value)}switch(ae=N?sr(N):window,e){case"focusin":(ku(ae)||ae.contentEditable==="true")&&(nr=ae,Rs=N,Kr=null);break;case"focusout":Kr=Rs=nr=null;break;case"mousedown":Ts=!0;break;case"contextmenu":case"mouseup":case"dragend":Ts=!1,Bu(K,n,X);break;case"selectionchange":if(sh)break;case"keydown":case"keyup":Bu(K,n,X)}var ue;if(Ss)e:{switch(e){case"compositionstart":var fe="onCompositionStart";break e;case"compositionend":fe="onCompositionEnd";break e;case"compositionupdate":fe="onCompositionUpdate";break e}fe=void 0}else tr?Su(e,n)&&(fe="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(fe="onCompositionStart");fe&&(wu&&n.locale!=="ko"&&(tr||fe!=="onCompositionStart"?fe==="onCompositionEnd"&&tr&&(ue=mu()):(ln=X,vs="value"in ln?ln.value:ln.textContent,tr=!0)),ae=Xi(N,fe),0<ae.length&&(fe=new yu(fe,e,null,n,X),K.push({event:fe,listeners:ae}),ue?fe.data=ue:(ue=Cu(n),ue!==null&&(fe.data=ue)))),(ue=Kp?Zp(e,n):Jp(e,n))&&(N=Xi(N,"onBeforeInput"),0<N.length&&(X=new yu("onBeforeInput","beforeinput",null,n,X),K.push({event:X,listeners:N}),X.data=ue))}bu(K,t)})}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xi(e,t){for(var n=t+"Capture",i=[];e!==null;){var o=e,u=o.stateNode;o.tag===5&&u!==null&&(o=u,u=Dr(e,n),u!=null&&i.unshift(qr(e,u,o)),u=Dr(e,t),u!=null&&i.push(qr(e,u,o))),e=e.return}return i}function ir(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Xu(e,t,n,i,o){for(var u=t._reactName,p=[];n!==null&&n!==i;){var y=n,S=y.alternate,N=y.stateNode;if(S!==null&&S===i)break;y.tag===5&&N!==null&&(y=N,o?(S=Dr(n,u),S!=null&&p.unshift(qr(n,S,y))):o||(S=Dr(n,u),S!=null&&p.push(qr(n,S,y)))),n=n.return}p.length!==0&&e.push({event:t,listeners:p})}var ch=/\r\n?/g,fh=/\u0000|\uFFFD/g;function Gu(e){return(typeof e=="string"?e:""+e).replace(ch,`
45: `).replace(fh,"")}function Gi(e,t,n){if(t=Gu(t),Gu(e)!==t&&n)throw Error(r(425))}function Ki(){}var Ms=null,Bs=null;function Hs(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Fs=typeof setTimeout=="function"?setTimeout:void 0,dh=typeof clearTimeout=="function"?clearTimeout:void 0,Ku=typeof Promise=="function"?Promise:void 0,ph=typeof queueMicrotask=="function"?queueMicrotask:typeof Ku<"u"?function(e){return Ku.resolve(null).then(e).catch(hh)}:Fs;function hh(e){setTimeout(function(){throw e})}function Ls(e,t){var n=t,i=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(i===0){e.removeChild(o),Wr(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=o}while(n);Wr(t)}function on(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Zu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var lr=Math.random().toString(36).slice(2),Ot="__reactFiber$"+lr,_r="__reactProps$"+lr,Qt="__reactContainer$"+lr,Qs="__reactEvents$"+lr,mh="__reactListeners$"+lr,gh="__reactHandles$"+lr;function Mn(e){var t=e[Ot];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Qt]||n[Ot]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Zu(e);e!==null;){if(n=e[Ot])return n;e=Zu(e)}return t}e=n,n=e.parentNode}return null}function $r(e){return e=e[Ot]||e[Qt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function sr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(r(33))}function Zi(e){return e[_r]||null}var Us=[],or=-1;function an(e){return{current:e}}function Ie(e){0>or||(e.current=Us[or],Us[or]=null,or--)}function Ce(e,t){or++,Us[or]=e.current,e.current=t}var un={},Ge=an(un),nt=an(!1),Bn=un;function ar(e,t){var n=e.type.contextTypes;if(!n)return un;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var o={},u;for(u in n)o[u]=t[u];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function rt(e){return e=e.childContextTypes,e!=null}function Ji(){Ie(nt),Ie(Ge)}function Ju(e,t,n){if(Ge.current!==un)throw Error(r(168));Ce(Ge,t),Ce(nt,n)}function qu(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var o in i)if(!(o in t))throw Error(r(108,Ee(e)||"Unknown",o));return U({},n,i)}function qi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||un,Bn=Ge.current,Ce(Ge,e),Ce(nt,nt.current),!0}function _u(e,t,n){var i=e.stateNode;if(!i)throw Error(r(169));n?(e=qu(e,t,Bn),i.__reactInternalMemoizedMergedChildContext=e,Ie(nt),Ie(Ge),Ce(Ge,e)):Ie(nt),Ce(nt,n)}var Ut=null,_i=!1,Ws=!1;function $u(e){Ut===null?Ut=[e]:Ut.push(e)}function vh(e){_i=!0,$u(e)}function cn(){if(!Ws&&Ut!==null){Ws=!0;var e=0,t=Ae;try{var n=Ut;for(Ae=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}Ut=null,_i=!1}catch(o){throw Ut!==null&&(Ut=Ut.slice(e+1)),tu(us,cn),o}finally{Ae=t,Ws=!1}}return null}var ur=[],cr=0,$i=null,el=0,mt=[],gt=0,Hn=null,Wt=1,Vt="";function Fn(e,t){ur[cr++]=el,ur[cr++]=$i,$i=e,el=t}function ec(e,t,n){mt[gt++]=Wt,mt[gt++]=Vt,mt[gt++]=Hn,Hn=e;var i=Wt;e=Vt;var o=32-St(i)-1;i&=~(1<<o),n+=1;var u=32-St(t)+o;if(30<u){var p=o-o%5;u=(i&(1<<p)-1).toString(32),i>>=p,o-=p,Wt=1<<32-St(t)+o|n<<o|i,Vt=u+e}else Wt=1<<u|n<<o|i,Vt=e}function Vs(e){e.return!==null&&(Fn(e,1),ec(e,1,0))}function Ys(e){for(;e===$i;)$i=ur[--cr],ur[cr]=null,el=ur[--cr],ur[cr]=null;for(;e===Hn;)Hn=mt[--gt],mt[gt]=null,Vt=mt[--gt],mt[gt]=null,Wt=mt[--gt],mt[gt]=null}var ct=null,ft=null,Te=!1,kt=null;function tc(e,t){var n=wt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function nc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ct=e,ft=on(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ct=e,ft=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Hn!==null?{id:Wt,overflow:Vt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=wt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ct=e,ft=null,!0):!1;default:return!1}}function bs(e){return(e.mode&1)!==0&&(e.flags&128)===0}function zs(e){if(Te){var t=ft;if(t){var n=t;if(!nc(e,t)){if(bs(e))throw Error(r(418));t=on(n.nextSibling);var i=ct;t&&nc(e,t)?tc(i,n):(e.flags=e.flags&-4097|2,Te=!1,ct=e)}}else{if(bs(e))throw Error(r(418));e.flags=e.flags&-4097|2,Te=!1,ct=e}}}function rc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ct=e}function tl(e){if(e!==ct)return!1;if(!Te)return rc(e),Te=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Hs(e.type,e.memoizedProps)),t&&(t=ft)){if(bs(e))throw ic(),Error(r(418));for(;t;)tc(e,t),t=on(t.nextSibling)}if(rc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ft=on(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ft=null}}else ft=ct?on(e.stateNode.nextSibling):null;return!0}function ic(){for(var e=ft;e;)e=on(e.nextSibling)}function fr(){ft=ct=null,Te=!1}function Xs(e){kt===null?kt=[e]:kt.push(e)}var yh=L.ReactCurrentBatchConfig;function ei(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(r(309));var i=n.stateNode}if(!i)throw Error(r(147,e));var o=i,u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(p){var y=o.refs;p===null?delete y[u]:y[u]=p},t._stringRef=u,t)}if(typeof e!="string")throw Error(r(284));if(!n._owner)throw Error(r(290,e))}return e}function nl(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function lc(e){var t=e._init;return t(e._payload)}function sc(e){function t(T,C){if(e){var O=T.deletions;O===null?(T.deletions=[C],T.flags|=16):O.push(C)}}function n(T,C){if(!e)return null;for(;C!==null;)t(T,C),C=C.sibling;return null}function i(T,C){for(T=new Map;C!==null;)C.key!==null?T.set(C.key,C):T.set(C.index,C),C=C.sibling;return T}function o(T,C){return T=yn(T,C),T.index=0,T.sibling=null,T}function u(T,C,O){return T.index=O,e?(O=T.alternate,O!==null?(O=O.index,O<C?(T.flags|=2,C):O):(T.flags|=2,C)):(T.flags|=1048576,C)}function p(T){return e&&T.alternate===null&&(T.flags|=2),T}function y(T,C,O,Z){return C===null||C.tag!==6?(C=Lo(O,T.mode,Z),C.return=T,C):(C=o(C,O),C.return=T,C)}function S(T,C,O,Z){var le=O.type;return le===B?X(T,C,O.props.children,Z,O.key):C!==null&&(C.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===ie&&lc(le)===C.type)?(Z=o(C,O.props),Z.ref=ei(T,C,O),Z.return=T,Z):(Z=Il(O.type,O.key,O.props,null,T.mode,Z),Z.ref=ei(T,C,O),Z.return=T,Z)}function N(T,C,O,Z){return C===null||C.tag!==4||C.stateNode.containerInfo!==O.containerInfo||C.stateNode.implementation!==O.implementation?(C=Qo(O,T.mode,Z),C.return=T,C):(C=o(C,O.children||[]),C.return=T,C)}function X(T,C,O,Z,le){return C===null||C.tag!==7?(C=zn(O,T.mode,Z,le),C.return=T,C):(C=o(C,O),C.return=T,C)}function K(T,C,O){if(typeof C=="string"&&C!==""||typeof C=="number")return C=Lo(""+C,T.mode,O),C.return=T,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case z:return O=Il(C.type,C.key,C.props,null,T.mode,O),O.ref=ei(T,null,C),O.return=T,O;case D:return C=Qo(C,T.mode,O),C.return=T,C;case ie:var Z=C._init;return K(T,Z(C._payload),O)}if(jr(C)||ee(C))return C=zn(C,T.mode,O,null),C.return=T,C;nl(T,C)}return null}function b(T,C,O,Z){var le=C!==null?C.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return le!==null?null:y(T,C,""+O,Z);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case z:return O.key===le?S(T,C,O,Z):null;case D:return O.key===le?N(T,C,O,Z):null;case ie:return le=O._init,b(T,C,le(O._payload),Z)}if(jr(O)||ee(O))return le!==null?null:X(T,C,O,Z,null);nl(T,O)}return null}function q(T,C,O,Z,le){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return T=T.get(O)||null,y(C,T,""+Z,le);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case z:return T=T.get(Z.key===null?O:Z.key)||null,S(C,T,Z,le);case D:return T=T.get(Z.key===null?O:Z.key)||null,N(C,T,Z,le);case ie:var ae=Z._init;return q(T,C,O,ae(Z._payload),le)}if(jr(Z)||ee(Z))return T=T.get(O)||null,X(C,T,Z,le,null);nl(C,Z)}return null}function te(T,C,O,Z){for(var le=null,ae=null,ue=C,fe=C=0,Ue=null;ue!==null&&fe<O.length;fe++){ue.index>fe?(Ue=ue,ue=null):Ue=ue.sibling;var we=b(T,ue,O[fe],Z);if(we===null){ue===null&&(ue=Ue);break}e&&ue&&we.alternate===null&&t(T,ue),C=u(we,C,fe),ae===null?le=we:ae.sibling=we,ae=we,ue=Ue}if(fe===O.length)return n(T,ue),Te&&Fn(T,fe),le;if(ue===null){for(;fe<O.length;fe++)ue=K(T,O[fe],Z),ue!==null&&(C=u(ue,C,fe),ae===null?le=ue:ae.sibling=ue,ae=ue);return Te&&Fn(T,fe),le}for(ue=i(T,ue);fe<O.length;fe++)Ue=q(ue,T,fe,O[fe],Z),Ue!==null&&(e&&Ue.alternate!==null&&ue.delete(Ue.key===null?fe:Ue.key),C=u(Ue,C,fe),ae===null?le=Ue:ae.sibling=Ue,ae=Ue);return e&&ue.forEach(function(xn){return t(T,xn)}),Te&&Fn(T,fe),le}function ne(T,C,O,Z){var le=ee(O);if(typeof le!="function")throw Error(r(150));if(O=le.call(O),O==null)throw Error(r(151));for(var ae=le=null,ue=C,fe=C=0,Ue=null,we=O.next();ue!==null&&!we.done;fe++,we=O.next()){ue.index>fe?(Ue=ue,ue=null):Ue=ue.sibling;var xn=b(T,ue,we.value,Z);if(xn===null){ue===null&&(ue=Ue);break}e&&ue&&xn.alternate===null&&t(T,ue),C=u(xn,C,fe),ae===null?le=xn:ae.sibling=xn,ae=xn,ue=Ue}if(we.done)return n(T,ue),Te&&Fn(T,fe),le;if(ue===null){for(;!we.done;fe++,we=O.next())we=K(T,we.value,Z),we!==null&&(C=u(we,C,fe),ae===null?le=we:ae.sibling=we,ae=we);return Te&&Fn(T,fe),le}for(ue=i(T,ue);!we.done;fe++,we=O.next())we=q(ue,T,fe,we.value,Z),we!==null&&(e&&we.alternate!==null&&ue.delete(we.key===null?fe:we.key),C=u(we,C,fe),ae===null?le=we:ae.sibling=we,ae=we);return e&&ue.forEach(function(qh){return t(T,qh)}),Te&&Fn(T,fe),le}function Ne(T,C,O,Z){if(typeof O=="object"&&O!==null&&O.type===B&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case z:e:{for(var le=O.key,ae=C;ae!==null;){if(ae.key===le){if(le=O.type,le===B){if(ae.tag===7){n(T,ae.sibling),C=o(ae,O.props.children),C.return=T,T=C;break e}}else if(ae.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===ie&&lc(le)===ae.type){n(T,ae.sibling),C=o(ae,O.props),C.ref=ei(T,ae,O),C.return=T,T=C;break e}n(T,ae);break}else t(T,ae);ae=ae.sibling}O.type===B?(C=zn(O.props.children,T.mode,Z,O.key),C.return=T,T=C):(Z=Il(O.type,O.key,O.props,null,T.mode,Z),Z.ref=ei(T,C,O),Z.return=T,T=Z)}return p(T);case D:e:{for(ae=O.key;C!==null;){if(C.key===ae)if(C.tag===4&&C.stateNode.containerInfo===O.containerInfo&&C.stateNode.implementation===O.implementation){n(T,C.sibling),C=o(C,O.children||[]),C.return=T,T=C;break e}else{n(T,C);break}else t(T,C);C=C.sibling}C=Qo(O,T.mode,Z),C.return=T,T=C}return p(T);case ie:return ae=O._init,Ne(T,C,ae(O._payload),Z)}if(jr(O))return te(T,C,O,Z);if(ee(O))return ne(T,C,O,Z);nl(T,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,C!==null&&C.tag===6?(n(T,C.sibling),C=o(C,O),C.return=T,T=C):(n(T,C),C=Lo(O,T.mode,Z),C.return=T,T=C),p(T)):n(T,C)}return Ne}var dr=sc(!0),oc=sc(!1),rl=an(null),il=null,pr=null,Gs=null;function Ks(){Gs=pr=il=null}function Zs(e){var t=rl.current;Ie(rl),e._currentValue=t}function Js(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function hr(e,t){il=e,Gs=pr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(it=!0),e.firstContext=null)}function vt(e){var t=e._currentValue;if(Gs!==e)if(e={context:e,memoizedValue:t,next:null},pr===null){if(il===null)throw Error(r(308));pr=e,il.dependencies={lanes:0,firstContext:e}}else pr=pr.next=e;return t}var Ln=null;function qs(e){Ln===null?Ln=[e]:Ln.push(e)}function ac(e,t,n,i){var o=t.interleaved;return o===null?(n.next=n,qs(t)):(n.next=o.next,o.next=n),t.interleaved=n,Yt(e,i)}function Yt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var fn=!1;function _s(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function dn(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(ve&2)!==0){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,Yt(e,n)}return o=i.interleaved,o===null?(t.next=t,qs(i)):(t.next=o.next,o.next=t),i.interleaved=t,Yt(e,n)}function ll(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,ds(e,n)}}function cc(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var p={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};u===null?o=u=p:u=u.next=p,n=n.next}while(n!==null);u===null?o=u=t:u=u.next=t}else o=u=t;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:u,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sl(e,t,n,i){var o=e.updateQueue;fn=!1;var u=o.firstBaseUpdate,p=o.lastBaseUpdate,y=o.shared.pending;if(y!==null){o.shared.pending=null;var S=y,N=S.next;S.next=null,p===null?u=N:p.next=N,p=S;var X=e.alternate;X!==null&&(X=X.updateQueue,y=X.lastBaseUpdate,y!==p&&(y===null?X.firstBaseUpdate=N:y.next=N,X.lastBaseUpdate=S))}if(u!==null){var K=o.baseState;p=0,X=N=S=null,y=u;do{var b=y.lane,q=y.eventTime;if((i&b)===b){X!==null&&(X=X.next={eventTime:q,lane:0,tag:y.tag,payload:y.payload,callback:y.callback,next:null});e:{var te=e,ne=y;switch(b=t,q=n,ne.tag){case 1:if(te=ne.payload,typeof te=="function"){K=te.call(q,K,b);break e}K=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=ne.payload,b=typeof te=="function"?te.call(q,K,b):te,b==null)break e;K=U({},K,b);break e;case 2:fn=!0}}y.callback!==null&&y.lane!==0&&(e.flags|=64,b=o.effects,b===null?o.effects=[y]:b.push(y))}else q={eventTime:q,lane:b,tag:y.tag,payload:y.payload,callback:y.callback,next:null},X===null?(N=X=q,S=K):X=X.next=q,p|=b;if(y=y.next,y===null){if(y=o.shared.pending,y===null)break;b=y,y=b.next,b.next=null,o.lastBaseUpdate=b,o.shared.pending=null}}while(!0);if(X===null&&(S=K),o.baseState=S,o.firstBaseUpdate=N,o.lastBaseUpdate=X,t=o.shared.interleaved,t!==null){o=t;do p|=o.lane,o=o.next;while(o!==t)}else u===null&&(o.shared.lanes=0);Wn|=p,e.lanes=p,e.memoizedState=K}}function fc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],o=i.callback;if(o!==null){if(i.callback=null,i=n,typeof o!="function")throw Error(r(191,o));o.call(i)}}}var ti={},Dt=an(ti),ni=an(ti),ri=an(ti);function Qn(e){if(e===ti)throw Error(r(174));return e}function $s(e,t){switch(Ce(ri,t),Ce(ni,e),Ce(Dt,ti),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:es(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=es(t,e)}Ie(Dt),Ce(Dt,t)}function mr(){Ie(Dt),Ie(ni),Ie(ri)}function dc(e){Qn(ri.current);var t=Qn(Dt.current),n=es(t,e.type);t!==n&&(Ce(ni,e),Ce(Dt,n))}function eo(e){ni.current===e&&(Ie(Dt),Ie(ni))}var je=an(0);function ol(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var al=L.ReactCurrentDispatcher,ro=L.ReactCurrentBatchConfig,Un=0,Pe=null,He=null,Le=null,ul=!1,ii=!1,li=0,xh=0;function Ke(){throw Error(r(321))}function io(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ct(e[n],t[n]))return!1;return!0}function lo(e,t,n,i,o,u){if(Un=u,Pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,al.current=e===null||e.memoizedState===null?Sh:Ch,e=n(i,o),ii){u=0;do{if(ii=!1,li=0,25<=u)throw Error(r(301));u+=1,Le=He=null,t.updateQueue=null,al.current=kh,e=n(i,o)}while(ii)}if(al.current=dl,t=He!==null&&He.next!==null,Un=0,Le=He=Pe=null,ul=!1,t)throw Error(r(300));return e}function so(){var e=li!==0;return li=0,e}function Nt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?Pe.memoizedState=Le=e:Le=Le.next=e,Le}function yt(){if(He===null){var e=Pe.alternate;e=e!==null?e.memoizedState:null}else e=He.next;var t=Le===null?Pe.memoizedState:Le.next;if(t!==null)Le=t,He=e;else{if(e===null)throw Error(r(310));He=e,e={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Le===null?Pe.memoizedState=Le=e:Le=Le.next=e}return Le}function si(e,t){return typeof t=="function"?t(e):t}function oo(e){var t=yt(),n=t.queue;if(n===null)throw Error(r(311));n.lastRenderedReducer=e;var i=He,o=i.baseQueue,u=n.pending;if(u!==null){if(o!==null){var p=o.next;o.next=u.next,u.next=p}i.baseQueue=o=u,n.pending=null}if(o!==null){u=o.next,i=i.baseState;var y=p=null,S=null,N=u;do{var X=N.lane;if((Un&X)===X)S!==null&&(S=S.next={lane:0,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null}),i=N.hasEagerState?N.eagerState:e(i,N.action);else{var K={lane:X,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null};S===null?(y=S=K,p=i):S=S.next=K,Pe.lanes|=X,Wn|=X}N=N.next}while(N!==null&&N!==u);S===null?p=i:S.next=y,Ct(i,t.memoizedState)||(it=!0),t.memoizedState=i,t.baseState=p,t.baseQueue=S,n.lastRenderedState=i}if(e=n.interleaved,e!==null){o=e;do u=o.lane,Pe.lanes|=u,Wn|=u,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ao(e){var t=yt(),n=t.queue;if(n===null)throw Error(r(311));n.lastRenderedReducer=e;var i=n.dispatch,o=n.pending,u=t.memoizedState;if(o!==null){n.pending=null;var p=o=o.next;do u=e(u,p.action),p=p.next;while(p!==o);Ct(u,t.memoizedState)||(it=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),n.lastRenderedState=u}return[u,i]}function pc(){}function hc(e,t){var n=Pe,i=yt(),o=t(),u=!Ct(i.memoizedState,o);if(u&&(i.memoizedState=o,it=!0),i=i.queue,uo(vc.bind(null,n,i,e),[e]),i.getSnapshot!==t||u||Le!==null&&Le.memoizedState.tag&1){if(n.flags|=2048,oi(9,gc.bind(null,n,i,o,t),void 0,null),Qe===null)throw Error(r(349));(Un&30)!==0||mc(n,t,o)}return o}function mc(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function gc(e,t,n,i){t.value=n,t.getSnapshot=i,yc(t)&&xc(e)}function vc(e,t,n){return n(function(){yc(t)&&xc(e)})}function yc(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ct(e,n)}catch{return!0}}function xc(e){var t=Yt(e,1);t!==null&&jt(t,e,1,-1)}function wc(e){var t=Nt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:e},t.queue=e,e=e.dispatch=Eh.bind(null,Pe,e),[t.memoizedState,e]}function oi(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function Ac(){return yt().memoizedState}function cl(e,t,n,i){var o=Nt();Pe.flags|=e,o.memoizedState=oi(1|t,n,void 0,i===void 0?null:i)}function fl(e,t,n,i){var o=yt();i=i===void 0?null:i;var u=void 0;if(He!==null){var p=He.memoizedState;if(u=p.destroy,i!==null&&io(i,p.deps)){o.memoizedState=oi(t,n,u,i);return}}Pe.flags|=e,o.memoizedState=oi(1|t,n,u,i)}function Ec(e,t){return cl(8390656,8,e,t)}function uo(e,t){return fl(2048,8,e,t)}function Sc(e,t){return fl(4,2,e,t)}function Cc(e,t){return fl(4,4,e,t)}function kc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ic(e,t,n){return n=n!=null?n.concat([e]):null,fl(4,4,kc.bind(null,t,e),n)}function co(){}function Rc(e,t){var n=yt();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&io(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Tc(e,t){var n=yt();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&io(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function jc(e,t,n){return(Un&21)===0?(e.baseState&&(e.baseState=!1,it=!0),e.memoizedState=n):(Ct(n,t)||(n=lu(),Pe.lanes|=n,Wn|=n,e.baseState=!0),t)}function wh(e,t){var n=Ae;Ae=n!==0&&4>n?n:4,e(!0);var i=ro.transition;ro.transition={};try{e(!1),t()}finally{Ae=n,ro.transition=i}}function Pc(){return yt().memoizedState}function Ah(e,t,n){var i=gn(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Oc(e))Dc(t,n);else if(n=ac(e,t,n,i),n!==null){var o=$e();jt(n,e,i,o),Nc(n,t,i)}}function Eh(e,t,n){var i=gn(e),o={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Oc(e))Dc(t,o);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var p=t.lastRenderedState,y=u(p,n);if(o.hasEagerState=!0,o.eagerState=y,Ct(y,p)){var S=t.interleaved;S===null?(o.next=o,qs(t)):(o.next=S.next,S.next=o),t.interleaved=o;return}}catch{}finally{}n=ac(e,t,o,i),n!==null&&(o=$e(),jt(n,e,i,o),Nc(n,t,i))}}function Oc(e){var t=e.alternate;return e===Pe||t!==null&&t===Pe}function Dc(e,t){ii=ul=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Nc(e,t,n){if((n&4194240)!==0){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,ds(e,n)}}var dl={readContext:vt,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useInsertionEffect:Ke,useLayoutEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useMutableSource:Ke,useSyncExternalStore:Ke,useId:Ke,unstable_isNewReconciler:!1},Sh={readContext:vt,useCallback:function(e,t){return Nt().memoizedState=[e,t===void 0?null:t],e},useContext:vt,useEffect:Ec,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,cl(4194308,4,kc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return cl(4194308,4,e,t)},useInsertionEffect:function(e,t){return cl(4,2,e,t)},useMemo:function(e,t){var n=Nt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Nt();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Ah.bind(null,Pe,e),[i.memoizedState,e]},useRef:function(e){var t=Nt();return e={current:e},t.memoizedState=e},useState:wc,useDebugValue:co,useDeferredValue:function(e){return Nt().memoizedState=e},useTransition:function(){var e=wc(!1),t=e[0];return e=wh.bind(null,e[1]),Nt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=Pe,o=Nt();if(Te){if(n===void 0)throw Error(r(407));n=n()}else{if(n=t(),Qe===null)throw Error(r(349));(Un&30)!==0||mc(i,t,n)}o.memoizedState=n;var u={value:n,getSnapshot:t};return o.queue=u,Ec(vc.bind(null,i,u,e),[e]),i.flags|=2048,oi(9,gc.bind(null,i,u,n,t),void 0,null),n},useId:function(){var e=Nt(),t=Qe.identifierPrefix;if(Te){var n=Vt,i=Wt;n=(i&~(1<<32-St(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=li++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=xh++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ch={readContext:vt,useCallback:Rc,useContext:vt,useEffect:uo,useImperativeHandle:Ic,useInsertionEffect:Sc,useLayoutEffect:Cc,useMemo:Tc,useReducer:oo,useRef:Ac,useState:function(){return oo(si)},useDebugValue:co,useDeferredValue:function(e){var t=yt();return jc(t,He.memoizedState,e)},useTransition:function(){var e=oo(si)[0],t=yt().memoizedState;return[e,t]},useMutableSource:pc,useSyncExternalStore:hc,useId:Pc,unstable_isNewReconciler:!1},kh={readContext:vt,useCallback:Rc,useContext:vt,useEffect:uo,useImperativeHandle:Ic,useInsertionEffect:Sc,useLayoutEffect:Cc,useMemo:Tc,useReducer:ao,useRef:Ac,useState:function(){return ao(si)},useDebugValue:co,useDeferredValue:function(e){var t=yt();return He===null?t.memoizedState=e:jc(t,He.memoizedState,e)},useTransition:function(){var e=ao(si)[0],t=yt().memoizedState;return[e,t]},useMutableSource:pc,useSyncExternalStore:hc,useId:Pc,unstable_isNewReconciler:!1};function It(e,t){if(e&&e.defaultProps){t=U({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function fo(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:U({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var pl={isMounted:function(e){return(e=e._reactInternals)?Nn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=$e(),o=gn(e),u=bt(i,o);u.payload=t,n!=null&&(u.callback=n),t=dn(e,u,o),t!==null&&(jt(t,e,o,i),ll(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=$e(),o=gn(e),u=bt(i,o);u.tag=1,u.payload=t,n!=null&&(u.callback=n),t=dn(e,u,o),t!==null&&(jt(t,e,o,i),ll(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=$e(),i=gn(e),o=bt(n,i);o.tag=2,t!=null&&(o.callback=t),t=dn(e,o,i),t!==null&&(jt(t,e,i,n),ll(t,e,i))}};function Mc(e,t,n,i,o,u,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,u,p):t.prototype&&t.prototype.isPureReactComponent?!Gr(n,i)||!Gr(o,u):!0}function Bc(e,t,n){var i=!1,o=un,u=t.contextType;return typeof u=="object"&&u!==null?u=vt(u):(o=rt(t)?Bn:Ge.current,i=t.contextTypes,u=(i=i!=null)?ar(e,o):un),t=new t(n,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=pl,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=u),t}function Hc(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&pl.enqueueReplaceState(t,t.state,null)}function po(e,t,n,i){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},_s(e);var u=t.contextType;typeof u=="object"&&u!==null?o.context=vt(u):(u=rt(t)?Bn:Ge.current,o.context=ar(e,u)),o.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(fo(e,t,u,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&pl.enqueueReplaceState(o,o.state,null),sl(e,n,o,i),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function gr(e,t){try{var n="",i=t;do n+=me(i),i=i.return;while(i);var o=n}catch(u){o=`
46: Error generating stack: `+u.message+`
47: `+u.stack}return{value:e,source:t,stack:o,digest:null}}function ho(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function mo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Ih=typeof WeakMap=="function"?WeakMap:Map;function Fc(e,t,n){n=bt(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){wl||(wl=!0,Po=i),mo(e,t)},n}function Lc(e,t,n){n=bt(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var o=t.value;n.payload=function(){return i(o)},n.callback=function(){mo(e,t)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(n.callback=function(){mo(e,t),typeof i!="function"&&(hn===null?hn=new Set([this]):hn.add(this));var p=t.stack;this.componentDidCatch(t.value,{componentStack:p!==null?p:""})}),n}function Qc(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Ih;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(n)||(o.add(n),e=Uh.bind(null,e,t,n),t.then(e,e))}function Uc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Wc(e,t,n,i,o){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=bt(-1,1),t.tag=2,dn(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var Rh=L.ReactCurrentOwner,it=!1;function _e(e,t,n,i){t.child=e===null?oc(t,null,n,i):dr(t,e.child,n,i)}function Vc(e,t,n,i,o){n=n.render;var u=t.ref;return hr(t,o),i=lo(e,t,n,i,u,o),n=so(),e!==null&&!it?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,zt(e,t,o)):(Te&&n&&Vs(t),t.flags|=1,_e(e,t,i,o),t.child)}function Yc(e,t,n,i,o){if(e===null){var u=n.type;return typeof u=="function"&&!Fo(u)&&u.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=u,bc(e,t,u,i,o)):(e=Il(n.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,(e.lanes&o)===0){var p=u.memoizedProps;if(n=n.compare,n=n!==null?n:Gr,n(p,i)&&e.ref===t.ref)return zt(e,t,o)}return t.flags|=1,e=yn(u,i),e.ref=t.ref,e.return=t,t.child=e}function bc(e,t,n,i,o){if(e!==null){var u=e.memoizedProps;if(Gr(u,i)&&e.ref===t.ref)if(it=!1,t.pendingProps=i=u,(e.lanes&o)!==0)(e.flags&131072)!==0&&(it=!0);else return t.lanes=e.lanes,zt(e,t,o)}return go(e,t,n,i,o)}function zc(e,t,n){var i=t.pendingProps,o=i.children,u=e!==null?e.memoizedState:null;if(i.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(yr,dt),dt|=n;else{if((n&1073741824)===0)return e=u!==null?u.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ce(yr,dt),dt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=u!==null?u.baseLanes:n,Ce(yr,dt),dt|=i}else u!==null?(i=u.baseLanes|n,t.memoizedState=null):i=n,Ce(yr,dt),dt|=i;return _e(e,t,o,n),t.child}function Xc(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function go(e,t,n,i,o){var u=rt(n)?Bn:Ge.current;return u=ar(t,u),hr(t,o),n=lo(e,t,n,i,u,o),i=so(),e!==null&&!it?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,zt(e,t,o)):(Te&&i&&Vs(t),t.flags|=1,_e(e,t,n,o),t.child)}function Gc(e,t,n,i,o){if(rt(n)){var u=!0;qi(t)}else u=!1;if(hr(t,o),t.stateNode===null)ml(e,t),Bc(t,n,i),po(t,n,i,o),i=!0;else if(e===null){var p=t.stateNode,y=t.memoizedProps;p.props=y;var S=p.context,N=n.contextType;typeof N=="object"&&N!==null?N=vt(N):(N=rt(n)?Bn:Ge.current,N=ar(t,N));var X=n.getDerivedStateFromProps,K=typeof X=="function"||typeof p.getSnapshotBeforeUpdate=="function";K||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(y!==i||S!==N)&&Hc(t,p,i,N),fn=!1;var b=t.memoizedState;p.state=b,sl(t,i,p,o),S=t.memoizedState,y!==i||b!==S||nt.current||fn?(typeof X=="function"&&(fo(t,n,X,i),S=t.memoizedState),(y=fn||Mc(t,n,y,i,b,S,N))?(K||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(t.flags|=4194308)):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=S),p.props=i,p.state=S,p.context=N,i=y):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{p=t.stateNode,uc(e,t),y=t.memoizedProps,N=t.type===t.elementType?y:It(t.type,y),p.props=N,K=t.pendingProps,b=p.context,S=n.contextType,typeof S=="object"&&S!==null?S=vt(S):(S=rt(n)?Bn:Ge.current,S=ar(t,S));var q=n.getDerivedStateFromProps;(X=typeof q=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(y!==K||b!==S)&&Hc(t,p,i,S),fn=!1,b=t.memoizedState,p.state=b,sl(t,i,p,o);var te=t.memoizedState;y!==K||b!==te||nt.current||fn?(typeof q=="function"&&(fo(t,n,q,i),te=t.memoizedState),(N=fn||Mc(t,n,N,i,b,te,S)||!1)?(X||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(i,te,S),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(i,te,S)),typeof p.componentDidUpdate=="function"&&(t.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof p.componentDidUpdate!="function"||y===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&b===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=te),p.props=i,p.state=te,p.context=S,i=N):(typeof p.componentDidUpdate!="function"||y===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&b===e.memoizedState||(t.flags|=1024),i=!1)}return vo(e,t,n,i,u,o)}function vo(e,t,n,i,o,u){Xc(e,t);var p=(t.flags&128)!==0;if(!i&&!p)return o&&_u(t,n,!1),zt(e,t,u);i=t.stateNode,Rh.current=t;var y=p&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&p?(t.child=dr(t,e.child,null,u),t.child=dr(t,null,y,u)):_e(e,t,y,u),t.memoizedState=i.state,o&&_u(t,n,!0),t.child}function Kc(e){var t=e.stateNode;t.pendingContext?Ju(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ju(e,t.context,!1),$s(e,t.containerInfo)}function Zc(e,t,n,i,o){return fr(),Xs(o),t.flags|=256,_e(e,t,n,i),t.child}var yo={dehydrated:null,treeContext:null,retryLane:0};function xo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Jc(e,t,n){var i=t.pendingProps,o=je.current,u=!1,p=(t.flags&128)!==0,y;if((y=p)||(y=e!==null&&e.memoizedState===null?!1:(o&2)!==0),y?(u=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Ce(je,o&1),e===null)return zs(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(p=i.children,e=i.fallback,u?(i=t.mode,u=t.child,p={mode:"hidden",children:p},(i&1)===0&&u!==null?(u.childLanes=0,u.pendingProps=p):u=Rl(p,i,0,null),e=zn(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=xo(n),t.memoizedState=yo,e):wo(t,p));if(o=e.memoizedState,o!==null&&(y=o.dehydrated,y!==null))return Th(e,t,p,i,y,o,n);if(u){u=i.fallback,p=t.mode,o=e.child,y=o.sibling;var S={mode:"hidden",children:i.children};return(p&1)===0&&t.child!==o?(i=t.child,i.childLanes=0,i.pendingProps=S,t.deletions=null):(i=yn(o,S),i.subtreeFlags=o.subtreeFlags&14680064),y!==null?u=yn(y,u):(u=zn(u,p,n,null),u.flags|=2),u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,p=e.child.memoizedState,p=p===null?xo(n):{baseLanes:p.baseLanes|n,cachePool:null,transitions:p.transitions},u.memoizedState=p,u.childLanes=e.childLanes&~n,t.memoizedState=yo,i}return u=e.child,e=u.sibling,i=yn(u,{mode:"visible",children:i.children}),(t.mode&1)===0&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function wo(e,t){return t=Rl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function hl(e,t,n,i){return i!==null&&Xs(i),dr(t,e.child,null,n),e=wo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Th(e,t,n,i,o,u,p){if(n)return t.flags&256?(t.flags&=-257,i=ho(Error(r(422))),hl(e,t,p,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(u=i.fallback,o=t.mode,i=Rl({mode:"visible",children:i.children},o,0,null),u=zn(u,o,p,null),u.flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,(t.mode&1)!==0&&dr(t,e.child,null,p),t.child.memoizedState=xo(p),t.memoizedState=yo,u);if((t.mode&1)===0)return hl(e,t,p,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var y=i.dgst;return i=y,u=Error(r(419)),i=ho(u,i,void 0),hl(e,t,p,i)}if(y=(p&e.childLanes)!==0,it||y){if(i=Qe,i!==null){switch(p&-p){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=(o&(i.suspendedLanes|p))!==0?0:o,o!==0&&o!==u.retryLane&&(u.retryLane=o,Yt(e,o),jt(i,e,o,-1))}return Ho(),i=ho(Error(r(421))),hl(e,t,p,i)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=Wh.bind(null,e),o._reactRetry=t,null):(e=u.treeContext,ft=on(o.nextSibling),ct=t,Te=!0,kt=null,e!==null&&(mt[gt++]=Wt,mt[gt++]=Vt,mt[gt++]=Hn,Wt=e.id,Vt=e.overflow,Hn=t),t=wo(t,i.children),t.flags|=4096,t)}function qc(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Js(e.return,t,n)}function Ao(e,t,n,i,o){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=i,u.tail=n,u.tailMode=o)}function _c(e,t,n){var i=t.pendingProps,o=i.revealOrder,u=i.tail;if(_e(e,t,i.children,n),i=je.current,(i&2)!==0)i=i&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&qc(e,n,t);else if(e.tag===19)qc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Ce(je,i),(t.mode&1)===0)t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&ol(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Ao(t,!1,o,n,u);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&ol(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Ao(t,!0,n,null,u);break;case"together":Ao(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ml(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Wn|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,n=yn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=yn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function jh(e,t,n){switch(t.tag){case 3:Kc(t),fr();break;case 5:dc(t);break;case 1:rt(t.type)&&qi(t);break;case 4:$s(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,o=t.memoizedProps.value;Ce(rl,i._currentValue),i._currentValue=o;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Ce(je,je.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?Jc(e,t,n):(Ce(je,je.current&1),e=zt(e,t,n),e!==null?e.sibling:null);Ce(je,je.current&1);break;case 19:if(i=(n&t.childLanes)!==0,(e.flags&128)!==0){if(i)return _c(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ce(je,je.current),i)break;return null;case 22:case 23:return t.lanes=0,zc(e,t,n)}return zt(e,t,n)}var $c,Eo,ef,tf;$c=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Eo=function(){},ef=function(e,t,n,i){var o=e.memoizedProps;if(o!==i){e=t.stateNode,Qn(Dt.current);var u=null;switch(n){case"input":o=Dn(e,o),i=Dn(e,i),u=[];break;case"select":o=U({},o,{value:void 0}),i=U({},i,{value:void 0}),u=[];break;case"textarea":o=$l(e,o),i=$l(e,i),u=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Ki)}ts(n,i);var p;n=null;for(N in o)if(!i.hasOwnProperty(N)&&o.hasOwnProperty(N)&&o[N]!=null)if(N==="style"){var y=o[N];for(p in y)y.hasOwnProperty(p)&&(n||(n={}),n[p]="")}else N!=="dangerouslySetInnerHTML"&&N!=="children"&&N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(c.hasOwnProperty(N)?u||(u=[]):(u=u||[]).push(N,null));for(N in i){var S=i[N];if(y=o!=null?o[N]:void 0,i.hasOwnProperty(N)&&S!==y&&(S!=null||y!=null))if(N==="style")if(y){for(p in y)!y.hasOwnProperty(p)||S&&S.hasOwnProperty(p)||(n||(n={}),n[p]="");for(p in S)S.hasOwnProperty(p)&&y[p]!==S[p]&&(n||(n={}),n[p]=S[p])}else n||(u||(u=[]),u.push(N,n)),n=S;else N==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,y=y?y.__html:void 0,S!=null&&y!==S&&(u=u||[]).push(N,S)):N==="children"?typeof S!="string"&&typeof S!="number"||(u=u||[]).push(N,""+S):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&(c.hasOwnProperty(N)?(S!=null&&N==="onScroll"&&ke("scroll",e),u||y===S||(u=[])):(u=u||[]).push(N,S))}n&&(u=u||[]).push("style",n);var N=u;(t.updateQueue=N)&&(t.flags|=4)}},tf=function(e,t,n,i){n!==i&&(t.flags|=4)};function ai(e,t){if(!Te)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Ph(e,t,n){var i=t.pendingProps;switch(Ys(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(t),null;case 1:return rt(t.type)&&Ji(),Ze(t),null;case 3:return i=t.stateNode,mr(),Ie(nt),Ie(Ge),no(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(tl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,kt!==null&&(No(kt),kt=null))),Eo(e,t),Ze(t),null;case 5:eo(t);var o=Qn(ri.current);if(n=t.type,e!==null&&t.stateNode!=null)ef(e,t,n,i,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(r(166));return Ze(t),null}if(e=Qn(Dt.current),tl(t)){i=t.stateNode,n=t.type;var u=t.memoizedProps;switch(i[Ot]=t,i[_r]=u,e=(t.mode&1)!==0,n){case"dialog":ke("cancel",i),ke("close",i);break;case"iframe":case"object":case"embed":ke("load",i);break;case"video":case"audio":for(o=0;o<Zr.length;o++)ke(Zr[o],i);break;case"source":ke("error",i);break;case"img":case"image":case"link":ke("error",i),ke("load",i);break;case"details":ke("toggle",i);break;case"input":Ir(i,u),ke("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!u.multiple},ke("invalid",i);break;case"textarea":La(i,u),ke("invalid",i)}ts(n,u),o=null;for(var p in u)if(u.hasOwnProperty(p)){var y=u[p];p==="children"?typeof y=="string"?i.textContent!==y&&(u.suppressHydrationWarning!==!0&&Gi(i.textContent,y,e),o=["children",y]):typeof y=="number"&&i.textContent!==""+y&&(u.suppressHydrationWarning!==!0&&Gi(i.textContent,y,e),o=["children",""+y]):c.hasOwnProperty(p)&&y!=null&&p==="onScroll"&&ke("scroll",i)}switch(n){case"input":Pn(i),Fa(i,u,!0);break;case"textarea":Pn(i),Ua(i);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(i.onclick=Ki)}i=o,t.updateQueue=i,i!==null&&(t.flags|=4)}else{p=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Wa(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=p.createElement(n,{is:i.is}):(e=p.createElement(n),n==="select"&&(p=e,i.multiple?p.multiple=!0:i.size&&(p.size=i.size))):e=p.createElementNS(e,n),e[Ot]=t,e[_r]=i,$c(e,t,!1,!1),t.stateNode=e;e:{switch(p=ns(n,i),n){case"dialog":ke("cancel",e),ke("close",e),o=i;break;case"iframe":case"object":case"embed":ke("load",e),o=i;break;case"video":case"audio":for(o=0;o<Zr.length;o++)ke(Zr[o],e);o=i;break;case"source":ke("error",e),o=i;break;case"img":case"image":case"link":ke("error",e),ke("load",e),o=i;break;case"details":ke("toggle",e),o=i;break;case"input":Ir(e,i),o=Dn(e,i),ke("invalid",e);break;case"option":o=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},o=U({},i,{value:void 0}),ke("invalid",e);break;case"textarea":La(e,i),o=$l(e,i),ke("invalid",e);break;default:o=i}ts(n,o),y=o;for(u in y)if(y.hasOwnProperty(u)){var S=y[u];u==="style"?ba(e,S):u==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&Va(e,S)):u==="children"?typeof S=="string"?(n!=="textarea"||S!=="")&&Pr(e,S):typeof S=="number"&&Pr(e,""+S):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(c.hasOwnProperty(u)?S!=null&&u==="onScroll"&&ke("scroll",e):S!=null&&M(e,u,S,p))}switch(n){case"input":Pn(e),Fa(e,i,!1);break;case"textarea":Pn(e),Ua(e);break;case"option":i.value!=null&&e.setAttribute("value",""+xe(i.value));break;case"select":e.multiple=!!i.multiple,u=i.value,u!=null?Jn(e,!!i.multiple,u,!1):i.defaultValue!=null&&Jn(e,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Ki)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ze(t),null;case 6:if(e&&t.stateNode!=null)tf(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(r(166));if(n=Qn(ri.current),Qn(Dt.current),tl(t)){if(i=t.stateNode,n=t.memoizedProps,i[Ot]=t,(u=i.nodeValue!==n)&&(e=ct,e!==null))switch(e.tag){case 3:Gi(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Gi(i.nodeValue,n,(e.mode&1)!==0)}u&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Ot]=t,t.stateNode=i}return Ze(t),null;case 13:if(Ie(je),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Te&&ft!==null&&(t.mode&1)!==0&&(t.flags&128)===0)ic(),fr(),t.flags|=98560,u=!1;else if(u=tl(t),i!==null&&i.dehydrated!==null){if(e===null){if(!u)throw Error(r(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));u[Ot]=t}else fr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ze(t),u=!1}else kt!==null&&(No(kt),kt=null),u=!0;if(!u)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(je.current&1)!==0?Fe===0&&(Fe=3):Ho())),t.updateQueue!==null&&(t.flags|=4),Ze(t),null);case 4:return mr(),Eo(e,t),e===null&&Jr(t.stateNode.containerInfo),Ze(t),null;case 10:return Zs(t.type._context),Ze(t),null;case 17:return rt(t.type)&&Ji(),Ze(t),null;case 19:if(Ie(je),u=t.memoizedState,u===null)return Ze(t),null;if(i=(t.flags&128)!==0,p=u.rendering,p===null)if(i)ai(u,!1);else{if(Fe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(p=ol(e),p!==null){for(t.flags|=128,ai(u,!1),i=p.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)u=n,e=i,u.flags&=14680066,p=u.alternate,p===null?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=p.childLanes,u.lanes=p.lanes,u.child=p.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=p.memoizedProps,u.memoizedState=p.memoizedState,u.updateQueue=p.updateQueue,u.type=p.type,e=p.dependencies,u.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ce(je,je.current&1|2),t.child}e=e.sibling}u.tail!==null&&De()>xr&&(t.flags|=128,i=!0,ai(u,!1),t.lanes=4194304)}else{if(!i)if(e=ol(p),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ai(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!Te)return Ze(t),null}else 2*De()-u.renderingStartTime>xr&&n!==1073741824&&(t.flags|=128,i=!0,ai(u,!1),t.lanes=4194304);u.isBackwards?(p.sibling=t.child,t.child=p):(n=u.last,n!==null?n.sibling=p:t.child=p,u.last=p)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=De(),t.sibling=null,n=je.current,Ce(je,i?n&1|2:n&1),t):(Ze(t),null);case 22:case 23:return Bo(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&(t.mode&1)!==0?(dt&1073741824)!==0&&(Ze(t),t.subtreeFlags&6&&(t.flags|=8192)):Ze(t),null;case 24:return null;case 25:return null}throw Error(r(156,t.tag))}function Oh(e,t){switch(Ys(t),t.tag){case 1:return rt(t.type)&&Ji(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return mr(),Ie(nt),Ie(Ge),no(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return eo(t),null;case 13:if(Ie(je),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));fr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ie(je),null;case 4:return mr(),null;case 10:return Zs(t.type._context),null;case 22:case 23:return Bo(),null;case 24:return null;default:return null}}var gl=!1,Je=!1,Dh=typeof WeakSet=="function"?WeakSet:Set,_=null;function vr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Oe(e,t,i)}else n.current=null}function So(e,t,n){try{n()}catch(i){Oe(e,t,i)}}var nf=!1;function Nh(e,t){if(Ms=Hi,e=Mu(),Is(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,u=i.focusNode;i=i.focusOffset;try{n.nodeType,u.nodeType}catch{n=null;break e}var p=0,y=-1,S=-1,N=0,X=0,K=e,b=null;t:for(;;){for(var q;K!==n||o!==0&&K.nodeType!==3||(y=p+o),K!==u||i!==0&&K.nodeType!==3||(S=p+i),K.nodeType===3&&(p+=K.nodeValue.length),(q=K.firstChild)!==null;)b=K,K=q;for(;;){if(K===e)break t;if(b===n&&++N===o&&(y=p),b===u&&++X===i&&(S=p),(q=K.nextSibling)!==null)break;K=b,b=K.parentNode}K=q}n=y===-1||S===-1?null:{start:y,end:S}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bs={focusedElem:e,selectionRange:n},Hi=!1,_=t;_!==null;)if(t=_,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,_=e;else for(;_!==null;){t=_;try{var te=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(te!==null){var ne=te.memoizedProps,Ne=te.memoizedState,T=t.stateNode,C=T.getSnapshotBeforeUpdate(t.elementType===t.type?ne:It(t.type,ne),Ne);T.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var O=t.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Z){Oe(t,t.return,Z)}if(e=t.sibling,e!==null){e.return=t.return,_=e;break}_=t.return}return te=nf,nf=!1,te}function ui(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&e)===e){var u=o.destroy;o.destroy=void 0,u!==void 0&&So(t,n,u)}o=o.next}while(o!==i)}}function vl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function Co(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function rf(e){var t=e.alternate;t!==null&&(e.alternate=null,rf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ot],delete t[_r],delete t[Qs],delete t[mh],delete t[gh])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function lf(e){return e.tag===5||e.tag===3||e.tag===4}function sf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||lf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ko(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ki));else if(i!==4&&(e=e.child,e!==null))for(ko(e,t,n),e=e.sibling;e!==null;)ko(e,t,n),e=e.sibling}function Io(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Io(e,t,n),e=e.sibling;e!==null;)Io(e,t,n),e=e.sibling}var Ye=null,Rt=!1;function pn(e,t,n){for(n=n.child;n!==null;)of(e,t,n),n=n.sibling}function of(e,t,n){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(Pi,n)}catch{}switch(n.tag){case 5:Je||vr(n,t);case 6:var i=Ye,o=Rt;Ye=null,pn(e,t,n),Ye=i,Rt=o,Ye!==null&&(Rt?(e=Ye,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(Rt?(e=Ye,n=n.stateNode,e.nodeType===8?Ls(e.parentNode,n):e.nodeType===1&&Ls(e,n),Wr(e)):Ls(Ye,n.stateNode));break;case 4:i=Ye,o=Rt,Ye=n.stateNode.containerInfo,Rt=!0,pn(e,t,n),Ye=i,Rt=o;break;case 0:case 11:case 14:case 15:if(!Je&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var u=o,p=u.destroy;u=u.tag,p!==void 0&&((u&2)!==0||(u&4)!==0)&&So(n,t,p),o=o.next}while(o!==i)}pn(e,t,n);break;case 1:if(!Je&&(vr(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(y){Oe(n,t,y)}pn(e,t,n);break;case 21:pn(e,t,n);break;case 22:n.mode&1?(Je=(i=Je)||n.memoizedState!==null,pn(e,t,n),Je=i):pn(e,t,n);break;default:pn(e,t,n)}}function af(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Dh),t.forEach(function(i){var o=Vh.bind(null,e,i);n.has(i)||(n.add(i),i.then(o,o))})}}function Tt(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];try{var u=e,p=t,y=p;e:for(;y!==null;){switch(y.tag){case 5:Ye=y.stateNode,Rt=!1;break e;case 3:Ye=y.stateNode.containerInfo,Rt=!0;break e;case 4:Ye=y.stateNode.containerInfo,Rt=!0;break e}y=y.return}if(Ye===null)throw Error(r(160));of(u,p,o),Ye=null,Rt=!1;var S=o.alternate;S!==null&&(S.return=null),o.return=null}catch(N){Oe(o,t,N)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)uf(t,e),t=t.sibling}function uf(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Tt(t,e),Mt(e),i&4){try{ui(3,e,e.return),vl(3,e)}catch(ne){Oe(e,e.return,ne)}try{ui(5,e,e.return)}catch(ne){Oe(e,e.return,ne)}}break;case 1:Tt(t,e),Mt(e),i&512&&n!==null&&vr(n,n.return);break;case 5:if(Tt(t,e),Mt(e),i&512&&n!==null&&vr(n,n.return),e.flags&32){var o=e.stateNode;try{Pr(o,"")}catch(ne){Oe(e,e.return,ne)}}if(i&4&&(o=e.stateNode,o!=null)){var u=e.memoizedProps,p=n!==null?n.memoizedProps:u,y=e.type,S=e.updateQueue;if(e.updateQueue=null,S!==null)try{y==="input"&&u.type==="radio"&&u.name!=null&&Rr(o,u),ns(y,p);var N=ns(y,u);for(p=0;p<S.length;p+=2){var X=S[p],K=S[p+1];X==="style"?ba(o,K):X==="dangerouslySetInnerHTML"?Va(o,K):X==="children"?Pr(o,K):M(o,X,K,N)}switch(y){case"input":Tr(o,u);break;case"textarea":Qa(o,u);break;case"select":var b=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!u.multiple;var q=u.value;q!=null?Jn(o,!!u.multiple,q,!1):b!==!!u.multiple&&(u.defaultValue!=null?Jn(o,!!u.multiple,u.defaultValue,!0):Jn(o,!!u.multiple,u.multiple?[]:"",!1))}o[_r]=u}catch(ne){Oe(e,e.return,ne)}}break;case 6:if(Tt(t,e),Mt(e),i&4){if(e.stateNode===null)throw Error(r(162));o=e.stateNode,u=e.memoizedProps;try{o.nodeValue=u}catch(ne){Oe(e,e.return,ne)}}break;case 3:if(Tt(t,e),Mt(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Wr(t.containerInfo)}catch(ne){Oe(e,e.return,ne)}break;case 4:Tt(t,e),Mt(e);break;case 13:Tt(t,e),Mt(e),o=e.child,o.flags&8192&&(u=o.memoizedState!==null,o.stateNode.isHidden=u,!u||o.alternate!==null&&o.alternate.memoizedState!==null||(jo=De())),i&4&&af(e);break;case 22:if(X=n!==null&&n.memoizedState!==null,e.mode&1?(Je=(N=Je)||X,Tt(t,e),Je=N):Tt(t,e),Mt(e),i&8192){if(N=e.memoizedState!==null,(e.stateNode.isHidden=N)&&!X&&(e.mode&1)!==0)for(_=e,X=e.child;X!==null;){for(K=_=X;_!==null;){switch(b=_,q=b.child,b.tag){case 0:case 11:case 14:case 15:ui(4,b,b.return);break;case 1:vr(b,b.return);var te=b.stateNode;if(typeof te.componentWillUnmount=="function"){i=b,n=b.return;try{t=i,te.props=t.memoizedProps,te.state=t.memoizedState,te.componentWillUnmount()}catch(ne){Oe(i,n,ne)}}break;case 5:vr(b,b.return);break;case 22:if(b.memoizedState!==null){df(K);continue}}q!==null?(q.return=b,_=q):df(K)}X=X.sibling}e:for(X=null,K=e;;){if(K.tag===5){if(X===null){X=K;try{o=K.stateNode,N?(u=o.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(y=K.stateNode,S=K.memoizedProps.style,p=S!=null&&S.hasOwnProperty("display")?S.display:null,y.style.display=Ya("display",p))}catch(ne){Oe(e,e.return,ne)}}}else if(K.tag===6){if(X===null)try{K.stateNode.nodeValue=N?"":K.memoizedProps}catch(ne){Oe(e,e.return,ne)}}else if((K.tag!==22&&K.tag!==23||K.memoizedState===null||K===e)&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===e)break e;for(;K.sibling===null;){if(K.return===null||K.return===e)break e;X===K&&(X=null),K=K.return}X===K&&(X=null),K.sibling.return=K.return,K=K.sibling}}break;case 19:Tt(t,e),Mt(e),i&4&&af(e);break;case 21:break;default:Tt(t,e),Mt(e)}}function Mt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(lf(n)){var i=n;break e}n=n.return}throw Error(r(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(Pr(o,""),i.flags&=-33);var u=sf(e);Io(e,u,o);break;case 3:case 4:var p=i.stateNode.containerInfo,y=sf(e);ko(e,y,p);break;default:throw Error(r(161))}}catch(S){Oe(e,e.return,S)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Mh(e,t,n){_=e,cf(e)}function cf(e,t,n){for(var i=(e.mode&1)!==0;_!==null;){var o=_,u=o.child;if(o.tag===22&&i){var p=o.memoizedState!==null||gl;if(!p){var y=o.alternate,S=y!==null&&y.memoizedState!==null||Je;y=gl;var N=Je;if(gl=p,(Je=S)&&!N)for(_=o;_!==null;)p=_,S=p.child,p.tag===22&&p.memoizedState!==null?pf(o):S!==null?(S.return=p,_=S):pf(o);for(;u!==null;)_=u,cf(u),u=u.sibling;_=o,gl=y,Je=N}ff(e)}else(o.subtreeFlags&8772)!==0&&u!==null?(u.return=o,_=u):ff(e)}}function ff(e){for(;_!==null;){var t=_;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Je||vl(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Je)if(n===null)i.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:It(t.type,n.memoizedProps);i.componentDidUpdate(o,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var u=t.updateQueue;u!==null&&fc(t,u,i);break;case 3:var p=t.updateQueue;if(p!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}fc(t,p,n)}break;case 5:var y=t.stateNode;if(n===null&&t.flags&4){n=y;var S=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&n.focus();break;case"img":S.src&&(n.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var N=t.alternate;if(N!==null){var X=N.memoizedState;if(X!==null){var K=X.dehydrated;K!==null&&Wr(K)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Je||t.flags&512&&Co(t)}catch(b){Oe(t,t.return,b)}}if(t===e){_=null;break}if(n=t.sibling,n!==null){n.return=t.return,_=n;break}_=t.return}}function df(e){for(;_!==null;){var t=_;if(t===e){_=null;break}var n=t.sibling;if(n!==null){n.return=t.return,_=n;break}_=t.return}}function pf(e){for(;_!==null;){var t=_;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{vl(4,t)}catch(S){Oe(t,n,S)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var o=t.return;try{i.componentDidMount()}catch(S){Oe(t,o,S)}}var u=t.return;try{Co(t)}catch(S){Oe(t,u,S)}break;case 5:var p=t.return;try{Co(t)}catch(S){Oe(t,p,S)}}}catch(S){Oe(t,t.return,S)}if(t===e){_=null;break}var y=t.sibling;if(y!==null){y.return=t.return,_=y;break}_=t.return}}var Bh=Math.ceil,yl=L.ReactCurrentDispatcher,Ro=L.ReactCurrentOwner,xt=L.ReactCurrentBatchConfig,ve=0,Qe=null,Be=null,be=0,dt=0,yr=an(0),Fe=0,ci=null,Wn=0,xl=0,To=0,fi=null,lt=null,jo=0,xr=1/0,Xt=null,wl=!1,Po=null,hn=null,Al=!1,mn=null,El=0,di=0,Oo=null,Sl=-1,Cl=0;function $e(){return(ve&6)!==0?De():Sl!==-1?Sl:Sl=De()}function gn(e){return(e.mode&1)===0?1:(ve&2)!==0&&be!==0?be&-be:yh.transition!==null?(Cl===0&&(Cl=lu()),Cl):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:hu(e.type)),e)}function jt(e,t,n,i){if(50<di)throw di=0,Oo=null,Error(r(185));Hr(e,n,i),((ve&2)===0||e!==Qe)&&(e===Qe&&((ve&2)===0&&(xl|=n),Fe===4&&vn(e,be)),st(e,i),n===1&&ve===0&&(t.mode&1)===0&&(xr=De()+500,_i&&cn()))}function st(e,t){var n=e.callbackNode;yp(e,t);var i=Ni(e,e===Qe?be:0);if(i===0)n!==null&&nu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&nu(n),t===1)e.tag===0?vh(mf.bind(null,e)):$u(mf.bind(null,e)),ph(function(){(ve&6)===0&&cn()}),n=null;else{switch(su(i)){case 1:n=us;break;case 4:n=ru;break;case 16:n=ji;break;case 536870912:n=iu;break;default:n=ji}n=Sf(n,hf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function hf(e,t){if(Sl=-1,Cl=0,(ve&6)!==0)throw Error(r(327));var n=e.callbackNode;if(wr()&&e.callbackNode!==n)return null;var i=Ni(e,e===Qe?be:0);if(i===0)return null;if((i&30)!==0||(i&e.expiredLanes)!==0||t)t=kl(e,i);else{t=i;var o=ve;ve|=2;var u=vf();(Qe!==e||be!==t)&&(Xt=null,xr=De()+500,Yn(e,t));do try{Lh();break}catch(y){gf(e,y)}while(!0);Ks(),yl.current=u,ve=o,Be!==null?t=0:(Qe=null,be=0,t=Fe)}if(t!==0){if(t===2&&(o=cs(e),o!==0&&(i=o,t=Do(e,o))),t===1)throw n=ci,Yn(e,0),vn(e,i),st(e,De()),n;if(t===6)vn(e,i);else{if(o=e.current.alternate,(i&30)===0&&!Hh(o)&&(t=kl(e,i),t===2&&(u=cs(e),u!==0&&(i=u,t=Do(e,u))),t===1))throw n=ci,Yn(e,0),vn(e,i),st(e,De()),n;switch(e.finishedWork=o,e.finishedLanes=i,t){case 0:case 1:throw Error(r(345));case 2:bn(e,lt,Xt);break;case 3:if(vn(e,i),(i&130023424)===i&&(t=jo+500-De(),10<t)){if(Ni(e,0)!==0)break;if(o=e.suspendedLanes,(o&i)!==i){$e(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Fs(bn.bind(null,e,lt,Xt),t);break}bn(e,lt,Xt);break;case 4:if(vn(e,i),(i&4194240)===i)break;for(t=e.eventTimes,o=-1;0<i;){var p=31-St(i);u=1<<p,p=t[p],p>o&&(o=p),i&=~u}if(i=o,i=De()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Bh(i/1960))-i,10<i){e.timeoutHandle=Fs(bn.bind(null,e,lt,Xt),i);break}bn(e,lt,Xt);break;case 5:bn(e,lt,Xt);break;default:throw Error(r(329))}}}return st(e,De()),e.callbackNode===n?hf.bind(null,e):null}function Do(e,t){var n=fi;return e.current.memoizedState.isDehydrated&&(Yn(e,t).flags|=256),e=kl(e,t),e!==2&&(t=lt,lt=n,t!==null&&No(t)),e}function No(e){lt===null?lt=e:lt.push.apply(lt,e)}function Hh(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var o=n[i],u=o.getSnapshot;o=o.value;try{if(!Ct(u(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vn(e,t){for(t&=~To,t&=~xl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-St(t),i=1<<n;e[n]=-1,t&=~i}}function mf(e){if((ve&6)!==0)throw Error(r(327));wr();var t=Ni(e,0);if((t&1)===0)return st(e,De()),null;var n=kl(e,t);if(e.tag!==0&&n===2){var i=cs(e);i!==0&&(t=i,n=Do(e,i))}if(n===1)throw n=ci,Yn(e,0),vn(e,t),st(e,De()),n;if(n===6)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bn(e,lt,Xt),st(e,De()),null}function Mo(e,t){var n=ve;ve|=1;try{return e(t)}finally{ve=n,ve===0&&(xr=De()+500,_i&&cn())}}function Vn(e){mn!==null&&mn.tag===0&&(ve&6)===0&&wr();var t=ve;ve|=1;var n=xt.transition,i=Ae;try{if(xt.transition=null,Ae=1,e)return e()}finally{Ae=i,xt.transition=n,ve=t,(ve&6)===0&&cn()}}function Bo(){dt=yr.current,Ie(yr)}function Yn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,dh(n)),Be!==null)for(n=Be.return;n!==null;){var i=n;switch(Ys(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ji();break;case 3:mr(),Ie(nt),Ie(Ge),no();break;case 5:eo(i);break;case 4:mr();break;case 13:Ie(je);break;case 19:Ie(je);break;case 10:Zs(i.type._context);break;case 22:case 23:Bo()}n=n.return}if(Qe=e,Be=e=yn(e.current,null),be=dt=t,Fe=0,ci=null,To=xl=Wn=0,lt=fi=null,Ln!==null){for(t=0;t<Ln.length;t++)if(n=Ln[t],i=n.interleaved,i!==null){n.interleaved=null;var o=i.next,u=n.pending;if(u!==null){var p=u.next;u.next=o,i.next=p}n.pending=i}Ln=null}return e}function gf(e,t){do{var n=Be;try{if(Ks(),al.current=dl,ul){for(var i=Pe.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}ul=!1}if(Un=0,Le=He=Pe=null,ii=!1,li=0,Ro.current=null,n===null||n.return===null){Fe=1,ci=t,Be=null;break}e:{var u=e,p=n.return,y=n,S=t;if(t=be,y.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var N=S,X=y,K=X.tag;if((X.mode&1)===0&&(K===0||K===11||K===15)){var b=X.alternate;b?(X.updateQueue=b.updateQueue,X.memoizedState=b.memoizedState,X.lanes=b.lanes):(X.updateQueue=null,X.memoizedState=null)}var q=Uc(p);if(q!==null){q.flags&=-257,Wc(q,p,y,u,t),q.mode&1&&Qc(u,N,t),t=q,S=N;var te=t.updateQueue;if(te===null){var ne=new Set;ne.add(S),t.updateQueue=ne}else te.add(S);break e}else{if((t&1)===0){Qc(u,N,t),Ho();break e}S=Error(r(426))}}else if(Te&&y.mode&1){var Ne=Uc(p);if(Ne!==null){(Ne.flags&65536)===0&&(Ne.flags|=256),Wc(Ne,p,y,u,t),Xs(gr(S,y));break e}}u=S=gr(S,y),Fe!==4&&(Fe=2),fi===null?fi=[u]:fi.push(u),u=p;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var T=Fc(u,S,t);cc(u,T);break e;case 1:y=S;var C=u.type,O=u.stateNode;if((u.flags&128)===0&&(typeof C.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(hn===null||!hn.has(O)))){u.flags|=65536,t&=-t,u.lanes|=t;var Z=Lc(u,y,t);cc(u,Z);break e}}u=u.return}while(u!==null)}xf(n)}catch(le){t=le,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function vf(){var e=yl.current;return yl.current=dl,e===null?dl:e}function Ho(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),Qe===null||(Wn&268435455)===0&&(xl&268435455)===0||vn(Qe,be)}function kl(e,t){var n=ve;ve|=2;var i=vf();(Qe!==e||be!==t)&&(Xt=null,Yn(e,t));do try{Fh();break}catch(o){gf(e,o)}while(!0);if(Ks(),ve=n,yl.current=i,Be!==null)throw Error(r(261));return Qe=null,be=0,Fe}function Fh(){for(;Be!==null;)yf(Be)}function Lh(){for(;Be!==null&&!up();)yf(Be)}function yf(e){var t=Ef(e.alternate,e,dt);e.memoizedProps=e.pendingProps,t===null?xf(e):Be=t,Ro.current=null}function xf(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=Ph(n,t,dt),n!==null){Be=n;return}}else{if(n=Oh(n,t),n!==null){n.flags&=32767,Be=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fe=6,Be=null;return}}if(t=t.sibling,t!==null){Be=t;return}Be=t=e}while(t!==null);Fe===0&&(Fe=5)}function bn(e,t,n){var i=Ae,o=xt.transition;try{xt.transition=null,Ae=1,Qh(e,t,n,i)}finally{xt.transition=o,Ae=i}return null}function Qh(e,t,n,i){do wr();while(mn!==null);if((ve&6)!==0)throw Error(r(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var u=n.lanes|n.childLanes;if(xp(e,u),e===Qe&&(Be=Qe=null,be=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Al||(Al=!0,Sf(ji,function(){return wr(),null})),u=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||u){u=xt.transition,xt.transition=null;var p=Ae;Ae=1;var y=ve;ve|=4,Ro.current=null,Nh(e,n),uf(n,e),lh(Bs),Hi=!!Ms,Bs=Ms=null,e.current=n,Mh(n),cp(),ve=y,Ae=p,xt.transition=u}else e.current=n;if(Al&&(Al=!1,mn=e,El=o),u=e.pendingLanes,u===0&&(hn=null),pp(n.stateNode),st(e,De()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],i(o.value,{componentStack:o.stack,digest:o.digest});if(wl)throw wl=!1,e=Po,Po=null,e;return(El&1)!==0&&e.tag!==0&&wr(),u=e.pendingLanes,(u&1)!==0?e===Oo?di++:(di=0,Oo=e):di=0,cn(),null}function wr(){if(mn!==null){var e=su(El),t=xt.transition,n=Ae;try{if(xt.transition=null,Ae=16>e?16:e,mn===null)var i=!1;else{if(e=mn,mn=null,El=0,(ve&6)!==0)throw Error(r(331));var o=ve;for(ve|=4,_=e.current;_!==null;){var u=_,p=u.child;if((_.flags&16)!==0){var y=u.deletions;if(y!==null){for(var S=0;S<y.length;S++){var N=y[S];for(_=N;_!==null;){var X=_;switch(X.tag){case 0:case 11:case 15:ui(8,X,u)}var K=X.child;if(K!==null)K.return=X,_=K;else for(;_!==null;){X=_;var b=X.sibling,q=X.return;if(rf(X),X===N){_=null;break}if(b!==null){b.return=q,_=b;break}_=q}}}var te=u.alternate;if(te!==null){var ne=te.child;if(ne!==null){te.child=null;do{var Ne=ne.sibling;ne.sibling=null,ne=Ne}while(ne!==null)}}_=u}}if((u.subtreeFlags&2064)!==0&&p!==null)p.return=u,_=p;else e:for(;_!==null;){if(u=_,(u.flags&2048)!==0)switch(u.tag){case 0:case 11:case 15:ui(9,u,u.return)}var T=u.sibling;if(T!==null){T.return=u.return,_=T;break e}_=u.return}}var C=e.current;for(_=C;_!==null;){p=_;var O=p.child;if((p.subtreeFlags&2064)!==0&&O!==null)O.return=p,_=O;else e:for(p=C;_!==null;){if(y=_,(y.flags&2048)!==0)try{switch(y.tag){case 0:case 11:case 15:vl(9,y)}}catch(le){Oe(y,y.return,le)}if(y===p){_=null;break e}var Z=y.sibling;if(Z!==null){Z.return=y.return,_=Z;break e}_=y.return}}if(ve=o,cn(),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(Pi,e)}catch{}i=!0}return i}finally{Ae=n,xt.transition=t}}return!1}function wf(e,t,n){t=gr(n,t),t=Fc(e,t,1),e=dn(e,t,1),t=$e(),e!==null&&(Hr(e,1,t),st(e,t))}function Oe(e,t,n){if(e.tag===3)wf(e,e,n);else for(;t!==null;){if(t.tag===3){wf(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(hn===null||!hn.has(i))){e=gr(n,e),e=Lc(t,e,1),t=dn(t,e,1),e=$e(),t!==null&&(Hr(t,1,e),st(t,e));break}}t=t.return}}function Uh(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=$e(),e.pingedLanes|=e.suspendedLanes&n,Qe===e&&(be&n)===n&&(Fe===4||Fe===3&&(be&130023424)===be&&500>De()-jo?Yn(e,0):To|=n),st(e,t)}function Af(e,t){t===0&&((e.mode&1)===0?t=1:(t=Di,Di<<=1,(Di&130023424)===0&&(Di=4194304)));var n=$e();e=Yt(e,t),e!==null&&(Hr(e,t,n),st(e,n))}function Wh(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Af(e,n)}function Vh(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(r(314))}i!==null&&i.delete(t),Af(e,n)}var Ef;Ef=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||nt.current)it=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return it=!1,jh(e,t,n);it=(e.flags&131072)!==0}else it=!1,Te&&(t.flags&1048576)!==0&&ec(t,el,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;ml(e,t),e=t.pendingProps;var o=ar(t,Ge.current);hr(t,n),o=lo(null,t,i,e,o,n);var u=so();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,rt(i)?(u=!0,qi(t)):u=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,_s(t),o.updater=pl,t.stateNode=o,o._reactInternals=t,po(t,i,e,n),t=vo(null,t,i,!0,u,n)):(t.tag=0,Te&&u&&Vs(t),_e(null,t,o,n),t=t.child),t;case 16:i=t.elementType;e:{switch(ml(e,t),e=t.pendingProps,o=i._init,i=o(i._payload),t.type=i,o=t.tag=bh(i),e=It(i,e),o){case 0:t=go(null,t,i,e,n);break e;case 1:t=Gc(null,t,i,e,n);break e;case 11:t=Vc(null,t,i,e,n);break e;case 14:t=Yc(null,t,i,It(i.type,e),n);break e}throw Error(r(306,i,""))}return t;case 0:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:It(i,o),go(e,t,i,o,n);case 1:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:It(i,o),Gc(e,t,i,o,n);case 3:e:{if(Kc(t),e===null)throw Error(r(387));i=t.pendingProps,u=t.memoizedState,o=u.element,uc(e,t),sl(t,i,null,n);var p=t.memoizedState;if(i=p.element,u.isDehydrated)if(u={element:i,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){o=gr(Error(r(423)),t),t=Zc(e,t,i,n,o);break e}else if(i!==o){o=gr(Error(r(424)),t),t=Zc(e,t,i,n,o);break e}else for(ft=on(t.stateNode.containerInfo.firstChild),ct=t,Te=!0,kt=null,n=oc(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fr(),i===o){t=zt(e,t,n);break e}_e(e,t,i,n)}t=t.child}return t;case 5:return dc(t),e===null&&zs(t),i=t.type,o=t.pendingProps,u=e!==null?e.memoizedProps:null,p=o.children,Hs(i,o)?p=null:u!==null&&Hs(i,u)&&(t.flags|=32),Xc(e,t),_e(e,t,p,n),t.child;case 6:return e===null&&zs(t),null;case 13:return Jc(e,t,n);case 4:return $s(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=dr(t,null,i,n):_e(e,t,i,n),t.child;case 11:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:It(i,o),Vc(e,t,i,o,n);case 7:return _e(e,t,t.pendingProps,n),t.child;case 8:return _e(e,t,t.pendingProps.children,n),t.child;case 12:return _e(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,o=t.pendingProps,u=t.memoizedProps,p=o.value,Ce(rl,i._currentValue),i._currentValue=p,u!==null)if(Ct(u.value,p)){if(u.children===o.children&&!nt.current){t=zt(e,t,n);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var y=u.dependencies;if(y!==null){p=u.child;for(var S=y.firstContext;S!==null;){if(S.context===i){if(u.tag===1){S=bt(-1,n&-n),S.tag=2;var N=u.updateQueue;if(N!==null){N=N.shared;var X=N.pending;X===null?S.next=S:(S.next=X.next,X.next=S),N.pending=S}}u.lanes|=n,S=u.alternate,S!==null&&(S.lanes|=n),Js(u.return,n,t),y.lanes|=n;break}S=S.next}}else if(u.tag===10)p=u.type===t.type?null:u.child;else if(u.tag===18){if(p=u.return,p===null)throw Error(r(341));p.lanes|=n,y=p.alternate,y!==null&&(y.lanes|=n),Js(p,n,t),p=u.sibling}else p=u.child;if(p!==null)p.return=u;else for(p=u;p!==null;){if(p===t){p=null;break}if(u=p.sibling,u!==null){u.return=p.return,p=u;break}p=p.return}u=p}_e(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,i=t.pendingProps.children,hr(t,n),o=vt(o),i=i(o),t.flags|=1,_e(e,t,i,n),t.child;case 14:return i=t.type,o=It(i,t.pendingProps),o=It(i.type,o),Yc(e,t,i,o,n);case 15:return bc(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:It(i,o),ml(e,t),t.tag=1,rt(i)?(e=!0,qi(t)):e=!1,hr(t,n),Bc(t,i,o),po(t,i,o,n),vo(null,t,i,!0,e,n);case 19:return _c(e,t,n);case 22:return zc(e,t,n)}throw Error(r(156,t.tag))};function Sf(e,t){return tu(e,t)}function Yh(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wt(e,t,n,i){return new Yh(e,t,n,i)}function Fo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bh(e){if(typeof e=="function")return Fo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===re)return 11;if(e===oe)return 14}return 2}function yn(e,t){var n=e.alternate;return n===null?(n=wt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Il(e,t,n,i,o,u){var p=2;if(i=e,typeof e=="function")Fo(e)&&(p=1);else if(typeof e=="string")p=5;else e:switch(e){case B:return zn(n.children,o,u,t);case Q:p=8,o|=8;break;case G:return e=wt(12,n,t,o|2),e.elementType=G,e.lanes=u,e;case J:return e=wt(13,n,t,o),e.elementType=J,e.lanes=u,e;case ce:return e=wt(19,n,t,o),e.elementType=ce,e.lanes=u,e;case de:return Rl(n,o,u,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case W:p=10;break e;case V:p=9;break e;case re:p=11;break e;case oe:p=14;break e;case ie:p=16,i=null;break e}throw Error(r(130,e==null?e:typeof e,""))}return t=wt(p,n,t,o),t.elementType=e,t.type=i,t.lanes=u,t}function zn(e,t,n,i){return e=wt(7,e,i,t),e.lanes=n,e}function Rl(e,t,n,i){return e=wt(22,e,i,t),e.elementType=de,e.lanes=n,e.stateNode={isHidden:!1},e}function Lo(e,t,n){return e=wt(6,e,null,t),e.lanes=n,e}function Qo(e,t,n){return t=wt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zh(e,t,n,i,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fs(0),this.expirationTimes=fs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fs(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Uo(e,t,n,i,o,u,p,y,S){return e=new zh(e,t,n,y,S),t===1?(t=1,u===!0&&(t|=8)):t=0,u=wt(3,null,null,t),e.current=u,u.stateNode=e,u.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_s(u),e}function Xh(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function Cf(e){if(!e)return un;e=e._reactInternals;e:{if(Nn(e)!==e||e.tag!==1)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(rt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(r(171))}if(e.tag===1){var n=e.type;if(rt(n))return qu(e,n,t)}return t}function kf(e,t,n,i,o,u,p,y,S){return e=Uo(n,i,!0,e,o,u,p,y,S),e.context=Cf(null),n=e.current,i=$e(),o=gn(n),u=bt(i,o),u.callback=t??null,dn(n,u,o),e.current.lanes=o,Hr(e,o,i),st(e,i),e}function Tl(e,t,n,i){var o=t.current,u=$e(),p=gn(o);return n=Cf(n),t.context===null?t.context=n:t.pendingContext=n,t=bt(u,p),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=dn(o,t,p),e!==null&&(jt(e,o,p,u),ll(e,o,p)),p}function jl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function If(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Wo(e,t){If(e,t),(e=e.alternate)&&If(e,t)}function Gh(){return null}var Rf=typeof reportError=="function"?reportError:function(e){console.error(e)};function Vo(e){this._internalRoot=e}Pl.prototype.render=Vo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));Tl(e,t,null,null)},Pl.prototype.unmount=Vo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Vn(function(){Tl(null,e,null,null)}),t[Qt]=null}};function Pl(e){this._internalRoot=e}Pl.prototype.unstable_scheduleHydration=function(e){if(e){var t=uu();e={blockedOn:null,target:e,priority:t};for(var n=0;n<rn.length&&t!==0&&t<rn[n].priority;n++);rn.splice(n,0,e),n===0&&du(e)}};function Yo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Tf(){}function Kh(e,t,n,i,o){if(o){if(typeof i=="function"){var u=i;i=function(){var N=jl(p);u.call(N)}}var p=kf(t,i,e,0,null,!1,!1,"",Tf);return e._reactRootContainer=p,e[Qt]=p.current,Jr(e.nodeType===8?e.parentNode:e),Vn(),p}for(;o=e.lastChild;)e.removeChild(o);if(typeof i=="function"){var y=i;i=function(){var N=jl(S);y.call(N)}}var S=Uo(e,0,!1,null,null,!1,!1,"",Tf);return e._reactRootContainer=S,e[Qt]=S.current,Jr(e.nodeType===8?e.parentNode:e),Vn(function(){Tl(t,S,n,i)}),S}function Dl(e,t,n,i,o){var u=n._reactRootContainer;if(u){var p=u;if(typeof o=="function"){var y=o;o=function(){var S=jl(p);y.call(S)}}Tl(t,p,e,o)}else p=Kh(n,t,e,o,i);return jl(p)}ou=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Br(t.pendingLanes);n!==0&&(ds(t,n|1),st(t,De()),(ve&6)===0&&(xr=De()+500,cn()))}break;case 13:Vn(function(){var i=Yt(e,1);if(i!==null){var o=$e();jt(i,e,1,o)}}),Wo(e,1)}},ps=function(e){if(e.tag===13){var t=Yt(e,134217728);if(t!==null){var n=$e();jt(t,e,134217728,n)}Wo(e,134217728)}},au=function(e){if(e.tag===13){var t=gn(e),n=Yt(e,t);if(n!==null){var i=$e();jt(n,e,t,i)}Wo(e,t)}},uu=function(){return Ae},cu=function(e,t){var n=Ae;try{return Ae=e,t()}finally{Ae=n}},ls=function(e,t,n){switch(t){case"input":if(Tr(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=Zi(i);if(!o)throw Error(r(90));On(i),Tr(i,o)}}}break;case"textarea":Qa(e,n);break;case"select":t=n.value,t!=null&&Jn(e,!!n.multiple,t,!1)}},Ka=Mo,Za=Vn;var Zh={usingClientEntryPoint:!1,Events:[$r,sr,Zi,Xa,Ga,Mo]},pi={findFiberByHostInstance:Mn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jh={bundleType:pi.bundleType,version:pi.version,rendererPackageName:pi.rendererPackageName,rendererConfig:pi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=$a(e),e===null?null:e.stateNode},findFiberByHostInstance:pi.findFiberByHostInstance||Gh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nl.isDisabled&&Nl.supportsFiber)try{Pi=Nl.inject(Jh),Pt=Nl}catch{}}return ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zh,ot.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yo(t))throw Error(r(200));return Xh(e,t,null,n)},ot.createRoot=function(e,t){if(!Yo(e))throw Error(r(299));var n=!1,i="",o=Rf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Uo(e,1,!1,null,null,n,!1,i,o),e[Qt]=t.current,Jr(e.nodeType===8?e.parentNode:e),new Vo(t)},ot.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=$a(t),e=e===null?null:e.stateNode,e},ot.flushSync=function(e){return Vn(e)},ot.hydrate=function(e,t,n){if(!Ol(t))throw Error(r(200));return Dl(null,e,t,!0,n)},ot.hydrateRoot=function(e,t,n){if(!Yo(e))throw Error(r(405));var i=n!=null&&n.hydratedSources||null,o=!1,u="",p=Rf;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(p=n.onRecoverableError)),t=kf(t,null,e,1,n??null,o,!1,u,p),e[Qt]=t.current,Jr(e),i)for(e=0;e<i.length;e++)n=i[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Pl(t)},ot.render=function(e,t,n){if(!Ol(t))throw Error(r(200));return Dl(null,e,t,!1,n)},ot.unmountComponentAtNode=function(e){if(!Ol(e))throw Error(r(40));return e._reactRootContainer?(Vn(function(){Dl(null,null,e,!1,function(){e._reactRootContainer=null,e[Qt]=null})}),!0):!1},ot.unstable_batchedUpdates=Mo,ot.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Ol(n))throw Error(r(200));if(e==null||e._reactInternals===void 0)throw Error(r(38));return Dl(e,t,n,!1,i)},ot.version="18.3.1-next-f1338f8080-20240426",ot}var Pd;function Tm(){if(Pd)return ta.exports;Pd=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(s){console.error(s)}}return l(),ta.exports=Rm(),ta.exports}var Od;function jm(){if(Od)return Ll;Od=1;var l=Tm();return Ll.createRoot=l.createRoot,Ll.hydrateRoot=l.hydrateRoot,Ll}var Pm=jm();class Gl{constructor(){Gt(this,"project",[]);Gt(this,"status",[]);Gt(this,"text",[]);Gt(this,"labels",[]);Gt(this,"annotations",[])}empty(){return this.project.length+this.status.length+this.text.length===0}static parse(s){const r=Gl.tokenize(s),a=new Set,c=new Set,f=[],d=new Set,m=new Set;for(let A of r){const x=A.startsWith("!");if(x&&(A=A.slice(1)),A.startsWith("p:")){a.add({name:A.slice(2),not:x});continue}if(A.startsWith("s:")){c.add({name:A.slice(2),not:x});continue}if(A.startsWith("@")){d.add({name:A,not:x});continue}if(A.startsWith("annot:")){m.add({name:A.slice(6),not:x});continue}f.push({name:A.toLowerCase(),not:x})}const g=new Gl;return g.text=f,g.project=[...a],g.status=[...c],g.labels=[...d],g.annotations=[...m],g}static tokenize(s){const r=[];let a,c=[];for(let f=0;f<s.length;++f){const d=s[f];if(a&&d==="\\"&&s[f+1]===a){c.push(a),++f;continue}if(d==='"'||d==="'"){a===d?(r.push(c.join("").toLowerCase()),c=[],a=void 0):a?c.push(d):a=d;continue}if(a){c.push(d);continue}if(d===" "){c.length&&(r.push(c.join("").toLowerCase()),c=[]);continue}c.push(d)}return c.length&&r.push(c.join("").toLowerCase()),r}matches(s){const r=Om(s);if(this.project.length&&!!!this.project.find(c=>{const f=r.project.includes(c.name);return c.not?!f:f}))return!1;if(this.status.length){if(!!!this.status.find(c=>{const f=r.status.includes(c.name);return c.not?!f:f}))return!1}else if(r.status==="skipped")return!1;return!(this.text.length&&!this.text.every(c=>{if(r.text.includes(c.name))return!c.not;const[f,d,m]=c.name.split(":");return r.file.includes(f)&&r.line===d&&(m===void 0||r.column===m)?!c.not:!!c.not})||this.labels.length&&!this.labels.every(c=>{const f=r.labels.includes(c.name);return c.not?!f:f})||this.annotations.length&&!this.annotations.every(c=>{const f=r.annotations.some(d=>d.includes(c.name));return c.not?!f:f}))}}const Dd=Symbol("searchValues");function Om(l){const s=l[Dd];if(s)return s;let r="passed";l.outcome==="unexpected"&&(r="failed"),l.outcome==="flaky"&&(r="flaky"),l.outcome==="skipped"&&(r="skipped");const a={text:(r+" "+l.projectName+" "+l.tags.join(" ")+" "+l.location.file+" "+l.path.join(" ")+" "+l.title).toLowerCase(),project:l.projectName.toLowerCase(),status:r,file:l.location.file,line:String(l.location.line),column:String(l.location.column),labels:l.tags.map(c=>c.toLowerCase()),annotations:l.annotations.map(c=>{var f;return c.type.toLowerCase()+"="+((f=c.description)==null?void 0:f.toLocaleLowerCase())})};return l[Dd]=a,a}function Zt(l,s,r){if(r)return l.includes(s)?"#?q="+l.filter(f=>f!==s).join(" ").trim():"#?q="+[...l,s].join(" ").trim();let a;s.startsWith("s:")&&(a="s:"),s.startsWith("p:")&&(a="p:"),s.startsWith("@")&&(a="@");const c=l.filter(f=>!f.startsWith(a));return c.push(s),"#?q="+c.join(" ").trim()}const Dm=()=>h.jsx("svg",{"aria-hidden":"true",height:"16",viewBox:"0 0 16 16",version:"1.1",width:"16","data-view-component":"true",className:"octicon subnav-search-icon",children:h.jsx("path",{fillRule:"evenodd",d:"M11.5 7a4.499 4.499 0 11-8.998 0A4.499 4.499 0 0111.5 7zm-.82 4.74a6 6 0 111.06-1.06l3.04 3.04a.75.75 0 11-1.06 1.06l-3.04-3.04z"})}),Pa=()=>h.jsx("svg",{"aria-hidden":"true",height:"16",viewBox:"0 0 16 16",version:"1.1",width:"16",className:"octicon color-fg-muted",children:h.jsx("path",{fillRule:"evenodd",d:"M12.78 6.22a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06 0L3.22 7.28a.75.75 0 011.06-1.06L8 9.94l3.72-3.72a.75.75 0 011.06 0z"})}),Kl=()=>h.jsx("svg",{"aria-hidden":"true",height:"16",viewBox:"0 0 16 16",version:"1.1",width:"16","data-view-component":"true",className:"octicon color-fg-muted",children:h.jsx("path",{fillRule:"evenodd",d:"M6.22 3.22a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06L9.94 8 6.22 4.28a.75.75 0 010-1.06z"})}),V0=()=>h.jsx("svg",{"aria-hidden":"true",height:"16",viewBox:"0 0 16 16",version:"1.1",width:"16","data-view-component":"true",className:"octicon color-text-warning",children:h.jsx("path",{fillRule:"evenodd",d:"M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"})}),Y0=()=>h.jsx("svg",{"aria-hidden":"true",height:"16",viewBox:"0 0 16 16",version:"1.1",width:"16","data-view-component":"true",className:"octicon color-fg-muted",children:h.jsx("path",{fillRule:"evenodd",d:"M3.5 1.75a.25.25 0 01.25-.25h3a.75.75 0 000 1.5h.5a.75.75 0 000-1.5h2.086a.25.25 0 01.177.073l2.914 2.914a.25.25 0 01.073.177v8.586a.25.25 0 01-.25.25h-.5a.75.75 0 000 1.5h.5A1.75 1.75 0 0014 13.25V4.664c0-.464-.184-.909-.513-1.237L10.573.513A1.75 1.75 0 009.336 0H3.75A1.75 1.75 0 002 1.75v11.5c0 .649.353 1.214.874 1.515a.75.75 0 10.752-1.298.25.25 0 01-.126-.217V1.75zM8.75 3a.75.75 0 000 1.5h.5a.75.75 0 000-1.5h-.5zM6 5.25a.75.75 0 01.75-.75h.5a.75.75 0 010 1.5h-.5A.75.75 0 016 5.25zm2 1.5A.75.75 0 018.75 6h.5a.75.75 0 010 1.5h-.5A.75.75 0 018 6.75zm-1.25.75a.75.75 0 000 1.5h.5a.75.75 0 000-1.5h-.5zM8 9.75A.75.75 0 018.75 9h.5a.75.75 0 010 1.5h-.5A.75.75 0 018 9.75zm-.75.75a1.75 1.75 0 00-1.75 1.75v3c0 .414.336.75.75.75h2.5a.75.75 0 00.75-.75v-3a1.75 1.75 0 00-1.75-1.75h-.5zM7 12.25a.25.25 0 01.25-.25h.5a.25.25 0 01.25.25v2.25H7v-2.25z"})}),b0=()=>h.jsx("svg",{className:"octicon color-text-danger",viewBox:"0 0 16 16",version:"1.1",width:"16",height:"16","aria-hidden":"true",children:h.jsx("path",{fillRule:"evenodd",d:"M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"})}),z0=()=>h.jsx("svg",{"aria-hidden":"true",height:"16",viewBox:"0 0 16 16",version:"1.1",width:"16","data-view-component":"true",className:"octicon color-icon-success",children:h.jsx("path",{fillRule:"evenodd",d:"M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"})}),Nm=()=>h.jsx("svg",{"aria-hidden":"true",height:"16",viewBox:"0 0 16 16",version:"1.1",width:"16","data-view-component":"true",className:"octicon color-text-danger",children:h.jsx("path",{fillRule:"evenodd",d:"M5.75.75A.75.75 0 016.5 0h3a.75.75 0 010 1.5h-.75v1l-.001.041a6.718 6.718 0 013.464 1.435l.007-.006.75-.75a.75.75 0 111.06 1.06l-.75.75-.006.007a6.75 6.75 0 11-10.548 0L2.72 5.03l-.75-.75a.75.75 0 011.06-1.06l.75.75.007.006A6.718 6.718 0 017.25 2.541a.756.756 0 010-.041v-1H6.5a.75.75 0 01-.75-.75zM8 14.5A5.25 5.25 0 108 4a5.25 5.25 0 000 10.5zm.389-6.7l1.33-1.33a.75.75 0 111.061 1.06L9.45 8.861A1.502 1.502 0 018 10.75a1.5 1.5 0 11.389-2.95z"})}),Mm=()=>h.jsx("svg",{className:"octicon",viewBox:"0 0 16 16",version:"1.1",width:"16",height:"16","aria-hidden":"true"}),Bm=()=>h.jsx("svg",{className:"octicon",viewBox:"0 0 48 48",version:"1.1",width:"20",height:"20","aria-hidden":"true",children:h.jsx("path",{xmlns:"http://www.w3.org/2000/svg",d:"M11.85 32H36.2l-7.35-9.95-6.55 8.7-4.6-6.45ZM7 40q-1.2 0-2.1-.9Q4 38.2 4 37V11q0-1.2.9-2.1Q5.8 8 7 8h34q1.2 0 2.1.9.9.9.9 2.1v26q0 1.2-.9 2.1-.9.9-2.1.9Zm0-29v26-26Zm34 26V11H7v26Z"})}),Hm=()=>h.jsx("svg",{className:"octicon",viewBox:"0 0 48 48",version:"1.1",width:"20",height:"20","aria-hidden":"true",children:h.jsx("path",{xmlns:"http://www.w3.org/2000/svg",d:"m19.6 32.35 13-8.45-13-8.45ZM7 40q-1.2 0-2.1-.9Q4 38.2 4 37V11q0-1.2.9-2.1Q5.8 8 7 8h34q1.2 0 2.1.9.9.9.9 2.1v26q0 1.2-.9 2.1-.9.9-2.1.9Zm0-3h34V11H7v26Zm0 0V11v26Z"})}),Fm=()=>h.jsx("svg",{className:"octicon",viewBox:"0 0 48 48",version:"1.1",width:"20",height:"20","aria-hidden":"true",children:h.jsx("path",{xmlns:"http://www.w3.org/2000/svg",d:"M7 37h9.35V11H7v26Zm12.35 0h9.3V11h-9.3v26Zm12.3 0H41V11h-9.35v26ZM7 40q-1.2 0-2.1-.9Q4 38.2 4 37V11q0-1.2.9-2.1Q5.8 8 7 8h34q1.2 0 2.1.9.9.9.9 2.1v26q0 1.2-.9 2.1-.9.9-2.1.9Z"})}),Lm=()=>h.jsxs("svg",{className:"octicon",viewBox:"0 0 16 16",width:"16",height:"16","aria-hidden":"true",children:[h.jsx("path",{d:"M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"}),h.jsx("path",{d:"M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"})]});function Qm(l,s,r,a){const[c,f]=_t.useState(r);return _t.useEffect(()=>{let d=!1;return l().then(m=>{d||f(m)}),()=>{d=!0}},s),c}function X0(){const l=_t.useRef(null),[s,r]=_t.useState(new DOMRect(0,0,10,10));return _t.useLayoutEffect(()=>{const a=l.current;if(!a)return;const c=a.getBoundingClientRect();r(new DOMRect(0,0,c.width,c.height));const f=new ResizeObserver(d=>{const m=d[d.length-1];m&&m.contentRect&&r(m.contentRect)});return f.observe(a),()=>f.disconnect()},[l]),[s,l]}class Um{constructor(){this.onChangeEmitter=new EventTarget}getString(s,r){return localStorage[s]||r}setString(s,r){var a;localStorage[s]=r,this.onChangeEmitter.dispatchEvent(new Event(s)),(a=window.saveSettings)==null||a.call(window)}getObject(s,r){if(!localStorage[s])return r;try{return JSON.parse(localStorage[s])}catch{return r}}setObject(s,r){var a;localStorage[s]=JSON.stringify(r),this.onChangeEmitter.dispatchEvent(new Event(s)),(a=window.saveSettings)==null||a.call(window)}}new Um;function Lt(...l){return l.filter(Boolean).join(" ")}const Nd="\\u0000-\\u0020\\u007f-\\u009f",Wm=new RegExp("(?:[a-zA-Z][a-zA-Z0-9+.-]{2,}:\\/\\/|www\\.)[^\\s"+Nd+'"]{2,}[^\\s'+Nd+`"')}\\],:;.!?]`,"ug");function Vm(){const[l,s]=_t.useState(!1),r=_t.useCallback(()=>{const a=[];return s(c=>(a.push(setTimeout(()=>s(!1),1e3)),c?(a.push(setTimeout(()=>s(!0),50)),!1):!0)),()=>a.forEach(clearTimeout)},[s]);return[l,r]}const G0=({title:l,loadChildren:s,onClick:r,expandByDefault:a,depth:c,style:f,flash:d})=>{const[m,g]=se.useState(a||!1);return h.jsxs("div",{role:"treeitem",className:Lt("tree-item",d&&"yellow-flash"),style:f,children:[h.jsxs("span",{className:"tree-item-title",style:{whiteSpace:"nowrap",paddingLeft:c*22+4},onClick:()=>{r==null||r(),g(!m)},children:[s&&!!m&&Pa(),s&&!m&&Kl(),!s&&h.jsx("span",{style:{visibility:"hidden"},children:Kl()}),l]}),m&&(s==null?void 0:s())]})},K0=({value:l})=>{const[s,r]=se.useState("copy"),a=se.useCallback(()=>{navigator.clipboard.writeText(l).then(()=>{r("check"),setTimeout(()=>{r("copy")},3e3)},()=>{r("cross")})},[l]),c=s==="check"?z0():s==="cross"?b0():Lm();return h.jsx("button",{className:"copy-icon",title:"Copy to clipboard","aria-label":"Copy to clipboard",onClick:a,children:c})},Oa=({children:l,value:s})=>h.jsxs("span",{className:"copy-value-container",children:[l,h.jsx("span",{className:"copy-button-container",children:h.jsx(K0,{value:s})})]});function Zl(l){const s=[];let r=0,a;for(;(a=Wm.exec(l))!==null;){const f=l.substring(r,a.index);f&&s.push(f);const d=a[0];s.push(Ym(d)),r=a.index+d.length}const c=l.substring(r);return c&&s.push(c),s}function Ym(l){let s=l;return s.startsWith("www.")&&(s="https://"+s),h.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",children:l})}function Da(l){window.history.pushState({},"",l);const s=new PopStateEvent("popstate");window.dispatchEvent(s)}const Md=({predicate:l,children:s})=>{const r=se.useContext(Et);return l(r)?s:null},ht=({click:l,ctrlClick:s,children:r,...a})=>h.jsx("a",{...a,style:{textDecoration:"none",color:"var(--color-fg-default)",cursor:"pointer"},onClick:c=>{l&&(c.preventDefault(),Da((c.metaKey||c.ctrlKey)&&s||l))},children:r}),Z0=({projectNames:l,projectName:s})=>{const r=encodeURIComponent(s),a=s===r?s:`"${r.replace(/%22/g,"%5C%22")}"`;return h.jsx(ht,{href:`#?q=p:${a}`,children:h.jsx("span",{className:Lt("label",`label-color-${l.indexOf(s)%6}`),style:{margin:"6px 0 0 6px"},children:s})})},Ql=({attachment:l,result:s,href:r,linkName:a,openInNewTab:c})=>{const[f,d]=Vm();return Na("attachment-"+s.attachments.indexOf(l),d),h.jsx(G0,{title:h.jsxs("span",{children:[l.contentType===Xm?V0():Y0(),l.path&&(c?h.jsx("a",{href:r||l.path,target:"_blank",rel:"noreferrer",children:a||l.name}):h.jsx("a",{href:r||l.path,download:zm(l),children:a||l.name})),!l.path&&(c?h.jsx("a",{href:URL.createObjectURL(new Blob([l.body],{type:l.contentType})),target:"_blank",rel:"noreferrer",onClick:m=>m.stopPropagation(),children:l.name}):h.jsx("span",{children:Zl(l.name)}))]}),loadChildren:l.body?()=>[h.jsxs("div",{className:"attachment-body",children:[h.jsx(K0,{value:l.body}),Zl(l.body)]},1)]:void 0,depth:0,style:{lineHeight:"32px"},flash:f})},Et=se.createContext(new URLSearchParams(window.location.hash.slice(1))),bm=({children:l})=>{const[s,r]=se.useState(new URLSearchParams(window.location.hash.slice(1)));return se.useEffect(()=>{const a=()=>r(new URLSearchParams(window.location.hash.slice(1)));return window.addEventListener("popstate",a),()=>window.removeEventListener("popstate",a)},[]),h.jsx(Et.Provider,{value:s,children:l})};function zm(l){if(l.name.includes(".")||!l.path)return l.name;const s=l.path.indexOf(".");return s===-1?l.name:l.name+l.path.slice(s,l.path.length)}function J0(l){return`trace/index.html?${l.map((s,r)=>`trace=${new URL(s.path,window.location.href)}`).join("&")}`}const Xm="x-playwright/missing";function Na(l,s){const r=se.useContext(Et),a=Gm(l);se.useEffect(()=>{if(a)return s()},[a,s,r])}function Gm(l){const r=se.useContext(Et).get("anchor");return r===null||typeof l>"u"?!1:typeof l=="string"?l===r:Array.isArray(l)?l.includes(r):l(r)}function vi({id:l,children:s}){const r=se.useRef(null),a=se.useCallback(()=>{var c;(c=r.current)==null||c.scrollIntoView({block:"start",inline:"start"})},[]);return Na(l,a),h.jsx("div",{ref:r,children:s})}function Zn({test:l,result:s,anchor:r}){const a=new URLSearchParams;return l&&a.set("testId",l.testId),l&&s&&a.set("run",""+l.results.indexOf(s)),r&&a.set("anchor",r),"#?"+a}function Ei(l){switch(l){case"failed":case"unexpected":return b0();case"passed":case"expected":return z0();case"timedOut":return Nm();case"flaky":return V0();case"skipped":case"interrupted":return Mm()}}const Ma=({title:l,leftSuperHeader:s,rightSuperHeader:r})=>h.jsxs("div",{className:"header-view",children:[h.jsxs("div",{className:"hbox header-superheader",children:[s,h.jsx("div",{style:{flex:"auto"}}),r]}),l&&h.jsx("div",{className:"header-title",children:l})]}),Km=({stats:l,filterText:s,setFilterText:r})=>{const a=se.useContext(Et);return se.useEffect(()=>{const c=a.get("q");r(c?`${c.trim()} `:"")},[a,r]),h.jsx(h.Fragment,{children:h.jsxs("div",{className:"pt-3",children:[h.jsx("div",{className:"header-view-status-container ml-2 pl-2 d-flex",children:h.jsx(Zm,{stats:l})}),h.jsxs("form",{className:"subnav-search",onSubmit:c=>{c.preventDefault();const f=new URL(window.location.href),d=new FormData(c.target).get("q");f.hash=d?"?"+new URLSearchParams({q:d}):"",Da(f)},children:[Dm(),h.jsx("input",{name:"q",spellCheck:!1,className:"form-control subnav-search-input input-contrast width-full",value:s,onChange:c=>{r(c.target.value)}})]})]})})},Zm=({stats:l})=>{var c;const a=(((c=se.useContext(Et).get("q"))==null?void 0:c.toString())||"").split(" ");return h.jsxs("nav",{children:[h.jsxs(ht,{className:"subnav-item",href:"#?",children:["All ",h.jsx("span",{className:"d-inline counter",children:l.total-l.skipped})]}),h.jsxs(ht,{className:"subnav-item",click:Zt(a,"s:passed",!1),ctrlClick:Zt(a,"s:passed",!0),children:["Passed ",h.jsx("span",{className:"d-inline counter",children:l.expected})]}),h.jsxs(ht,{className:"subnav-item",click:Zt(a,"s:failed",!1),ctrlClick:Zt(a,"s:failed",!0),children:[!!l.unexpected&&Ei("unexpected")," Failed ",h.jsx("span",{className:"d-inline counter",children:l.unexpected})]}),h.jsxs(ht,{className:"subnav-item",click:Zt(a,"s:flaky",!1),ctrlClick:Zt(a,"s:flaky",!0),children:[!!l.flaky&&Ei("flaky")," Flaky ",h.jsx("span",{className:"d-inline counter",children:l.flaky})]}),h.jsxs(ht,{className:"subnav-item",click:Zt(a,"s:skipped",!1),ctrlClick:Zt(a,"s:skipped",!0),children:["Skipped ",h.jsx("span",{className:"d-inline counter",children:l.skipped})]})]})},Jm=({tabs:l,selectedTab:s,setSelectedTab:r})=>{const a=se.useId();return h.jsx("div",{className:"tabbed-pane",children:h.jsxs("div",{className:"vbox",children:[h.jsx("div",{className:"hbox",style:{flex:"none"},children:h.jsx("div",{className:"tabbed-pane-tab-strip",role:"tablist",children:l.map(c=>h.jsx("div",{className:Lt("tabbed-pane-tab-element",s===c.id&&"selected"),onClick:()=>r(c.id),id:`${a}-${c.id}`,role:"tab","aria-selected":s===c.id,children:h.jsx("div",{className:"tabbed-pane-tab-label",children:c.title})},c.id))})}),l.map(c=>{if(s===c.id)return h.jsx("div",{className:"tab-content",role:"tabpanel","aria-labelledby":`${a}-${c.id}`,children:c.render()},c.id)})]})})},q0=({header:l,expanded:s,setExpanded:r,children:a,noInsets:c,dataTestId:f})=>{const d=se.useId();return h.jsxs("div",{className:"chip","data-testid":f,children:[h.jsxs("div",{role:"button","aria-expanded":!!s,"aria-controls":d,className:Lt("chip-header",r&&" expanded-"+s),onClick:()=>r==null?void 0:r(!s),title:typeof l=="string"?l:void 0,children:[r&&!!s&&Pa(),r&&!s&&Kl(),l]}),(!r||s)&&h.jsx("div",{id:d,role:"region",className:Lt("chip-body",c&&"chip-body-no-insets"),children:a})]})},Bt=({header:l,initialExpanded:s,noInsets:r,children:a,dataTestId:c,revealOnAnchorId:f})=>{const[d,m]=se.useState(s??!0),g=se.useCallback(()=>m(!0),[]);return Na(f,g),h.jsx(q0,{header:l,expanded:d,setExpanded:m,noInsets:r,dataTestId:c,children:a})};function kr(l){if(!isFinite(l))return"-";if(l===0)return"0ms";if(l<1e3)return l.toFixed(0)+"ms";const s=l/1e3;if(s<60)return s.toFixed(1)+"s";const r=s/60;if(r<60)return r.toFixed(1)+"m";const a=r/60;return a<24?a.toFixed(1)+"h":(a/24).toFixed(1)+"d"}function _0(l){let s=0;for(let r=0;r<l.length;r++)s=l.charCodeAt(r)+((s<<8)-s);return Math.abs(s%6)}const qm="data:image/png;base64,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",_m=({cursor:l,onPaneMouseMove:s,onPaneMouseUp:r,onPaneDoubleClick:a})=>(_t.useEffect(()=>{const c=document.createElement("div");return c.style.position="fixed",c.style.top="0",c.style.right="0",c.style.bottom="0",c.style.left="0",c.style.zIndex="9999",c.style.cursor=l,document.body.appendChild(c),s&&c.addEventListener("mousemove",s),r&&c.addEventListener("mouseup",r),a&&document.body.addEventListener("dblclick",a),()=>{s&&c.removeEventListener("mousemove",s),r&&c.removeEventListener("mouseup",r),a&&document.body.removeEventListener("dblclick",a),document.body.removeChild(c)}},[l,s,r,a]),h.jsx(h.Fragment,{})),$m={position:"absolute",top:0,right:0,bottom:0,left:0},eg=({orientation:l,offsets:s,setOffsets:r,resizerColor:a,resizerWidth:c,minColumnWidth:f})=>{const d=f||0,[m,g]=_t.useState(null),[A,x]=X0(),k={position:"absolute",right:l==="horizontal"?void 0:0,bottom:l==="horizontal"?0:void 0,width:l==="horizontal"?7:void 0,height:l==="horizontal"?void 0:7,borderTopWidth:l==="horizontal"?void 0:(7-c)/2,borderRightWidth:l==="horizontal"?(7-c)/2:void 0,borderBottomWidth:l==="horizontal"?void 0:(7-c)/2,borderLeftWidth:l==="horizontal"?(7-c)/2:void 0,borderColor:"transparent",borderStyle:"solid",cursor:l==="horizontal"?"ew-resize":"ns-resize"};return h.jsxs("div",{style:{position:"absolute",top:0,right:0,bottom:0,left:-(7-c)/2,zIndex:100,pointerEvents:"none"},ref:x,children:[!!m&&h.jsx(_m,{cursor:l==="horizontal"?"ew-resize":"ns-resize",onPaneMouseUp:()=>g(null),onPaneMouseMove:I=>{if(!I.buttons)g(null);else if(m){const j=l==="horizontal"?I.clientX-m.clientX:I.clientY-m.clientY,F=m.offset+j,w=m.index>0?s[m.index-1]:0,v=l==="horizontal"?A.width:A.height,E=Math.min(Math.max(w+d,F),v-d)-s[m.index];for(let P=m.index;P<s.length;++P)s[P]=s[P]+E;r([...s])}}}),s.map((I,j)=>h.jsx("div",{style:{...k,top:l==="horizontal"?0:I,left:l==="horizontal"?I:0,pointerEvents:"initial"},onMouseDown:F=>g({clientX:F.clientX,clientY:F.clientY,offset:I,index:j}),children:h.jsx("div",{style:{...$m,background:a}})},j))]})};async function ia(l){const s=new Image;return l&&(s.src=l,await new Promise((r,a)=>{s.onload=r,s.onerror=r})),s}const ga={backgroundImage:`linear-gradient(45deg, #80808020 25%, transparent 25%),
48:                     linear-gradient(-45deg, #80808020 25%, transparent 25%),
49:                     linear-gradient(45deg, transparent 75%, #80808020 75%),
50:                     linear-gradient(-45deg, transparent 75%, #80808020 75%)`,backgroundSize:"20px 20px",backgroundPosition:"0 0, 0 10px, 10px -10px, -10px 0px",boxShadow:`rgb(0 0 0 / 10%) 0px 1.8px 1.9px,
51:               rgb(0 0 0 / 15%) 0px 6.1px 6.3px,
52:               rgb(0 0 0 / 10%) 0px -2px 4px,
53:               rgb(0 0 0 / 15%) 0px -6.1px 12px,
54:               rgb(0 0 0 / 25%) 0px 6px 12px`},$0=({diff:l,noTargetBlank:s,hideDetails:r})=>{const[a,c]=se.useState(l.diff?"diff":"actual"),[f,d]=se.useState(!1),[m,g]=se.useState(null),[A,x]=se.useState("Expected"),[k,I]=se.useState(null),[j,F]=se.useState(null),[w,v]=X0();se.useEffect(()=>{(async()=>{var G,W,V,re;g(await ia((G=l.expected)==null?void 0:G.attachment.path)),x(((W=l.expected)==null?void 0:W.title)||"Expected"),I(await ia((V=l.actual)==null?void 0:V.attachment.path)),F(await ia((re=l.diff)==null?void 0:re.attachment.path))})()},[l]);const E=m&&k&&j,P=E?Math.max(m.naturalWidth,k.naturalWidth,200):500,M=E?Math.max(m.naturalHeight,k.naturalHeight,200):500,L=Math.min(1,(w.width-30)/P),z=Math.min(1,(w.width-50)/P/2),D=P*L,B=M*L,Q={flex:"none",margin:"0 10px",cursor:"pointer",userSelect:"none"};return h.jsx("div",{"data-testid":"test-result-image-mismatch",style:{display:"flex",flexDirection:"column",alignItems:"center",flex:"auto"},ref:v,children:E&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{"data-testid":"test-result-image-mismatch-tabs",style:{display:"flex",margin:"10px 0 20px"},children:[l.diff&&h.jsx("div",{style:{...Q,fontWeight:a==="diff"?600:"initial"},onClick:()=>c("diff"),children:"Diff"}),h.jsx("div",{style:{...Q,fontWeight:a==="actual"?600:"initial"},onClick:()=>c("actual"),children:"Actual"}),h.jsx("div",{style:{...Q,fontWeight:a==="expected"?600:"initial"},onClick:()=>c("expected"),children:A}),h.jsx("div",{style:{...Q,fontWeight:a==="sxs"?600:"initial"},onClick:()=>c("sxs"),children:"Side by side"}),h.jsx("div",{style:{...Q,fontWeight:a==="slider"?600:"initial"},onClick:()=>c("slider"),children:"Slider"})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"center",flex:"auto",minHeight:B+60},children:[l.diff&&a==="diff"&&h.jsx(Kt,{image:j,alt:"Diff",hideSize:r,canvasWidth:D,canvasHeight:B,scale:L}),l.diff&&a==="actual"&&h.jsx(Kt,{image:k,alt:"Actual",hideSize:r,canvasWidth:D,canvasHeight:B,scale:L}),l.diff&&a==="expected"&&h.jsx(Kt,{image:m,alt:A,hideSize:r,canvasWidth:D,canvasHeight:B,scale:L}),l.diff&&a==="slider"&&h.jsx(tg,{expectedImage:m,actualImage:k,hideSize:r,canvasWidth:D,canvasHeight:B,scale:L,expectedTitle:A}),l.diff&&a==="sxs"&&h.jsxs("div",{style:{display:"flex"},children:[h.jsx(Kt,{image:m,title:A,hideSize:r,canvasWidth:z*P,canvasHeight:z*M,scale:z}),h.jsx(Kt,{image:f?j:k,title:f?"Diff":"Actual",onClick:()=>d(!f),hideSize:r,canvasWidth:z*P,canvasHeight:z*M,scale:z})]}),!l.diff&&a==="actual"&&h.jsx(Kt,{image:k,title:"Actual",hideSize:r,canvasWidth:D,canvasHeight:B,scale:L}),!l.diff&&a==="expected"&&h.jsx(Kt,{image:m,title:A,hideSize:r,canvasWidth:D,canvasHeight:B,scale:L}),!l.diff&&a==="sxs"&&h.jsxs("div",{style:{display:"flex"},children:[h.jsx(Kt,{image:m,title:A,canvasWidth:z*P,canvasHeight:z*M,scale:z}),h.jsx(Kt,{image:k,title:"Actual",canvasWidth:z*P,canvasHeight:z*M,scale:z})]})]}),!r&&h.jsxs("div",{style:{alignSelf:"start",lineHeight:"18px",marginLeft:"15px"},children:[h.jsx("div",{children:l.diff&&h.jsx("a",{target:"_blank",href:l.diff.attachment.path,rel:"noreferrer",children:l.diff.attachment.name})}),h.jsx("div",{children:h.jsx("a",{target:s?"":"_blank",href:l.actual.attachment.path,rel:"noreferrer",children:l.actual.attachment.name})}),h.jsx("div",{children:h.jsx("a",{target:s?"":"_blank",href:l.expected.attachment.path,rel:"noreferrer",children:l.expected.attachment.name})})]})]})})},tg=({expectedImage:l,actualImage:s,canvasWidth:r,canvasHeight:a,scale:c,expectedTitle:f,hideSize:d})=>{const m={position:"absolute",top:0,left:0},[g,A]=se.useState(r/2),x=l.naturalWidth===s.naturalWidth&&l.naturalHeight===s.naturalHeight;return h.jsxs("div",{style:{flex:"none",display:"flex",alignItems:"center",flexDirection:"column",userSelect:"none"},children:[!d&&h.jsxs("div",{style:{margin:5},children:[!x&&h.jsx("span",{style:{flex:"none",margin:"0 5px"},children:"Expected "}),h.jsx("span",{children:l.naturalWidth}),h.jsx("span",{style:{flex:"none",margin:"0 5px"},children:"x"}),h.jsx("span",{children:l.naturalHeight}),!x&&h.jsx("span",{style:{flex:"none",margin:"0 5px 0 15px"},children:"Actual "}),!x&&h.jsx("span",{children:s.naturalWidth}),!x&&h.jsx("span",{style:{flex:"none",margin:"0 5px"},children:"x"}),!x&&h.jsx("span",{children:s.naturalHeight})]}),h.jsxs("div",{style:{position:"relative",width:r,height:a,margin:15,...ga},children:[h.jsx(eg,{orientation:"horizontal",offsets:[g],setOffsets:k=>A(k[0]),resizerColor:"#57606a80",resizerWidth:6}),h.jsx("img",{alt:f,style:{width:l.naturalWidth*c,height:l.naturalHeight*c},draggable:"false",src:l.src}),h.jsx("div",{style:{...m,bottom:0,overflow:"hidden",width:g,...ga},children:h.jsx("img",{alt:"Actual",style:{width:s.naturalWidth*c,height:s.naturalHeight*c},draggable:"false",src:s.src})})]})]})},Kt=({image:l,title:s,alt:r,hideSize:a,canvasWidth:c,canvasHeight:f,scale:d,onClick:m})=>h.jsxs("div",{style:{flex:"none",display:"flex",alignItems:"center",flexDirection:"column"},children:[!a&&h.jsxs("div",{style:{margin:5},children:[s&&h.jsx("span",{style:{flex:"none",margin:"0 5px"},children:s}),h.jsx("span",{children:l.naturalWidth}),h.jsx("span",{style:{flex:"none",margin:"0 5px"},children:"x"}),h.jsx("span",{children:l.naturalHeight})]}),h.jsx("div",{style:{display:"flex",flex:"none",width:c,height:f,margin:15,...ga},children:h.jsx("img",{width:l.naturalWidth*d,height:l.naturalHeight*d,alt:s||r,style:{cursor:m?"pointer":"initial"},draggable:"false",src:l.src,onClick:m})})]});function ng(l,s){const r=/(\x1b\[(\d+(;\d+)*)m)|([^\x1b]+)/g,a=[];let c,f={},d=!1,m=s==null?void 0:s.fg,g=s==null?void 0:s.bg;for(;(c=r.exec(l))!==null;){const[,,A,,x]=c;if(A){const k=+A;switch(k){case 0:f={};break;case 1:f["font-weight"]="bold";break;case 2:f.opacity="0.8";break;case 3:f["font-style"]="italic";break;case 4:f["text-decoration"]="underline";break;case 7:d=!0;break;case 8:f.display="none";break;case 9:f["text-decoration"]="line-through";break;case 22:delete f["font-weight"],delete f["font-style"],delete f.opacity,delete f["text-decoration"];break;case 23:delete f["font-weight"],delete f["font-style"],delete f.opacity;break;case 24:delete f["text-decoration"];break;case 27:d=!1;break;case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:m=Bd[k-30];break;case 39:m=s==null?void 0:s.fg;break;case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:g=Bd[k-40];break;case 49:g=s==null?void 0:s.bg;break;case 53:f["text-decoration"]="overline";break;case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:m=Hd[k-90];break;case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:g=Hd[k-100];break}}else if(x){const k={...f},I=d?g:m;I!==void 0&&(k.color=I);const j=d?m:g;j!==void 0&&(k["background-color"]=j),a.push(`<span style="${ig(k)}">${rg(x)}</span>`)}}return a.join("")}const Bd={0:"var(--vscode-terminal-ansiBlack)",1:"var(--vscode-terminal-ansiRed)",2:"var(--vscode-terminal-ansiGreen)",3:"var(--vscode-terminal-ansiYellow)",4:"var(--vscode-terminal-ansiBlue)",5:"var(--vscode-terminal-ansiMagenta)",6:"var(--vscode-terminal-ansiCyan)",7:"var(--vscode-terminal-ansiWhite)"},Hd={0:"var(--vscode-terminal-ansiBrightBlack)",1:"var(--vscode-terminal-ansiBrightRed)",2:"var(--vscode-terminal-ansiBrightGreen)",3:"var(--vscode-terminal-ansiBrightYellow)",4:"var(--vscode-terminal-ansiBrightBlue)",5:"var(--vscode-terminal-ansiBrightMagenta)",6:"var(--vscode-terminal-ansiBrightCyan)",7:"var(--vscode-terminal-ansiBrightWhite)"};function rg(l){return l.replace(/[&"<>]/g,s=>({"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"})[s])}function ig(l){return Object.entries(l).map(([s,r])=>`${s}: ${r}`).join("; ")}const Ba=({code:l,children:s,testId:r})=>{const a=se.useMemo(()=>va(l),[l]);return h.jsxs("div",{className:"test-error-container test-error-text","data-testid":r,children:[s,h.jsx("div",{className:"test-error-view",dangerouslySetInnerHTML:{__html:a||""}})]})},lg=({prompt:l})=>{const[s,r]=se.useState(!1);return h.jsx("button",{className:"button",style:{minWidth:100},onClick:async()=>{await navigator.clipboard.writeText(l),r(!0),setTimeout(()=>{r(!1)},3e3)},children:s?"Copied":"Copy prompt"})},sg=({errorPrefix:l,diff:s,errorSuffix:r})=>{const a=se.useMemo(()=>va(l),[l]),c=se.useMemo(()=>va(r),[r]);return h.jsxs("div",{"data-testid":"test-screenshot-error-view",className:"test-error-view",children:[h.jsx("div",{dangerouslySetInnerHTML:{__html:a||""},className:"test-error-text",style:{marginBottom:20}}),h.jsx($0,{diff:s,hideDetails:!0},"image-diff"),h.jsx("div",{"data-testid":"error-suffix",dangerouslySetInnerHTML:{__html:c||""},className:"test-error-text"})]})};function va(l){return ng(l||"",{bg:"var(--color-canvas-subtle)",fg:"var(--color-fg-default)"})}const og=`
55: # Instructions
56: 
57: - Following Playwright test failed.
58: - Explain why, be concise, respect Playwright best practices.
59: - Provide a snippet of code with the fix, if possible.
60: `.trimStart();async function ag({testInfo:l,metadata:s,errorContext:r,errors:a,buildCodeFrame:c}){var A;const f=new Set(a.filter(x=>x.message&&!x.message.includes(`
61: `)).map(x=>x.message));for(const x of a)for(const k of f.keys())(A=x.message)!=null&&A.includes(k)&&f.delete(k);const d=a.filter(x=>!(!x.message||!x.message.includes(`
62: `)&&!f.has(x.message)));if(!d.length)return;const m=[og,"# Test info","",l,"","# Error details"];for(const x of d)m.push("","```",cg(x.message||""),"```");r&&m.push(r);const g=await c(d[d.length-1]);return g&&m.push("","# Test source","","```ts",g,"```"),s!=null&&s.gitDiff&&m.push("","# Local changes","","```diff",s.gitDiff,"```"),m.join(`
63: `)}const ug=new RegExp("([\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)|(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~])))","g");function cg(l){return l.replace(ug,"")}function fg(l,s){var a;const r=new Map;for(const c of l){const f=c.name.match(/^(.*)-(expected|actual|diff|previous)(\.[^.]+)?$/);if(!f)continue;const[,d,m,g=""]=f,A=d+g;let x=r.get(A);x||(x={name:A,anchors:[`attachment-${d}`]},r.set(A,x)),x.anchors.push(`attachment-${s.attachments.indexOf(c)}`),m==="actual"&&(x.actual={attachment:c}),m==="expected"&&(x.expected={attachment:c,title:"Expected"}),m==="previous"&&(x.expected={attachment:c,title:"Previous"}),m==="diff"&&(x.diff={attachment:c})}for(const[c,f]of r)!f.actual||!f.expected?r.delete(c):(l.delete(f.actual.attachment),l.delete(f.expected.attachment),l.delete((a=f.diff)==null?void 0:a.attachment));return[...r.values()]}const dg=({test:l,result:s,testRunMetadata:r})=>{const{screenshots:a,videos:c,traces:f,otherAttachments:d,diffs:m,errors:g,otherAttachmentAnchors:A,screenshotAnchors:x,errorContext:k}=se.useMemo(()=>{const j=s.attachments.filter(B=>!B.name.startsWith("_")),F=new Set(j.filter(B=>B.contentType.startsWith("image/"))),w=[...F].map(B=>`attachment-${j.indexOf(B)}`),v=j.filter(B=>B.contentType.startsWith("video/")),E=j.filter(B=>B.name==="trace"),P=j.find(B=>B.name==="error-context"),M=new Set(j);[...F,...v,...E].forEach(B=>M.delete(B));const L=[...M].map(B=>`attachment-${j.indexOf(B)}`),z=fg(F,s),D=pg(s.errors.map(B=>B.message),z);return{screenshots:[...F],videos:v,traces:E,otherAttachments:M,diffs:z,errors:D,otherAttachmentAnchors:L,screenshotAnchors:w,errorContext:P}},[s]),I=Qm(async()=>await ag({testInfo:[`- Name: ${l.path.join(" >> ")} >> ${l.title}`,`- Location: ${l.location.file}:${l.location.line}:${l.location.column}`].join(`
64: `),metadata:r,errorContext:k!=null&&k.path?await fetch(k.path).then(j=>j.text()):k==null?void 0:k.body,errors:s.errors,buildCodeFrame:async j=>j.codeframe}),[l,k,r,s],void 0);return h.jsxs("div",{className:"test-result",children:[!!g.length&&h.jsxs(Bt,{header:"Errors",children:[I&&h.jsx("div",{style:{position:"absolute",right:"16px",padding:"10px",zIndex:1},children:h.jsx(lg,{prompt:I})}),g.map((j,F)=>j.type==="screenshot"?h.jsx(sg,{errorPrefix:j.errorPrefix,diff:j.diff,errorSuffix:j.errorSuffix},"test-result-error-message-"+F):h.jsx(Ba,{code:j.error},"test-result-error-message-"+F))]}),!!s.steps.length&&h.jsx(Bt,{header:"Test Steps",children:s.steps.map((j,F)=>h.jsx(ep,{step:j,result:s,test:l,depth:0},`step-${F}`))}),m.map((j,F)=>h.jsx(vi,{id:j.anchors,children:h.jsx(Bt,{dataTestId:"test-results-image-diff",header:`Image mismatch: ${j.name}`,revealOnAnchorId:j.anchors,children:h.jsx($0,{diff:j})})},`diff-${F}`)),!!a.length&&h.jsx(Bt,{header:"Screenshots",revealOnAnchorId:x,children:a.map((j,F)=>h.jsxs(vi,{id:`attachment-${s.attachments.indexOf(j)}`,children:[h.jsx("a",{href:j.path,children:h.jsx("img",{className:"screenshot",src:j.path})}),h.jsx(Ql,{attachment:j,result:s})]},`screenshot-${F}`))}),!!f.length&&h.jsx(vi,{id:"attachment-trace",children:h.jsx(Bt,{header:"Traces",revealOnAnchorId:"attachment-trace",children:h.jsxs("div",{children:[h.jsx("a",{href:J0(f),children:h.jsx("img",{className:"screenshot",src:qm,style:{width:192,height:117,marginLeft:20}})}),f.map((j,F)=>h.jsx(Ql,{attachment:j,result:s,linkName:f.length===1?"trace":`trace-${F+1}`},`trace-${F}`))]})})}),!!c.length&&h.jsx(vi,{id:"attachment-video",children:h.jsx(Bt,{header:"Videos",revealOnAnchorId:"attachment-video",children:c.map(j=>h.jsxs("div",{children:[h.jsx("video",{controls:!0,children:h.jsx("source",{src:j.path,type:j.contentType})}),h.jsx(Ql,{attachment:j,result:s})]},j.path))})}),!!d.size&&h.jsx(Bt,{header:"Attachments",revealOnAnchorId:A,dataTestId:"attachments",children:[...d].map((j,F)=>h.jsx(vi,{id:`attachment-${s.attachments.indexOf(j)}`,children:h.jsx(Ql,{attachment:j,result:s,openInNewTab:j.contentType.startsWith("text/html")})},`attachment-link-${F}`))})]})};function pg(l,s){return l.map(r=>{const a=r.split(`
65: `)[0];if(a.includes("toHaveScreenshot")||a.includes("toMatchSnapshot")){const c=s.find(f=>{var m;const d=(m=f.actual)==null?void 0:m.attachment.name;return d&&r.includes(d)});if(c){const f=r.split(`
66: `),d=f.findIndex(x=>/Expected:|Previous:|Received:/.test(x)),m=d!==-1?f.slice(0,d).join(`
67: `):f[0],g=f.findIndex(x=>/ +Diff:/.test(x)),A=g!==-1?f.slice(g+2).join(`
68: `):f.slice(1).join(`
69: `);return{type:"screenshot",diff:c,errorPrefix:m,errorSuffix:A}}}return{type:"regular",error:r}})}const ep=({test:l,step:s,result:r,depth:a})=>h.jsx(G0,{title:h.jsxs("span",{"aria-label":s.title,children:[h.jsx("span",{style:{float:"right"},children:kr(s.duration)}),s.attachments.length>0&&h.jsx("a",{style:{float:"right"},title:"reveal attachment",href:Zn({test:l,result:r,anchor:`attachment-${s.attachments[0]}`}),onClick:c=>{c.stopPropagation()},children:Y0()}),Ei(s.error||s.duration===-1?"failed":s.skipped?"skipped":"passed"),h.jsx("span",{children:s.title}),s.count>1&&h.jsxs(h.Fragment,{children:["  ",h.jsx("span",{className:"test-result-counter",children:s.count})]}),s.location&&h.jsxs("span",{className:"test-result-path",children:[" ",s.location.file,":",s.location.line]})]}),loadChildren:s.steps.length||s.snippet?()=>{const c=s.snippet?[h.jsx(Ba,{testId:"test-snippet",code:s.snippet},"line")]:[],f=s.steps.map((d,m)=>h.jsx(ep,{step:d,depth:a+1,result:r,test:l},m));return c.concat(f)}:void 0,depth:a}),hg=({projectNames:l,test:s,testRunMetadata:r,run:a,next:c,prev:f})=>{const[d,m]=se.useState(a),g=se.useContext(Et),A=g.has("q")?"&q="+g.get("q"):"",x=se.useMemo(()=>s.tags,[s]),k=s.annotations.filter(I=>!I.type.startsWith("_"))??[];return h.jsxs(h.Fragment,{children:[h.jsx(Ma,{title:s.title,leftSuperHeader:h.jsx("div",{className:"test-case-path",children:s.path.join("  ")}),rightSuperHeader:h.jsxs(h.Fragment,{children:[h.jsx("div",{className:Lt(!f&&"hidden"),children:h.jsx(ht,{href:Zn({test:f})+A,children:" previous"})}),h.jsx("div",{style:{width:10}}),h.jsx("div",{className:Lt(!c&&"hidden"),children:h.jsx(ht,{href:Zn({test:c})+A,children:"next "})})]})}),h.jsxs("div",{className:"hbox",children:[h.jsx("div",{className:"test-case-location",children:h.jsxs(Oa,{value:`${s.location.file}:${s.location.line}`,children:[s.location.file,":",s.location.line]})}),h.jsx("div",{style:{flex:"auto"}}),h.jsx("div",{className:"test-case-duration",children:kr(s.duration)})]}),(!!s.projectName||x)&&h.jsxs("div",{className:"test-case-project-labels-row",children:[!!s.projectName&&h.jsx(Z0,{projectNames:l,projectName:s.projectName}),x&&h.jsx(gg,{labels:x})]}),s.results.length===0&&k.length!==0&&h.jsx(Bt,{header:"Annotations",dataTestId:"test-case-annotations",children:k.map((I,j)=>h.jsx(Fd,{annotation:I},j))}),h.jsx(Jm,{tabs:s.results.map((I,j)=>({id:String(j),title:h.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[Ei(I.status)," ",mg(j),s.results.length>1&&h.jsx("span",{className:"test-case-run-duration",children:kr(I.duration)})]}),render:()=>{const F=I.annotations.filter(w=>!w.type.startsWith("_"));return h.jsxs(h.Fragment,{children:[!!F.length&&h.jsx(Bt,{header:"Annotations",dataTestId:"test-case-annotations",children:F.map((w,v)=>h.jsx(Fd,{annotation:w},v))}),h.jsx(dg,{test:s,result:I,testRunMetadata:r})]})}}))||[],selectedTab:String(d),setSelectedTab:I=>m(+I)})]})};function Fd({annotation:{type:l,description:s}}){return h.jsxs("div",{className:"test-case-annotation",children:[h.jsx("span",{style:{fontWeight:"bold"},children:l}),s&&h.jsxs(Oa,{value:s,children:[": ",Zl(s)]})]})}function mg(l){return l?`Retry #${l}`:"Run"}const gg=({labels:l})=>l.length>0?h.jsx(h.Fragment,{children:l.map(s=>h.jsx("a",{style:{textDecoration:"none",color:"var(--color-fg-default)"},href:`#?q=${s}`,children:h.jsx("span",{style:{margin:"6px 0 0 6px",cursor:"pointer"},className:Lt("label","label-color-"+_0(s)),children:s.slice(1)})},s))}):null,vg=({file:l,projectNames:s,isFileExpanded:r,setFileExpanded:a})=>{const c=se.useContext(Et),f=c.has("q")?"&q="+c.get("q"):"";return h.jsx(q0,{expanded:r(l.fileId),noInsets:!0,setExpanded:d=>a(l.fileId,d),header:h.jsx("span",{children:l.fileName}),children:l.tests.map(d=>h.jsxs("div",{className:Lt("test-file-test","test-file-test-outcome-"+d.outcome),children:[h.jsxs("div",{className:"hbox",style:{alignItems:"flex-start"},children:[h.jsxs("div",{className:"hbox",children:[h.jsx("span",{className:"test-file-test-status-icon",children:Ei(d.outcome)}),h.jsxs("span",{children:[h.jsx(ht,{href:Zn({test:d})+f,title:[...d.path,d.title].join("  "),children:h.jsx("span",{className:"test-file-title",children:[...d.path,d.title].join("  ")})}),s.length>1&&!!d.projectName&&h.jsx(Z0,{projectNames:s,projectName:d.projectName}),h.jsx(Ag,{labels:d.tags})]})]}),h.jsx("span",{"data-testid":"test-duration",style:{minWidth:"50px",textAlign:"right"},children:kr(d.duration)})]}),h.jsxs("div",{className:"test-file-details-row",children:[h.jsx(ht,{href:Zn({test:d}),title:[...d.path,d.title].join("  "),className:"test-file-path-link",children:h.jsxs("span",{className:"test-file-path",children:[d.location.file,":",d.location.line]})}),yg(d),xg(d),wg(d)]})]},`test-${d.testId}`))})};function yg(l){for(const s of l.results)for(const r of s.attachments)if(r.contentType.startsWith("image/")&&r.name.match(/-(expected|actual|diff)/))return h.jsx(ht,{href:Zn({test:l,result:s,anchor:`attachment-${s.attachments.indexOf(r)}`}),title:"View images",className:"test-file-badge",children:Bm()})}function xg(l){const s=l.results.find(r=>r.attachments.some(a=>a.name==="video"));return s?h.jsx(ht,{href:Zn({test:l,result:s,anchor:"attachment-video"}),title:"View video",className:"test-file-badge",children:Hm()}):void 0}function wg(l){const s=l.results.map(r=>r.attachments.filter(a=>a.name==="trace")).filter(r=>r.length>0)[0];if(s)return h.jsxs(ht,{href:J0(s),title:"View Trace",className:"button test-file-badge",children:[Fm(),h.jsx("span",{children:"View Trace"})]})}const Ag=({labels:l})=>{const s=se.useContext(Et),r=(a,c)=>{var m;a.preventDefault();const d=(((m=s.get("q"))==null?void 0:m.toString())||"").split(" ");Da(Zt(d,c,a.metaKey||a.ctrlKey))};return l.length>0?h.jsx(h.Fragment,{children:l.map(a=>h.jsx("span",{style:{margin:"6px 0 0 6px",cursor:"pointer"},className:Lt("label","label-color-"+_0(a)),onClick:c=>r(c,a),children:a.slice(1)},a))}):null};class Eg extends se.Component{constructor(){super(...arguments);Gt(this,"state",{error:null,errorInfo:null})}componentDidCatch(r,a){this.setState({error:r,errorInfo:a})}render(){var r,a,c;return this.state.error||this.state.errorInfo?h.jsxs("div",{className:"metadata-view p-3",children:[h.jsx("p",{children:"An error was encountered when trying to render metadata."}),h.jsx("p",{children:h.jsxs("pre",{style:{overflow:"scroll"},children:[(r=this.state.error)==null?void 0:r.message,h.jsx("br",{}),(a=this.state.error)==null?void 0:a.stack,h.jsx("br",{}),(c=this.state.errorInfo)==null?void 0:c.componentStack]})})]}):this.props.children}}const Sg=l=>h.jsx(Eg,{children:h.jsx(Cg,{metadata:l.metadata})}),Cg=l=>{const s=se.useContext(Et),r=l.metadata,a=s.has("show-metadata-other")?Object.entries(l.metadata).filter(([f])=>!tp.has(f)):[];if(r.ci||r.gitCommit||a.length>0)return h.jsxs("div",{className:"metadata-view",children:[r.ci&&!r.gitCommit&&h.jsx(kg,{info:r.ci}),r.gitCommit&&h.jsx(Ig,{ci:r.ci,commit:r.gitCommit}),a.length>0&&(r.gitCommit||r.ci)&&h.jsx("div",{className:"metadata-separator"}),h.jsx("div",{className:"metadata-section metadata-properties",role:"list",children:a.map(([f,d])=>{const m=typeof d!="object"||d===null||d===void 0?String(d):JSON.stringify(d),g=m.length>1e3?m.slice(0,1e3)+"":m;return h.jsx("div",{className:"copyable-property",role:"listitem",children:h.jsxs(Oa,{value:m,children:[h.jsx("span",{style:{fontWeight:"bold"},title:f,children:f}),": ",h.jsx("span",{title:g,children:Zl(g)})]})},f)})})]})},kg=({info:l})=>{const s=l.prTitle||`Commit ${l.commitHash}`,r=l.prHref||l.commitHref;return h.jsx("div",{className:"metadata-section",role:"list",children:h.jsx("div",{role:"listitem",children:h.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",title:s,children:s})})})},Ig=({ci:l,commit:s})=>{const r=(l==null?void 0:l.prTitle)||s.subject,a=(l==null?void 0:l.prHref)||(l==null?void 0:l.commitHref),c=` <${s.author.email}>`,f=`${s.author.name}${c}`,d=Intl.DateTimeFormat(void 0,{dateStyle:"medium"}).format(s.committer.time),m=Intl.DateTimeFormat(void 0,{dateStyle:"full",timeStyle:"long"}).format(s.committer.time);return h.jsxs("div",{className:"metadata-section",role:"list",children:[h.jsxs("div",{role:"listitem",children:[a&&h.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",title:r,children:r}),!a&&h.jsx("span",{title:r,children:r})]}),h.jsxs("div",{role:"listitem",className:"hbox",children:[h.jsx("span",{className:"mr-1",children:f}),h.jsxs("span",{title:m,children:[" on ",d]})]})]})},tp=new Set(["ci","gitCommit","gitDiff","actualWorkers"]),Rg=l=>{const s=Object.entries(l).filter(([r])=>!tp.has(r));return!l.ci&&!l.gitCommit&&!s.length},Tg=({tests:l,expandedFiles:s,setExpandedFiles:r,projectNames:a})=>{const c=se.useMemo(()=>{const f=[];let d=0;for(const m of l)d+=m.tests.length,f.push({file:m,defaultExpanded:d<200});return f},[l]);return h.jsx(h.Fragment,{children:c.map(({file:f,defaultExpanded:d})=>h.jsx(vg,{file:f,projectNames:a,isFileExpanded:m=>{const g=s.get(m);return g===void 0?d:!!g},setFileExpanded:(m,g)=>{const A=new Map(s);A.set(m,g),r(A)}},`file-${f.fileId}`))})},jg=({report:l,filteredStats:s,metadataVisible:r,toggleMetadataVisible:a})=>{if(!l)return null;const c=h.jsxs("div",{className:"test-file-header-info",children:[l.projectNames.length===1&&!!l.projectNames[0]&&h.jsxs("div",{"data-testid":"project-name",children:["Project: ",l.projectNames[0]]}),s&&h.jsxs("div",{"data-testid":"filtered-tests-count",children:["Filtered: ",s.total," ",!!s.total&&"("+kr(s.duration)+")"]})]}),f=h.jsxs(h.Fragment,{children:[h.jsx("div",{"data-testid":"overall-time",style:{marginRight:"10px"},children:l?new Date(l.startTime).toLocaleString():""}),h.jsxs("div",{"data-testid":"overall-duration",children:["Total time: ",kr(l.duration??0)]})]});return h.jsxs(h.Fragment,{children:[h.jsx(Ma,{title:l.title,leftSuperHeader:c,rightSuperHeader:f}),!Rg(l.metadata)&&h.jsxs("div",{className:"metadata-toggle",role:"button",onClick:a,title:r?"Hide metadata":"Show metadata",children:[r?Pa():Kl(),"Metadata"]}),r&&h.jsx(Sg,{metadata:l.metadata}),!!l.errors.length&&h.jsx(Bt,{header:"Errors",dataTestId:"report-errors",children:l.errors.map((d,m)=>h.jsx(Ba,{code:d},"test-report-error-message-"+m))})]})},Pg=l=>!l.has("testId"),Og=l=>l.has("testId"),Dg=({report:l})=>{var j;const s=se.useContext(Et),[r,a]=se.useState(new Map),[c,f]=se.useState(s.get("q")||""),[d,m]=se.useState(!1),g=se.useMemo(()=>{const F=new Map;for(const w of(l==null?void 0:l.json().files)||[])for(const v of w.tests)F.set(v.testId,w.fileId);return F},[l]),A=se.useMemo(()=>Gl.parse(c),[c]),x=se.useMemo(()=>A.empty()?void 0:Mg((l==null?void 0:l.json().files)||[],A),[l,A]),k=se.useMemo(()=>{const F={files:[],tests:[]};for(const w of(l==null?void 0:l.json().files)||[]){const v=w.tests.filter(E=>A.matches(E));v.length&&F.files.push({...w,tests:v}),F.tests.push(...v)}return F},[l,A]),I=(j=l==null?void 0:l.json())==null?void 0:j.title;return se.useEffect(()=>{I?document.title=I:document.title="Playwright Test Report"},[I]),h.jsx("div",{className:"htmlreport vbox px-4 pb-4",children:h.jsxs("main",{children:[(l==null?void 0:l.json())&&h.jsx(Km,{stats:l.json().stats,filterText:c,setFilterText:f}),h.jsxs(Md,{predicate:Pg,children:[h.jsx(jg,{report:l==null?void 0:l.json(),filteredStats:x,metadataVisible:d,toggleMetadataVisible:()=>m(F=>!F)}),h.jsx(Tg,{tests:k.files,expandedFiles:r,setExpandedFiles:a,projectNames:(l==null?void 0:l.json().projectNames)||[]})]}),h.jsx(Md,{predicate:Og,children:!!l&&h.jsx(Ng,{report:l,tests:k.tests,testIdToFileIdMap:g})})]})})},Ng=({report:l,testIdToFileIdMap:s,tests:r})=>{const a=se.useContext(Et),[c,f]=se.useState("loading"),d=a.get("testId"),m=+(a.get("run")||"0"),{prev:g,next:A}=se.useMemo(()=>{const x=r.findIndex(j=>j.testId===d),k=x>0?r[x-1]:void 0,I=x<r.length-1?r[x+1]:void 0;return{prev:k,next:I}},[d,r]);return se.useEffect(()=>{(async()=>{if(!d||typeof c=="object"&&d===c.testId)return;const x=s.get(d);if(!x){f("not-found");return}const k=await l.entry(`${x}.json`);f((k==null?void 0:k.tests.find(I=>I.testId===d))||"not-found")})()},[c,l,d,s]),c==="loading"?h.jsx("div",{className:"test-case-column"}):c==="not-found"?h.jsxs("div",{className:"test-case-column",children:[h.jsx(Ma,{title:"Test not found"}),h.jsxs("div",{className:"test-case-location",children:["Test ID: ",d]})]}):h.jsx("div",{className:"test-case-column",children:h.jsx(hg,{projectNames:l.json().projectNames,testRunMetadata:l.json().metadata,next:A,prev:g,test:c,run:m})})};function Mg(l,s){const r={total:0,duration:0};for(const a of l){const c=a.tests.filter(f=>s.matches(f));r.total+=c.length;for(const f of c)r.duration+=f.duration}return r}const Bg="data:image/svg+xml,%3csvg%20width='400'%20height='400'%20viewBox='0%200%20400%20400'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M136.444%20221.556C123.558%20225.213%20115.104%20231.625%20109.535%20238.032C114.869%20233.364%20122.014%20229.08%20131.652%20226.348C141.51%20223.554%20149.92%20223.574%20156.869%20224.915V219.481C150.941%20218.939%20144.145%20219.371%20136.444%20221.556ZM108.946%20175.876L61.0895%20188.484C61.0895%20188.484%2061.9617%20189.716%2063.5767%20191.36L104.153%20180.668C104.153%20180.668%20103.578%20188.077%2098.5847%20194.705C108.03%20187.559%20108.946%20175.876%20108.946%20175.876ZM149.005%20288.347C81.6582%20306.486%2046.0272%20228.438%2035.2396%20187.928C30.2556%20169.229%2028.0799%20155.067%2027.5%20145.928C27.4377%20144.979%2027.4665%20144.179%2027.5336%20143.446C24.04%20143.657%2022.3674%20145.473%2022.7077%20150.721C23.2876%20159.855%2025.4633%20174.016%2030.4473%20192.721C41.2301%20233.225%2076.8659%20311.273%20144.213%20293.134C158.872%20289.185%20169.885%20281.992%20178.152%20272.81C170.532%20279.692%20160.995%20285.112%20149.005%20288.347ZM161.661%20128.11V132.903H188.077C187.535%20131.206%20186.989%20129.677%20186.447%20128.11H161.661Z'%20fill='%232D4552'/%3e%3cpath%20d='M193.981%20167.584C205.861%20170.958%20212.144%20179.287%20215.465%20186.658L228.711%20190.42C228.711%20190.42%20226.904%20164.623%20203.57%20157.995C181.741%20151.793%20168.308%20170.124%20166.674%20172.496C173.024%20167.972%20182.297%20164.268%20193.981%20167.584ZM299.422%20186.777C277.573%20180.547%20264.145%20198.916%20262.535%20201.255C268.89%20196.736%20278.158%20193.031%20289.837%20196.362C301.698%20199.741%20307.976%20208.06%20311.307%20215.436L324.572%20219.212C324.572%20219.212%20322.736%20193.41%20299.422%20186.777ZM286.262%20254.795L176.072%20223.99C176.072%20223.99%20177.265%20230.038%20181.842%20237.869L274.617%20263.805C282.255%20259.386%20286.262%20254.795%20286.262%20254.795ZM209.867%20321.102C122.618%20297.71%20133.166%20186.543%20147.284%20133.865C153.097%20112.156%20159.073%2096.0203%20164.029%2085.204C161.072%2084.5953%20158.623%2086.1529%20156.203%2091.0746C150.941%20101.747%20144.212%20119.124%20137.7%20143.45C123.586%20196.127%20113.038%20307.29%20200.283%20330.682C241.406%20341.699%20273.442%20324.955%20297.323%20298.659C274.655%20319.19%20245.714%20330.701%20209.867%20321.102Z'%20fill='%232D4552'/%3e%3cpath%20d='M161.661%20262.296V239.863L99.3324%20257.537C99.3324%20257.537%20103.938%20230.777%20136.444%20221.556C146.302%20218.762%20154.713%20218.781%20161.661%20220.123V128.11H192.869C189.471%20117.61%20186.184%20109.526%20183.423%20103.909C178.856%2094.612%20174.174%20100.775%20163.545%20109.665C156.059%20115.919%20137.139%20129.261%20108.668%20136.933C80.1966%20144.61%2057.179%20142.574%2047.5752%20140.911C33.9601%20138.562%2026.8387%20135.572%2027.5049%20145.928C28.0847%20155.062%2030.2605%20169.224%2035.2445%20187.928C46.0272%20228.433%2081.663%20306.481%20149.01%20288.342C166.602%20283.602%20179.019%20274.233%20187.626%20262.291H161.661V262.296ZM61.0848%20188.484L108.946%20175.876C108.946%20175.876%20107.551%20194.288%2089.6087%20199.018C71.6614%20203.743%2061.0848%20188.484%2061.0848%20188.484Z'%20fill='%23E2574C'/%3e%3cpath%20d='M341.786%20129.174C329.345%20131.355%20299.498%20134.072%20262.612%20124.185C225.716%20114.304%20201.236%2097.0224%20191.537%2088.8994C177.788%2077.3834%20171.74%2069.3802%20165.788%2081.4857C160.526%2092.163%20153.797%20109.54%20147.284%20133.866C133.171%20186.543%20122.623%20297.706%20209.867%20321.098C297.093%20344.47%20343.53%20242.92%20357.644%20190.238C364.157%20165.917%20367.013%20147.5%20367.799%20135.625C368.695%20122.173%20359.455%20126.078%20341.786%20129.174ZM166.497%20172.756C166.497%20172.756%20180.246%20151.372%20203.565%20158C226.899%20164.628%20228.706%20190.425%20228.706%20190.425L166.497%20172.756ZM223.42%20268.713C182.403%20256.698%20176.077%20223.99%20176.077%20223.99L286.262%20254.796C286.262%20254.791%20264.021%20280.578%20223.42%20268.713ZM262.377%20201.495C262.377%20201.495%20276.107%20180.126%20299.422%20186.773C322.736%20193.411%20324.572%20219.208%20324.572%20219.208L262.377%20201.495Z'%20fill='%232EAD33'/%3e%3cpath%20d='M139.88%20246.04L99.3324%20257.532C99.3324%20257.532%20103.737%20232.44%20133.607%20222.496L110.647%20136.33L108.663%20136.933C80.1918%20144.611%2057.1742%20142.574%2047.5704%20140.911C33.9554%20138.563%2026.834%20135.572%2027.5001%20145.929C28.08%20155.063%2030.2557%20169.224%2035.2397%20187.929C46.0225%20228.433%2081.6583%20306.481%20149.005%20288.342L150.989%20287.719L139.88%20246.04ZM61.0848%20188.485L108.946%20175.876C108.946%20175.876%20107.551%20194.288%2089.6087%20199.018C71.6615%20203.743%2061.0848%20188.485%2061.0848%20188.485Z'%20fill='%23D65348'/%3e%3cpath%20d='M225.27%20269.163L223.415%20268.712C182.398%20256.698%20176.072%20223.99%20176.072%20223.99L232.89%20239.872L262.971%20124.281L262.607%20124.185C225.711%20114.304%20201.232%2097.0224%20191.532%2088.8994C177.783%2077.3834%20171.735%2069.3802%20165.783%2081.4857C160.526%2092.163%20153.797%20109.54%20147.284%20133.866C133.171%20186.543%20122.623%20297.706%20209.867%20321.097L211.655%20321.5L225.27%20269.163ZM166.497%20172.756C166.497%20172.756%20180.246%20151.372%20203.565%20158C226.899%20164.628%20228.706%20190.425%20228.706%20190.425L166.497%20172.756Z'%20fill='%231D8D22'/%3e%3cpath%20d='M141.946%20245.451L131.072%20248.537C133.641%20263.019%20138.169%20276.917%20145.276%20289.195C146.513%20288.922%20147.74%20288.687%20149%20288.342C152.302%20287.451%20155.364%20286.348%20158.312%20285.145C150.371%20273.361%20145.118%20259.789%20141.946%20245.451ZM137.7%20143.451C132.112%20164.307%20127.113%20194.326%20128.489%20224.436C130.952%20223.367%20133.554%20222.371%20136.444%20221.551L138.457%20221.101C136.003%20188.939%20141.308%20156.165%20147.284%20133.866C148.799%20128.225%20150.318%20122.978%20151.832%20118.085C149.393%20119.637%20146.767%20121.228%20143.776%20122.867C141.759%20129.093%20139.722%20135.898%20137.7%20143.451Z'%20fill='%23C04B41'/%3e%3c/svg%3e",la=Cm,Ha=document.createElement("link");Ha.rel="shortcut icon";Ha.href=Bg;document.head.appendChild(Ha);const Hg=()=>{const[l,s]=se.useState();return se.useEffect(()=>{if(l)return;const r=new Fg;r.load().then(()=>s(r))},[l]),h.jsx(bm,{children:h.jsx(Dg,{report:l})})};window.onload=()=>{Pm.createRoot(document.querySelector("#root")).render(h.jsx(Hg,{}))};const Ld="playwrightReportStorageForHMR";class Fg{constructor(){Gt(this,"_entries",new Map);Gt(this,"_json")}async load(){const s=await new Promise(a=>{if(window.playwrightReportBase64)return a(window.playwrightReportBase64);if(window.opener){const c=f=>{f.source===window.opener&&(localStorage.setItem(Ld,f.data),a(f.data),window.removeEventListener("message",c))};window.addEventListener("message",c),window.opener.postMessage("ready","*")}else{const c=localStorage.getItem(Ld);if(c)return a(c);alert("couldnt find report, something with HMR is broken")}}),r=new la.ZipReader(new la.Data64URIReader(s),{useWebWorkers:!1});for(const a of await r.getEntries())this._entries.set(a.filename,a);this._json=await this.entry("report.json")}json(){return this._json}async entry(s){const r=this._entries.get(s),a=new la.TextWriter;return await r.getData(a),JSON.parse(await a.getData())}}
70: </script>
71:     <style type='text/css'>:root{--color-canvas-default-transparent: rgba(255,255,255,0);--color-marketing-icon-primary: #218bff;--color-marketing-icon-secondary: #54aeff;--color-diff-blob-addition-num-text: #24292f;--color-diff-blob-addition-fg: #24292f;--color-diff-blob-addition-num-bg: #CCFFD8;--color-diff-blob-addition-line-bg: #E6FFEC;--color-diff-blob-addition-word-bg: #ABF2BC;--color-diff-blob-deletion-num-text: #24292f;--color-diff-blob-deletion-fg: #24292f;--color-diff-blob-deletion-num-bg: #FFD7D5;--color-diff-blob-deletion-line-bg: #FFEBE9;--color-diff-blob-deletion-word-bg: rgba(255,129,130,.4);--color-diff-blob-hunk-num-bg: rgba(84,174,255,.4);--color-diff-blob-expander-icon: #57606a;--color-diff-blob-selected-line-highlight-mix-blend-mode: multiply;--color-diffstat-deletion-border: rgba(27,31,36,.15);--color-diffstat-addition-border: rgba(27,31,36,.15);--color-diffstat-addition-bg: #2da44e;--color-search-keyword-hl: #fff8c5;--color-prettylights-syntax-comment: #6e7781;--color-prettylights-syntax-constant: #0550ae;--color-prettylights-syntax-entity: #8250df;--color-prettylights-syntax-storage-modifier-import: #24292f;--color-prettylights-syntax-entity-tag: #116329;--color-prettylights-syntax-keyword: #cf222e;--color-prettylights-syntax-string: #0a3069;--color-prettylights-syntax-variable: #953800;--color-prettylights-syntax-brackethighlighter-unmatched: #82071e;--color-prettylights-syntax-invalid-illegal-text: #f6f8fa;--color-prettylights-syntax-invalid-illegal-bg: #82071e;--color-prettylights-syntax-carriage-return-text: #f6f8fa;--color-prettylights-syntax-carriage-return-bg: #cf222e;--color-prettylights-syntax-string-regexp: #116329;--color-prettylights-syntax-markup-list: #3b2300;--color-prettylights-syntax-markup-heading: #0550ae;--color-prettylights-syntax-markup-italic: #24292f;--color-prettylights-syntax-markup-bold: #24292f;--color-prettylights-syntax-markup-deleted-text: #82071e;--color-prettylights-syntax-markup-deleted-bg: #FFEBE9;--color-prettylights-syntax-markup-inserted-text: #116329;--color-prettylights-syntax-markup-inserted-bg: #dafbe1;--color-prettylights-syntax-markup-changed-text: #953800;--color-prettylights-syntax-markup-changed-bg: #ffd8b5;--color-prettylights-syntax-markup-ignored-text: #eaeef2;--color-prettylights-syntax-markup-ignored-bg: #0550ae;--color-prettylights-syntax-meta-diff-range: #8250df;--color-prettylights-syntax-brackethighlighter-angle: #57606a;--color-prettylights-syntax-sublimelinter-gutter-mark: #8c959f;--color-prettylights-syntax-constant-other-reference-link: #0a3069;--color-codemirror-text: #24292f;--color-codemirror-bg: #ffffff;--color-codemirror-gutters-bg: #ffffff;--color-codemirror-guttermarker-text: #ffffff;--color-codemirror-guttermarker-subtle-text: #6e7781;--color-codemirror-linenumber-text: #57606a;--color-codemirror-cursor: #24292f;--color-codemirror-selection-bg: rgba(84,174,255,.4);--color-codemirror-activeline-bg: rgba(234,238,242,.5);--color-codemirror-matchingbracket-text: #24292f;--color-codemirror-lines-bg: #ffffff;--color-codemirror-syntax-comment: #24292f;--color-codemirror-syntax-constant: #0550ae;--color-codemirror-syntax-entity: #8250df;--color-codemirror-syntax-keyword: #cf222e;--color-codemirror-syntax-storage: #cf222e;--color-codemirror-syntax-string: #0a3069;--color-codemirror-syntax-support: #0550ae;--color-codemirror-syntax-variable: #953800;--color-checks-bg: #24292f;--color-checks-run-border-width: 0px;--color-checks-container-border-width: 0px;--color-checks-text-primary: #f6f8fa;--color-checks-text-secondary: #8c959f;--color-checks-text-link: #54aeff;--color-checks-btn-icon: #afb8c1;--color-checks-btn-hover-icon: #f6f8fa;--color-checks-btn-hover-bg: rgba(255,255,255,.125);--color-checks-input-text: #eaeef2;--color-checks-input-placeholder-text: #8c959f;--color-checks-input-focus-text: #8c959f;--color-checks-input-bg: #32383f;--color-checks-input-shadow: none;--color-checks-donut-error: #fa4549;--color-checks-donut-pending: #bf8700;--color-checks-donut-success: #2da44e;--color-checks-donut-neutral: #afb8c1;--color-checks-dropdown-text: #afb8c1;--color-checks-dropdown-bg: #32383f;--color-checks-dropdown-border: #424a53;--color-checks-dropdown-shadow: rgba(27,31,36,.3);--color-checks-dropdown-hover-text: #f6f8fa;--color-checks-dropdown-hover-bg: #424a53;--color-checks-dropdown-btn-hover-text: #f6f8fa;--color-checks-dropdown-btn-hover-bg: #32383f;--color-checks-scrollbar-thumb-bg: #57606a;--color-checks-header-label-text: #d0d7de;--color-checks-header-label-open-text: #f6f8fa;--color-checks-header-border: #32383f;--color-checks-header-icon: #8c959f;--color-checks-line-text: #d0d7de;--color-checks-line-num-text: rgba(140,149,159,.75);--color-checks-line-timestamp-text: #8c959f;--color-checks-line-hover-bg: #32383f;--color-checks-line-selected-bg: rgba(33,139,255,.15);--color-checks-line-selected-num-text: #54aeff;--color-checks-line-dt-fm-text: #24292f;--color-checks-line-dt-fm-bg: #9a6700;--color-checks-gate-bg: rgba(125,78,0,.15);--color-checks-gate-text: #d0d7de;--color-checks-gate-waiting-text: #afb8c1;--color-checks-step-header-open-bg: #32383f;--color-checks-step-error-text: #ff8182;--color-checks-step-warning-text: #d4a72c;--color-checks-logline-text: #8c959f;--color-checks-logline-num-text: rgba(140,149,159,.75);--color-checks-logline-debug-text: #c297ff;--color-checks-logline-error-text: #d0d7de;--color-checks-logline-error-num-text: #ff8182;--color-checks-logline-error-bg: rgba(164,14,38,.15);--color-checks-logline-warning-text: #d0d7de;--color-checks-logline-warning-num-text: #d4a72c;--color-checks-logline-warning-bg: rgba(125,78,0,.15);--color-checks-logline-command-text: #54aeff;--color-checks-logline-section-text: #4ac26b;--color-checks-ansi-black: #24292f;--color-checks-ansi-black-bright: #32383f;--color-checks-ansi-white: #d0d7de;--color-checks-ansi-white-bright: #d0d7de;--color-checks-ansi-gray: #8c959f;--color-checks-ansi-red: #ff8182;--color-checks-ansi-red-bright: #ffaba8;--color-checks-ansi-green: #4ac26b;--color-checks-ansi-green-bright: #6fdd8b;--color-checks-ansi-yellow: #d4a72c;--color-checks-ansi-yellow-bright: #eac54f;--color-checks-ansi-blue: #54aeff;--color-checks-ansi-blue-bright: #80ccff;--color-checks-ansi-magenta: #c297ff;--color-checks-ansi-magenta-bright: #d8b9ff;--color-checks-ansi-cyan: #76e3ea;--color-checks-ansi-cyan-bright: #b3f0ff;--color-project-header-bg: #24292f;--color-project-sidebar-bg: #ffffff;--color-project-gradient-in: #ffffff;--color-project-gradient-out: rgba(255,255,255,0);--color-mktg-success: rgba(36,146,67,1);--color-mktg-info: rgba(19,119,234,1);--color-mktg-bg-shade-gradient-top: rgba(27,31,36,.065);--color-mktg-bg-shade-gradient-bottom: rgba(27,31,36,0);--color-mktg-btn-bg-top: hsla(228,82%,66%,1);--color-mktg-btn-bg-bottom: #4969ed;--color-mktg-btn-bg-overlay-top: hsla(228,74%,59%,1);--color-mktg-btn-bg-overlay-bottom: #3355e0;--color-mktg-btn-text: #ffffff;--color-mktg-btn-primary-bg-top: hsla(137,56%,46%,1);--color-mktg-btn-primary-bg-bottom: #2ea44f;--color-mktg-btn-primary-bg-overlay-top: hsla(134,60%,38%,1);--color-mktg-btn-primary-bg-overlay-bottom: #22863a;--color-mktg-btn-primary-text: #ffffff;--color-mktg-btn-enterprise-bg-top: hsla(249,100%,72%,1);--color-mktg-btn-enterprise-bg-bottom: #6f57ff;--color-mktg-btn-enterprise-bg-overlay-top: hsla(248,65%,63%,1);--color-mktg-btn-enterprise-bg-overlay-bottom: #614eda;--color-mktg-btn-enterprise-text: #ffffff;--color-mktg-btn-outline-text: #4969ed;--color-mktg-btn-outline-border: rgba(73,105,237,.3);--color-mktg-btn-outline-hover-text: #3355e0;--color-mktg-btn-outline-hover-border: rgba(51,85,224,.5);--color-mktg-btn-outline-focus-border: #4969ed;--color-mktg-btn-outline-focus-border-inset: rgba(73,105,237,.5);--color-mktg-btn-dark-text: #ffffff;--color-mktg-btn-dark-border: rgba(255,255,255,.3);--color-mktg-btn-dark-hover-text: #ffffff;--color-mktg-btn-dark-hover-border: rgba(255,255,255,.5);--color-mktg-btn-dark-focus-border: #ffffff;--color-mktg-btn-dark-focus-border-inset: rgba(255,255,255,.5);--color-avatar-bg: #ffffff;--color-avatar-border: rgba(27,31,36,.15);--color-avatar-stack-fade: #afb8c1;--color-avatar-stack-fade-more: #d0d7de;--color-avatar-child-shadow: -2px -2px 0 rgba(255,255,255,.8);--color-topic-tag-border: rgba(0,0,0,0);--color-select-menu-backdrop-border: rgba(0,0,0,0);--color-select-menu-tap-highlight: rgba(175,184,193,.5);--color-select-menu-tap-focus-bg: #b6e3ff;--color-overlay-shadow: 0 1px 3px rgba(27,31,36,.12), 0 8px 24px rgba(66,74,83,.12);--color-header-text: rgba(255,255,255,.7);--color-header-bg: #24292f;--color-header-logo: #ffffff;--color-header-search-bg: #24292f;--color-header-search-border: #57606a;--color-sidenav-selected-bg: #ffffff;--color-menu-bg-active: rgba(0,0,0,0);--color-input-disabled-bg: rgba(175,184,193,.2);--color-timeline-badge-bg: #eaeef2;--color-ansi-black: #24292f;--color-ansi-black-bright: #57606a;--color-ansi-white: #6e7781;--color-ansi-white-bright: #8c959f;--color-ansi-gray: #6e7781;--color-ansi-red: #cf222e;--color-ansi-red-bright: #a40e26;--color-ansi-green: #116329;--color-ansi-green-bright: #1a7f37;--color-ansi-yellow: #4d2d00;--color-ansi-yellow-bright: #633c01;--color-ansi-blue: #0969da;--color-ansi-blue-bright: #218bff;--color-ansi-magenta: #8250df;--color-ansi-magenta-bright: #a475f9;--color-ansi-cyan: #1b7c83;--color-ansi-cyan-bright: #3192aa;--color-btn-text: #24292f;--color-btn-bg: #f6f8fa;--color-btn-border: rgba(27,31,36,.15);--color-btn-shadow: 0 1px 0 rgba(27,31,36,.04);--color-btn-inset-shadow: inset 0 1px 0 rgba(255,255,255,.25);--color-btn-hover-bg: #f3f4f6;--color-btn-hover-border: rgba(27,31,36,.15);--color-btn-active-bg: hsla(220,14%,93%,1);--color-btn-active-border: rgba(27,31,36,.15);--color-btn-selected-bg: hsla(220,14%,94%,1);--color-btn-focus-bg: #f6f8fa;--color-btn-focus-border: rgba(27,31,36,.15);--color-btn-focus-shadow: 0 0 0 3px rgba(9,105,218,.3);--color-btn-shadow-active: inset 0 .15em .3em rgba(27,31,36,.15);--color-btn-shadow-input-focus: 0 0 0 .2em rgba(9,105,218,.3);--color-btn-counter-bg: rgba(27,31,36,.08);--color-btn-primary-text: #ffffff;--color-btn-primary-bg: #2da44e;--color-btn-primary-border: rgba(27,31,36,.15);--color-btn-primary-shadow: 0 1px 0 rgba(27,31,36,.1);--color-btn-primary-inset-shadow: inset 0 1px 0 rgba(255,255,255,.03);--color-btn-primary-hover-bg: #2c974b;--color-btn-primary-hover-border: rgba(27,31,36,.15);--color-btn-primary-selected-bg: hsla(137,55%,36%,1);--color-btn-primary-selected-shadow: inset 0 1px 0 rgba(0,45,17,.2);--color-btn-primary-disabled-text: rgba(255,255,255,.8);--color-btn-primary-disabled-bg: #94d3a2;--color-btn-primary-disabled-border: rgba(27,31,36,.15);--color-btn-primary-focus-bg: #2da44e;--color-btn-primary-focus-border: rgba(27,31,36,.15);--color-btn-primary-focus-shadow: 0 0 0 3px rgba(45,164,78,.4);--color-btn-primary-icon: rgba(255,255,255,.8);--color-btn-primary-counter-bg: rgba(255,255,255,.2);--color-btn-outline-text: #0969da;--color-btn-outline-hover-text: #ffffff;--color-btn-outline-hover-bg: #0969da;--color-btn-outline-hover-border: rgba(27,31,36,.15);--color-btn-outline-hover-shadow: 0 1px 0 rgba(27,31,36,.1);--color-btn-outline-hover-inset-shadow: inset 0 1px 0 rgba(255,255,255,.03);--color-btn-outline-hover-counter-bg: rgba(255,255,255,.2);--color-btn-outline-selected-text: #ffffff;--color-btn-outline-selected-bg: hsla(212,92%,42%,1);--color-btn-outline-selected-border: rgba(27,31,36,.15);--color-btn-outline-selected-shadow: inset 0 1px 0 rgba(0,33,85,.2);--color-btn-outline-disabled-text: rgba(9,105,218,.5);--color-btn-outline-disabled-bg: #f6f8fa;--color-btn-outline-disabled-counter-bg: rgba(9,105,218,.05);--color-btn-outline-focus-border: rgba(27,31,36,.15);--color-btn-outline-focus-shadow: 0 0 0 3px rgba(5,80,174,.4);--color-btn-outline-counter-bg: rgba(9,105,218,.1);--color-btn-danger-text: #cf222e;--color-btn-danger-hover-text: #ffffff;--color-btn-danger-hover-bg: #a40e26;--color-btn-danger-hover-border: rgba(27,31,36,.15);--color-btn-danger-hover-shadow: 0 1px 0 rgba(27,31,36,.1);--color-btn-danger-hover-inset-shadow: inset 0 1px 0 rgba(255,255,255,.03);--color-btn-danger-hover-counter-bg: rgba(255,255,255,.2);--color-btn-danger-selected-text: #ffffff;--color-btn-danger-selected-bg: hsla(356,72%,44%,1);--color-btn-danger-selected-border: rgba(27,31,36,.15);--color-btn-danger-selected-shadow: inset 0 1px 0 rgba(76,0,20,.2);--color-btn-danger-disabled-text: rgba(207,34,46,.5);--color-btn-danger-disabled-bg: #f6f8fa;--color-btn-danger-disabled-counter-bg: rgba(207,34,46,.05);--color-btn-danger-focus-border: rgba(27,31,36,.15);--color-btn-danger-focus-shadow: 0 0 0 3px rgba(164,14,38,.4);--color-btn-danger-counter-bg: rgba(207,34,46,.1);--color-btn-danger-icon: #cf222e;--color-btn-danger-hover-icon: #ffffff;--color-underlinenav-icon: #6e7781;--color-underlinenav-border-hover: rgba(175,184,193,.2);--color-fg-default: #24292f;--color-fg-muted: #57606a;--color-fg-subtle: #6e7781;--color-fg-on-emphasis: #ffffff;--color-canvas-default: #ffffff;--color-canvas-overlay: #ffffff;--color-canvas-inset: #f6f8fa;--color-canvas-subtle: #f6f8fa;--color-border-default: #d0d7de;--color-border-muted: hsla(210,18%,87%,1);--color-border-subtle: rgba(27,31,36,.15);--color-shadow-small: 0 1px 0 rgba(27,31,36,.04);--color-shadow-medium: 0 3px 6px rgba(140,149,159,.15);--color-shadow-large: 0 8px 24px rgba(140,149,159,.2);--color-shadow-extra-large: 0 12px 28px rgba(140,149,159,.3);--color-neutral-emphasis-plus: #24292f;--color-neutral-emphasis: #6e7781;--color-neutral-muted: rgba(175,184,193,.2);--color-neutral-subtle: rgba(234,238,242,.5);--color-accent-fg: #0969da;--color-accent-emphasis: #0969da;--color-accent-muted: rgba(84,174,255,.4);--color-accent-subtle: #ddf4ff;--color-success-fg: #1a7f37;--color-success-emphasis: #2da44e;--color-success-muted: rgba(74,194,107,.4);--color-success-subtle: #dafbe1;--color-attention-fg: #9a6700;--color-attention-emphasis: #bf8700;--color-attention-muted: rgba(212,167,44,.4);--color-attention-subtle: #fff8c5;--color-severe-fg: #bc4c00;--color-severe-emphasis: #bc4c00;--color-severe-muted: rgba(251,143,68,.4);--color-severe-subtle: #fff1e5;--color-danger-fg: #cf222e;--color-danger-emphasis: #cf222e;--color-danger-muted: rgba(255,129,130,.4);--color-danger-subtle: #FFEBE9;--color-done-fg: #8250df;--color-done-emphasis: #8250df;--color-done-muted: rgba(194,151,255,.4);--color-done-subtle: #fbefff;--color-sponsors-fg: #bf3989;--color-sponsors-emphasis: #bf3989;--color-sponsors-muted: rgba(255,128,200,.4);--color-sponsors-subtle: #ffeff7;--color-primer-canvas-backdrop: rgba(27,31,36,.5);--color-primer-canvas-sticky: rgba(255,255,255,.95);--color-primer-border-active: #FD8C73;--color-primer-border-contrast: rgba(27,31,36,.1);--color-primer-shadow-highlight: inset 0 1px 0 rgba(255,255,255,.25);--color-primer-shadow-inset: inset 0 1px 0 rgba(208,215,222,.2);--color-primer-shadow-focus: 0 0 0 3px rgba(9,105,218,.3);--color-scale-black: #1b1f24;--color-scale-white: #ffffff;--color-scale-gray-0: #f6f8fa;--color-scale-gray-1: #eaeef2;--color-scale-gray-2: #d0d7de;--color-scale-gray-3: #afb8c1;--color-scale-gray-4: #8c959f;--color-scale-gray-5: #6e7781;--color-scale-gray-6: #57606a;--color-scale-gray-7: #424a53;--color-scale-gray-8: #32383f;--color-scale-gray-9: #24292f;--color-scale-blue-0: #ddf4ff;--color-scale-blue-1: #b6e3ff;--color-scale-blue-2: #80ccff;--color-scale-blue-3: #54aeff;--color-scale-blue-4: #218bff;--color-scale-blue-5: #0969da;--color-scale-blue-6: #0550ae;--color-scale-blue-7: #033d8b;--color-scale-blue-8: #0a3069;--color-scale-blue-9: #002155;--color-scale-green-0: #dafbe1;--color-scale-green-1: #aceebb;--color-scale-green-2: #6fdd8b;--color-scale-green-3: #4ac26b;--color-scale-green-4: #2da44e;--color-scale-green-5: #1a7f37;--color-scale-green-6: #116329;--color-scale-green-7: #044f1e;--color-scale-green-8: #003d16;--color-scale-green-9: #002d11;--color-scale-yellow-0: #fff8c5;--color-scale-yellow-1: #fae17d;--color-scale-yellow-2: #eac54f;--color-scale-yellow-3: #d4a72c;--color-scale-yellow-4: #bf8700;--color-scale-yellow-5: #9a6700;--color-scale-yellow-6: #7d4e00;--color-scale-yellow-7: #633c01;--color-scale-yellow-8: #4d2d00;--color-scale-yellow-9: #3b2300;--color-scale-orange-0: #fff1e5;--color-scale-orange-1: #ffd8b5;--color-scale-orange-2: #ffb77c;--color-scale-orange-3: #fb8f44;--color-scale-orange-4: #e16f24;--color-scale-orange-5: #bc4c00;--color-scale-orange-6: #953800;--color-scale-orange-7: #762c00;--color-scale-orange-8: #5c2200;--color-scale-orange-9: #471700;--color-scale-red-0: #FFEBE9;--color-scale-red-1: #ffcecb;--color-scale-red-2: #ffaba8;--color-scale-red-3: #ff8182;--color-scale-red-4: #fa4549;--color-scale-red-5: #cf222e;--color-scale-red-6: #a40e26;--color-scale-red-7: #82071e;--color-scale-red-8: #660018;--color-scale-red-9: #4c0014;--color-scale-purple-0: #fbefff;--color-scale-purple-1: #ecd8ff;--color-scale-purple-2: #d8b9ff;--color-scale-purple-3: #c297ff;--color-scale-purple-4: #a475f9;--color-scale-purple-5: #8250df;--color-scale-purple-6: #6639ba;--color-scale-purple-7: #512a97;--color-scale-purple-8: #3e1f79;--color-scale-purple-9: #2e1461;--color-scale-pink-0: #ffeff7;--color-scale-pink-1: #ffd3eb;--color-scale-pink-2: #ffadda;--color-scale-pink-3: #ff80c8;--color-scale-pink-4: #e85aad;--color-scale-pink-5: #bf3989;--color-scale-pink-6: #99286e;--color-scale-pink-7: #772057;--color-scale-pink-8: #611347;--color-scale-pink-9: #4d0336;--color-scale-coral-0: #FFF0EB;--color-scale-coral-1: #FFD6CC;--color-scale-coral-2: #FFB4A1;--color-scale-coral-3: #FD8C73;--color-scale-coral-4: #EC6547;--color-scale-coral-5: #C4432B;--color-scale-coral-6: #9E2F1C;--color-scale-coral-7: #801F0F;--color-scale-coral-8: #691105;--color-scale-coral-9: #510901 }@media (prefers-color-scheme: dark){:root{--color-canvas-default-transparent: rgba(13,17,23,0);--color-marketing-icon-primary: #79c0ff;--color-marketing-icon-secondary: #1f6feb;--color-diff-blob-addition-num-text: #c9d1d9;--color-diff-blob-addition-fg: #c9d1d9;--color-diff-blob-addition-num-bg: rgba(63,185,80,.3);--color-diff-blob-addition-line-bg: rgba(46,160,67,.15);--color-diff-blob-addition-word-bg: rgba(46,160,67,.4);--color-diff-blob-deletion-num-text: #c9d1d9;--color-diff-blob-deletion-fg: #c9d1d9;--color-diff-blob-deletion-num-bg: rgba(248,81,73,.3);--color-diff-blob-deletion-line-bg: rgba(248,81,73,.15);--color-diff-blob-deletion-word-bg: rgba(248,81,73,.4);--color-diff-blob-hunk-num-bg: rgba(56,139,253,.4);--color-diff-blob-expander-icon: #8b949e;--color-diff-blob-selected-line-highlight-mix-blend-mode: screen;--color-diffstat-deletion-border: rgba(240,246,252,.1);--color-diffstat-addition-border: rgba(240,246,252,.1);--color-diffstat-addition-bg: #3fb950;--color-search-keyword-hl: rgba(210,153,34,.4);--color-prettylights-syntax-comment: #8b949e;--color-prettylights-syntax-constant: #79c0ff;--color-prettylights-syntax-entity: #d2a8ff;--color-prettylights-syntax-storage-modifier-import: #c9d1d9;--color-prettylights-syntax-entity-tag: #7ee787;--color-prettylights-syntax-keyword: #ff7b72;--color-prettylights-syntax-string: #a5d6ff;--color-prettylights-syntax-variable: #ffa657;--color-prettylights-syntax-brackethighlighter-unmatched: #f85149;--color-prettylights-syntax-invalid-illegal-text: #f0f6fc;--color-prettylights-syntax-invalid-illegal-bg: #8e1519;--color-prettylights-syntax-carriage-return-text: #f0f6fc;--color-prettylights-syntax-carriage-return-bg: #b62324;--color-prettylights-syntax-string-regexp: #7ee787;--color-prettylights-syntax-markup-list: #f2cc60;--color-prettylights-syntax-markup-heading: #1f6feb;--color-prettylights-syntax-markup-italic: #c9d1d9;--color-prettylights-syntax-markup-bold: #c9d1d9;--color-prettylights-syntax-markup-deleted-text: #ffdcd7;--color-prettylights-syntax-markup-deleted-bg: #67060c;--color-prettylights-syntax-markup-inserted-text: #aff5b4;--color-prettylights-syntax-markup-inserted-bg: #033a16;--color-prettylights-syntax-markup-changed-text: #ffdfb6;--color-prettylights-syntax-markup-changed-bg: #5a1e02;--color-prettylights-syntax-markup-ignored-text: #c9d1d9;--color-prettylights-syntax-markup-ignored-bg: #1158c7;--color-prettylights-syntax-meta-diff-range: #d2a8ff;--color-prettylights-syntax-brackethighlighter-angle: #8b949e;--color-prettylights-syntax-sublimelinter-gutter-mark: #484f58;--color-prettylights-syntax-constant-other-reference-link: #a5d6ff;--color-codemirror-text: #c9d1d9;--color-codemirror-bg: #0d1117;--color-codemirror-gutters-bg: #0d1117;--color-codemirror-guttermarker-text: #0d1117;--color-codemirror-guttermarker-subtle-text: #484f58;--color-codemirror-linenumber-text: #8b949e;--color-codemirror-cursor: #c9d1d9;--color-codemirror-selection-bg: rgba(56,139,253,.4);--color-codemirror-activeline-bg: rgba(110,118,129,.1);--color-codemirror-matchingbracket-text: #c9d1d9;--color-codemirror-lines-bg: #0d1117;--color-codemirror-syntax-comment: #8b949e;--color-codemirror-syntax-constant: #79c0ff;--color-codemirror-syntax-entity: #d2a8ff;--color-codemirror-syntax-keyword: #ff7b72;--color-codemirror-syntax-storage: #ff7b72;--color-codemirror-syntax-string: #a5d6ff;--color-codemirror-syntax-support: #79c0ff;--color-codemirror-syntax-variable: #ffa657;--color-checks-bg: #010409;--color-checks-run-border-width: 1px;--color-checks-container-border-width: 1px;--color-checks-text-primary: #c9d1d9;--color-checks-text-secondary: #8b949e;--color-checks-text-link: #58a6ff;--color-checks-btn-icon: #8b949e;--color-checks-btn-hover-icon: #c9d1d9;--color-checks-btn-hover-bg: rgba(110,118,129,.1);--color-checks-input-text: #8b949e;--color-checks-input-placeholder-text: #484f58;--color-checks-input-focus-text: #c9d1d9;--color-checks-input-bg: #161b22;--color-checks-input-shadow: none;--color-checks-donut-error: #f85149;--color-checks-donut-pending: #d29922;--color-checks-donut-success: #2ea043;--color-checks-donut-neutral: #8b949e;--color-checks-dropdown-text: #c9d1d9;--color-checks-dropdown-bg: #161b22;--color-checks-dropdown-border: #30363d;--color-checks-dropdown-shadow: rgba(1,4,9,.3);--color-checks-dropdown-hover-text: #c9d1d9;--color-checks-dropdown-hover-bg: rgba(110,118,129,.1);--color-checks-dropdown-btn-hover-text: #c9d1d9;--color-checks-dropdown-btn-hover-bg: rgba(110,118,129,.1);--color-checks-scrollbar-thumb-bg: rgba(110,118,129,.4);--color-checks-header-label-text: #8b949e;--color-checks-header-label-open-text: #c9d1d9;--color-checks-header-border: #21262d;--color-checks-header-icon: #8b949e;--color-checks-line-text: #8b949e;--color-checks-line-num-text: #484f58;--color-checks-line-timestamp-text: #484f58;--color-checks-line-hover-bg: rgba(110,118,129,.1);--color-checks-line-selected-bg: rgba(56,139,253,.15);--color-checks-line-selected-num-text: #58a6ff;--color-checks-line-dt-fm-text: #f0f6fc;--color-checks-line-dt-fm-bg: #9e6a03;--color-checks-gate-bg: rgba(187,128,9,.15);--color-checks-gate-text: #8b949e;--color-checks-gate-waiting-text: #d29922;--color-checks-step-header-open-bg: #161b22;--color-checks-step-error-text: #f85149;--color-checks-step-warning-text: #d29922;--color-checks-logline-text: #8b949e;--color-checks-logline-num-text: #484f58;--color-checks-logline-debug-text: #a371f7;--color-checks-logline-error-text: #8b949e;--color-checks-logline-error-num-text: #484f58;--color-checks-logline-error-bg: rgba(248,81,73,.15);--color-checks-logline-warning-text: #8b949e;--color-checks-logline-warning-num-text: #d29922;--color-checks-logline-warning-bg: rgba(187,128,9,.15);--color-checks-logline-command-text: #58a6ff;--color-checks-logline-section-text: #3fb950;--color-checks-ansi-black: #0d1117;--color-checks-ansi-black-bright: #161b22;--color-checks-ansi-white: #b1bac4;--color-checks-ansi-white-bright: #b1bac4;--color-checks-ansi-gray: #6e7681;--color-checks-ansi-red: #ff7b72;--color-checks-ansi-red-bright: #ffa198;--color-checks-ansi-green: #3fb950;--color-checks-ansi-green-bright: #56d364;--color-checks-ansi-yellow: #d29922;--color-checks-ansi-yellow-bright: #e3b341;--color-checks-ansi-blue: #58a6ff;--color-checks-ansi-blue-bright: #79c0ff;--color-checks-ansi-magenta: #bc8cff;--color-checks-ansi-magenta-bright: #d2a8ff;--color-checks-ansi-cyan: #76e3ea;--color-checks-ansi-cyan-bright: #b3f0ff;--color-project-header-bg: #0d1117;--color-project-sidebar-bg: #161b22;--color-project-gradient-in: #161b22;--color-project-gradient-out: rgba(22,27,34,0);--color-mktg-success: rgba(41,147,61,1);--color-mktg-info: rgba(42,123,243,1);--color-mktg-bg-shade-gradient-top: rgba(1,4,9,.065);--color-mktg-bg-shade-gradient-bottom: rgba(1,4,9,0);--color-mktg-btn-bg-top: hsla(228,82%,66%,1);--color-mktg-btn-bg-bottom: #4969ed;--color-mktg-btn-bg-overlay-top: hsla(228,74%,59%,1);--color-mktg-btn-bg-overlay-bottom: #3355e0;--color-mktg-btn-text: #f0f6fc;--color-mktg-btn-primary-bg-top: hsla(137,56%,46%,1);--color-mktg-btn-primary-bg-bottom: #2ea44f;--color-mktg-btn-primary-bg-overlay-top: hsla(134,60%,38%,1);--color-mktg-btn-primary-bg-overlay-bottom: #22863a;--color-mktg-btn-primary-text: #f0f6fc;--color-mktg-btn-enterprise-bg-top: hsla(249,100%,72%,1);--color-mktg-btn-enterprise-bg-bottom: #6f57ff;--color-mktg-btn-enterprise-bg-overlay-top: hsla(248,65%,63%,1);--color-mktg-btn-enterprise-bg-overlay-bottom: #614eda;--color-mktg-btn-enterprise-text: #f0f6fc;--color-mktg-btn-outline-text: #f0f6fc;--color-mktg-btn-outline-border: rgba(240,246,252,.3);--color-mktg-btn-outline-hover-text: #f0f6fc;--color-mktg-btn-outline-hover-border: rgba(240,246,252,.5);--color-mktg-btn-outline-focus-border: #f0f6fc;--color-mktg-btn-outline-focus-border-inset: rgba(240,246,252,.5);--color-mktg-btn-dark-text: #f0f6fc;--color-mktg-btn-dark-border: rgba(240,246,252,.3);--color-mktg-btn-dark-hover-text: #f0f6fc;--color-mktg-btn-dark-hover-border: rgba(240,246,252,.5);--color-mktg-btn-dark-focus-border: #f0f6fc;--color-mktg-btn-dark-focus-border-inset: rgba(240,246,252,.5);--color-avatar-bg: rgba(240,246,252,.1);--color-avatar-border: rgba(240,246,252,.1);--color-avatar-stack-fade: #30363d;--color-avatar-stack-fade-more: #21262d;--color-avatar-child-shadow: -2px -2px 0 #0d1117;--color-topic-tag-border: rgba(0,0,0,0);--color-select-menu-backdrop-border: #484f58;--color-select-menu-tap-highlight: rgba(48,54,61,.5);--color-select-menu-tap-focus-bg: #0c2d6b;--color-overlay-shadow: 0 0 0 1px #30363d, 0 16px 32px rgba(1,4,9,.85);--color-header-text: rgba(240,246,252,.7);--color-header-bg: #161b22;--color-header-logo: #f0f6fc;--color-header-search-bg: #0d1117;--color-header-search-border: #30363d;--color-sidenav-selected-bg: #21262d;--color-menu-bg-active: #161b22;--color-input-disabled-bg: rgba(110,118,129,0);--color-timeline-badge-bg: #21262d;--color-ansi-black: #484f58;--color-ansi-black-bright: #6e7681;--color-ansi-white: #b1bac4;--color-ansi-white-bright: #f0f6fc;--color-ansi-gray: #6e7681;--color-ansi-red: #ff7b72;--color-ansi-red-bright: #ffa198;--color-ansi-green: #3fb950;--color-ansi-green-bright: #56d364;--color-ansi-yellow: #d29922;--color-ansi-yellow-bright: #e3b341;--color-ansi-blue: #58a6ff;--color-ansi-blue-bright: #79c0ff;--color-ansi-magenta: #bc8cff;--color-ansi-magenta-bright: #d2a8ff;--color-ansi-cyan: #39c5cf;--color-ansi-cyan-bright: #56d4dd;--color-btn-text: #c9d1d9;--color-btn-bg: #21262d;--color-btn-border: rgba(240,246,252,.1);--color-btn-shadow: 0 0 transparent;--color-btn-inset-shadow: 0 0 transparent;--color-btn-hover-bg: #30363d;--color-btn-hover-border: #8b949e;--color-btn-active-bg: hsla(212,12%,18%,1);--color-btn-active-border: #6e7681;--color-btn-selected-bg: #161b22;--color-btn-focus-bg: #21262d;--color-btn-focus-border: #8b949e;--color-btn-focus-shadow: 0 0 0 3px rgba(139,148,158,.3);--color-btn-shadow-active: inset 0 .15em .3em rgba(1,4,9,.15);--color-btn-shadow-input-focus: 0 0 0 .2em rgba(31,111,235,.3);--color-btn-counter-bg: #30363d;--color-btn-primary-text: #ffffff;--color-btn-primary-bg: #238636;--color-btn-primary-border: rgba(240,246,252,.1);--color-btn-primary-shadow: 0 0 transparent;--color-btn-primary-inset-shadow: 0 0 transparent;--color-btn-primary-hover-bg: #2ea043;--color-btn-primary-hover-border: rgba(240,246,252,.1);--color-btn-primary-selected-bg: #238636;--color-btn-primary-selected-shadow: 0 0 transparent;--color-btn-primary-disabled-text: rgba(240,246,252,.5);--color-btn-primary-disabled-bg: rgba(35,134,54,.6);--color-btn-primary-disabled-border: rgba(240,246,252,.1);--color-btn-primary-focus-bg: #238636;--color-btn-primary-focus-border: rgba(240,246,252,.1);--color-btn-primary-focus-shadow: 0 0 0 3px rgba(46,164,79,.4);--color-btn-primary-icon: #f0f6fc;--color-btn-primary-counter-bg: rgba(240,246,252,.2);--color-btn-outline-text: #58a6ff;--color-btn-outline-hover-text: #58a6ff;--color-btn-outline-hover-bg: #30363d;--color-btn-outline-hover-border: rgba(240,246,252,.1);--color-btn-outline-hover-shadow: 0 1px 0 rgba(1,4,9,.1);--color-btn-outline-hover-inset-shadow: inset 0 1px 0 rgba(240,246,252,.03);--color-btn-outline-hover-counter-bg: rgba(240,246,252,.2);--color-btn-outline-selected-text: #f0f6fc;--color-btn-outline-selected-bg: #0d419d;--color-btn-outline-selected-border: rgba(240,246,252,.1);--color-btn-outline-selected-shadow: 0 0 transparent;--color-btn-outline-disabled-text: rgba(88,166,255,.5);--color-btn-outline-disabled-bg: #0d1117;--color-btn-outline-disabled-counter-bg: rgba(31,111,235,.05);--color-btn-outline-focus-border: rgba(240,246,252,.1);--color-btn-outline-focus-shadow: 0 0 0 3px rgba(17,88,199,.4);--color-btn-outline-counter-bg: rgba(31,111,235,.1);--color-btn-danger-text: #f85149;--color-btn-danger-hover-text: #f0f6fc;--color-btn-danger-hover-bg: #da3633;--color-btn-danger-hover-border: #f85149;--color-btn-danger-hover-shadow: 0 0 transparent;--color-btn-danger-hover-inset-shadow: 0 0 transparent;--color-btn-danger-hover-icon: #f0f6fc;--color-btn-danger-hover-counter-bg: rgba(255,255,255,.2);--color-btn-danger-selected-text: #ffffff;--color-btn-danger-selected-bg: #b62324;--color-btn-danger-selected-border: #ff7b72;--color-btn-danger-selected-shadow: 0 0 transparent;--color-btn-danger-disabled-text: rgba(248,81,73,.5);--color-btn-danger-disabled-bg: #0d1117;--color-btn-danger-disabled-counter-bg: rgba(218,54,51,.05);--color-btn-danger-focus-border: #f85149;--color-btn-danger-focus-shadow: 0 0 0 3px rgba(248,81,73,.4);--color-btn-danger-counter-bg: rgba(218,54,51,.1);--color-btn-danger-icon: #f85149;--color-underlinenav-icon: #484f58;--color-underlinenav-border-hover: rgba(110,118,129,.4);--color-fg-default: #c9d1d9;--color-fg-muted: #8b949e;--color-fg-subtle: #484f58;--color-fg-on-emphasis: #f0f6fc;--color-canvas-default: #0d1117;--color-canvas-overlay: #161b22;--color-canvas-inset: #010409;--color-canvas-subtle: #161b22;--color-border-default: #30363d;--color-border-muted: #21262d;--color-border-subtle: rgba(240,246,252,.1);--color-shadow-small: 0 0 transparent;--color-shadow-medium: 0 3px 6px #010409;--color-shadow-large: 0 8px 24px #010409;--color-shadow-extra-large: 0 12px 48px #010409;--color-neutral-emphasis-plus: #6e7681;--color-neutral-emphasis: #6e7681;--color-neutral-muted: rgba(110,118,129,.4);--color-neutral-subtle: rgba(110,118,129,.1);--color-accent-fg: #58a6ff;--color-accent-emphasis: #1f6feb;--color-accent-muted: rgba(56,139,253,.4);--color-accent-subtle: rgba(56,139,253,.15);--color-success-fg: #3fb950;--color-success-emphasis: #238636;--color-success-muted: rgba(46,160,67,.4);--color-success-subtle: rgba(46,160,67,.15);--color-attention-fg: #d29922;--color-attention-emphasis: #9e6a03;--color-attention-muted: rgba(187,128,9,.4);--color-attention-subtle: rgba(187,128,9,.15);--color-severe-fg: #db6d28;--color-severe-emphasis: #bd561d;--color-severe-muted: rgba(219,109,40,.4);--color-severe-subtle: rgba(219,109,40,.15);--color-danger-fg: #f85149;--color-danger-emphasis: #da3633;--color-danger-muted: rgba(248,81,73,.4);--color-danger-subtle: rgba(248,81,73,.15);--color-done-fg: #a371f7;--color-done-emphasis: #8957e5;--color-done-muted: rgba(163,113,247,.4);--color-done-subtle: rgba(163,113,247,.15);--color-sponsors-fg: #db61a2;--color-sponsors-emphasis: #bf4b8a;--color-sponsors-muted: rgba(219,97,162,.4);--color-sponsors-subtle: rgba(219,97,162,.15);--color-primer-canvas-backdrop: rgba(1,4,9,.8);--color-primer-canvas-sticky: rgba(13,17,23,.95);--color-primer-border-active: #F78166;--color-primer-border-contrast: rgba(240,246,252,.2);--color-primer-shadow-highlight: 0 0 transparent;--color-primer-shadow-inset: 0 0 transparent;--color-primer-shadow-focus: 0 0 0 3px #0c2d6b;--color-scale-black: #010409;--color-scale-white: #f0f6fc;--color-scale-gray-0: #f0f6fc;--color-scale-gray-1: #c9d1d9;--color-scale-gray-2: #b1bac4;--color-scale-gray-3: #8b949e;--color-scale-gray-4: #6e7681;--color-scale-gray-5: #484f58;--color-scale-gray-6: #30363d;--color-scale-gray-7: #21262d;--color-scale-gray-8: #161b22;--color-scale-gray-9: #0d1117;--color-scale-blue-0: #cae8ff;--color-scale-blue-1: #a5d6ff;--color-scale-blue-2: #79c0ff;--color-scale-blue-3: #58a6ff;--color-scale-blue-4: #388bfd;--color-scale-blue-5: #1f6feb;--color-scale-blue-6: #1158c7;--color-scale-blue-7: #0d419d;--color-scale-blue-8: #0c2d6b;--color-scale-blue-9: #051d4d;--color-scale-green-0: #aff5b4;--color-scale-green-1: #7ee787;--color-scale-green-2: #56d364;--color-scale-green-3: #3fb950;--color-scale-green-4: #2ea043;--color-scale-green-5: #238636;--color-scale-green-6: #196c2e;--color-scale-green-7: #0f5323;--color-scale-green-8: #033a16;--color-scale-green-9: #04260f;--color-scale-yellow-0: #f8e3a1;--color-scale-yellow-1: #f2cc60;--color-scale-yellow-2: #e3b341;--color-scale-yellow-3: #d29922;--color-scale-yellow-4: #bb8009;--color-scale-yellow-5: #9e6a03;--color-scale-yellow-6: #845306;--color-scale-yellow-7: #693e00;--color-scale-yellow-8: #4b2900;--color-scale-yellow-9: #341a00;--color-scale-orange-0: #ffdfb6;--color-scale-orange-1: #ffc680;--color-scale-orange-2: #ffa657;--color-scale-orange-3: #f0883e;--color-scale-orange-4: #db6d28;--color-scale-orange-5: #bd561d;--color-scale-orange-6: #9b4215;--color-scale-orange-7: #762d0a;--color-scale-orange-8: #5a1e02;--color-scale-orange-9: #3d1300;--color-scale-red-0: #ffdcd7;--color-scale-red-1: #ffc1ba;--color-scale-red-2: #ffa198;--color-scale-red-3: #ff7b72;--color-scale-red-4: #f85149;--color-scale-red-5: #da3633;--color-scale-red-6: #b62324;--color-scale-red-7: #8e1519;--color-scale-red-8: #67060c;--color-scale-red-9: #490202;--color-scale-purple-0: #eddeff;--color-scale-purple-1: #e2c5ff;--color-scale-purple-2: #d2a8ff;--color-scale-purple-3: #bc8cff;--color-scale-purple-4: #a371f7;--color-scale-purple-5: #8957e5;--color-scale-purple-6: #6e40c9;--color-scale-purple-7: #553098;--color-scale-purple-8: #3c1e70;--color-scale-purple-9: #271052;--color-scale-pink-0: #ffdaec;--color-scale-pink-1: #ffbedd;--color-scale-pink-2: #ff9bce;--color-scale-pink-3: #f778ba;--color-scale-pink-4: #db61a2;--color-scale-pink-5: #bf4b8a;--color-scale-pink-6: #9e3670;--color-scale-pink-7: #7d2457;--color-scale-pink-8: #5e103e;--color-scale-pink-9: #42062a;--color-scale-coral-0: #FFDDD2;--color-scale-coral-1: #FFC2B2;--color-scale-coral-2: #FFA28B;--color-scale-coral-3: #F78166;--color-scale-coral-4: #EA6045;--color-scale-coral-5: #CF462D;--color-scale-coral-6: #AC3220;--color-scale-coral-7: #872012;--color-scale-coral-8: #640D04;--color-scale-coral-9: #460701 }}:root{--box-shadow: rgba(0, 0, 0, .133) 0px 1.6px 3.6px 0px, rgba(0, 0, 0, .11) 0px .3px .9px 0px;--box-shadow-thick: rgb(0 0 0 / 10%) 0px 1.8px 1.9px, rgb(0 0 0 / 15%) 0px 6.1px 6.3px, rgb(0 0 0 / 10%) 0px -2px 4px, rgb(0 0 0 / 15%) 0px -6.1px 12px, rgb(0 0 0 / 25%) 0px 6px 12px}*{box-sizing:border-box;min-width:0;min-height:0}svg{fill:currentColor}.vbox{display:flex;flex-direction:column;flex:auto;position:relative}.hbox{display:flex;flex:auto;position:relative}.hidden{visibility:hidden}.d-flex{display:flex!important}.d-inline{display:inline!important}.m-1{margin:4px}.m-2{margin:8px}.m-3{margin:16px}.m-4{margin:24px}.m-5{margin:32px}.mx-1{margin:0 4px}.mx-2{margin:0 8px}.mx-3{margin:0 16px}.mx-4{margin:0 24px}.mx-5{margin:0 32px}.my-1{margin:4px 0}.my-2{margin:8px 0}.my-3{margin:16px 0}.my-4{margin:24px 0}.my-5{margin:32px 0}.mt-1{margin-top:4px}.mt-2{margin-top:8px}.mt-3{margin-top:16px}.mt-4{margin-top:24px}.mt-5{margin-top:32px}.mr-1{margin-right:4px}.mr-2{margin-right:8px}.mr-3{margin-right:16px}.mr-4{margin-right:24px}.mr-5{margin-right:32px}.mb-1{margin-bottom:4px}.mb-2{margin-bottom:8px}.mb-3{margin-bottom:16px}.mb-4{margin-bottom:24px}.mb-5{margin-bottom:32px}.ml-1{margin-left:4px}.ml-2{margin-left:8px}.ml-3{margin-left:16px}.ml-4{margin-left:24px}.ml-5{margin-left:32px}.p-1{padding:4px}.p-2{padding:8px}.p-3{padding:16px}.p-4{padding:24px}.p-5{padding:32px}.px-1{padding:0 4px}.px-2{padding:0 8px}.px-3{padding:0 16px}.px-4{padding:0 24px}.px-5{padding:0 32px}.py-1{padding:4px 0}.py-2{padding:8px 0}.py-3{padding:16px 0}.py-4{padding:24px 0}.py-5{padding:32px 0}.pt-1{padding-top:4px}.pt-2{padding-top:8px}.pt-3{padding-top:16px}.pt-4{padding-top:24px}.pt-5{padding-top:32px}.pr-1{padding-right:4px}.pr-2{padding-right:8px}.pr-3{padding-right:16px}.pr-4{padding-right:24px}.pr-5{padding-right:32px}.pb-1{padding-bottom:4px}.pb-2{padding-bottom:8px}.pb-3{padding-bottom:16px}.pb-4{padding-bottom:24px}.pb-5{padding-bottom:32px}.pl-1{padding-left:4px}.pl-2{padding-left:8px}.pl-3{padding-left:16px}.pl-4{padding-left:24px}.pl-5{padding-left:32px}.no-wrap{white-space:nowrap!important}.float-left{float:left!important}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section{display:block}.form-control,.form-select{padding:5px 12px;font-size:14px;line-height:20px;color:var(--color-fg-default);vertical-align:middle;background-color:var(--color-canvas-default);background-repeat:no-repeat;background-position:right 8px center;border:1px solid var(--color-border-default);border-radius:6px;outline:none;box-shadow:var(--color-primer-shadow-inset)}.input-contrast{background-color:var(--color-canvas-inset)}.subnav-search{position:relative;flex:auto;display:flex}.subnav-search-input{flex:auto;padding-left:32px;color:var(--color-fg-muted)}.subnav-search-icon{position:absolute;top:9px;left:8px;display:block;color:var(--color-fg-muted);text-align:center;pointer-events:none}.subnav-search-context+.subnav-search{margin-left:-1px}.subnav-item{flex:none;position:relative;float:left;padding:5px 10px;font-weight:500;line-height:20px;color:var(--color-fg-default);border:1px solid var(--color-border-default)}.subnav-item:hover{background-color:var(--color-canvas-subtle)}.subnav-item:first-child{border-top-left-radius:6px;border-bottom-left-radius:6px}.subnav-item:last-child{border-top-right-radius:6px;border-bottom-right-radius:6px}.subnav-item+.subnav-item{margin-left:-1px}.counter{display:inline-block;min-width:20px;padding:0 6px;font-size:12px;font-weight:500;line-height:18px;color:var(--color-fg-default);text-align:center;background-color:var(--color-neutral-muted);border:1px solid transparent;border-radius:2em}.color-icon-success{color:var(--color-success-fg)!important}.color-text-danger{color:var(--color-danger-fg)!important}.color-text-warning{color:var(--color-checks-step-warning-text)!important}.color-fg-muted{color:var(--color-fg-muted)!important}.octicon{display:inline-block;overflow:visible!important;vertical-align:text-bottom;fill:currentColor;margin-right:7px;flex:none}.button{flex:none;height:24px;border:1px solid var(--color-btn-border);outline:none;color:var(--color-btn-text);background:var(--color-btn-bg);padding:4px;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;border-radius:4px}.button:not(:disabled):hover{border-color:var(--color-btn-hover-border);background-color:var(--color-btn-hover-bg)}@media only screen and (max-width: 600px){.subnav-item,.form-control{border-radius:0!important}.subnav-item{padding:5px 3px;border:none}.subnav-search-input{border-left:0;border-right:0}}.header-view-status-container{float:right}.header-view{padding:12px 8px 0}.header-view div{flex-shrink:0}.header-superheader{color:var(--color-fg-muted)}.header-title{flex:none;font-weight:400;font-size:32px;line-height:1.25}@media only screen and (max-width: 600px){.header-view{padding:0}.header-view div{flex-shrink:1}.header-view-status-container{float:none;margin:0 0 10px!important;overflow:hidden}.header-view-status-container .subnav-search-input{border-left:none;border-right:none}.header-title,.header-superheader{margin:0 8px}}.tree-item{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;line-height:38px}.tree-item-title{cursor:pointer}.tree-item-body{min-height:18px}.yellow-flash{animation:yellowflash-bg 2s}@keyframes yellowflash-bg{0%{background:var(--color-attention-subtle)}to{background:transparent}}.copy-icon{flex:none;height:24px;width:24px;border:none;outline:none;color:var(--color-fg-muted);background:transparent;padding:4px;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;border-radius:4px}.copy-icon svg{margin:0}.copy-icon:not(:disabled):hover{background-color:var(--color-border-default)}.copy-button-container{visibility:hidden;display:inline-flex;margin-left:8px;vertical-align:bottom}.copy-value-container:hover .copy-button-container{visibility:visible}.label{display:inline-block;padding:0 8px;font-size:12px;font-weight:500;line-height:18px;border:1px solid transparent;border-radius:2em;background-color:var(--color-scale-gray-4);color:#fff;margin:0 10px;flex:none;font-weight:600}@media (prefers-color-scheme: light){.label-color-0{background-color:var(--color-scale-blue-0);color:var(--color-scale-blue-6);border:1px solid var(--color-scale-blue-4)}.label-color-1{background-color:var(--color-scale-yellow-0);color:var(--color-scale-yellow-6);border:1px solid var(--color-scale-yellow-4)}.label-color-2{background-color:var(--color-scale-purple-0);color:var(--color-scale-purple-6);border:1px solid var(--color-scale-purple-4)}.label-color-3{background-color:var(--color-scale-pink-0);color:var(--color-scale-pink-6);border:1px solid var(--color-scale-pink-4)}.label-color-4{background-color:var(--color-scale-coral-0);color:var(--color-scale-coral-6);border:1px solid var(--color-scale-coral-4)}.label-color-5{background-color:var(--color-scale-orange-0);color:var(--color-scale-orange-6);border:1px solid var(--color-scale-orange-4)}}@media (prefers-color-scheme: dark){.label-color-0{background-color:var(--color-scale-blue-9);color:var(--color-scale-blue-2);border:1px solid var(--color-scale-blue-4)}.label-color-1{background-color:var(--color-scale-yellow-9);color:var(--color-scale-yellow-2);border:1px solid var(--color-scale-yellow-4)}.label-color-2{background-color:var(--color-scale-purple-9);color:var(--color-scale-purple-2);border:1px solid var(--color-scale-purple-4)}.label-color-3{background-color:var(--color-scale-pink-9);color:var(--color-scale-pink-2);border:1px solid var(--color-scale-pink-4)}.label-color-4{background-color:var(--color-scale-coral-9);color:var(--color-scale-coral-2);border:1px solid var(--color-scale-coral-4)}.label-color-5{background-color:var(--color-scale-orange-9);color:var(--color-scale-orange-2);border:1px solid var(--color-scale-orange-4)}}.attachment-body{white-space:pre-wrap;background-color:var(--color-canvas-subtle);margin-left:24px;line-height:normal;padding:8px;font-family:monospace;position:relative}.attachment-body .copy-icon{position:absolute;right:5px;top:5px}html,body{width:100%;height:100%;padding:0;margin:0;overscroll-behavior-x:none}body{overflow:auto;max-width:1024px;margin:0 auto;width:100%}.test-file-test:not(:first-child){border-top:1px solid var(--color-border-default)}@media only screen and (max-width: 600px){.htmlreport{padding:0!important}}.tabbed-pane{display:flex;flex:auto;overflow:hidden}.tabbed-pane-tab-strip{display:flex;align-items:center;padding-right:10px;flex:none;width:100%;z-index:2;font-size:14px;line-height:32px;color:var(--color-fg-default);height:48px;min-width:70px;box-shadow:inset 0 -1px 0 var(--color-border-muted)!important}.tabbed-pane-tab-strip:focus{outline:none}.tabbed-pane-tab-element{padding:4px 8px 0;margin-right:4px;cursor:pointer;display:flex;flex:none;align-items:center;justify-content:center;-webkit-user-select:none;user-select:none;border-bottom:2px solid transparent;outline:none;height:100%}.tabbed-pane-tab-label{max-width:250px;white-space:pre;overflow:hidden;text-overflow:ellipsis;display:inline-block}.tabbed-pane-tab-element.selected{border-bottom-color:#666}.tabbed-pane-tab-element:hover{color:#333}.chip-header{border:1px solid var(--color-border-default);border-top-left-radius:6px;border-top-right-radius:6px;background-color:var(--color-canvas-subtle);padding:0 8px;border-bottom:none;margin-top:12px;font-weight:600;line-height:38px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.chip-header.expanded-false{border:1px solid var(--color-border-default);border-radius:6px}.chip-header.expanded-false,.chip-header.expanded-true{cursor:pointer}.chip-body{border:1px solid var(--color-border-default);border-bottom-left-radius:6px;border-bottom-right-radius:6px;padding:16px;margin-bottom:12px}.chip-body-no-insets{padding:0}@media only screen and (max-width: 600px){.chip-header{border-radius:0;border-right:none;border-left:none}.chip-body{border-radius:0;border-right:none;border-left:none;padding:8px}.chip-body-no-insets{padding:0}}.test-case-column{border-radius:6px;margin-bottom:24px}.test-case-column .tab-element.selected{font-weight:600;border-bottom-color:var(--color-primer-border-active)}.test-case-column .tab-element{border:none;color:var(--color-fg-default);border-bottom:2px solid transparent}.test-case-column .tab-element:hover{color:var(--color-fg-default)}.test-case-location,.test-case-duration{flex:none;align-items:center;padding:0 8px 8px;line-height:24px}.test-case-run-duration{color:var(--color-fg-muted);padding-left:8px}.header-view .test-case-path{flex:none;flex-shrink:1;align-items:center;padding-right:8px}.test-case-annotation{flex:none;align-items:center;padding:0 8px;line-height:24px;white-space:pre-wrap}@media only screen and (max-width: 600px){.test-case-column{border-radius:0!important;margin:0!important}}.test-case-project-labels-row{display:flex;flex-direction:row;flex-wrap:wrap}body{--vscode-font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif;--vscode-font-weight: normal;--vscode-font-size: 13px;--vscode-editor-font-family: "Droid Sans Mono", "monospace", monospace;--vscode-editor-font-weight: normal;--vscode-editor-font-size: 14px;--vscode-foreground: #616161;--vscode-disabledForeground: rgba(97, 97, 97, .5);--vscode-errorForeground: #a1260d;--vscode-descriptionForeground: #717171;--vscode-icon-foreground: #424242;--vscode-focusBorder: #0090f1;--vscode-textSeparator-foreground: rgba(0, 0, 0, .18);--vscode-textLink-foreground: #006ab1;--vscode-textLink-activeForeground: #006ab1;--vscode-textPreformat-foreground: #a31515;--vscode-textBlockQuote-background: rgba(127, 127, 127, .1);--vscode-textBlockQuote-border: rgba(0, 122, 204, .5);--vscode-textCodeBlock-background: rgba(220, 220, 220, .4);--vscode-widget-shadow: rgba(0, 0, 0, .16);--vscode-input-background: #ffffff;--vscode-input-foreground: #616161;--vscode-inputOption-activeBorder: #007acc;--vscode-inputOption-hoverBackground: rgba(184, 184, 184, .31);--vscode-inputOption-activeBackground: rgba(0, 144, 241, .2);--vscode-inputOption-activeForeground: #000000;--vscode-input-placeholderForeground: #767676;--vscode-inputValidation-infoBackground: #d6ecf2;--vscode-inputValidation-infoBorder: #007acc;--vscode-inputValidation-warningBackground: #f6f5d2;--vscode-inputValidation-warningBorder: #b89500;--vscode-inputValidation-errorBackground: #f2dede;--vscode-inputValidation-errorBorder: #be1100;--vscode-dropdown-background: #ffffff;--vscode-dropdown-border: #cecece;--vscode-checkbox-background: #ffffff;--vscode-checkbox-border: #cecece;--vscode-button-foreground: #ffffff;--vscode-button-separator: rgba(255, 255, 255, .4);--vscode-button-background: #007acc;--vscode-button-hoverBackground: #0062a3;--vscode-button-secondaryForeground: #ffffff;--vscode-button-secondaryBackground: #5f6a79;--vscode-button-secondaryHoverBackground: #4c5561;--vscode-badge-background: #c4c4c4;--vscode-badge-foreground: #333333;--vscode-scrollbar-shadow: #dddddd;--vscode-scrollbarSlider-background: rgba(100, 100, 100, .4);--vscode-scrollbarSlider-hoverBackground: rgba(100, 100, 100, .7);--vscode-scrollbarSlider-activeBackground: rgba(0, 0, 0, .6);--vscode-progressBar-background: #0e70c0;--vscode-editorError-foreground: #e51400;--vscode-editorWarning-foreground: #bf8803;--vscode-editorInfo-foreground: #1a85ff;--vscode-editorHint-foreground: #6c6c6c;--vscode-sash-hoverBorder: #0090f1;--vscode-editor-background: #ffffff;--vscode-editor-foreground: #000000;--vscode-editorStickyScroll-background: #ffffff;--vscode-editorStickyScrollHover-background: #f0f0f0;--vscode-editorWidget-background: #f3f3f3;--vscode-editorWidget-foreground: #616161;--vscode-editorWidget-border: #c8c8c8;--vscode-quickInput-background: #f3f3f3;--vscode-quickInput-foreground: #616161;--vscode-quickInputTitle-background: rgba(0, 0, 0, .06);--vscode-pickerGroup-foreground: #0066bf;--vscode-pickerGroup-border: #cccedb;--vscode-keybindingLabel-background: rgba(221, 221, 221, .4);--vscode-keybindingLabel-foreground: #555555;--vscode-keybindingLabel-border: rgba(204, 204, 204, .4);--vscode-keybindingLabel-bottomBorder: rgba(187, 187, 187, .4);--vscode-editor-selectionBackground: #add6ff;--vscode-editor-inactiveSelectionBackground: #e5ebf1;--vscode-editor-selectionHighlightBackground: rgba(173, 214, 255, .5);--vscode-editor-findMatchBackground: #a8ac94;--vscode-editor-findMatchHighlightBackground: rgba(234, 92, 0, .33);--vscode-editor-findRangeHighlightBackground: rgba(180, 180, 180, .3);--vscode-searchEditor-findMatchBackground: rgba(234, 92, 0, .22);--vscode-editor-hoverHighlightBackground: rgba(173, 214, 255, .15);--vscode-editorHoverWidget-background: #f3f3f3;--vscode-editorHoverWidget-foreground: #616161;--vscode-editorHoverWidget-border: #c8c8c8;--vscode-editorHoverWidget-statusBarBackground: #e7e7e7;--vscode-editorLink-activeForeground: #0000ff;--vscode-editorInlayHint-foreground: rgba(51, 51, 51, .8);--vscode-editorInlayHint-background: rgba(196, 196, 196, .3);--vscode-editorInlayHint-typeForeground: rgba(51, 51, 51, .8);--vscode-editorInlayHint-typeBackground: rgba(196, 196, 196, .3);--vscode-editorInlayHint-parameterForeground: rgba(51, 51, 51, .8);--vscode-editorInlayHint-parameterBackground: rgba(196, 196, 196, .3);--vscode-editorLightBulb-foreground: #ddb100;--vscode-editorLightBulbAutoFix-foreground: #007acc;--vscode-diffEditor-insertedTextBackground: rgba(156, 204, 44, .4);--vscode-diffEditor-removedTextBackground: rgba(255, 0, 0, .3);--vscode-diffEditor-insertedLineBackground: rgba(155, 185, 85, .2);--vscode-diffEditor-removedLineBackground: rgba(255, 0, 0, .2);--vscode-diffEditor-diagonalFill: rgba(34, 34, 34, .2);--vscode-list-focusOutline: #0090f1;--vscode-list-focusAndSelectionOutline: #90c2f9;--vscode-list-activeSelectionBackground: #0060c0;--vscode-list-activeSelectionForeground: #ffffff;--vscode-list-activeSelectionIconForeground: #ffffff;--vscode-list-inactiveSelectionBackground: #e4e6f1;--vscode-list-hoverBackground: #e8e8e8;--vscode-list-dropBackground: #d6ebff;--vscode-list-highlightForeground: #0066bf;--vscode-list-focusHighlightForeground: #bbe7ff;--vscode-list-invalidItemForeground: #b89500;--vscode-list-errorForeground: #b01011;--vscode-list-warningForeground: #855f00;--vscode-listFilterWidget-background: #f3f3f3;--vscode-listFilterWidget-outline: rgba(0, 0, 0, 0);--vscode-listFilterWidget-noMatchesOutline: #be1100;--vscode-listFilterWidget-shadow: rgba(0, 0, 0, .16);--vscode-list-filterMatchBackground: rgba(234, 92, 0, .33);--vscode-tree-indentGuidesStroke: #a9a9a9;--vscode-tree-tableColumnsBorder: rgba(97, 97, 97, .13);--vscode-tree-tableOddRowsBackground: rgba(97, 97, 97, .04);--vscode-list-deemphasizedForeground: #8e8e90;--vscode-quickInputList-focusForeground: #ffffff;--vscode-quickInputList-focusIconForeground: #ffffff;--vscode-quickInputList-focusBackground: #0060c0;--vscode-menu-foreground: #616161;--vscode-menu-background: #ffffff;--vscode-menu-selectionForeground: #ffffff;--vscode-menu-selectionBackground: #0060c0;--vscode-menu-separatorBackground: #d4d4d4;--vscode-toolbar-hoverBackground: rgba(184, 184, 184, .31);--vscode-toolbar-activeBackground: rgba(166, 166, 166, .31);--vscode-editor-snippetTabstopHighlightBackground: rgba(10, 50, 100, .2);--vscode-editor-snippetFinalTabstopHighlightBorder: rgba(10, 50, 100, .5);--vscode-breadcrumb-foreground: rgba(97, 97, 97, .8);--vscode-breadcrumb-background: #ffffff;--vscode-breadcrumb-focusForeground: #4e4e4e;--vscode-breadcrumb-activeSelectionForeground: #4e4e4e;--vscode-breadcrumbPicker-background: #f3f3f3;--vscode-merge-currentHeaderBackground: rgba(64, 200, 174, .5);--vscode-merge-currentContentBackground: rgba(64, 200, 174, .2);--vscode-merge-incomingHeaderBackground: rgba(64, 166, 255, .5);--vscode-merge-incomingContentBackground: rgba(64, 166, 255, .2);--vscode-merge-commonHeaderBackground: rgba(96, 96, 96, .4);--vscode-merge-commonContentBackground: rgba(96, 96, 96, .16);--vscode-editorOverviewRuler-currentContentForeground: rgba(64, 200, 174, .5);--vscode-editorOverviewRuler-incomingContentForeground: rgba(64, 166, 255, .5);--vscode-editorOverviewRuler-commonContentForeground: rgba(96, 96, 96, .4);--vscode-editorOverviewRuler-findMatchForeground: rgba(209, 134, 22, .49);--vscode-editorOverviewRuler-selectionHighlightForeground: rgba(160, 160, 160, .8);--vscode-minimap-findMatchHighlight: #d18616;--vscode-minimap-selectionOccurrenceHighlight: #c9c9c9;--vscode-minimap-selectionHighlight: #add6ff;--vscode-minimap-errorHighlight: rgba(255, 18, 18, .7);--vscode-minimap-warningHighlight: #bf8803;--vscode-minimap-foregroundOpacity: #000000;--vscode-minimapSlider-background: rgba(100, 100, 100, .2);--vscode-minimapSlider-hoverBackground: rgba(100, 100, 100, .35);--vscode-minimapSlider-activeBackground: rgba(0, 0, 0, .3);--vscode-problemsErrorIcon-foreground: #e51400;--vscode-problemsWarningIcon-foreground: #bf8803;--vscode-problemsInfoIcon-foreground: #1a85ff;--vscode-charts-foreground: #616161;--vscode-charts-lines: rgba(97, 97, 97, .5);--vscode-charts-red: #e51400;--vscode-charts-blue: #1a85ff;--vscode-charts-yellow: #bf8803;--vscode-charts-orange: #d18616;--vscode-charts-green: #388a34;--vscode-charts-purple: #652d90;--vscode-editor-lineHighlightBorder: #eeeeee;--vscode-editor-rangeHighlightBackground: rgba(253, 255, 0, .2);--vscode-editor-symbolHighlightBackground: rgba(234, 92, 0, .33);--vscode-editorCursor-foreground: #000000;--vscode-editorWhitespace-foreground: rgba(51, 51, 51, .2);--vscode-editorIndentGuide-background: #d3d3d3;--vscode-editorIndentGuide-activeBackground: #939393;--vscode-editorLineNumber-foreground: #237893;--vscode-editorActiveLineNumber-foreground: #0b216f;--vscode-editorLineNumber-activeForeground: #0b216f;--vscode-editorRuler-foreground: #d3d3d3;--vscode-editorCodeLens-foreground: #919191;--vscode-editorBracketMatch-background: rgba(0, 100, 0, .1);--vscode-editorBracketMatch-border: #b9b9b9;--vscode-editorOverviewRuler-border: rgba(127, 127, 127, .3);--vscode-editorGutter-background: #ffffff;--vscode-editorUnnecessaryCode-opacity: rgba(0, 0, 0, .47);--vscode-editorGhostText-foreground: rgba(0, 0, 0, .47);--vscode-editorOverviewRuler-rangeHighlightForeground: rgba(0, 122, 204, .6);--vscode-editorOverviewRuler-errorForeground: rgba(255, 18, 18, .7);--vscode-editorOverviewRuler-warningForeground: #bf8803;--vscode-editorOverviewRuler-infoForeground: #1a85ff;--vscode-editorBracketHighlight-foreground1: #0431fa;--vscode-editorBracketHighlight-foreground2: #319331;--vscode-editorBracketHighlight-foreground3: #7b3814;--vscode-editorBracketHighlight-foreground4: rgba(0, 0, 0, 0);--vscode-editorBracketHighlight-foreground5: rgba(0, 0, 0, 0);--vscode-editorBracketHighlight-foreground6: rgba(0, 0, 0, 0);--vscode-editorBracketHighlight-unexpectedBracket\.foreground: rgba(255, 18, 18, .8);--vscode-editorBracketPairGuide-background1: rgba(0, 0, 0, 0);--vscode-editorBracketPairGuide-background2: rgba(0, 0, 0, 0);--vscode-editorBracketPairGuide-background3: rgba(0, 0, 0, 0);--vscode-editorBracketPairGuide-background4: rgba(0, 0, 0, 0);--vscode-editorBracketPairGuide-background5: rgba(0, 0, 0, 0);--vscode-editorBracketPairGuide-background6: rgba(0, 0, 0, 0);--vscode-editorBracketPairGuide-activeBackground1: rgba(0, 0, 0, 0);--vscode-editorBracketPairGuide-activeBackground2: rgba(0, 0, 0, 0);--vscode-editorBracketPairGuide-activeBackground3: rgba(0, 0, 0, 0);--vscode-editorBracketPairGuide-activeBackground4: rgba(0, 0, 0, 0);--vscode-editorBracketPairGuide-activeBackground5: rgba(0, 0, 0, 0);--vscode-editorBracketPairGuide-activeBackground6: rgba(0, 0, 0, 0);--vscode-editorUnicodeHighlight-border: #cea33d;--vscode-editorUnicodeHighlight-background: rgba(206, 163, 61, .08);--vscode-symbolIcon-arrayForeground: #616161;--vscode-symbolIcon-booleanForeground: #616161;--vscode-symbolIcon-classForeground: #d67e00;--vscode-symbolIcon-colorForeground: #616161;--vscode-symbolIcon-constantForeground: #616161;--vscode-symbolIcon-constructorForeground: #652d90;--vscode-symbolIcon-enumeratorForeground: #d67e00;--vscode-symbolIcon-enumeratorMemberForeground: #007acc;--vscode-symbolIcon-eventForeground: #d67e00;--vscode-symbolIcon-fieldForeground: #007acc;--vscode-symbolIcon-fileForeground: #616161;--vscode-symbolIcon-folderForeground: #616161;--vscode-symbolIcon-functionForeground: #652d90;--vscode-symbolIcon-interfaceForeground: #007acc;--vscode-symbolIcon-keyForeground: #616161;--vscode-symbolIcon-keywordForeground: #616161;--vscode-symbolIcon-methodForeground: #652d90;--vscode-symbolIcon-moduleForeground: #616161;--vscode-symbolIcon-namespaceForeground: #616161;--vscode-symbolIcon-nullForeground: #616161;--vscode-symbolIcon-numberForeground: #616161;--vscode-symbolIcon-objectForeground: #616161;--vscode-symbolIcon-operatorForeground: #616161;--vscode-symbolIcon-packageForeground: #616161;--vscode-symbolIcon-propertyForeground: #616161;--vscode-symbolIcon-referenceForeground: #616161;--vscode-symbolIcon-snippetForeground: #616161;--vscode-symbolIcon-stringForeground: #616161;--vscode-symbolIcon-structForeground: #616161;--vscode-symbolIcon-textForeground: #616161;--vscode-symbolIcon-typeParameterForeground: #616161;--vscode-symbolIcon-unitForeground: #616161;--vscode-symbolIcon-variableForeground: #007acc;--vscode-editorHoverWidget-highlightForeground: #0066bf;--vscode-editorOverviewRuler-bracketMatchForeground: #a0a0a0;--vscode-editor-foldBackground: rgba(173, 214, 255, .3);--vscode-editorGutter-foldingControlForeground: #424242;--vscode-editor-linkedEditingBackground: rgba(255, 0, 0, .3);--vscode-editor-wordHighlightBackground: rgba(87, 87, 87, .25);--vscode-editor-wordHighlightStrongBackground: rgba(14, 99, 156, .25);--vscode-editorOverviewRuler-wordHighlightForeground: rgba(160, 160, 160, .8);--vscode-editorOverviewRuler-wordHighlightStrongForeground: rgba(192, 160, 192, .8);--vscode-peekViewTitle-background: rgba(26, 133, 255, .1);--vscode-peekViewTitleLabel-foreground: #000000;--vscode-peekViewTitleDescription-foreground: #616161;--vscode-peekView-border: #1a85ff;--vscode-peekViewResult-background: #f3f3f3;--vscode-peekViewResult-lineForeground: #646465;--vscode-peekViewResult-fileForeground: #1e1e1e;--vscode-peekViewResult-selectionBackground: rgba(51, 153, 255, .2);--vscode-peekViewResult-selectionForeground: #6c6c6c;--vscode-peekViewEditor-background: #f2f8fc;--vscode-peekViewEditorGutter-background: #f2f8fc;--vscode-peekViewResult-matchHighlightBackground: rgba(234, 92, 0, .3);--vscode-peekViewEditor-matchHighlightBackground: rgba(245, 216, 2, .87);--vscode-editorMarkerNavigationError-background: #e51400;--vscode-editorMarkerNavigationError-headerBackground: rgba(229, 20, 0, .1);--vscode-editorMarkerNavigationWarning-background: #bf8803;--vscode-editorMarkerNavigationWarning-headerBackground: rgba(191, 136, 3, .1);--vscode-editorMarkerNavigationInfo-background: #1a85ff;--vscode-editorMarkerNavigationInfo-headerBackground: rgba(26, 133, 255, .1);--vscode-editorMarkerNavigation-background: #ffffff;--vscode-editorSuggestWidget-background: #f3f3f3;--vscode-editorSuggestWidget-border: #c8c8c8;--vscode-editorSuggestWidget-foreground: #000000;--vscode-editorSuggestWidget-selectedForeground: #ffffff;--vscode-editorSuggestWidget-selectedIconForeground: #ffffff;--vscode-editorSuggestWidget-selectedBackground: #0060c0;--vscode-editorSuggestWidget-highlightForeground: #0066bf;--vscode-editorSuggestWidget-focusHighlightForeground: #bbe7ff;--vscode-editorSuggestWidgetStatus-foreground: rgba(0, 0, 0, .5);--vscode-tab-activeBackground: #ffffff;--vscode-tab-unfocusedActiveBackground: #ffffff;--vscode-tab-inactiveBackground: #ececec;--vscode-tab-unfocusedInactiveBackground: #ececec;--vscode-tab-activeForeground: #333333;--vscode-tab-inactiveForeground: rgba(51, 51, 51, .7);--vscode-tab-unfocusedActiveForeground: rgba(51, 51, 51, .7);--vscode-tab-unfocusedInactiveForeground: rgba(51, 51, 51, .35);--vscode-tab-border: #f3f3f3;--vscode-tab-lastPinnedBorder: rgba(97, 97, 97, .19);--vscode-tab-activeModifiedBorder: #33aaee;--vscode-tab-inactiveModifiedBorder: rgba(51, 170, 238, .5);--vscode-tab-unfocusedActiveModifiedBorder: rgba(51, 170, 238, .7);--vscode-tab-unfocusedInactiveModifiedBorder: rgba(51, 170, 238, .25);--vscode-editorPane-background: #ffffff;--vscode-editorGroupHeader-tabsBackground: #f3f3f3;--vscode-editorGroupHeader-noTabsBackground: #ffffff;--vscode-editorGroup-border: #e7e7e7;--vscode-editorGroup-dropBackground: rgba(38, 119, 203, .18);--vscode-editorGroup-dropIntoPromptForeground: #616161;--vscode-editorGroup-dropIntoPromptBackground: #f3f3f3;--vscode-sideBySideEditor-horizontalBorder: #e7e7e7;--vscode-sideBySideEditor-verticalBorder: #e7e7e7;--vscode-panel-background: #ffffff;--vscode-panel-border: rgba(128, 128, 128, .35);--vscode-panelTitle-activeForeground: #424242;--vscode-panelTitle-inactiveForeground: rgba(66, 66, 66, .75);--vscode-panelTitle-activeBorder: #424242;--vscode-panelInput-border: #dddddd;--vscode-panel-dropBorder: #424242;--vscode-panelSection-dropBackground: rgba(38, 119, 203, .18);--vscode-panelSectionHeader-background: rgba(128, 128, 128, .2);--vscode-panelSection-border: rgba(128, 128, 128, .35);--vscode-banner-background: #004386;--vscode-banner-foreground: #ffffff;--vscode-banner-iconForeground: #1a85ff;--vscode-statusBar-foreground: #ffffff;--vscode-statusBar-noFolderForeground: #ffffff;--vscode-statusBar-background: #007acc;--vscode-statusBar-noFolderBackground: #68217a;--vscode-statusBar-focusBorder: #ffffff;--vscode-statusBarItem-activeBackground: rgba(255, 255, 255, .18);--vscode-statusBarItem-focusBorder: #ffffff;--vscode-statusBarItem-hoverBackground: rgba(255, 255, 255, .12);--vscode-statusBarItem-compactHoverBackground: rgba(255, 255, 255, .2);--vscode-statusBarItem-prominentForeground: #ffffff;--vscode-statusBarItem-prominentBackground: rgba(0, 0, 0, .5);--vscode-statusBarItem-prominentHoverBackground: rgba(0, 0, 0, .3);--vscode-statusBarItem-errorBackground: #c72e0f;--vscode-statusBarItem-errorForeground: #ffffff;--vscode-statusBarItem-warningBackground: #725102;--vscode-statusBarItem-warningForeground: #ffffff;--vscode-activityBar-background: #2c2c2c;--vscode-activityBar-foreground: #ffffff;--vscode-activityBar-inactiveForeground: rgba(255, 255, 255, .4);--vscode-activityBar-activeBorder: #ffffff;--vscode-activityBar-dropBorder: #ffffff;--vscode-activityBarBadge-background: #007acc;--vscode-activityBarBadge-foreground: #ffffff;--vscode-statusBarItem-remoteBackground: #16825d;--vscode-statusBarItem-remoteForeground: #ffffff;--vscode-extensionBadge-remoteBackground: #007acc;--vscode-extensionBadge-remoteForeground: #ffffff;--vscode-sideBar-background: #f3f3f3;--vscode-sideBarTitle-foreground: #6f6f6f;--vscode-sideBar-dropBackground: rgba(38, 119, 203, .18);--vscode-sideBarSectionHeader-background: rgba(0, 0, 0, 0);--vscode-sideBarSectionHeader-border: rgba(97, 97, 97, .19);--vscode-titleBar-activeForeground: #333333;--vscode-titleBar-inactiveForeground: rgba(51, 51, 51, .6);--vscode-titleBar-activeBackground: #dddddd;--vscode-titleBar-inactiveBackground: rgba(221, 221, 221, .6);--vscode-menubar-selectionForeground: #333333;--vscode-menubar-selectionBackground: rgba(184, 184, 184, .31);--vscode-notifications-foreground: #616161;--vscode-notifications-background: #f3f3f3;--vscode-notificationLink-foreground: #006ab1;--vscode-notificationCenterHeader-background: #e7e7e7;--vscode-notifications-border: #e7e7e7;--vscode-notificationsErrorIcon-foreground: #e51400;--vscode-notificationsWarningIcon-foreground: #bf8803;--vscode-notificationsInfoIcon-foreground: #1a85ff;--vscode-commandCenter-foreground: #333333;--vscode-commandCenter-activeForeground: #333333;--vscode-commandCenter-activeBackground: rgba(184, 184, 184, .31);--vscode-commandCenter-border: rgba(128, 128, 128, .35);--vscode-editorCommentsWidget-resolvedBorder: rgba(97, 97, 97, .5);--vscode-editorCommentsWidget-unresolvedBorder: #1a85ff;--vscode-editorCommentsWidget-rangeBackground: rgba(26, 133, 255, .1);--vscode-editorCommentsWidget-rangeBorder: rgba(26, 133, 255, .4);--vscode-editorCommentsWidget-rangeActiveBackground: rgba(26, 133, 255, .1);--vscode-editorCommentsWidget-rangeActiveBorder: rgba(26, 133, 255, .4);--vscode-editorGutter-commentRangeForeground: #d5d8e9;--vscode-debugToolBar-background: #f3f3f3;--vscode-debugIcon-startForeground: #388a34;--vscode-editor-stackFrameHighlightBackground: rgba(255, 255, 102, .45);--vscode-editor-focusedStackFrameHighlightBackground: rgba(206, 231, 206, .45);--vscode-mergeEditor-change\.background: rgba(155, 185, 85, .2);--vscode-mergeEditor-change\.word\.background: rgba(156, 204, 44, .4);--vscode-mergeEditor-conflict\.unhandledUnfocused\.border: rgba(255, 166, 0, .48);--vscode-mergeEditor-conflict\.unhandledFocused\.border: #ffa600;--vscode-mergeEditor-conflict\.handledUnfocused\.border: rgba(134, 134, 134, .29);--vscode-mergeEditor-conflict\.handledFocused\.border: rgba(193, 193, 193, .8);--vscode-mergeEditor-conflict\.handled\.minimapOverViewRuler: rgba(173, 172, 168, .93);--vscode-mergeEditor-conflict\.unhandled\.minimapOverViewRuler: #fcba03;--vscode-mergeEditor-conflictingLines\.background: rgba(255, 234, 0, .28);--vscode-settings-headerForeground: #444444;--vscode-settings-modifiedItemIndicator: #66afe0;--vscode-settings-headerBorder: rgba(128, 128, 128, .35);--vscode-settings-sashBorder: rgba(128, 128, 128, .35);--vscode-settings-dropdownBackground: #ffffff;--vscode-settings-dropdownBorder: #cecece;--vscode-settings-dropdownListBorder: #c8c8c8;--vscode-settings-checkboxBackground: #ffffff;--vscode-settings-checkboxBorder: #cecece;--vscode-settings-textInputBackground: #ffffff;--vscode-settings-textInputForeground: #616161;--vscode-settings-textInputBorder: #cecece;--vscode-settings-numberInputBackground: #ffffff;--vscode-settings-numberInputForeground: #616161;--vscode-settings-numberInputBorder: #cecece;--vscode-settings-focusedRowBackground: rgba(232, 232, 232, .6);--vscode-settings-rowHoverBackground: rgba(232, 232, 232, .3);--vscode-settings-focusedRowBorder: rgba(0, 0, 0, .12);--vscode-terminal-foreground: #333333;--vscode-terminal-selectionBackground: #add6ff;--vscode-terminal-inactiveSelectionBackground: #e5ebf1;--vscode-terminalCommandDecoration-defaultBackground: rgba(0, 0, 0, .25);--vscode-terminalCommandDecoration-successBackground: #2090d3;--vscode-terminalCommandDecoration-errorBackground: #e51400;--vscode-terminalOverviewRuler-cursorForeground: rgba(160, 160, 160, .8);--vscode-terminal-border: rgba(128, 128, 128, .35);--vscode-terminal-findMatchBackground: #a8ac94;--vscode-terminal-findMatchHighlightBackground: rgba(234, 92, 0, .33);--vscode-terminalOverviewRuler-findMatchForeground: rgba(209, 134, 22, .49);--vscode-terminal-dropBackground: rgba(38, 119, 203, .18);--vscode-testing-iconFailed: #f14c4c;--vscode-testing-iconErrored: #f14c4c;--vscode-testing-iconPassed: #73c991;--vscode-testing-runAction: #73c991;--vscode-testing-iconQueued: #cca700;--vscode-testing-iconUnset: #848484;--vscode-testing-iconSkipped: #848484;--vscode-testing-peekBorder: #e51400;--vscode-testing-peekHeaderBackground: rgba(229, 20, 0, .1);--vscode-testing-message\.error\.decorationForeground: #e51400;--vscode-testing-message\.error\.lineBackground: rgba(255, 0, 0, .2);--vscode-testing-message\.info\.decorationForeground: rgba(0, 0, 0, .5);--vscode-welcomePage-tileBackground: #f3f3f3;--vscode-welcomePage-tileHoverBackground: #dbdbdb;--vscode-welcomePage-tileShadow: rgba(0, 0, 0, .16);--vscode-welcomePage-progress\.background: #ffffff;--vscode-welcomePage-progress\.foreground: #006ab1;--vscode-debugExceptionWidget-border: #a31515;--vscode-debugExceptionWidget-background: #f1dfde;--vscode-ports-iconRunningProcessForeground: #369432;--vscode-statusBar-debuggingBackground: #cc6633;--vscode-statusBar-debuggingForeground: #ffffff;--vscode-editor-inlineValuesForeground: rgba(0, 0, 0, .5);--vscode-editor-inlineValuesBackground: rgba(255, 200, 0, .2);--vscode-editorGutter-modifiedBackground: #2090d3;--vscode-editorGutter-addedBackground: #48985d;--vscode-editorGutter-deletedBackground: #e51400;--vscode-minimapGutter-modifiedBackground: #2090d3;--vscode-minimapGutter-addedBackground: #48985d;--vscode-minimapGutter-deletedBackground: #e51400;--vscode-editorOverviewRuler-modifiedForeground: rgba(32, 144, 211, .6);--vscode-editorOverviewRuler-addedForeground: rgba(72, 152, 93, .6);--vscode-editorOverviewRuler-deletedForeground: rgba(229, 20, 0, .6);--vscode-debugIcon-breakpointForeground: #e51400;--vscode-debugIcon-breakpointDisabledForeground: #848484;--vscode-debugIcon-breakpointUnverifiedForeground: #848484;--vscode-debugIcon-breakpointCurrentStackframeForeground: #be8700;--vscode-debugIcon-breakpointStackframeForeground: #89d185;--vscode-notebook-cellBorderColor: #e8e8e8;--vscode-notebook-focusedEditorBorder: #0090f1;--vscode-notebookStatusSuccessIcon-foreground: #388a34;--vscode-notebookStatusErrorIcon-foreground: #a1260d;--vscode-notebookStatusRunningIcon-foreground: #616161;--vscode-notebook-cellToolbarSeparator: rgba(128, 128, 128, .35);--vscode-notebook-selectedCellBackground: rgba(200, 221, 241, .31);--vscode-notebook-selectedCellBorder: #e8e8e8;--vscode-notebook-focusedCellBorder: #0090f1;--vscode-notebook-inactiveFocusedCellBorder: #e8e8e8;--vscode-notebook-cellStatusBarItemHoverBackground: rgba(0, 0, 0, .08);--vscode-notebook-cellInsertionIndicator: #0090f1;--vscode-notebookScrollbarSlider-background: rgba(100, 100, 100, .4);--vscode-notebookScrollbarSlider-hoverBackground: rgba(100, 100, 100, .7);--vscode-notebookScrollbarSlider-activeBackground: rgba(0, 0, 0, .6);--vscode-notebook-symbolHighlightBackground: rgba(253, 255, 0, .2);--vscode-notebook-cellEditorBackground: #f3f3f3;--vscode-notebook-editorBackground: #ffffff;--vscode-keybindingTable-headerBackground: rgba(97, 97, 97, .04);--vscode-keybindingTable-rowsBackground: rgba(97, 97, 97, .04);--vscode-scm-providerBorder: #c8c8c8;--vscode-searchEditor-textInputBorder: #cecece;--vscode-debugTokenExpression-name: #9b46b0;--vscode-debugTokenExpression-value: rgba(108, 108, 108, .8);--vscode-debugTokenExpression-string: #a31515;--vscode-debugTokenExpression-boolean: #0000ff;--vscode-debugTokenExpression-number: #098658;--vscode-debugTokenExpression-error: #e51400;--vscode-debugView-exceptionLabelForeground: #ffffff;--vscode-debugView-exceptionLabelBackground: #a31515;--vscode-debugView-stateLabelForeground: #616161;--vscode-debugView-stateLabelBackground: rgba(136, 136, 136, .27);--vscode-debugView-valueChangedHighlight: #569cd6;--vscode-debugConsole-infoForeground: #1a85ff;--vscode-debugConsole-warningForeground: #bf8803;--vscode-debugConsole-errorForeground: #a1260d;--vscode-debugConsole-sourceForeground: #616161;--vscode-debugConsoleInputIcon-foreground: #616161;--vscode-debugIcon-pauseForeground: #007acc;--vscode-debugIcon-stopForeground: #a1260d;--vscode-debugIcon-disconnectForeground: #a1260d;--vscode-debugIcon-restartForeground: #388a34;--vscode-debugIcon-stepOverForeground: #007acc;--vscode-debugIcon-stepIntoForeground: #007acc;--vscode-debugIcon-stepOutForeground: #007acc;--vscode-debugIcon-continueForeground: #007acc;--vscode-debugIcon-stepBackForeground: #007acc;--vscode-extensionButton-prominentBackground: #007acc;--vscode-extensionButton-prominentForeground: #ffffff;--vscode-extensionButton-prominentHoverBackground: #0062a3;--vscode-extensionIcon-starForeground: #df6100;--vscode-extensionIcon-verifiedForeground: #006ab1;--vscode-extensionIcon-preReleaseForeground: #1d9271;--vscode-extensionIcon-sponsorForeground: #b51e78;--vscode-terminal-ansiBlack: #000000;--vscode-terminal-ansiRed: #cd3131;--vscode-terminal-ansiGreen: #00bc00;--vscode-terminal-ansiYellow: #949800;--vscode-terminal-ansiBlue: #0451a5;--vscode-terminal-ansiMagenta: #bc05bc;--vscode-terminal-ansiCyan: #0598bc;--vscode-terminal-ansiWhite: #555555;--vscode-terminal-ansiBrightBlack: #666666;--vscode-terminal-ansiBrightRed: #cd3131;--vscode-terminal-ansiBrightGreen: #14ce14;--vscode-terminal-ansiBrightYellow: #b5ba00;--vscode-terminal-ansiBrightBlue: #0451a5;--vscode-terminal-ansiBrightMagenta: #bc05bc;--vscode-terminal-ansiBrightCyan: #0598bc;--vscode-terminal-ansiBrightWhite: #a5a5a5;--vscode-interactive-activeCodeBorder: #1a85ff;--vscode-interactive-inactiveCodeBorder: #e4e6f1;--vscode-gitDecoration-addedResourceForeground: #587c0c;--vscode-gitDecoration-modifiedResourceForeground: #895503;--vscode-gitDecoration-deletedResourceForeground: #ad0707;--vscode-gitDecoration-renamedResourceForeground: #007100;--vscode-gitDecoration-untrackedResourceForeground: #007100;--vscode-gitDecoration-ignoredResourceForeground: #8e8e90;--vscode-gitDecoration-stageModifiedResourceForeground: #895503;--vscode-gitDecoration-stageDeletedResourceForeground: #ad0707;--vscode-gitDecoration-conflictingResourceForeground: #ad0707;--vscode-gitDecoration-submoduleResourceForeground: #1258a7}body.dark-mode{--vscode-font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif;--vscode-font-weight: normal;--vscode-font-size: 13px;--vscode-editor-font-family: "Droid Sans Mono", "monospace", monospace;--vscode-editor-font-weight: normal;--vscode-editor-font-size: 14px;--vscode-foreground: #cccccc;--vscode-disabledForeground: rgba(204, 204, 204, .5);--vscode-errorForeground: #f48771;--vscode-descriptionForeground: rgba(204, 204, 204, .7);--vscode-icon-foreground: #c5c5c5;--vscode-focusBorder: #007fd4;--vscode-textSeparator-foreground: rgba(255, 255, 255, .18);--vscode-textLink-foreground: #3794ff;--vscode-textLink-activeForeground: #3794ff;--vscode-textPreformat-foreground: #d7ba7d;--vscode-textBlockQuote-background: rgba(127, 127, 127, .1);--vscode-textBlockQuote-border: rgba(0, 122, 204, .5);--vscode-textCodeBlock-background: rgba(10, 10, 10, .4);--vscode-widget-shadow: rgba(0, 0, 0, .36);--vscode-input-background: #3c3c3c;--vscode-input-foreground: #cccccc;--vscode-inputOption-activeBorder: #007acc;--vscode-inputOption-hoverBackground: rgba(90, 93, 94, .5);--vscode-inputOption-activeBackground: rgba(0, 127, 212, .4);--vscode-inputOption-activeForeground: #ffffff;--vscode-input-placeholderForeground: #a6a6a6;--vscode-inputValidation-infoBackground: #063b49;--vscode-inputValidation-infoBorder: #007acc;--vscode-inputValidation-warningBackground: #352a05;--vscode-inputValidation-warningBorder: #b89500;--vscode-inputValidation-errorBackground: #5a1d1d;--vscode-inputValidation-errorBorder: #be1100;--vscode-dropdown-background: #3c3c3c;--vscode-dropdown-foreground: #f0f0f0;--vscode-dropdown-border: #3c3c3c;--vscode-checkbox-background: #3c3c3c;--vscode-checkbox-foreground: #f0f0f0;--vscode-checkbox-border: #3c3c3c;--vscode-button-foreground: #ffffff;--vscode-button-separator: rgba(255, 255, 255, .4);--vscode-button-background: #0e639c;--vscode-button-hoverBackground: #1177bb;--vscode-button-secondaryForeground: #ffffff;--vscode-button-secondaryBackground: #3a3d41;--vscode-button-secondaryHoverBackground: #45494e;--vscode-badge-background: #4d4d4d;--vscode-badge-foreground: #ffffff;--vscode-scrollbar-shadow: #000000;--vscode-scrollbarSlider-background: rgba(121, 121, 121, .4);--vscode-scrollbarSlider-hoverBackground: rgba(100, 100, 100, .7);--vscode-scrollbarSlider-activeBackground: rgba(191, 191, 191, .4);--vscode-progressBar-background: #0e70c0;--vscode-editorError-foreground: #f14c4c;--vscode-editorWarning-foreground: #cca700;--vscode-editorInfo-foreground: #3794ff;--vscode-editorHint-foreground: rgba(238, 238, 238, .7);--vscode-sash-hoverBorder: #007fd4;--vscode-editor-background: #1e1e1e;--vscode-editor-foreground: #d4d4d4;--vscode-editorStickyScroll-background: #1e1e1e;--vscode-editorStickyScrollHover-background: #2a2d2e;--vscode-editorWidget-background: #252526;--vscode-editorWidget-foreground: #cccccc;--vscode-editorWidget-border: #454545;--vscode-quickInput-background: #252526;--vscode-quickInput-foreground: #cccccc;--vscode-quickInputTitle-background: rgba(255, 255, 255, .1);--vscode-pickerGroup-foreground: #3794ff;--vscode-pickerGroup-border: #3f3f46;--vscode-keybindingLabel-background: rgba(128, 128, 128, .17);--vscode-keybindingLabel-foreground: #cccccc;--vscode-keybindingLabel-border: rgba(51, 51, 51, .6);--vscode-keybindingLabel-bottomBorder: rgba(68, 68, 68, .6);--vscode-editor-selectionBackground: #264f78;--vscode-editor-inactiveSelectionBackground: #3a3d41;--vscode-editor-selectionHighlightBackground: rgba(173, 214, 255, .15);--vscode-editor-findMatchBackground: #515c6a;--vscode-editor-findMatchHighlightBackground: rgba(234, 92, 0, .33);--vscode-editor-findRangeHighlightBackground: rgba(58, 61, 65, .4);--vscode-searchEditor-findMatchBackground: rgba(234, 92, 0, .22);--vscode-editor-hoverHighlightBackground: rgba(38, 79, 120, .25);--vscode-editorHoverWidget-background: #252526;--vscode-editorHoverWidget-foreground: #cccccc;--vscode-editorHoverWidget-border: #454545;--vscode-editorHoverWidget-statusBarBackground: #2c2c2d;--vscode-editorLink-activeForeground: #4e94ce;--vscode-editorInlayHint-foreground: rgba(255, 255, 255, .8);--vscode-editorInlayHint-background: rgba(77, 77, 77, .6);--vscode-editorInlayHint-typeForeground: rgba(255, 255, 255, .8);--vscode-editorInlayHint-typeBackground: rgba(77, 77, 77, .6);--vscode-editorInlayHint-parameterForeground: rgba(255, 255, 255, .8);--vscode-editorInlayHint-parameterBackground: rgba(77, 77, 77, .6);--vscode-editorLightBulb-foreground: #ffcc00;--vscode-editorLightBulbAutoFix-foreground: #75beff;--vscode-diffEditor-insertedTextBackground: rgba(156, 204, 44, .2);--vscode-diffEditor-removedTextBackground: rgba(255, 0, 0, .4);--vscode-diffEditor-insertedLineBackground: rgba(155, 185, 85, .2);--vscode-diffEditor-removedLineBackground: rgba(255, 0, 0, .2);--vscode-diffEditor-diagonalFill: rgba(204, 204, 204, .2);--vscode-list-focusOutline: #007fd4;--vscode-list-activeSelectionBackground: #04395e;--vscode-list-activeSelectionForeground: #ffffff;--vscode-list-activeSelectionIconForeground: #ffffff;--vscode-list-inactiveSelectionBackground: #37373d;--vscode-list-hoverBackground: #2a2d2e;--vscode-list-dropBackground: #383b3d;--vscode-list-highlightForeground: #2aaaff;--vscode-list-focusHighlightForeground: #2aaaff;--vscode-list-invalidItemForeground: #b89500;--vscode-list-errorForeground: #f88070;--vscode-list-warningForeground: #cca700;--vscode-listFilterWidget-background: #252526;--vscode-listFilterWidget-outline: rgba(0, 0, 0, 0);--vscode-listFilterWidget-noMatchesOutline: #be1100;--vscode-listFilterWidget-shadow: rgba(0, 0, 0, .36);--vscode-list-filterMatchBackground: rgba(234, 92, 0, .33);--vscode-tree-indentGuidesStroke: #585858;--vscode-tree-tableColumnsBorder: rgba(204, 204, 204, .13);--vscode-tree-tableOddRowsBackground: rgba(204, 204, 204, .04);--vscode-list-deemphasizedForeground: #8c8c8c;--vscode-quickInputList-focusForeground: #ffffff;--vscode-quickInputList-focusIconForeground: #ffffff;--vscode-quickInputList-focusBackground: #04395e;--vscode-menu-foreground: #cccccc;--vscode-menu-background: #303031;--vscode-menu-selectionForeground: #ffffff;--vscode-menu-selectionBackground: #04395e;--vscode-menu-separatorBackground: #606060;--vscode-toolbar-hoverBackground: rgba(90, 93, 94, .31);--vscode-toolbar-activeBackground: rgba(99, 102, 103, .31);--vscode-editor-snippetTabstopHighlightBackground: rgba(124, 124, 124, .3);--vscode-editor-snippetFinalTabstopHighlightBorder: #525252;--vscode-breadcrumb-foreground: rgba(204, 204, 204, .8);--vscode-breadcrumb-background: #1e1e1e;--vscode-breadcrumb-focusForeground: #e0e0e0;--vscode-breadcrumb-activeSelectionForeground: #e0e0e0;--vscode-breadcrumbPicker-background: #252526;--vscode-merge-currentHeaderBackground: rgba(64, 200, 174, .5);--vscode-merge-currentContentBackground: rgba(64, 200, 174, .2);--vscode-merge-incomingHeaderBackground: rgba(64, 166, 255, .5);--vscode-merge-incomingContentBackground: rgba(64, 166, 255, .2);--vscode-merge-commonHeaderBackground: rgba(96, 96, 96, .4);--vscode-merge-commonContentBackground: rgba(96, 96, 96, .16);--vscode-editorOverviewRuler-currentContentForeground: rgba(64, 200, 174, .5);--vscode-editorOverviewRuler-incomingContentForeground: rgba(64, 166, 255, .5);--vscode-editorOverviewRuler-commonContentForeground: rgba(96, 96, 96, .4);--vscode-editorOverviewRuler-findMatchForeground: rgba(209, 134, 22, .49);--vscode-editorOverviewRuler-selectionHighlightForeground: rgba(160, 160, 160, .8);--vscode-minimap-findMatchHighlight: #d18616;--vscode-minimap-selectionOccurrenceHighlight: #676767;--vscode-minimap-selectionHighlight: #264f78;--vscode-minimap-errorHighlight: rgba(255, 18, 18, .7);--vscode-minimap-warningHighlight: #cca700;--vscode-minimap-foregroundOpacity: #000000;--vscode-minimapSlider-background: rgba(121, 121, 121, .2);--vscode-minimapSlider-hoverBackground: rgba(100, 100, 100, .35);--vscode-minimapSlider-activeBackground: rgba(191, 191, 191, .2);--vscode-problemsErrorIcon-foreground: #f14c4c;--vscode-problemsWarningIcon-foreground: #cca700;--vscode-problemsInfoIcon-foreground: #3794ff;--vscode-charts-foreground: #cccccc;--vscode-charts-lines: rgba(204, 204, 204, .5);--vscode-charts-red: #f14c4c;--vscode-charts-blue: #3794ff;--vscode-charts-yellow: #cca700;--vscode-charts-orange: #d18616;--vscode-charts-green: #89d185;--vscode-charts-purple: #b180d7;--vscode-editor-lineHighlightBorder: #282828;--vscode-editor-rangeHighlightBackground: rgba(255, 255, 255, .04);--vscode-editor-symbolHighlightBackground: rgba(234, 92, 0, .33);--vscode-editorCursor-foreground: #aeafad;--vscode-editorWhitespace-foreground: rgba(227, 228, 226, .16);--vscode-editorIndentGuide-background: #404040;--vscode-editorIndentGuide-activeBackground: #707070;--vscode-editorLineNumber-foreground: #858585;--vscode-editorActiveLineNumber-foreground: #c6c6c6;--vscode-editorLineNumber-activeForeground: #c6c6c6;--vscode-editorRuler-foreground: #5a5a5a;--vscode-editorCodeLens-foreground: #999999;--vscode-editorBracketMatch-background: rgba(0, 100, 0, .1);--vscode-editorBracketMatch-border: #888888;--vscode-editorOverviewRuler-border: rgba(127, 127, 127, .3);--vscode-editorGutter-background: #1e1e1e;--vscode-editorUnnecessaryCode-opacity: rgba(0, 0, 0, .67);--vscode-editorGhostText-foreground: rgba(255, 255, 255, .34);--vscode-editorOverviewRuler-rangeHighlightForeground: rgba(0, 122, 204, .6);--vscode-editorOverviewRuler-errorForeground: rgba(255, 18, 18, .7);--vscode-editorOverviewRuler-warningForeground: #cca700;--vscode-editorOverviewRuler-infoForeground: #3794ff;--vscode-editorBracketHighlight-foreground1: #ffd700;--vscode-editorBracketHighlight-foreground2: #da70d6;--vscode-editorBracketHighlight-foreground3: #179fff;--vscode-editorBracketHighlight-foreground4: rgba(0, 0, 0, 0);--vscode-editorBracketHighlight-foreground5: rgba(0, 0, 0, 0);--vscode-editorBracketHighlight-foreground6: rgba(0, 0, 0, 0);--vscode-editorBracketHighlight-unexpectedBracket\.foreground: rgba(255, 18, 18, .8);--vscode-editorBracketPairGuide-background1: rgba(0, 0, 0, 0);--vscode-editorBracketPairGuide-background2: rgba(0, 0, 0, 0);--vscode-editorBracketPairGuide-background3: rgba(0, 0, 0, 0);--vscode-editorBracketPairGuide-background4: rgba(0, 0, 0, 0);--vscode-editorBracketPairGuide-background5: rgba(0, 0, 0, 0);--vscode-editorBracketPairGuide-background6: rgba(0, 0, 0, 0);--vscode-editorBracketPairGuide-activeBackground1: rgba(0, 0, 0, 0);--vscode-editorBracketPairGuide-activeBackground2: rgba(0, 0, 0, 0);--vscode-editorBracketPairGuide-activeBackground3: rgba(0, 0, 0, 0);--vscode-editorBracketPairGuide-activeBackground4: rgba(0, 0, 0, 0);--vscode-editorBracketPairGuide-activeBackground5: rgba(0, 0, 0, 0);--vscode-editorBracketPairGuide-activeBackground6: rgba(0, 0, 0, 0);--vscode-editorUnicodeHighlight-border: #bd9b03;--vscode-editorUnicodeHighlight-background: rgba(189, 155, 3, .15);--vscode-symbolIcon-arrayForeground: #cccccc;--vscode-symbolIcon-booleanForeground: #cccccc;--vscode-symbolIcon-classForeground: #ee9d28;--vscode-symbolIcon-colorForeground: #cccccc;--vscode-symbolIcon-constantForeground: #cccccc;--vscode-symbolIcon-constructorForeground: #b180d7;--vscode-symbolIcon-enumeratorForeground: #ee9d28;--vscode-symbolIcon-enumeratorMemberForeground: #75beff;--vscode-symbolIcon-eventForeground: #ee9d28;--vscode-symbolIcon-fieldForeground: #75beff;--vscode-symbolIcon-fileForeground: #cccccc;--vscode-symbolIcon-folderForeground: #cccccc;--vscode-symbolIcon-functionForeground: #b180d7;--vscode-symbolIcon-interfaceForeground: #75beff;--vscode-symbolIcon-keyForeground: #cccccc;--vscode-symbolIcon-keywordForeground: #cccccc;--vscode-symbolIcon-methodForeground: #b180d7;--vscode-symbolIcon-moduleForeground: #cccccc;--vscode-symbolIcon-namespaceForeground: #cccccc;--vscode-symbolIcon-nullForeground: #cccccc;--vscode-symbolIcon-numberForeground: #cccccc;--vscode-symbolIcon-objectForeground: #cccccc;--vscode-symbolIcon-operatorForeground: #cccccc;--vscode-symbolIcon-packageForeground: #cccccc;--vscode-symbolIcon-propertyForeground: #cccccc;--vscode-symbolIcon-referenceForeground: #cccccc;--vscode-symbolIcon-snippetForeground: #cccccc;--vscode-symbolIcon-stringForeground: #cccccc;--vscode-symbolIcon-structForeground: #cccccc;--vscode-symbolIcon-textForeground: #cccccc;--vscode-symbolIcon-typeParameterForeground: #cccccc;--vscode-symbolIcon-unitForeground: #cccccc;--vscode-symbolIcon-variableForeground: #75beff;--vscode-editorHoverWidget-highlightForeground: #2aaaff;--vscode-editorOverviewRuler-bracketMatchForeground: #a0a0a0;--vscode-editor-foldBackground: rgba(38, 79, 120, .3);--vscode-editorGutter-foldingControlForeground: #c5c5c5;--vscode-editor-linkedEditingBackground: rgba(255, 0, 0, .3);--vscode-editor-wordHighlightBackground: rgba(87, 87, 87, .72);--vscode-editor-wordHighlightStrongBackground: rgba(0, 73, 114, .72);--vscode-editorOverviewRuler-wordHighlightForeground: rgba(160, 160, 160, .8);--vscode-editorOverviewRuler-wordHighlightStrongForeground: rgba(192, 160, 192, .8);--vscode-peekViewTitle-background: rgba(55, 148, 255, .1);--vscode-peekViewTitleLabel-foreground: #ffffff;--vscode-peekViewTitleDescription-foreground: rgba(204, 204, 204, .7);--vscode-peekView-border: #3794ff;--vscode-peekViewResult-background: #252526;--vscode-peekViewResult-lineForeground: #bbbbbb;--vscode-peekViewResult-fileForeground: #ffffff;--vscode-peekViewResult-selectionBackground: rgba(51, 153, 255, .2);--vscode-peekViewResult-selectionForeground: #ffffff;--vscode-peekViewEditor-background: #001f33;--vscode-peekViewEditorGutter-background: #001f33;--vscode-peekViewResult-matchHighlightBackground: rgba(234, 92, 0, .3);--vscode-peekViewEditor-matchHighlightBackground: rgba(255, 143, 0, .6);--vscode-editorMarkerNavigationError-background: #f14c4c;--vscode-editorMarkerNavigationError-headerBackground: rgba(241, 76, 76, .1);--vscode-editorMarkerNavigationWarning-background: #cca700;--vscode-editorMarkerNavigationWarning-headerBackground: rgba(204, 167, 0, .1);--vscode-editorMarkerNavigationInfo-background: #3794ff;--vscode-editorMarkerNavigationInfo-headerBackground: rgba(55, 148, 255, .1);--vscode-editorMarkerNavigation-background: #1e1e1e;--vscode-editorSuggestWidget-background: #252526;--vscode-editorSuggestWidget-border: #454545;--vscode-editorSuggestWidget-foreground: #d4d4d4;--vscode-editorSuggestWidget-selectedForeground: #ffffff;--vscode-editorSuggestWidget-selectedIconForeground: #ffffff;--vscode-editorSuggestWidget-selectedBackground: #04395e;--vscode-editorSuggestWidget-highlightForeground: #2aaaff;--vscode-editorSuggestWidget-focusHighlightForeground: #2aaaff;--vscode-editorSuggestWidgetStatus-foreground: rgba(212, 212, 212, .5);--vscode-tab-activeBackground: #1e1e1e;--vscode-tab-unfocusedActiveBackground: #1e1e1e;--vscode-tab-inactiveBackground: #2d2d2d;--vscode-tab-unfocusedInactiveBackground: #2d2d2d;--vscode-tab-activeForeground: #ffffff;--vscode-tab-inactiveForeground: rgba(255, 255, 255, .5);--vscode-tab-unfocusedActiveForeground: rgba(255, 255, 255, .5);--vscode-tab-unfocusedInactiveForeground: rgba(255, 255, 255, .25);--vscode-tab-border: #252526;--vscode-tab-lastPinnedBorder: rgba(204, 204, 204, .2);--vscode-tab-activeModifiedBorder: #3399cc;--vscode-tab-inactiveModifiedBorder: rgba(51, 153, 204, .5);--vscode-tab-unfocusedActiveModifiedBorder: rgba(51, 153, 204, .5);--vscode-tab-unfocusedInactiveModifiedBorder: rgba(51, 153, 204, .25);--vscode-editorPane-background: #1e1e1e;--vscode-editorGroupHeader-tabsBackground: #252526;--vscode-editorGroupHeader-noTabsBackground: #1e1e1e;--vscode-editorGroup-border: #444444;--vscode-editorGroup-dropBackground: rgba(83, 89, 93, .5);--vscode-editorGroup-dropIntoPromptForeground: #cccccc;--vscode-editorGroup-dropIntoPromptBackground: #252526;--vscode-sideBySideEditor-horizontalBorder: #444444;--vscode-sideBySideEditor-verticalBorder: #444444;--vscode-panel-background: #1e1e1e;--vscode-panel-border: rgba(128, 128, 128, .35);--vscode-panelTitle-activeForeground: #e7e7e7;--vscode-panelTitle-inactiveForeground: rgba(231, 231, 231, .6);--vscode-panelTitle-activeBorder: #e7e7e7;--vscode-panel-dropBorder: #e7e7e7;--vscode-panelSection-dropBackground: rgba(83, 89, 93, .5);--vscode-panelSectionHeader-background: rgba(128, 128, 128, .2);--vscode-panelSection-border: rgba(128, 128, 128, .35);--vscode-banner-background: #04395e;--vscode-banner-foreground: #ffffff;--vscode-banner-iconForeground: #3794ff;--vscode-statusBar-foreground: #ffffff;--vscode-statusBar-noFolderForeground: #ffffff;--vscode-statusBar-background: #007acc;--vscode-statusBar-noFolderBackground: #68217a;--vscode-statusBar-focusBorder: #ffffff;--vscode-statusBarItem-activeBackground: rgba(255, 255, 255, .18);--vscode-statusBarItem-focusBorder: #ffffff;--vscode-statusBarItem-hoverBackground: rgba(255, 255, 255, .12);--vscode-statusBarItem-compactHoverBackground: rgba(255, 255, 255, .2);--vscode-statusBarItem-prominentForeground: #ffffff;--vscode-statusBarItem-prominentBackground: rgba(0, 0, 0, .5);--vscode-statusBarItem-prominentHoverBackground: rgba(0, 0, 0, .3);--vscode-statusBarItem-errorBackground: #c72e0f;--vscode-statusBarItem-errorForeground: #ffffff;--vscode-statusBarItem-warningBackground: #7a6400;--vscode-statusBarItem-warningForeground: #ffffff;--vscode-activityBar-background: #333333;--vscode-activityBar-foreground: #ffffff;--vscode-activityBar-inactiveForeground: rgba(255, 255, 255, .4);--vscode-activityBar-activeBorder: #ffffff;--vscode-activityBar-dropBorder: #ffffff;--vscode-activityBarBadge-background: #007acc;--vscode-activityBarBadge-foreground: #ffffff;--vscode-statusBarItem-remoteBackground: #16825d;--vscode-statusBarItem-remoteForeground: #ffffff;--vscode-extensionBadge-remoteBackground: #007acc;--vscode-extensionBadge-remoteForeground: #ffffff;--vscode-sideBar-background: #252526;--vscode-sideBarTitle-foreground: #bbbbbb;--vscode-sideBar-dropBackground: rgba(83, 89, 93, .5);--vscode-sideBarSectionHeader-background: rgba(0, 0, 0, 0);--vscode-sideBarSectionHeader-border: rgba(204, 204, 204, .2);--vscode-titleBar-activeForeground: #cccccc;--vscode-titleBar-inactiveForeground: rgba(204, 204, 204, .6);--vscode-titleBar-activeBackground: #3c3c3c;--vscode-titleBar-inactiveBackground: rgba(60, 60, 60, .6);--vscode-menubar-selectionForeground: #cccccc;--vscode-menubar-selectionBackground: rgba(90, 93, 94, .31);--vscode-notifications-foreground: #cccccc;--vscode-notifications-background: #252526;--vscode-notificationLink-foreground: #3794ff;--vscode-notificationCenterHeader-background: #303031;--vscode-notifications-border: #303031;--vscode-notificationsErrorIcon-foreground: #f14c4c;--vscode-notificationsWarningIcon-foreground: #cca700;--vscode-notificationsInfoIcon-foreground: #3794ff;--vscode-commandCenter-foreground: #cccccc;--vscode-commandCenter-activeForeground: #cccccc;--vscode-commandCenter-activeBackground: rgba(90, 93, 94, .31);--vscode-commandCenter-border: rgba(128, 128, 128, .35);--vscode-editorCommentsWidget-resolvedBorder: rgba(204, 204, 204, .5);--vscode-editorCommentsWidget-unresolvedBorder: #3794ff;--vscode-editorCommentsWidget-rangeBackground: rgba(55, 148, 255, .1);--vscode-editorCommentsWidget-rangeBorder: rgba(55, 148, 255, .4);--vscode-editorCommentsWidget-rangeActiveBackground: rgba(55, 148, 255, .1);--vscode-editorCommentsWidget-rangeActiveBorder: rgba(55, 148, 255, .4);--vscode-editorGutter-commentRangeForeground: #37373d;--vscode-debugToolBar-background: #333333;--vscode-debugIcon-startForeground: #89d185;--vscode-editor-stackFrameHighlightBackground: rgba(255, 255, 0, .2);--vscode-editor-focusedStackFrameHighlightBackground: rgba(122, 189, 122, .3);--vscode-mergeEditor-change\.background: rgba(155, 185, 85, .2);--vscode-mergeEditor-change\.word\.background: rgba(156, 204, 44, .2);--vscode-mergeEditor-conflict\.unhandledUnfocused\.border: rgba(255, 166, 0, .48);--vscode-mergeEditor-conflict\.unhandledFocused\.border: #ffa600;--vscode-mergeEditor-conflict\.handledUnfocused\.border: rgba(134, 134, 134, .29);--vscode-mergeEditor-conflict\.handledFocused\.border: rgba(193, 193, 193, .8);--vscode-mergeEditor-conflict\.handled\.minimapOverViewRuler: rgba(173, 172, 168, .93);--vscode-mergeEditor-conflict\.unhandled\.minimapOverViewRuler: #fcba03;--vscode-mergeEditor-conflictingLines\.background: rgba(255, 234, 0, .28);--vscode-settings-headerForeground: #e7e7e7;--vscode-settings-modifiedItemIndicator: #0c7d9d;--vscode-settings-headerBorder: rgba(128, 128, 128, .35);--vscode-settings-sashBorder: rgba(128, 128, 128, .35);--vscode-settings-dropdownBackground: #3c3c3c;--vscode-settings-dropdownForeground: #f0f0f0;--vscode-settings-dropdownBorder: #3c3c3c;--vscode-settings-dropdownListBorder: #454545;--vscode-settings-checkboxBackground: #3c3c3c;--vscode-settings-checkboxForeground: #f0f0f0;--vscode-settings-checkboxBorder: #3c3c3c;--vscode-settings-textInputBackground: #3c3c3c;--vscode-settings-textInputForeground: #cccccc;--vscode-settings-numberInputBackground: #3c3c3c;--vscode-settings-numberInputForeground: #cccccc;--vscode-settings-focusedRowBackground: rgba(42, 45, 46, .6);--vscode-settings-rowHoverBackground: rgba(42, 45, 46, .3);--vscode-settings-focusedRowBorder: rgba(255, 255, 255, .12);--vscode-terminal-foreground: #cccccc;--vscode-terminal-selectionBackground: #264f78;--vscode-terminal-inactiveSelectionBackground: #3a3d41;--vscode-terminalCommandDecoration-defaultBackground: rgba(255, 255, 255, .25);--vscode-terminalCommandDecoration-successBackground: #1b81a8;--vscode-terminalCommandDecoration-errorBackground: #f14c4c;--vscode-terminalOverviewRuler-cursorForeground: rgba(160, 160, 160, .8);--vscode-terminal-border: rgba(128, 128, 128, .35);--vscode-terminal-findMatchBackground: #515c6a;--vscode-terminal-findMatchHighlightBackground: rgba(234, 92, 0, .33);--vscode-terminalOverviewRuler-findMatchForeground: rgba(209, 134, 22, .49);--vscode-terminal-dropBackground: rgba(83, 89, 93, .5);--vscode-testing-iconFailed: #f14c4c;--vscode-testing-iconErrored: #f14c4c;--vscode-testing-iconPassed: #73c991;--vscode-testing-runAction: #73c991;--vscode-testing-iconQueued: #cca700;--vscode-testing-iconUnset: #848484;--vscode-testing-iconSkipped: #848484;--vscode-testing-peekBorder: #f14c4c;--vscode-testing-peekHeaderBackground: rgba(241, 76, 76, .1);--vscode-testing-message\.error\.decorationForeground: #f14c4c;--vscode-testing-message\.error\.lineBackground: rgba(255, 0, 0, .2);--vscode-testing-message\.info\.decorationForeground: rgba(212, 212, 212, .5);--vscode-welcomePage-tileBackground: #252526;--vscode-welcomePage-tileHoverBackground: #2c2c2d;--vscode-welcomePage-tileShadow: rgba(0, 0, 0, .36);--vscode-welcomePage-progress\.background: #3c3c3c;--vscode-welcomePage-progress\.foreground: #3794ff;--vscode-debugExceptionWidget-border: #a31515;--vscode-debugExceptionWidget-background: #420b0d;--vscode-ports-iconRunningProcessForeground: #369432;--vscode-statusBar-debuggingBackground: #cc6633;--vscode-statusBar-debuggingForeground: #ffffff;--vscode-editor-inlineValuesForeground: rgba(255, 255, 255, .5);--vscode-editor-inlineValuesBackground: rgba(255, 200, 0, .2);--vscode-editorGutter-modifiedBackground: #1b81a8;--vscode-editorGutter-addedBackground: #487e02;--vscode-editorGutter-deletedBackground: #f14c4c;--vscode-minimapGutter-modifiedBackground: #1b81a8;--vscode-minimapGutter-addedBackground: #487e02;--vscode-minimapGutter-deletedBackground: #f14c4c;--vscode-editorOverviewRuler-modifiedForeground: rgba(27, 129, 168, .6);--vscode-editorOverviewRuler-addedForeground: rgba(72, 126, 2, .6);--vscode-editorOverviewRuler-deletedForeground: rgba(241, 76, 76, .6);--vscode-debugIcon-breakpointForeground: #e51400;--vscode-debugIcon-breakpointDisabledForeground: #848484;--vscode-debugIcon-breakpointUnverifiedForeground: #848484;--vscode-debugIcon-breakpointCurrentStackframeForeground: #ffcc00;--vscode-debugIcon-breakpointStackframeForeground: #89d185;--vscode-notebook-cellBorderColor: #37373d;--vscode-notebook-focusedEditorBorder: #007fd4;--vscode-notebookStatusSuccessIcon-foreground: #89d185;--vscode-notebookStatusErrorIcon-foreground: #f48771;--vscode-notebookStatusRunningIcon-foreground: #cccccc;--vscode-notebook-cellToolbarSeparator: rgba(128, 128, 128, .35);--vscode-notebook-selectedCellBackground: #37373d;--vscode-notebook-selectedCellBorder: #37373d;--vscode-notebook-focusedCellBorder: #007fd4;--vscode-notebook-inactiveFocusedCellBorder: #37373d;--vscode-notebook-cellStatusBarItemHoverBackground: rgba(255, 255, 255, .15);--vscode-notebook-cellInsertionIndicator: #007fd4;--vscode-notebookScrollbarSlider-background: rgba(121, 121, 121, .4);--vscode-notebookScrollbarSlider-hoverBackground: rgba(100, 100, 100, .7);--vscode-notebookScrollbarSlider-activeBackground: rgba(191, 191, 191, .4);--vscode-notebook-symbolHighlightBackground: rgba(255, 255, 255, .04);--vscode-notebook-cellEditorBackground: #252526;--vscode-notebook-editorBackground: #1e1e1e;--vscode-keybindingTable-headerBackground: rgba(204, 204, 204, .04);--vscode-keybindingTable-rowsBackground: rgba(204, 204, 204, .04);--vscode-scm-providerBorder: #454545;--vscode-debugTokenExpression-name: #c586c0;--vscode-debugTokenExpression-value: rgba(204, 204, 204, .6);--vscode-debugTokenExpression-string: #ce9178;--vscode-debugTokenExpression-boolean: #4e94ce;--vscode-debugTokenExpression-number: #b5cea8;--vscode-debugTokenExpression-error: #f48771;--vscode-debugView-exceptionLabelForeground: #cccccc;--vscode-debugView-exceptionLabelBackground: #6c2022;--vscode-debugView-stateLabelForeground: #cccccc;--vscode-debugView-stateLabelBackground: rgba(136, 136, 136, .27);--vscode-debugView-valueChangedHighlight: #569cd6;--vscode-debugConsole-infoForeground: #3794ff;--vscode-debugConsole-warningForeground: #cca700;--vscode-debugConsole-errorForeground: #f48771;--vscode-debugConsole-sourceForeground: #cccccc;--vscode-debugConsoleInputIcon-foreground: #cccccc;--vscode-debugIcon-pauseForeground: #75beff;--vscode-debugIcon-stopForeground: #f48771;--vscode-debugIcon-disconnectForeground: #f48771;--vscode-debugIcon-restartForeground: #89d185;--vscode-debugIcon-stepOverForeground: #75beff;--vscode-debugIcon-stepIntoForeground: #75beff;--vscode-debugIcon-stepOutForeground: #75beff;--vscode-debugIcon-continueForeground: #75beff;--vscode-debugIcon-stepBackForeground: #75beff;--vscode-extensionButton-prominentBackground: #0e639c;--vscode-extensionButton-prominentForeground: #ffffff;--vscode-extensionButton-prominentHoverBackground: #1177bb;--vscode-extensionIcon-starForeground: #ff8e00;--vscode-extensionIcon-verifiedForeground: #3794ff;--vscode-extensionIcon-preReleaseForeground: #1d9271;--vscode-extensionIcon-sponsorForeground: #d758b3;--vscode-terminal-ansiBlack: #000000;--vscode-terminal-ansiRed: #cd3131;--vscode-terminal-ansiGreen: #0dbc79;--vscode-terminal-ansiYellow: #e5e510;--vscode-terminal-ansiBlue: #2472c8;--vscode-terminal-ansiMagenta: #bc3fbc;--vscode-terminal-ansiCyan: #11a8cd;--vscode-terminal-ansiWhite: #e5e5e5;--vscode-terminal-ansiBrightBlack: #666666;--vscode-terminal-ansiBrightRed: #f14c4c;--vscode-terminal-ansiBrightGreen: #23d18b;--vscode-terminal-ansiBrightYellow: #f5f543;--vscode-terminal-ansiBrightBlue: #3b8eea;--vscode-terminal-ansiBrightMagenta: #d670d6;--vscode-terminal-ansiBrightCyan: #29b8db;--vscode-terminal-ansiBrightWhite: #e5e5e5;--vscode-interactive-activeCodeBorder: #3794ff;--vscode-interactive-inactiveCodeBorder: #37373d;--vscode-gitDecoration-addedResourceForeground: #81b88b;--vscode-gitDecoration-modifiedResourceForeground: #e2c08d;--vscode-gitDecoration-deletedResourceForeground: #c74e39;--vscode-gitDecoration-renamedResourceForeground: #73c991;--vscode-gitDecoration-untrackedResourceForeground: #73c991;--vscode-gitDecoration-ignoredResourceForeground: #8c8c8c;--vscode-gitDecoration-stageModifiedResourceForeground: #e2c08d;--vscode-gitDecoration-stageDeletedResourceForeground: #c74e39;--vscode-gitDecoration-conflictingResourceForeground: #e4676b;--vscode-gitDecoration-submoduleResourceForeground: #8db9e2}.test-error-container{position:relative;white-space:pre;flex:none;padding:0;background-color:var(--color-canvas-subtle);border-radius:6px;line-height:initial;margin-bottom:6px}.test-error-view{overflow:auto;padding:16px}.test-error-text{font-family:monospace}.test-result{flex:auto;display:flex;flex-direction:column;margin-bottom:24px}.test-result>div{flex:none}.test-result video,.test-result img.screenshot{flex:none;box-shadow:var(--box-shadow-thick);margin:24px auto;min-width:200px;max-width:80%}.test-result-path{padding:0 0 0 5px;color:var(--color-fg-muted)}.test-result-counter{border-radius:12px;color:var(--color-canvas-default);padding:2px 8px}@media (prefers-color-scheme: light){.test-result-counter{background:var(--color-scale-gray-5)}}@media (prefers-color-scheme: dark){.test-result-counter{background:var(--color-scale-gray-3)}}@media only screen and (max-width: 600px){.test-result{padding:0!important}}.test-file-test{line-height:32px;align-items:center;padding:2px 10px;overflow:hidden;text-overflow:ellipsis}.test-file-test:hover{background-color:var(--color-canvas-subtle)}.test-file-title{font-weight:600;font-size:16px}.test-file-details-row{padding:0 0 6px 8px;margin:0 0 0 15px;line-height:16px;font-weight:400;color:var(--color-fg-muted);display:flex;align-items:center}.test-file-path{text-overflow:ellipsis;overflow:hidden;color:var(--color-fg-muted)}.test-file-path-link{margin-right:10px}.test-file-badge{flex:none;background-color:transparent;border-color:transparent}.test-file-badge span{color:var(--color-fg-muted)}.test-file-badge:hover{cursor:pointer}.test-file-badge svg{fill:var(--color-fg-muted)}.test-file-badge:hover svg{fill:var(--color-fg-muted)}.test-file-test-outcome-skipped{color:var(--color-fg-muted)}.test-file-test-status-icon{flex:none}.test-file-header-info{display:flex;align-items:center;gap:8px;color:var(--color-fg-muted)}#root{color:var(--color-fg-default);font-size:14px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji";-webkit-font-smoothing:antialiased}.metadata-toggle{cursor:pointer;-webkit-user-select:none;user-select:none;margin-left:8px;color:var(--color-fg-default)}.metadata-view{border:1px solid var(--color-border-default);border-radius:6px;margin-top:8px}.metadata-view .metadata-section{margin:8px 10px 8px 32px}.metadata-view span:not(.copy-button-container),.metadata-view a{display:inline-block;line-height:24px}.metadata-properties{display:flex;flex-direction:column;align-items:normal;gap:8px}.metadata-properties>div{height:24px}.metadata-separator{height:1px;border-bottom:1px solid var(--color-border-default)}.metadata-view a{color:var(--color-fg-default)}.copyable-property{white-space:pre}.copyable-property>span{display:flex;align-items:center}
72: </style>
73:   </head>
74:   <body>
75:     <div id='root'></div>
76:   </body>
77: </html>
78: <script>
79: window.playwrightReportBase64 = "data:application/zip;base64,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";</script>

================
File: public/vite.svg
================
1: <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="31.88" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 257"><defs><linearGradient id="IconifyId1813088fe1fbc01fb466" x1="-.828%" x2="57.636%" y1="7.652%" y2="78.411%"><stop offset="0%" stop-color="#41D1FF"></stop><stop offset="100%" stop-color="#BD34FE"></stop></linearGradient><linearGradient id="IconifyId1813088fe1fbc01fb467" x1="43.376%" x2="50.316%" y1="2.242%" y2="89.03%"><stop offset="0%" stop-color="#FFEA83"></stop><stop offset="8.333%" stop-color="#FFDD35"></stop><stop offset="100%" stop-color="#FFA800"></stop></linearGradient></defs><path fill="url(#IconifyId1813088fe1fbc01fb466)" d="M255.153 37.938L134.897 252.976c-2.483 4.44-8.862 4.466-11.382.048L.875 37.958c-2.746-4.814 1.371-10.646 6.827-9.67l120.385 21.517a6.537 6.537 0 0 0 2.322-.004l117.867-21.483c5.438-.991 9.574 4.796 6.877 9.62Z"></path><path fill="url(#IconifyId1813088fe1fbc01fb467)" d="M185.432.063L96.44 17.501a3.268 3.268 0 0 0-2.634 3.014l-5.474 92.456a3.268 3.268 0 0 0 3.997 3.378l24.777-5.718c2.318-.535 4.413 1.507 3.936 3.838l-7.361 36.047c-.495 2.426 1.782 4.5 4.151 3.78l15.304-4.649c2.372-.72 4.652 1.36 4.15 3.788l-11.698 56.621c-.732 3.542 3.979 5.473 5.943 2.437l1.313-2.028l72.516-144.72c1.215-2.423-.88-5.186-3.54-4.672l-25.505 4.922c-2.396.462-4.435-1.77-3.759-4.114l16.646-57.705c.677-2.35-1.37-4.583-3.769-4.113Z"></path></svg>

================
File: scripts/lighthouse-ci.js
================
 1: const lighthouse = require("lighthouse");
 2: const chromeLauncher = require("chrome-launcher");
 3: 
 4: async function runLighthouse() {
 5:   const chrome = await chromeLauncher.launch({ chromeFlags: ["--headless"] });
 6: 
 7:   const options = {
 8:     logLevel: "info",
 9:     output: "html",
10:     onlyCategories: ["performance", "pwa", "accessibility"],
11:     port: chrome.port,
12:   };
13: 
14:   const runnerResult = await lighthouse("http://localhost:3000", options);
15: 
16: 
17:   const { performance, pwa, accessibility } = runnerResult.lhr.categories;
18: 
19:   console.log("Lighthouse Scores:");
20:   console.log(`Performance: ${Math.round(performance.score * 100)}`);
21:   console.log(`PWA: ${Math.round(pwa.score * 100)}`);
22:   console.log(`Accessibility: ${Math.round(accessibility.score * 100)}`);
23: 
24: 
25:   if (performance.score < 0.9 || pwa.score < 0.9 || accessibility.score < 0.9) {
26:     process.exit(1);
27:   }
28: 
29:   await chrome.kill();
30: }
31: 
32: runLighthouse().catch(console.error);

================
File: src/__tests__/components/BulkActivityModal.test.tsx
================
  1: import { render, screen, waitFor } from "@testing-library/react";
  2: import userEvent from "@testing-library/user-event";
  3: import BulkActivityModal from "@/components/plant/BulkActivityModal";
  4: import { useFirebaseCareActivities } from "@/hooks/useFirebaseCareActivities";
  5: import toast from "react-hot-toast";
  6: 
  7: 
  8: jest.mock("@/hooks/useFirebaseCareActivities");
  9: jest.mock("react-hot-toast");
 10: 
 11: const mockLogActivity = jest.fn();
 12: 
 13: describe("BulkActivityModal", () => {
 14:   const user = userEvent.setup();
 15: 
 16:   beforeEach(() => {
 17:     jest.clearAllMocks();
 18:     (useFirebaseCareActivities as jest.Mock).mockReturnValue({
 19:       logActivity: mockLogActivity,
 20:     });
 21:     mockLogActivity.mockResolvedValue(undefined);
 22:   });
 23: 
 24:   const defaultProps = {
 25:     isOpen: true,
 26:     onClose: jest.fn(),
 27:     plantIds: ["plant-1", "plant-2"],
 28:     plantCount: 2,
 29:     varietyName: "Cherry Tomato",
 30:   };
 31: 
 32:   it("renders the correct title for watering multiple plants", () => {
 33:     render(<BulkActivityModal {...defaultProps} activityType="water" />);
 34:     expect(screen.getByText(" Water All Plants")).toBeInTheDocument();
 35:     expect(
 36:       screen.getByText("Logging for 2 Cherry Tomato plants")
 37:     ).toBeInTheDocument();
 38:   });
 39: 
 40:   it("renders the correct title and inputs for fertilizing a single plant", () => {
 41:     render(
 42:       <BulkActivityModal
 43:         {...defaultProps}
 44:         plantCount={1}
 45:         activityType="fertilize"
 46:       />
 47:     );
 48:     expect(screen.getByText(" Fertilize Plant")).toBeInTheDocument();
 49:     expect(screen.getByLabelText("Amount")).toBeInTheDocument();
 50:   });
 51: 
 52:   it("calls logActivity for each plant ID on submit", async () => {
 53:     const mockOnClose = jest.fn();
 54:     render(
 55:       <BulkActivityModal
 56:         {...defaultProps}
 57:         activityType="water"
 58:         onClose={mockOnClose}
 59:       />
 60:     );
 61: 
 62:     const amountInput = screen.getByLabelText(/Amount/i);
 63:     await user.clear(amountInput);
 64:     await user.type(amountInput, "50");
 65: 
 66:     const submitButton = screen.getByRole("button", {
 67:       name: /Log Activity for All 2 Plants/i,
 68:     });
 69:     await user.click(submitButton);
 70: 
 71:     await waitFor(() => {
 72:       expect(mockLogActivity).toHaveBeenCalledTimes(2);
 73:       expect(mockLogActivity).toHaveBeenCalledWith(
 74:         expect.objectContaining({ plantId: "plant-1", type: "water" })
 75:       );
 76:       expect(mockLogActivity).toHaveBeenCalledWith(
 77:         expect.objectContaining({ plantId: "plant-2", type: "water" })
 78:       );
 79:       expect(toast.success).toHaveBeenCalledWith(
 80:         "Activity logged for all 2 Cherry Tomato plants! "
 81:       );
 82:       expect(mockOnClose).toHaveBeenCalledTimes(1);
 83:     });
 84:   });
 85: 
 86:   it("disables submit button while submitting", async () => {
 87: 
 88:     mockLogActivity.mockImplementation(() => new Promise(() => {}));
 89:     render(<BulkActivityModal {...defaultProps} activityType="water" />);
 90: 
 91:     const submitButton = screen.getByRole("button", { name: /Log Activity/i });
 92:     await user.click(submitButton);
 93: 
 94:     expect(submitButton).toBeDisabled();
 95:     expect(screen.getByText("Logging...")).toBeInTheDocument();
 96:   });
 97: 
 98:   it("calls onClose when the close button is clicked", async () => {
 99:     const mockOnClose = jest.fn();
100:     render(
101:       <BulkActivityModal
102:         {...defaultProps}
103:         activityType="observe"
104:         onClose={mockOnClose}
105:       />
106:     );
107: 
108:     const closeButton = screen.getByRole("button", { name: "" });
109:     await user.click(closeButton);
110: 
111:     expect(mockOnClose).toHaveBeenCalledTimes(1);
112:   });
113: });

================
File: src/__tests__/components/LogCare.test.tsx
================
 1: import { describe, it, expect, beforeEach } from "@jest/globals";
 2: import { render, screen } from "@testing-library/react";
 3: import { MemoryRouter } from "react-router-dom";
 4: import LogCare from "../../pages/care/LogCare";
 5: import { initializeDatabase } from "@/db/seedData";
 6: 
 7: 
 8: jest.mock("@/pages/care/CareLogForm", () => ({
 9:   CareLogForm: ({ preselectedPlantId }: { preselectedPlantId?: string }) => (
10:     <div data-testid="care-log-form">
11:       {preselectedPlantId && (
12:         <div data-testid="pre-selected-plant-id">{preselectedPlantId}</div>
13:       )}
14:     </div>
15:   ),
16: }));
17: 
18: describe("LogCare", () => {
19:   beforeEach(async () => {
20:     await initializeDatabase();
21:   });
22: 
23:   it("renders without a pre-selected plant", () => {
24:     render(
25:       <MemoryRouter initialEntries={["/log-care"]}>
26:         <LogCare />
27:       </MemoryRouter>
28:     );
29: 
30:     expect(screen.getByText("Log Care Activity")).toBeInTheDocument();
31:     expect(screen.getByTestId("care-log-form")).toBeInTheDocument();
32:     expect(
33:       screen.queryByTestId("pre-selected-plant-id")
34:     ).not.toBeInTheDocument();
35:   });
36: 
37:   it("passes pre-selected plant ID from URL params to CareLogForm", () => {
38:     const testPlantId = "test-plant-123";
39: 
40:     render(
41:       <MemoryRouter initialEntries={[`/log-care?plantId=${testPlantId}`]}>
42:         <LogCare />
43:       </MemoryRouter>
44:     );
45: 
46:     expect(screen.getByText("Log Care Activity")).toBeInTheDocument();
47:     expect(screen.getByTestId("care-log-form")).toBeInTheDocument();
48:     expect(screen.getByTestId("pre-selected-plant-id")).toHaveTextContent(
49:       testPlantId
50:     );
51:   });
52: });

================
File: src/__tests__/components/PlantReminderSettings.test.tsx
================
  1: import { render, screen, waitFor } from "@testing-library/react";
  2: import userEvent from "@testing-library/user-event";
  3: import PlantReminderSettings from "@/components/plant/PlantReminderSettings";
  4: import { plantService } from "@/types/database";
  5: import toast from "react-hot-toast";
  6: 
  7: 
  8: jest.mock("@/types/database", () => ({
  9:   plantService: {
 10:     updatePlant: jest.fn(),
 11:   },
 12: }));
 13: 
 14: jest.mock("react-hot-toast", () => ({
 15:   __esModule: true,
 16:   default: {
 17:     success: jest.fn(),
 18:     error: jest.fn(),
 19:   },
 20: }));
 21: 
 22: jest.mock("@/components/plant/ReminderPreferencesSection", () => ({
 23:   __esModule: true,
 24: 
 25:   default: ({ preferences, onChange }: any) => (
 26:     <div data-testid="reminder-preferences-section">
 27:       <button
 28:         data-testid="toggle-watering"
 29:         onClick={() =>
 30:           onChange({ ...preferences, watering: !preferences.watering })
 31:         }
 32:       >
 33:         Toggle Watering: {preferences.watering ? "ON" : "OFF"}
 34:       </button>
 35:     </div>
 36:   ),
 37: }));
 38: 
 39: const mockPlantService = plantService as jest.Mocked<typeof plantService>;
 40: const mockToast = toast as jest.Mocked<typeof toast>;
 41: 
 42: describe("PlantReminderSettings", () => {
 43:   const mockPlant = {
 44:     id: "test-plant-1",
 45:     varietyId: "tomato-1",
 46:     varietyName: "Roma Tomato",
 47:     name: "My Tomato",
 48:     plantedDate: new Date("2024-01-01"),
 49:     currentStage: "vegetative" as const,
 50:     location: "Indoor",
 51:     container: "5 gallon pot",
 52:     isActive: true,
 53:     notes: [],
 54:     createdAt: new Date(),
 55:     updatedAt: new Date(),
 56:     reminderPreferences: {
 57:       watering: true,
 58:       fertilizing: true,
 59:       observation: false,
 60:       lighting: true,
 61:       pruning: false,
 62:     },
 63:   };
 64: 
 65:   const mockOnUpdate = jest.fn();
 66: 
 67:   beforeEach(() => {
 68:     jest.clearAllMocks();
 69:     mockPlantService.updatePlant.mockResolvedValue(undefined);
 70:   });
 71: 
 72:   it("renders with current plant preferences", () => {
 73:     render(<PlantReminderSettings plant={mockPlant} onUpdate={mockOnUpdate} />);
 74: 
 75:     expect(
 76:       screen.getByTestId("reminder-preferences-section")
 77:     ).toBeInTheDocument();
 78:     expect(screen.getByText("Toggle Watering: ON")).toBeInTheDocument();
 79:   });
 80: 
 81:   it("shows 'No Changes' button when preferences haven't changed", () => {
 82:     render(<PlantReminderSettings plant={mockPlant} onUpdate={mockOnUpdate} />);
 83: 
 84:     const saveButton = screen.getByRole("button", { name: /no changes/i });
 85:     expect(saveButton).toBeDisabled();
 86:   });
 87: 
 88:   it("shows 'Save Changes' button when preferences change", async () => {
 89:     const user = userEvent.setup();
 90: 
 91:     render(<PlantReminderSettings plant={mockPlant} onUpdate={mockOnUpdate} />);
 92: 
 93: 
 94:     const toggleButton = screen.getByTestId("toggle-watering");
 95:     await user.click(toggleButton);
 96: 
 97:     await waitFor(() => {
 98:       const saveButton = screen.getByRole("button", { name: /save changes/i });
 99:       expect(saveButton).not.toBeDisabled();
100:     });
101:   });
102: 
103:   it("saves preferences successfully", async () => {
104:     const user = userEvent.setup();
105: 
106:     render(<PlantReminderSettings plant={mockPlant} onUpdate={mockOnUpdate} />);
107: 
108: 
109:     const toggleButton = screen.getByTestId("toggle-watering");
110:     await user.click(toggleButton);
111: 
112: 
113:     const saveButton = screen.getByRole("button", { name: /save changes/i });
114:     await user.click(saveButton);
115: 
116:     await waitFor(() => {
117:       expect(mockPlantService.updatePlant).toHaveBeenCalledWith(
118:         "test-plant-1",
119:         {
120:           reminderPreferences: {
121:             watering: false,
122:             fertilizing: true,
123:             observation: false,
124:             lighting: true,
125:             pruning: false,
126:           },
127:           updatedAt: expect.any(Date),
128:         }
129:       );
130:     });
131: 
132:     expect(mockOnUpdate).toHaveBeenCalledWith({
133:       ...mockPlant,
134:       reminderPreferences: {
135:         watering: false,
136:         fertilizing: true,
137:         observation: false,
138:         lighting: true,
139:         pruning: false,
140:       },
141:     });
142: 
143:     expect(mockToast.success).toHaveBeenCalledWith(
144:       "Reminder preferences updated!"
145:     );
146:   });
147: 
148:   it("handles save errors gracefully", async () => {
149:     const user = userEvent.setup();
150:     mockPlantService.updatePlant.mockRejectedValue(new Error("Database error"));
151: 
152:     render(<PlantReminderSettings plant={mockPlant} onUpdate={mockOnUpdate} />);
153: 
154: 
155:     const toggleButton = screen.getByTestId("toggle-watering");
156:     await user.click(toggleButton);
157: 
158: 
159:     const saveButton = screen.getByRole("button", { name: /save changes/i });
160:     await user.click(saveButton);
161: 
162:     await waitFor(() => {
163:       expect(mockToast.error).toHaveBeenCalledWith(
164:         "Failed to update preferences"
165:       );
166:     });
167: 
168:     expect(mockOnUpdate).not.toHaveBeenCalled();
169:   });
170: 
171:   it("shows loading state during save", async () => {
172:     const user = userEvent.setup();
173: 
174: 
175:     mockPlantService.updatePlant.mockImplementation(
176:       () => new Promise(() => {})
177:     );
178: 
179:     render(<PlantReminderSettings plant={mockPlant} onUpdate={mockOnUpdate} />);
180: 
181: 
182:     const toggleButton = screen.getByTestId("toggle-watering");
183:     await user.click(toggleButton);
184: 
185: 
186:     const saveButton = screen.getByRole("button", { name: /save changes/i });
187:     await user.click(saveButton);
188: 
189: 
190:     expect(screen.getByText("Saving...")).toBeInTheDocument();
191:     expect(saveButton).toBeDisabled();
192:   });
193: 
194:   it("uses default preferences when plant has none", () => {
195:     const plantWithoutPreferences = {
196:       ...mockPlant,
197:       reminderPreferences: undefined,
198:     };
199: 
200:     render(
201:       <PlantReminderSettings
202:         plant={plantWithoutPreferences}
203:         onUpdate={mockOnUpdate}
204:       />
205:     );
206: 
207: 
208:     expect(screen.getByText("Toggle Watering: ON")).toBeInTheDocument();
209:   });
210: });

================
File: src/__tests__/components/ReminderPreferencesSection.test.tsx
================
  1: import { render, screen } from "@testing-library/react";
  2: import userEvent from "@testing-library/user-event";
  3: import ReminderPreferencesSection from "@/components/plant/ReminderPreferencesSection";
  4: 
  5: describe("ReminderPreferencesSection", () => {
  6:   const defaultPreferences = {
  7:     watering: true,
  8:     fertilizing: true,
  9:     observation: true,
 10:     lighting: true,
 11:     pruning: true,
 12:   };
 13: 
 14:   const mockOnChange = jest.fn();
 15: 
 16:   beforeEach(() => {
 17:     jest.clearAllMocks();
 18:   });
 19: 
 20:   it("renders all reminder types with correct labels", () => {
 21:     render(
 22:       <ReminderPreferencesSection
 23:         preferences={defaultPreferences}
 24:         onChange={mockOnChange}
 25:       />
 26:     );
 27: 
 28:     expect(screen.getByText("Reminder Preferences")).toBeInTheDocument();
 29:     expect(screen.getByText("Watering")).toBeInTheDocument();
 30:     expect(screen.getByText("Fertilizing")).toBeInTheDocument();
 31:     expect(screen.getByText("Health Checks")).toBeInTheDocument();
 32:     expect(screen.getByText("Lighting")).toBeInTheDocument();
 33:     expect(screen.getByText("Maintenance")).toBeInTheDocument();
 34: 
 35: 
 36:     expect(
 37:       screen.getByText("Get notified when watering is due")
 38:     ).toBeInTheDocument();
 39:     expect(
 40:       screen.getByText("Reminders for feeding schedule")
 41:     ).toBeInTheDocument();
 42:     expect(
 43:       screen.getByText("Regular observation reminders")
 44:     ).toBeInTheDocument();
 45:   });
 46: 
 47:   it("displays current preference states correctly", () => {
 48:     const mixedPreferences = {
 49:       watering: true,
 50:       fertilizing: false,
 51:       observation: true,
 52:       lighting: false,
 53:       pruning: true,
 54:     };
 55: 
 56:     render(
 57:       <ReminderPreferencesSection
 58:         preferences={mixedPreferences}
 59:         onChange={mockOnChange}
 60:       />
 61:     );
 62: 
 63: 
 64:     const switches = screen.getAllByRole("switch");
 65:     expect(switches).toHaveLength(5);
 66: 
 67: 
 68:     expect(switches[0]).toHaveAttribute("aria-checked", "true");
 69: 
 70:     expect(switches[1]).toHaveAttribute("aria-checked", "false");
 71: 
 72:     expect(switches[2]).toHaveAttribute("aria-checked", "true");
 73: 
 74:     expect(switches[3]).toHaveAttribute("aria-checked", "false");
 75: 
 76:     expect(switches[4]).toHaveAttribute("aria-checked", "true");
 77:   });
 78: 
 79:   it("calls onChange when a switch is toggled", async () => {
 80:     const user = userEvent.setup();
 81: 
 82:     render(
 83:       <ReminderPreferencesSection
 84:         preferences={defaultPreferences}
 85:         onChange={mockOnChange}
 86:       />
 87:     );
 88: 
 89: 
 90:     const wateringSwitch = screen.getAllByRole("switch")[0];
 91:     await user.click(wateringSwitch);
 92: 
 93:     expect(mockOnChange).toHaveBeenCalledWith({
 94:       watering: false,
 95:       fertilizing: true,
 96:       observation: true,
 97:       lighting: true,
 98:       pruning: true,
 99:     });
100:   });
101: 
102:   it("toggles multiple preferences correctly", async () => {
103:     const user = userEvent.setup();
104: 
105:     render(
106:       <ReminderPreferencesSection
107:         preferences={defaultPreferences}
108:         onChange={mockOnChange}
109:       />
110:     );
111: 
112: 
113:     const fertilizingSwitch = screen.getAllByRole("switch")[1];
114:     await user.click(fertilizingSwitch);
115: 
116:     expect(mockOnChange).toHaveBeenCalledWith({
117:       watering: true,
118:       fertilizing: false,
119:       observation: true,
120:       lighting: true,
121:       pruning: true,
122:     });
123: 
124: 
125:     const lightingSwitch = screen.getAllByRole("switch")[3];
126:     await user.click(lightingSwitch);
127: 
128:     expect(mockOnChange).toHaveBeenCalledWith({
129:       watering: true,
130:       fertilizing: true,
131:       observation: true,
132:       lighting: false,
133:       pruning: true,
134:     });
135:   });
136: 
137:   it("has proper accessibility attributes", () => {
138:     render(
139:       <ReminderPreferencesSection
140:         preferences={defaultPreferences}
141:         onChange={mockOnChange}
142:       />
143:     );
144: 
145:     const switches = screen.getAllByRole("switch");
146:     switches.forEach((switchElement) => {
147:       expect(switchElement).toHaveAttribute("aria-checked");
148:       expect(switchElement).not.toHaveAttribute("aria-disabled");
149:     });
150:   });
151: });

================
File: src/__tests__/e2e/plant-registration.spec.ts
================
  1: import { test, expect } from "@playwright/test";
  2: 
  3: test.describe("Plant Registration", () => {
  4:   test.beforeEach(async ({ page }) => {
  5: 
  6:     await page.route("**/auth/**", (route) => {
  7:       route.fulfill({
  8:         status: 200,
  9:         contentType: "application/json",
 10:         body: JSON.stringify({
 11:           user: { uid: "test-user", email: "test@example.com" },
 12:         }),
 13:       });
 14:     });
 15: 
 16: 
 17:     await page.route("**/varieties", (route) => {
 18:       route.fulfill({
 19:         status: 200,
 20:         contentType: "application/json",
 21:         body: JSON.stringify([
 22:           {
 23:             id: "tomato-1",
 24:             name: "Cherry Tomato",
 25:             category: "fruiting-plants",
 26:             growthTimeline: {
 27:               germination: 7,
 28:               seedling: 14,
 29:               vegetative: 28,
 30:               maturation: 60,
 31:             },
 32:           },
 33:         ]),
 34:       });
 35:     });
 36: 
 37:     await page.goto("/plants/add");
 38:   });
 39: 
 40:   test("successfully registers a new plant", async ({ page }) => {
 41: 
 42:     await expect(page.getByText("Register New Plant")).toBeVisible();
 43: 
 44: 
 45:     await page.selectOption('[data-testid="variety-select"]', "tomato-1");
 46: 
 47: 
 48:     const today = new Date().toISOString().split("T")[0];
 49:     await page.fill('[data-testid="planting-date"]', today);
 50: 
 51: 
 52:     await page.click("text=Grow Bag");
 53: 
 54: 
 55:     await expect(
 56:       page.locator('[data-testid="container-size-select"]')
 57:     ).toHaveValue("1-gallon");
 58: 
 59: 
 60:     await page.click('[data-testid="select-soil-mixture"]');
 61: 
 62: 
 63:     await page.click('button:has-text("Register Plant")');
 64: 
 65: 
 66:     await expect(
 67:       page.getByText("Successfully registered 1 plant(s)! ")
 68:     ).toBeVisible();
 69:   });
 70: 
 71:   test("handles validation errors properly", async ({ page }) => {
 72: 
 73:     await page.click('button:has-text("Register Plant")');
 74: 
 75: 
 76:     await expect(page.getByText("Please select a variety")).toBeVisible();
 77:     await expect(
 78:       page.getByText("Please select a container type")
 79:     ).toBeVisible();
 80:     await expect(page.getByText("Please select a soil mixture")).toBeVisible();
 81:   });
 82: 
 83:   test("works with custom container dimensions", async ({ page }) => {
 84:     await page.selectOption('[data-testid="variety-select"]', "tomato-1");
 85: 
 86:     await page.click("text=Grow Bag");
 87:     await page.selectOption('[data-testid="container-size-select"]', "custom");
 88: 
 89: 
 90:     await page.selectOption('[data-testid="bag-shape-select"]', "round");
 91:     await page.fill('[data-testid="diameter-input"]', "12");
 92:     await page.fill('[data-testid="height-input"]', "8");
 93: 
 94:     await page.click('[data-testid="select-soil-mixture"]');
 95: 
 96:     await page.click('button:has-text("Register Plant")');
 97: 
 98:     await expect(
 99:       page.getByText("Successfully registered 1 plant(s)! ")
100:     ).toBeVisible();
101:   });
102: 
103:   test("supports multiple plants registration", async ({ page }) => {
104:     await page.selectOption('[data-testid="variety-select"]', "tomato-1");
105:     await page.click("text=Grow Bag");
106: 
107: 
108:     await page.fill('[data-testid="quantity-input"]', "3");
109: 
110:     await page.click('[data-testid="select-soil-mixture"]');
111:     await page.click('button:has-text("Register Plants")');
112: 
113:     await expect(
114:       page.getByText("Successfully registered 3 plant(s)! ")
115:     ).toBeVisible();
116:   });
117: });

================
File: src/__tests__/services/useDynamicStage.test.ts
================
  1: import { renderHook, waitFor } from "@testing-library/react";
  2: import { useDynamicStage } from "@/hooks/useDynamicStage";
  3: import { PlantRecord, VarietyRecord, varietyService } from "@/types/database";
  4: import { calculateCurrentStageWithVariety } from "@/utils/growthStage";
  5: import { subDays } from "date-fns";
  6: import { PlantCategory } from "@/types";
  7: 
  8: 
  9: jest.mock("@/types/database");
 10: jest.mock("@/utils/growthStage");
 11: 
 12: const mockVarietyService = varietyService as jest.Mocked<typeof varietyService>;
 13: const mockCalculateStage = calculateCurrentStageWithVariety as jest.Mock;
 14: 
 15: 
 16: const mockVariety: VarietyRecord = {
 17:   id: "tomato-1",
 18:   name: "Tomato",
 19:   normalizedName: "tomato",
 20:   category: "fruiting-plants" as PlantCategory,
 21:   growthTimeline: {
 22:     germination: 7,
 23:     seedling: 14,
 24:     vegetative: 21,
 25:     maturation: 60,
 26:   },
 27:   createdAt: new Date(),
 28:   updatedAt: new Date(),
 29: };
 30: 
 31: 
 32: const createMockPlant = (overrides: Partial<PlantRecord>): PlantRecord => ({
 33:   id: `plant-${Math.random()}`,
 34:   varietyId: "tomato-1",
 35:   varietyName: "Tomato",
 36:   name: "Test Tomato Plant",
 37:   plantedDate: new Date(),
 38:   location: "Indoor",
 39:   container: "5 Gallon Grow Bag",
 40:   isActive: true,
 41:   createdAt: new Date(),
 42:   updatedAt: new Date(),
 43:   ...overrides,
 44: });
 45: 
 46: describe("useDynamicStage Hook", () => {
 47:   beforeEach(() => {
 48:     jest.clearAllMocks();
 49:     mockVarietyService.getVariety.mockResolvedValue(mockVariety);
 50:   });
 51: 
 52:   it("should use plantedDate when no confirmed stage exists", async () => {
 53:     const plantedDate = subDays(new Date(), 10);
 54:     const plant = createMockPlant({ plantedDate });
 55: 
 56:     mockCalculateStage.mockReturnValue("seedling");
 57: 
 58:     renderHook(() => useDynamicStage(plant));
 59: 
 60:     await waitFor(() => {
 61:       expect(mockCalculateStage).toHaveBeenCalledWith(
 62:         plantedDate,
 63:         mockVariety
 64:       );
 65:     });
 66:   });
 67: 
 68:   it("should use confirmedStage and stageConfirmedDate when they exist", async () => {
 69:     const plantedDate = subDays(new Date(), 30);
 70:     const stageConfirmedDate = subDays(new Date(), 5);
 71:     const plant = createMockPlant({
 72:       plantedDate,
 73:       confirmedStage: "vegetative",
 74:       stageConfirmedDate,
 75:     });
 76: 
 77:     mockCalculateStage.mockReturnValue("flowering");
 78: 
 79:     renderHook(() => useDynamicStage(plant));
 80: 
 81:     await waitFor(() => {
 82:       expect(mockCalculateStage).toHaveBeenCalledWith(
 83:         stageConfirmedDate,
 84:         mockVariety,
 85:         expect.any(Date),
 86:         "vegetative"
 87:       );
 88:     });
 89:   });
 90: 
 91:   it("should return the result from the calculation", async () => {
 92:     const plant = createMockPlant({});
 93:     mockCalculateStage.mockReturnValue("vegetative");
 94: 
 95:     const { result } = renderHook(() => useDynamicStage(plant));
 96: 
 97:     await waitFor(() => {
 98:       expect(result.current).toBe("vegetative");
 99:     });
100:   });
101: });

================
File: src/__tests__/setup/mockFirebase.ts
================
 1: export const mockFirebaseConfig = {
 2:   apiKey: "test-api-key",
 3:   authDomain: "test-project.firebaseapp.com",
 4:   projectId: "test-project",
 5:   storageBucket: "test-project.appspot.com",
 6:   messagingSenderId: "123456789",
 7:   appId: "test-app-id",
 8: };
 9: 
10: export const mockDb = {};
11: export const mockAuth = {};
12: export const mockStorage = {};
13: 
14: export const mockFirebaseFunctions = {
15:   initializeApp: jest.fn(() => ({})),
16:   getFirestore: jest.fn(() => mockDb),
17:   getAuth: jest.fn(() => mockAuth),
18:   getStorage: jest.fn(() => mockStorage),
19:   enableNetwork: jest.fn(),
20:   disableNetwork: jest.fn(),
21: };
22: 
23: 
24: describe("MockFirebase Setup", () => {
25:   it("should export mock Firebase functions", () => {
26:     expect(mockFirebaseFunctions.initializeApp).toBeDefined();
27:     expect(mockFirebaseFunctions.getFirestore).toBeDefined();
28:     expect(mockFirebaseFunctions.getAuth).toBeDefined();
29:     expect(mockFirebaseFunctions.getStorage).toBeDefined();
30:   });
31: });

================
File: src/__tests__/utils/dateUtils.test.ts
================
 1: import { getDaysSincePlanting } from "@/utils/dateUtils";
 2: import { mockDate, restoreDate } from "@/setupTests";
 3: 
 4: 
 5: 
 6: 
 7: 
 8: 
 9: 
10: describe("Date Calculations", () => {
11:   describe("getDaysSincePlanting", () => {
12:     afterEach(() => {
13: 
14:       restoreDate();
15:     });
16: 
17:     it("should calculate daysSincePlanting across month boundaries", () => {
18: 
19:       mockDate("2024-03-03T12:00:00Z");
20: 
21:       const plantedDate = new Date("2024-02-28T12:00:00Z");
22: 
23: 
24:       expect(getDaysSincePlanting(plantedDate)).toBe(5);
25:     });
26: 
27:     it("should handle leap year calculations correctly", () => {
28: 
29:       mockDate("2024-03-01T12:00:00Z");
30:       const plantedDate = new Date("2024-02-28T12:00:00Z");
31: 
32:       expect(getDaysSincePlanting(plantedDate)).toBe(3);
33: 
34: 
35:       mockDate("2025-03-01T12:00:00Z");
36:       const plantedDateNonLeap = new Date("2025-02-27T12:00:00Z");
37: 
38:       expect(getDaysSincePlanting(plantedDateNonLeap)).toBe(3);
39:     });
40: 
41:     it("should return 1 for a plant planted on the same day", () => {
42:       mockDate("2024-06-26T20:00:00Z");
43:       const plantedDate = new Date("2024-06-26T08:00:00Z");
44: 
45:       expect(getDaysSincePlanting(plantedDate)).toBe(1);
46:     });
47:   });
48: });

================
File: src/__tests__/utils/plantGrouping.test.ts
================
 1: import { groupPlantsByConditions } from "@/utils/plantGrouping";
 2: import { PlantRecord } from "@/types/database";
 3: 
 4: describe("groupPlantsByConditions", () => {
 5:   const createMockPlant = (overrides: Partial<PlantRecord>): PlantRecord => {
 6:     return {
 7:       id: `plant-${Math.random()}`,
 8:       varietyId: "tomato-1",
 9:       varietyName: "Cherry Tomato",
10:       name: "Test Plant",
11:       plantedDate: new Date("2024-05-10T00:00:00.000Z"),
12:       location: "Indoor",
13:       container: "5 Gallon Grow Bag",
14:       soilMix: "standard-mix",
15:       isActive: true,
16:       createdAt: new Date(),
17:       updatedAt: new Date(),
18:       ...overrides,
19:     };
20:   };
21: 
22:   it("should group plants with identical conditions", () => {
23:     const p1 = createMockPlant({ id: "p1" });
24:     const p2 = createMockPlant({ id: "p2" });
25:     const plants = [p1, p2];
26: 
27:     const groups = groupPlantsByConditions(plants);
28:     expect(groups).toHaveLength(1);
29:     expect(groups[0].plants).toHaveLength(2);
30:     expect(groups[0].plants.map((p) => p.id)).toEqual(["p1", "p2"]);
31:   });
32: 
33:   it("should not group plants with different varieties", () => {
34:     const p1 = createMockPlant({ id: "p1", varietyId: "tomato-1" });
35:     const p2 = createMockPlant({ id: "p2", varietyId: "basil-1" });
36:     const plants = [p1, p2];
37: 
38:     const groups = groupPlantsByConditions(plants);
39:     expect(groups).toHaveLength(2);
40:   });
41: 
42:   it("should not group plants with different planted dates", () => {
43:     const p1 = createMockPlant({
44:       id: "p1",
45:       plantedDate: new Date("2024-05-10T00:00:00.000Z"),
46:     });
47:     const p2 = createMockPlant({
48:       id: "p2",
49:       plantedDate: new Date("2024-05-11T00:00:00.000Z"),
50:     });
51:     const plants = [p1, p2];
52: 
53:     const groups = groupPlantsByConditions(plants);
54:     expect(groups).toHaveLength(2);
55:   });
56: 
57:   it("should not group plants with different containers", () => {
58:     const p1 = createMockPlant({ id: "p1", container: "5 Gallon" });
59:     const p2 = createMockPlant({ id: "p2", container: "3 Gallon" });
60:     const plants = [p1, p2];
61: 
62:     const groups = groupPlantsByConditions(plants);
63:     expect(groups).toHaveLength(2);
64:   });
65: 
66:   it("should handle an empty array of plants", () => {
67:     const groups = groupPlantsByConditions([]);
68:     expect(groups).toHaveLength(0);
69:   });
70: 
71:   it("should create separate groups for plants with and without soil mix", () => {
72:     const p1 = createMockPlant({ id: "p1", soilMix: "standard-mix" });
73:     const p2 = createMockPlant({ id: "p2", soilMix: undefined });
74:     const p3 = createMockPlant({ id: "p3", soilMix: "standard-mix" });
75: 
76:     const plants = [p1, p2, p3];
77:     const groups = groupPlantsByConditions(plants);
78: 
79:     expect(groups).toHaveLength(2);
80:     const groupWithSoil = groups.find((g) => g.soilMix === "standard-mix");
81:     const groupWithoutSoil = groups.find((g) => g.soilMix === undefined);
82: 
83:     expect(groupWithSoil?.plants).toHaveLength(2);
84:     expect(groupWithoutSoil?.plants).toHaveLength(1);
85:   });
86: });

================
File: src/__tests__/utils/varietyGrowthStages.test.ts
================
  1: import {
  2:   calculateCurrentStage,
  3:   getStageProgress,
  4: } from "../../utils/growthStage";
  5: import { restoreDate } from "../../setupTests";
  6: 
  7: describe("Variety-Specific Growth Stage Calculations", () => {
  8:   beforeEach(() => {
  9:     restoreDate();
 10:   });
 11: 
 12:   describe("Fast-Growing Crops (21-45 days)", () => {
 13:     const arugulaTimeline = {
 14:       germination: 5,
 15:       seedling: 14,
 16:       vegetative: 14,
 17:       maturation: 37,
 18:     };
 19: 
 20:     it("calculates arugula stages correctly", () => {
 21:       const plantedDate = new Date("2024-01-01");
 22: 
 23: 
 24:       expect(
 25:         calculateCurrentStage(
 26:           plantedDate,
 27:           arugulaTimeline,
 28:           new Date("2024-01-03")
 29:         )
 30:       ).toBe("germination");
 31: 
 32: 
 33:       expect(
 34:         calculateCurrentStage(
 35:           plantedDate,
 36:           arugulaTimeline,
 37:           new Date("2024-01-10")
 38:         )
 39:       ).toBe("seedling");
 40: 
 41: 
 42:       expect(
 43:         calculateCurrentStage(
 44:           plantedDate,
 45:           arugulaTimeline,
 46:           new Date("2024-01-25")
 47:         )
 48:       ).toBe("vegetative");
 49: 
 50: 
 51:       expect(
 52:         calculateCurrentStage(
 53:           plantedDate,
 54:           arugulaTimeline,
 55:           new Date("2024-02-10")
 56:         )
 57:       ).toBe("harvest");
 58:     });
 59: 
 60:     const spinachTimeline = {
 61:       germination: 7,
 62:       seedling: 14,
 63:       vegetative: 9,
 64:       maturation: 30,
 65:     };
 66: 
 67:     it("calculates spinach stages correctly", () => {
 68:       const plantedDate = new Date("2024-01-01");
 69: 
 70: 
 71: 
 72:       expect(
 73:         calculateCurrentStage(
 74:           plantedDate,
 75:           spinachTimeline,
 76:           new Date("2024-01-31")
 77:         )
 78:       ).toBe("harvest");
 79: 
 80:       expect(
 81:         calculateCurrentStage(
 82:           plantedDate,
 83:           spinachTimeline,
 84:           new Date("2024-01-20")
 85:         )
 86:       ).toBe("seedling");
 87:     });
 88:   });
 89: 
 90:   describe("Medium Crops (45-70 days)", () => {
 91:     const lettuceTimeline = {
 92:       germination: 7,
 93:       seedling: 18,
 94:       vegetative: 21,
 95:       maturation: 55,
 96:     };
 97: 
 98:     it("calculates lettuce stages correctly", () => {
 99:       const plantedDate = new Date("2024-01-01");
100: 
101: 
102:       expect(
103:         calculateCurrentStage(
104:           plantedDate,
105:           lettuceTimeline,
106:           new Date("2024-02-20")
107:         )
108:       ).toBe("flowering");
109:       expect(
110:         calculateCurrentStage(
111:           plantedDate,
112:           lettuceTimeline,
113:           new Date("2024-02-25")
114:         )
115:       ).toBe("harvest");
116:     });
117: 
118:     const beetTimeline = {
119:       germination: 7,
120:       seedling: 14,
121:       vegetative: 21,
122:       maturation: 60,
123:     };
124: 
125:     it("calculates beet stages correctly", () => {
126:       const plantedDate = new Date("2024-01-01");
127: 
128: 
129:       expect(
130:         calculateCurrentStage(plantedDate, beetTimeline, new Date("2024-03-01"))
131:       ).toBe("harvest");
132:     });
133: 
134:     const carrotTimeline = {
135:       germination: 14,
136:       seedling: 14,
137:       vegetative: 14,
138:       maturation: 70,
139:     };
140: 
141:     it("calculates carrot stages correctly with strict photoperiod needs", () => {
142:       const plantedDate = new Date("2024-01-01");
143: 
144: 
145:       expect(
146:         calculateCurrentStage(
147:           plantedDate,
148:           carrotTimeline,
149:           new Date("2024-01-10")
150:         )
151:       ).toBe("germination");
152:       expect(
153:         calculateCurrentStage(
154:           plantedDate,
155:           carrotTimeline,
156:           new Date("2024-01-15")
157:         )
158:       ).toBe("seedling");
159: 
160: 
161:       expect(
162:         calculateCurrentStage(
163:           plantedDate,
164:           carrotTimeline,
165:           new Date("2024-03-11")
166:         )
167:       ).toBe("harvest");
168:     });
169:   });
170: 
171:   describe("Long Crops (90+ days)", () => {
172:     const sweetPotatoTimeline = {
173:       germination: 14,
174:       seedling: 21,
175:       vegetative: 42,
176:       maturation: 100,
177:     };
178: 
179:     it("calculates sweet potato stages correctly", () => {
180:       const plantedDate = new Date("2024-01-01");
181: 
182: 
183:       expect(
184:         calculateCurrentStage(
185:           plantedDate,
186:           sweetPotatoTimeline,
187:           new Date("2024-01-10")
188:         )
189:       ).toBe("germination");
190: 
191: 
192:       expect(
193:         calculateCurrentStage(
194:           plantedDate,
195:           sweetPotatoTimeline,
196:           new Date("2024-01-25")
197:         )
198:       ).toBe("seedling");
199: 
200: 
201:       expect(
202:         calculateCurrentStage(
203:           plantedDate,
204:           sweetPotatoTimeline,
205:           new Date("2024-02-20")
206:         )
207:       ).toBe("vegetative");
208: 
209: 
210:       expect(
211:         calculateCurrentStage(
212:           plantedDate,
213:           sweetPotatoTimeline,
214:           new Date("2024-04-15")
215:         )
216:       ).toBe("harvest");
217:     });
218: 
219:     const broccoliTimeline = {
220:       germination: 7,
221:       seedling: 17,
222:       vegetative: 30,
223:       maturation: 90,
224:     };
225: 
226:     it("calculates broccoli stages correctly", () => {
227:       const plantedDate = new Date("2024-01-01");
228: 
229: 
230:       expect(
231:         calculateCurrentStage(
232:           plantedDate,
233:           broccoliTimeline,
234:           new Date("2024-04-01")
235:         )
236:       ).toBe("harvest");
237:       expect(
238:         calculateCurrentStage(
239:           plantedDate,
240:           broccoliTimeline,
241:           new Date("2024-03-15")
242:         )
243:       ).toBe("flowering");
244:     });
245: 
246:     const onionTimeline = {
247:       germination: 14,
248:       seedling: 28,
249:       vegetative: 42,
250:       maturation: 120,
251:     };
252: 
253:     it("calculates onion bulbing stages correctly", () => {
254:       const plantedDate = new Date("2024-01-01");
255: 
256: 
257:       expect(
258:         calculateCurrentStage(
259:           plantedDate,
260:           onionTimeline,
261:           new Date("2024-03-01")
262:         )
263:       ).toBe("vegetative");
264: 
265: 
266:       expect(
267:         calculateCurrentStage(
268:           plantedDate,
269:           onionTimeline,
270:           new Date("2024-05-01")
271:         )
272:       ).toBe("harvest");
273:     });
274:   });
275: 
276:   describe("Continuous Production Crops", () => {
277:     const strawberryTimeline = {
278:       germination: 21,
279:       seedling: 21,
280:       vegetative: 14,
281:       maturation: 91,
282:     };
283: 
284:     it("calculates strawberry production stages correctly", () => {
285:       const plantedDate = new Date("2024-01-01");
286: 
287: 
288:       expect(
289:         calculateCurrentStage(
290:           plantedDate,
291:           strawberryTimeline,
292:           new Date("2024-04-16")
293:         )
294:       ).toBe("harvest");
295: 
296: 
297:       expect(
298:         calculateCurrentStage(
299:           plantedDate,
300:           strawberryTimeline,
301:           new Date("2024-01-15")
302:         )
303:       ).toBe("germination");
304: 
305: 
306:       expect(
307:         calculateCurrentStage(
308:           plantedDate,
309:           strawberryTimeline,
310:           new Date("2024-02-05")
311:         )
312:       ).toBe("seedling");
313: 
314: 
315:       expect(
316:         calculateCurrentStage(
317:           plantedDate,
318:           strawberryTimeline,
319:           new Date("2024-02-20")
320:         )
321:       ).toBe("vegetative");
322: 
323: 
324:       expect(
325:         calculateCurrentStage(
326:           plantedDate,
327:           strawberryTimeline,
328:           new Date("2024-03-15")
329:         )
330:       ).toBe("flowering");
331: 
332: 
333:       expect(
334:         calculateCurrentStage(
335:           plantedDate,
336:           strawberryTimeline,
337:           new Date("2024-04-01")
338:         )
339:       ).toBe("harvest");
340:     });
341:   });
342: 
343:   describe("Stage Progress Calculations", () => {
344:     it("calculates progress correctly within stages", () => {
345:       const plantedDate = new Date("2024-01-01");
346:       const lettuceTimeline = {
347:         germination: 7,
348:         seedling: 18,
349:         vegetative: 21,
350:         maturation: 55,
351:       };
352: 
353: 
354:       const midSeedlingProgress = getStageProgress(
355:         plantedDate,
356:         lettuceTimeline,
357:         new Date("2024-01-16")
358:       );
359:       expect(midSeedlingProgress).toBeCloseTo(44, 0);
360: 
361: 
362:       const earlyGerminationProgress = getStageProgress(
363:         plantedDate,
364:         lettuceTimeline,
365:         new Date("2024-01-04")
366:       );
367:       expect(earlyGerminationProgress).toBeCloseTo(43, 0);
368: 
369: 
370:       const earlyVegetativeProgress = getStageProgress(
371:         plantedDate,
372:         lettuceTimeline,
373:         new Date("2024-01-30")
374:       );
375:       expect(earlyVegetativeProgress).toBeCloseTo(19, 0);
376:     });
377: 
378:     it("returns 100% for completed crops", () => {
379:       const plantedDate = new Date("2024-01-01");
380:       const arugulaTimeline = {
381:         germination: 5,
382:         seedling: 14,
383:         vegetative: 14,
384:         maturation: 37,
385:       };
386: 
387:       const progress = getStageProgress(
388:         plantedDate,
389:         arugulaTimeline,
390:         new Date("2024-03-01")
391:       );
392:       expect(progress).toBe(100);
393:     });
394:   });
395: 
396:   describe("Edge Cases", () => {
397:     it("handles future planting dates gracefully", () => {
398:       const plantedDate = new Date("2024-12-31");
399:       const currentDate = new Date("2024-01-01");
400:       const arugulaTimeline = {
401:         germination: 5,
402:         seedling: 14,
403:         vegetative: 14,
404:         maturation: 37,
405:       };
406: 
407:       expect(
408:         calculateCurrentStage(plantedDate, arugulaTimeline, currentDate)
409:       ).toBe("germination");
410:     });
411: 
412:     it("handles same-day calculations", () => {
413:       const plantedDate = new Date("2024-01-01");
414:       const currentDate = new Date("2024-01-01");
415:       const spinachTimeline = {
416:         germination: 7,
417:         seedling: 14,
418:         vegetative: 14,
419:         maturation: 30,
420:       };
421: 
422:       expect(
423:         calculateCurrentStage(plantedDate, spinachTimeline, currentDate)
424:       ).toBe("germination");
425:     });
426:   });
427: });

================
File: src/assets/react.svg
================
1: <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="35.93" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 228"><path fill="#00D8FF" d="M210.483 73.824a171.49 171.49 0 0 0-8.24-2.597c.465-1.9.893-3.777 1.273-5.621c6.238-30.281 2.16-54.676-11.769-62.708c-13.355-7.7-35.196.329-57.254 19.526a171.23 171.23 0 0 0-6.375 5.848a155.866 155.866 0 0 0-4.241-3.917C100.759 3.829 77.587-4.822 63.673 3.233C50.33 10.957 46.379 33.89 51.995 62.588a170.974 170.974 0 0 0 1.892 8.48c-3.28.932-6.445 1.924-9.474 2.98C17.309 83.498 0 98.307 0 113.668c0 15.865 18.582 31.778 46.812 41.427a145.52 145.52 0 0 0 6.921 2.165a167.467 167.467 0 0 0-2.01 9.138c-5.354 28.2-1.173 50.591 12.134 58.266c13.744 7.926 36.812-.22 59.273-19.855a145.567 145.567 0 0 0 5.342-4.923a168.064 168.064 0 0 0 6.92 6.314c21.758 18.722 43.246 26.282 56.54 18.586c13.731-7.949 18.194-32.003 12.4-61.268a145.016 145.016 0 0 0-1.535-6.842c1.62-.48 3.21-.974 4.76-1.488c29.348-9.723 48.443-25.443 48.443-41.52c0-15.417-17.868-30.326-45.517-39.844Zm-6.365 70.984c-1.4.463-2.836.91-4.3 1.345c-3.24-10.257-7.612-21.163-12.963-32.432c5.106-11 9.31-21.767 12.459-31.957c2.619.758 5.16 1.557 7.61 2.4c23.69 8.156 38.14 20.213 38.14 29.504c0 9.896-15.606 22.743-40.946 31.14Zm-10.514 20.834c2.562 12.94 2.927 24.64 1.23 33.787c-1.524 8.219-4.59 13.698-8.382 15.893c-8.067 4.67-25.32-1.4-43.927-17.412a156.726 156.726 0 0 1-6.437-5.87c7.214-7.889 14.423-17.06 21.459-27.246c12.376-1.098 24.068-2.894 34.671-5.345a134.17 134.17 0 0 1 1.386 6.193ZM87.276 214.515c-7.882 2.783-14.16 2.863-17.955.675c-8.075-4.657-11.432-22.636-6.853-46.752a156.923 156.923 0 0 1 1.869-8.499c10.486 2.32 22.093 3.988 34.498 4.994c7.084 9.967 14.501 19.128 21.976 27.15a134.668 134.668 0 0 1-4.877 4.492c-9.933 8.682-19.886 14.842-28.658 17.94ZM50.35 144.747c-12.483-4.267-22.792-9.812-29.858-15.863c-6.35-5.437-9.555-10.836-9.555-15.216c0-9.322 13.897-21.212 37.076-29.293c2.813-.98 5.757-1.905 8.812-2.773c3.204 10.42 7.406 21.315 12.477 32.332c-5.137 11.18-9.399 22.249-12.634 32.792a134.718 134.718 0 0 1-6.318-1.979Zm12.378-84.26c-4.811-24.587-1.616-43.134 6.425-47.789c8.564-4.958 27.502 2.111 47.463 19.835a144.318 144.318 0 0 1 3.841 3.545c-7.438 7.987-14.787 17.08-21.808 26.988c-12.04 1.116-23.565 2.908-34.161 5.309a160.342 160.342 0 0 1-1.76-7.887Zm110.427 27.268a347.8 347.8 0 0 0-7.785-12.803c8.168 1.033 15.994 2.404 23.343 4.08c-2.206 7.072-4.956 14.465-8.193 22.045a381.151 381.151 0 0 0-7.365-13.322Zm-45.032-43.861c5.044 5.465 10.096 11.566 15.065 18.186a322.04 322.04 0 0 0-30.257-.006c4.974-6.559 10.069-12.652 15.192-18.18ZM82.802 87.83a323.167 323.167 0 0 0-7.227 13.238c-3.184-7.553-5.909-14.98-8.134-22.152c7.304-1.634 15.093-2.97 23.209-3.984a321.524 321.524 0 0 0-7.848 12.897Zm8.081 65.352c-8.385-.936-16.291-2.203-23.593-3.793c2.26-7.3 5.045-14.885 8.298-22.6a321.187 321.187 0 0 0 7.257 13.246c2.594 4.48 5.28 8.868 8.038 13.147Zm37.542 31.03c-5.184-5.592-10.354-11.779-15.403-18.433c4.902.192 9.899.29 14.978.29c5.218 0 10.376-.117 15.453-.343c-4.985 6.774-10.018 12.97-15.028 18.486Zm52.198-57.817c3.422 7.8 6.306 15.345 8.596 22.52c-7.422 1.694-15.436 3.058-23.88 4.071a382.417 382.417 0 0 0 7.859-13.026a347.403 347.403 0 0 0 7.425-13.565Zm-16.898 8.101a358.557 358.557 0 0 1-12.281 19.815a329.4 329.4 0 0 1-23.444.823c-7.967 0-15.716-.248-23.178-.732a310.202 310.202 0 0 1-12.513-19.846h.001a307.41 307.41 0 0 1-10.923-20.627a310.278 310.278 0 0 1 10.89-20.637l-.001.001a307.318 307.318 0 0 1 12.413-19.761c7.613-.576 15.42-.876 23.31-.876H128c7.926 0 15.743.303 23.354.883a329.357 329.357 0 0 1 12.335 19.695a358.489 358.489 0 0 1 11.036 20.54a329.472 329.472 0 0 1-11 20.722Zm22.56-122.124c8.572 4.944 11.906 24.881 6.52 51.026c-.344 1.668-.73 3.367-1.15 5.09c-10.622-2.452-22.155-4.275-34.23-5.408c-7.034-10.017-14.323-19.124-21.64-27.008a160.789 160.789 0 0 1 5.888-5.4c18.9-16.447 36.564-22.941 44.612-18.3ZM128 90.808c12.625 0 22.86 10.235 22.86 22.86s-10.235 22.86-22.86 22.86s-22.86-10.235-22.86-22.86s10.235-22.86 22.86-22.86Z"></path></svg>

================
File: src/components/fertilization/FertilizationDashboardSection.tsx
================
  1: import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/Card";
  2: import { Button } from "@/components/ui/Button";
  3: import { Badge } from "@/components/ui/Badge";
  4: import {
  5:   Beaker,
  6:   ChevronDown,
  7:   ChevronUp,
  8:   AlertTriangle,
  9:   Clock,
 10:   CheckCircle2,
 11: } from "lucide-react";
 12: import { useState } from "react";
 13: import { ScheduledTask } from "@/services/ProtocolTranspilerService";
 14: import FertilizationTaskCard from "@/components/fertilization/FertilizationTaskCard";
 15: import { QuickCompletionValues } from "@/services/smartDefaultsService";
 16: 
 17: interface FertilizationDashboardSectionProps {
 18:   tasks: ScheduledTask[];
 19:   onTaskComplete: (taskId: string, quickData?: QuickCompletionValues) => void;
 20:   onTaskBypass: (taskId: string, reason?: string) => void;
 21:   onTaskLogActivity: (taskId: string) => void;
 22: }
 23: 
 24: const FertilizationDashboardSection: React.FC<
 25:   FertilizationDashboardSectionProps
 26: > = ({ tasks, onTaskComplete, onTaskBypass, onTaskLogActivity }) => {
 27:   const [isExpanded, setIsExpanded] = useState(true);
 28: 
 29:   if (tasks.length === 0) return null;
 30: 
 31:   const overdueTasks = tasks.filter((task) => task.dueDate < new Date());
 32:   const todayTasks = tasks.filter((task) => {
 33:     const today = new Date();
 34:     return task.dueDate.toDateString() === today.toDateString();
 35:   });
 36:   const upcomingTasks = tasks.filter((task) => task.dueDate > new Date());
 37: 
 38:   const getPriorityCount = () => {
 39:     const overdue = overdueTasks.length;
 40:     const today = todayTasks.length;
 41:     return { overdue, today };
 42:   };
 43: 
 44:   const { overdue, today } = getPriorityCount();
 45: 
 46:   return (
 47:     <Card className="mb-6">
 48:       <CardHeader
 49:         className="cursor-pointer hover:bg-muted/50 transition-colors"
 50:         onClick={() => setIsExpanded(!isExpanded)}
 51:       >
 52:         <div className="flex items-center justify-between">
 53:           <CardTitle className="flex items-center gap-2">
 54:             <Beaker className="h-5 w-5 text-green-600" />
 55:             <span> Fertilization Tasks</span>
 56:             <Badge variant="secondary" className="ml-2">
 57:               {tasks.length}
 58:             </Badge>
 59:           </CardTitle>
 60:           <div className="flex items-center gap-2">
 61:             {overdue > 0 && (
 62:               <Badge variant="destructive" className="flex items-center gap-1">
 63:                 <AlertTriangle className="h-3 w-3" />
 64:                 {overdue}
 65:               </Badge>
 66:             )}
 67:             {today > 0 && (
 68:               <Badge variant="default" className="flex items-center gap-1">
 69:                 <Clock className="h-3 w-3" />
 70:                 {today}
 71:               </Badge>
 72:             )}
 73:             {isExpanded ? (
 74:               <ChevronUp className="h-4 w-4" />
 75:             ) : (
 76:               <ChevronDown className="h-4 w-4" />
 77:             )}
 78:           </div>
 79:         </div>
 80:       </CardHeader>
 81: 
 82:       {isExpanded && (
 83:         <CardContent className="space-y-4">
 84:           {}
 85:           {overdueTasks.length > 0 && (
 86:             <div>
 87:               <div className="flex items-center gap-2 mb-3">
 88:                 <AlertTriangle className="h-4 w-4 text-red-600" />
 89:                 <h4 className="font-medium text-red-600">
 90:                   Overdue ({overdueTasks.length})
 91:                 </h4>
 92:               </div>
 93:               <div className="space-y-3">
 94:                 {overdueTasks.map((task) => (
 95:                   <FertilizationTaskCard
 96:                     key={task.id}
 97:                     task={task}
 98:                     onComplete={onTaskComplete}
 99:                     onBypass={onTaskBypass}
100:                     onLogActivity={onTaskLogActivity}
101:                   />
102:                 ))}
103:               </div>
104:             </div>
105:           )}
106: 
107:           {}
108:           {todayTasks.length > 0 && (
109:             <div>
110:               <div className="flex items-center gap-2 mb-3">
111:                 <Clock className="h-4 w-4 text-orange-600" />
112:                 <h4 className="font-medium text-orange-600">
113:                   Due Today ({todayTasks.length})
114:                 </h4>
115:               </div>
116:               <div className="space-y-3">
117:                 {todayTasks.map((task) => (
118:                   <FertilizationTaskCard
119:                     key={task.id}
120:                     task={task}
121:                     onComplete={onTaskComplete}
122:                     onBypass={onTaskBypass}
123:                     onLogActivity={onTaskLogActivity}
124:                   />
125:                 ))}
126:               </div>
127:             </div>
128:           )}
129: 
130:           {}
131:           {upcomingTasks.length > 0 && (
132:             <div>
133:               <div className="flex items-center gap-2 mb-3">
134:                 <CheckCircle2 className="h-4 w-4 text-green-600" />
135:                 <h4 className="font-medium text-green-600">
136:                   Upcoming ({upcomingTasks.slice(0, 3).length}
137:                   {upcomingTasks.length > 3 ? "+" : ""})
138:                 </h4>
139:               </div>
140:               <div className="space-y-3">
141:                 {upcomingTasks.slice(0, 3).map((task) => (
142:                   <FertilizationTaskCard
143:                     key={task.id}
144:                     task={task}
145:                     onComplete={onTaskComplete}
146:                     onBypass={onTaskBypass}
147:                     onLogActivity={onTaskLogActivity}
148:                     showQuickActions={false}
149:                   />
150:                 ))}
151:               </div>
152:               {upcomingTasks.length > 3 && (
153:                 <Button variant="outline" className="w-full mt-3">
154:                   View All {upcomingTasks.length} Upcoming Tasks
155:                 </Button>
156:               )}
157:             </div>
158:           )}
159:         </CardContent>
160:       )}
161:     </Card>
162:   );
163: };
164: 
165: export default FertilizationDashboardSection;

================
File: src/components/fertilization/FertilizationTaskCard.tsx
================
  1: import React from "react";
  2: import { ScheduledTask } from "@/services/ProtocolTranspilerService";
  3: import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/Card";
  4: import { Button } from "@/components/ui/Button";
  5: import { Badge } from "@/components/ui/Badge";
  6: import {
  7:   Beaker,
  8:   Clock,
  9:   Droplets,
 10:   Leaf,
 11:   Info,
 12:   CheckCircle2,
 13:   AlertTriangle,
 14:   Calendar,
 15: } from "lucide-react";
 16: import { formatDistanceToNow, isPast, isToday, isTomorrow } from "date-fns";
 17: import { QuickCompletionValues } from "@/services/smartDefaultsService";
 18: 
 19: interface FertilizationTaskCardProps {
 20:   task: ScheduledTask;
 21:   onComplete: (taskId: string, quickData?: QuickCompletionValues) => void;
 22:   onBypass: (taskId: string, reason?: string) => void;
 23:   onLogActivity: (taskId: string) => void;
 24:   isWateringDueSoon?: boolean;
 25:   canCombineWithWatering?: boolean;
 26:   showQuickActions?: boolean;
 27: }
 28: 
 29: export const FertilizationTaskCard: React.FC<FertilizationTaskCardProps> = ({
 30:   task,
 31:   onComplete,
 32:   onBypass,
 33:   onLogActivity,
 34:   isWateringDueSoon = false,
 35:   canCombineWithWatering = false,
 36:   showQuickActions = true,
 37: }) => {
 38:   const isOverdue = isPast(task.dueDate);
 39:   const isDueToday = isToday(task.dueDate);
 40:   const isDueTomorrow = isTomorrow(task.dueDate);
 41: 
 42:   const getMethodIcon = (method: string) => {
 43:     switch (method) {
 44:       case "soil-drench":
 45:         return <Droplets className="h-4 w-4" />;
 46:       case "foliar-spray":
 47:         return <Leaf className="h-4 w-4" />;
 48:       case "top-dress":
 49:         return <Beaker className="h-4 w-4" />;
 50:       default:
 51:         return <Beaker className="h-4 w-4" />;
 52:     }
 53:   };
 54: 
 55:   const getMethodDisplay = (method: string) => {
 56:     switch (method) {
 57:       case "soil-drench":
 58:         return "Soil Drench";
 59:       case "foliar-spray":
 60:         return "Foliar Spray";
 61:       case "top-dress":
 62:         return "Top Dress";
 63:       default:
 64:         return method;
 65:     }
 66:   };
 67: 
 68:   const getPriorityColor = () => {
 69:     if (isOverdue) return "border-red-500 bg-red-50 dark:bg-red-950/30";
 70:     if (isDueToday)
 71:       return "border-orange-500 bg-orange-50 dark:bg-orange-950/30";
 72:     if (isDueTomorrow)
 73:       return "border-yellow-500 bg-yellow-50 dark:bg-yellow-950/30";
 74:     return "border-green-500 bg-green-50 dark:bg-green-950/30";
 75:   };
 76: 
 77:   const getStatusDisplay = () => {
 78:     if (isOverdue) {
 79:       return {
 80:         text: `Overdue by ${formatDistanceToNow(task.dueDate)}`,
 81:         icon: <AlertTriangle className="h-4 w-4" />,
 82:         color: "text-red-600 dark:text-red-400",
 83:       };
 84:     }
 85:     if (isDueToday) {
 86:       return {
 87:         text: "Due today",
 88:         icon: <Clock className="h-4 w-4" />,
 89:         color: "text-orange-600 dark:text-orange-400",
 90:       };
 91:     }
 92:     if (isDueTomorrow) {
 93:       return {
 94:         text: "Due tomorrow",
 95:         icon: <Calendar className="h-4 w-4" />,
 96:         color: "text-yellow-600 dark:text-yellow-500",
 97:       };
 98:     }
 99:     return {
100:       text: `Due in ${formatDistanceToNow(task.dueDate)}`,
101:       icon: <Clock className="h-4 w-4" />,
102:       color: "text-green-600 dark:text-green-400",
103:     };
104:   };
105: 
106:   const handleQuickComplete = () => {
107:     const quickData: QuickCompletionValues = {
108:       product: task.details.product,
109:       amount: task.details.amount,
110:       dilution: task.details.dilution,
111:       notes: `Quick completion: ${task.taskName}`,
112:     };
113:     onComplete(task.id, quickData);
114:   };
115: 
116:   const status = getStatusDisplay();
117: 
118:   return (
119:     <Card
120:       className={`border-l-4 transition-all duration-200 hover:shadow-md ${getPriorityColor()}`}
121:     >
122:       <CardHeader className="pb-3">
123:         <div className="flex items-start justify-between">
124:           <div className="flex-1">
125:             <CardTitle className="flex items-center gap-2 text-lg">
126:               <Beaker className="h-5 w-5 text-green-600" />
127:               {task.taskName}
128:             </CardTitle>
129:             <div className="flex items-center gap-2 mt-1">
130:               {status.icon}
131:               <span className={`text-sm font-medium ${status.color}`}>
132:                 {status.text}
133:               </span>
134:             </div>
135:           </div>
136:           <Badge
137:             variant={
138:               isOverdue ? "destructive" : isDueToday ? "default" : "secondary"
139:             }
140:           >
141:             {task.priority}
142:           </Badge>
143:         </div>
144:       </CardHeader>
145: 
146:       <CardContent className="space-y-4">
147:         {}
148:         <div className="grid grid-cols-1 sm:grid-cols-2 gap-3">
149:           <div className="space-y-2">
150:             <div className="flex items-center gap-2">
151:               <Beaker className="h-4 w-4 text-muted-foreground" />
152:               <span className="text-sm font-medium">Product</span>
153:             </div>
154:             <p className="text-sm text-muted-foreground pl-6">
155:               {task.details.product}
156:             </p>
157:           </div>
158: 
159:           <div className="space-y-2">
160:             <div className="flex items-center gap-2">
161:               {getMethodIcon(task.details.method)}
162:               <span className="text-sm font-medium">Method</span>
163:             </div>
164:             <p className="text-sm text-muted-foreground pl-6">
165:               {getMethodDisplay(task.details.method)}
166:             </p>
167:           </div>
168: 
169:           <div className="space-y-2">
170:             <div className="flex items-center gap-2">
171:               <span className="text-sm font-medium">Amount</span>
172:             </div>
173:             <p className="text-sm text-muted-foreground">
174:               {task.details.amount}
175:             </p>
176:           </div>
177: 
178:           <div className="space-y-2">
179:             <div className="flex items-center gap-2">
180:               <span className="text-sm font-medium">Dilution</span>
181:             </div>
182:             <p className="text-sm text-muted-foreground">
183:               {task.details.dilution}
184:             </p>
185:           </div>
186:         </div>
187: 
188:         {}
189:         {canCombineWithWatering && isWateringDueSoon && (
190:           <div className="p-3 bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 rounded-lg">
191:             <div className="flex items-start gap-2">
192:               <Info className="h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0" />
193:               <div className="text-sm">
194:                 <p className="font-medium text-blue-900 dark:text-blue-100">
195:                   Smart Timing Suggestion
196:                 </p>
197:                 <p className="text-blue-700 dark:text-blue-300 mt-1">
198:                   Watering is due soon. Consider combining this fertilizer
199:                   application with watering to prevent overwatering.
200:                 </p>
201:               </div>
202:             </div>
203:           </div>
204:         )}
205: 
206:         {}
207:         {showQuickActions && (
208:           <div className="flex flex-col sm:flex-row gap-2 pt-2">
209:             <Button
210:               onClick={handleQuickComplete}
211:               className="flex-1 bg-green-600 hover:bg-green-700 text-white"
212:               size="sm"
213:             >
214:               <CheckCircle2 className="h-4 w-4 mr-2" />
215:               Quick: {task.details.product}
216:             </Button>
217: 
218:             <Button
219:               onClick={() => onLogActivity(task.id)}
220:               variant="outline"
221:               className="flex-1"
222:               size="sm"
223:             >
224:               <Beaker className="h-4 w-4 mr-2" />
225:               Log Details
226:             </Button>
227: 
228:             <Button
229:               onClick={() => onBypass(task.id)}
230:               variant="outline"
231:               className="text-muted-foreground hover:text-foreground"
232:               size="sm"
233:             >
234:               Bypass
235:             </Button>
236:           </div>
237:         )}
238: 
239:         {}
240:         {task.sourceProtocol && (
241:           <div className="text-xs text-muted-foreground border-t pt-2">
242:             Protocol guidance for {task.sourceProtocol.stage} stage
243:           </div>
244:         )}
245:       </CardContent>
246:     </Card>
247:   );
248: };
249: 
250: export default FertilizationTaskCard;

================
File: src/components/plant/BulkActivityModal.tsx
================
  1: import { useState } from "react";
  2: import { Button } from "@/components/ui/Button";
  3: import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/Card";
  4: import { Input } from "@/components/ui/Input";
  5: import { useFirebaseCareActivities } from "@/hooks/useFirebaseCareActivities";
  6: import { toast } from "react-hot-toast";
  7: 
  8: interface BulkActivityModalProps {
  9:   isOpen: boolean;
 10:   onClose: () => void;
 11:   plantIds: string[];
 12:   activityType: string;
 13:   plantCount: number;
 14:   varietyName: string;
 15: }
 16: 
 17: const BulkActivityModal = ({
 18:   isOpen,
 19:   onClose,
 20:   plantIds,
 21:   activityType,
 22:   plantCount,
 23:   varietyName,
 24: }: BulkActivityModalProps) => {
 25:   const [isSubmitting, setIsSubmitting] = useState(false);
 26:   const [amount, setAmount] = useState("20");
 27:   const [notes, setNotes] = useState("");
 28: 
 29:   const { logActivity } = useFirebaseCareActivities();
 30: 
 31:   const isIndividual = plantCount === 1;
 32:   const modalTitle = isIndividual
 33:     ? `${
 34:         activityType === "water"
 35:           ? " Water Plant"
 36:           : activityType === "fertilize"
 37:           ? " Fertilize Plant"
 38:           : " Inspect Plant"
 39:       }`
 40:     : `${
 41:         activityType === "water"
 42:           ? " Water All Plants"
 43:           : activityType === "fertilize"
 44:           ? " Fertilize All Plants"
 45:           : " Inspect All Plants"
 46:       }`;
 47: 
 48:   const buttonText = isIndividual
 49:     ? `Log ${
 50:         activityType === "water"
 51:           ? "Watering"
 52:           : activityType === "fertilize"
 53:           ? "Fertilizing"
 54:           : "Inspection"
 55:       }`
 56:     : `Log Activity for All ${plantCount} Plants`;
 57: 
 58:   const handleSubmit = async () => {
 59:     setIsSubmitting(true);
 60:     try {
 61:       for (const plantId of plantIds) {
 62:         let details: any = { notes };
 63: 
 64:         if (activityType === "water") {
 65:           details = {
 66:             type: "water",
 67:             amount: { value: parseFloat(amount), unit: "oz" },
 68:             notes,
 69:           };
 70:         } else if (activityType === "fertilize") {
 71:           details = {
 72:             type: "fertilize",
 73:             product: "General fertilizer",
 74:             dilution: "1:10",
 75:             amount: amount,
 76:             notes,
 77:           };
 78:         } else if (activityType === "observe") {
 79:           details = {
 80:             type: "observe",
 81:             healthAssessment: "good",
 82:             observations: notes || "Routine inspection",
 83:             notes,
 84:           };
 85:         }
 86: 
 87:         await logActivity({
 88:           plantId,
 89:           type: activityType as any,
 90:           date: new Date(),
 91:           details,
 92:         });
 93:       }
 94: 
 95:       const successMessage = isIndividual
 96:         ? `${
 97:             activityType === "water"
 98:               ? "Watering"
 99:               : activityType === "fertilize"
100:               ? "Fertilizing"
101:               : "Inspection"
102:           } logged successfully! `
103:         : `Activity logged for all ${plantCount} ${varietyName} plants! `;
104: 
105:       toast.success(successMessage);
106:       onClose();
107:     } catch (error) {
108:       toast.error("Failed to log activities");
109:       console.error("Activity logging error:", error);
110:     } finally {
111:       setIsSubmitting(false);
112:     }
113:   };
114: 
115:   if (!isOpen) return null;
116: 
117:   return (
118:     <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
119:       <Card className="w-full max-w-md">
120:         <CardHeader>
121:           <CardTitle className="flex items-center justify-between">
122:             <span>{modalTitle}</span>
123:             <Button variant="outline" size="sm" onClick={onClose}>
124:               
125:             </Button>
126:           </CardTitle>
127:           <p className="text-sm text-muted-foreground">
128:             {isIndividual
129:               ? `Logging for ${varietyName} plant`
130:               : `Logging for ${plantCount} ${varietyName} plants`}
131:           </p>
132:         </CardHeader>
133:         <CardContent className="space-y-4">
134:           {activityType === "water" && (
135:             <div>
136:               <label htmlFor="bulk-amount" className="text-sm font-medium">
137:                 Amount (oz)
138:               </label>
139:               <Input
140:                 id="bulk-amount"
141:                 type="number"
142:                 value={amount}
143:                 onChange={(e) => setAmount(e.target.value)}
144:                 placeholder="20"
145:               />
146:             </div>
147:           )}
148: 
149:           {activityType === "fertilize" && (
150:             <div>
151:               <label htmlFor="fertilize-amount" className="text-sm font-medium">
152:                 Amount
153:               </label>
154:               <Input
155:                 id="fertilize-amount"
156:                 value={amount}
157:                 onChange={(e) => setAmount(e.target.value)}
158:                 placeholder="2 tbsp"
159:               />
160:             </div>
161:           )}
162: 
163:           <div>
164:             <label htmlFor="bulk-notes" className="text-sm font-medium">
165:               Notes (optional)
166:             </label>
167:             <Input
168:               id="bulk-notes"
169:               value={notes}
170:               onChange={(e) => setNotes(e.target.value)}
171:               placeholder="Any observations..."
172:             />
173:           </div>
174: 
175:           <Button
176:             onClick={handleSubmit}
177:             disabled={isSubmitting}
178:             className="w-full"
179:           >
180:             {isSubmitting ? "Logging..." : buttonText}
181:           </Button>
182:         </CardContent>
183:       </Card>
184:     </div>
185:   );
186: };
187: 
188: export default BulkActivityModal;

================
File: src/components/plant/NextActivityCard.tsx
================
  1: import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/Card";
  2: import { Button } from "@/components/ui/Button";
  3: import { useNextPlantTask } from "@/hooks/useNextPlantTask";
  4: import { Clock, Calendar, AlertTriangle, CheckCircle2 } from "lucide-react";
  5: import Badge from "../ui/Badge";
  6: 
  7: interface NextActivityCardProps {
  8:   plantId: string;
  9:   onTaskClick?: (taskType: string) => void;
 10:   className?: string;
 11: }
 12: 
 13: const NextActivityCard = ({
 14:   plantId,
 15:   onTaskClick,
 16:   className = "",
 17: }: NextActivityCardProps) => {
 18:   const { nextTask, isLoading } = useNextPlantTask(plantId);
 19: 
 20:   const getTaskIcon = (task: string): string => {
 21:     const taskLower = task.toLowerCase();
 22:     if (taskLower.includes("water")) return "";
 23:     if (taskLower.includes("fertiliz")) return "";
 24:     if (taskLower.includes("observe") || taskLower.includes("check"))
 25:       return "";
 26:     if (taskLower.includes("harvest")) return "";
 27:     if (taskLower.includes("prune")) return "";
 28:     return "";
 29:   };
 30: 
 31:   const getPriorityConfig = (priority: "low" | "medium" | "high") => {
 32:     switch (priority) {
 33:       case "high":
 34:         return {
 35:           color: "bg-red-100 text-red-800 border-red-200",
 36:           icon: <AlertTriangle className="h-3 w-3" />,
 37:           buttonStyle: "bg-red-500 hover:bg-red-600 text-white",
 38:         };
 39:       case "medium":
 40:         return {
 41:           color: "bg-orange-100 text-orange-800 border-orange-200",
 42:           icon: <Clock className="h-3 w-3" />,
 43:           buttonStyle: "bg-orange-500 hover:bg-orange-600 text-white",
 44:         };
 45:       case "low":
 46:         return {
 47:           color: "bg-green-100 text-green-800 border-green-200",
 48:           icon: <CheckCircle2 className="h-3 w-3" />,
 49:           buttonStyle: "bg-green-500 hover:bg-green-600 text-white",
 50:         };
 51:       default:
 52:         return {
 53:           color: "bg-gray-100 text-gray-800 border-gray-200",
 54:           icon: <Clock className="h-3 w-3" />,
 55:           buttonStyle: "bg-primary hover:bg-primary/90",
 56:         };
 57:     }
 58:   };
 59: 
 60:   const getActivityType = (taskDescription: string): string => {
 61:     const task = taskDescription.toLowerCase();
 62:     if (task.includes("water") || task.includes("watering")) return "water";
 63:     if (task.includes("fertiliz")) return "fertilize";
 64:     if (task.includes("health check") || task.includes("observe"))
 65:       return "observe";
 66:     if (task.includes("harvest")) return "harvest";
 67:     if (task.includes("transplant")) return "transplant";
 68:     return "water";
 69:   };
 70: 
 71:   const handleTaskClick = () => {
 72:     if (nextTask && onTaskClick) {
 73:       const activityType = getActivityType(nextTask.task);
 74:       onTaskClick(activityType);
 75:     }
 76:   };
 77: 
 78:   if (isLoading) {
 79:     return (
 80:       <Card className={`border-border shadow-sm ${className}`}>
 81:         <CardHeader className="pb-3">
 82:           <CardTitle className="flex items-center gap-2 text-base">
 83:             <Calendar className="h-4 w-4" />
 84:             Next Activity
 85:           </CardTitle>
 86:         </CardHeader>
 87:         <CardContent className="pt-0">
 88:           <div className="flex items-center gap-3">
 89:             <div className="h-8 w-8 bg-muted rounded-full animate-pulse"></div>
 90:             <div className="flex-1">
 91:               <div className="h-4 bg-muted rounded animate-pulse mb-2"></div>
 92:               <div className="h-3 bg-muted rounded animate-pulse w-2/3"></div>
 93:             </div>
 94:           </div>
 95:         </CardContent>
 96:       </Card>
 97:     );
 98:   }
 99: 
100:   if (!nextTask) {
101:     return (
102:       <Card className={`border-border shadow-sm ${className}`}>
103:         <CardHeader className="pb-3">
104:           <CardTitle className="flex items-center gap-2 text-base">
105:             <Calendar className="h-4 w-4" />
106:             Next Activity
107:           </CardTitle>
108:         </CardHeader>
109:         <CardContent className="pt-0">
110:           <div className="flex items-center gap-3 py-2">
111:             <div className="h-8 w-8 bg-green-100 rounded-full flex items-center justify-center">
112:               <CheckCircle2 className="h-4 w-4 text-green-600" />
113:             </div>
114:             <div className="flex-1">
115:               <div className="text-sm font-medium text-foreground">
116:                 All caught up!
117:               </div>
118:               <div className="text-xs text-muted-foreground">
119:                 No tasks scheduled
120:               </div>
121:             </div>
122:           </div>
123:         </CardContent>
124:       </Card>
125:     );
126:   }
127: 
128:   const priorityConfig = getPriorityConfig(nextTask.priority);
129: 
130:   return (
131:     <Card className={`border-border shadow-sm ${className}`}>
132:       <CardHeader className="pb-3">
133:         <CardTitle className="flex items-center gap-2 text-base">
134:           <Calendar className="h-4 w-4" />
135:           Next Activity
136:         </CardTitle>
137:       </CardHeader>
138:       <CardContent className="pt-0">
139:         <div className="space-y-3">
140:           {}
141:           <div className="flex items-start gap-3">
142:             <div className="h-8 w-8 bg-background border border-border rounded-full flex items-center justify-center text-lg">
143:               {getTaskIcon(nextTask.task)}
144:             </div>
145:             <div className="flex-1 min-w-0">
146:               <div className="flex items-center gap-2 mb-1">
147:                 <span className="text-sm font-medium text-foreground">
148:                   {nextTask.task}
149:                 </span>
150:                 <Badge
151:                   className={`${priorityConfig.color} text-xs px-2 py-0.5 flex items-center gap-1`}
152:                 >
153:                   {priorityConfig.icon}
154:                   {nextTask.priority}
155:                 </Badge>
156:               </div>
157:               <div className="text-xs text-muted-foreground">
158:                 {nextTask.dueIn}
159:               </div>
160:             </div>
161:           </div>
162: 
163:           {}
164:           {onTaskClick && (
165:             <Button
166:               onClick={handleTaskClick}
167:               className={`w-full ${priorityConfig.buttonStyle} text-sm py-2`}
168:               size="sm"
169:             >
170:               <span className="mr-2">{getTaskIcon(nextTask.task)}</span>
171:               Log {nextTask.task}
172:             </Button>
173:           )}
174:         </div>
175:       </CardContent>
176:     </Card>
177:   );
178: };
179: 
180: export default NextActivityCard;

================
File: src/components/plant/PlantGroupCard.tsx
================
  1: import { useState } from "react";
  2: import { useNavigate } from "react-router-dom";
  3: import { PlantGroup } from "@/utils/plantGrouping";
  4: import { Button } from "@/components/ui/Button";
  5: import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/Card";
  6: import { StatusBadge } from "@/components/ui/StatusBadge";
  7: import { useDynamicStage } from "@/hooks/useDynamicStage";
  8: 
  9: interface PlantGroupCardProps {
 10:   group: PlantGroup;
 11:   onBulkLogActivity: (plantIds: string[], activityType: string) => void;
 12: }
 13: 
 14: const PlantGroupCard = ({ group, onBulkLogActivity }: PlantGroupCardProps) => {
 15:   const navigate = useNavigate();
 16:   const [currentIndex, setCurrentIndex] = useState(0);
 17:   const [showBulkActions, setShowBulkActions] = useState(false);
 18:   const [showIndividualActions, setShowIndividualActions] = useState(false);
 19: 
 20:   const currentPlant = group.plants[currentIndex];
 21:   const hasMultiplePlants = group.plants.length > 1;
 22:   const calculatedStage = useDynamicStage(currentPlant);
 23: 
 24:   const goToPrevious = () => {
 25:     setCurrentIndex((prev) =>
 26:       prev === 0 ? group.plants.length - 1 : prev - 1
 27:     );
 28:   };
 29: 
 30:   const goToNext = () => {
 31:     setCurrentIndex((prev) =>
 32:       prev === group.plants.length - 1 ? 0 : prev + 1
 33:     );
 34:   };
 35: 
 36:   const handlePlantClick = () => {
 37:     navigate(`/plants/${currentPlant.id}`);
 38:   };
 39: 
 40:   const handleBulkAction = (activityType: string) => {
 41:     const plantIds = group.plants.map((p) => p.id);
 42:     onBulkLogActivity(plantIds, activityType);
 43:     setShowBulkActions(false);
 44:   };
 45: 
 46:   const handleIndividualAction = (activityType: string) => {
 47:     onBulkLogActivity([currentPlant.id], activityType);
 48:     setShowIndividualActions(false);
 49:   };
 50: 
 51:   return (
 52:     <Card className="hover:shadow-lg transition-shadow">
 53:       <CardHeader>
 54:         <div className="flex justify-between items-start">
 55:           <div className="flex-1">
 56:             <CardTitle className="text-lg flex items-center justify-between">
 57:               <span className="truncate">{currentPlant.name}</span>
 58:               <StatusBadge status="healthy" size="sm" />
 59:             </CardTitle>
 60: 
 61:             {hasMultiplePlants && (
 62:               <div className="flex items-center gap-2 mt-2">
 63:                 <Button
 64:                   variant="outline"
 65:                   size="sm"
 66:                   onClick={(e) => {
 67:                     e.stopPropagation();
 68:                     goToPrevious();
 69:                   }}
 70:                   className="h-8 w-8 p-0"
 71:                 >
 72:                   
 73:                 </Button>
 74:                 <span className="text-sm text-muted-foreground min-w-fit">
 75:                   {currentIndex + 1} of {group.plants.length}
 76:                 </span>
 77:                 <Button
 78:                   variant="outline"
 79:                   size="sm"
 80:                   onClick={(e) => {
 81:                     e.stopPropagation();
 82:                     goToNext();
 83:                   }}
 84:                   className="h-8 w-8 p-0"
 85:                 >
 86:                   
 87:                 </Button>
 88:               </div>
 89:             )}
 90:           </div>
 91:         </div>
 92:       </CardHeader>
 93: 
 94:       <CardContent className="space-y-4">
 95:         <div className="cursor-pointer space-y-2" onClick={handlePlantClick}>
 96:           <div className="flex items-center gap-2">
 97:             <span className="text-xs font-medium bg-primary/10 text-primary px-2 py-1 rounded-full">
 98:               {currentPlant.varietyName}
 99:             </span>
100:             {hasMultiplePlants && (
101:               <span className="text-xs font-medium bg-secondary/50 text-secondary-foreground px-2 py-1 rounded-full">
102:                 {group.plants.length} plants
103:               </span>
104:             )}
105:           </div>
106: 
107:           <div className="grid grid-cols-2 gap-2 text-sm">
108:             <div>
109:               <span className="text-muted-foreground">Stage:</span>
110:               <div className="font-medium text-foreground capitalize">
111:                 {calculatedStage.replace("-", " ")}
112:               </div>
113:             </div>
114:             <div>
115:               <span className="text-muted-foreground">Planted:</span>
116:               <div className="font-medium text-foreground">
117:                 {currentPlant.plantedDate.toLocaleDateString()}
118:               </div>
119:             </div>
120:           </div>
121: 
122:           <div className="text-sm">
123:             <span className="text-muted-foreground">Location:</span>
124:             <span className="font-medium text-foreground ml-1">
125:               {currentPlant.location || "Not specified"}
126:             </span>
127:           </div>
128:         </div>
129: 
130:         <div className="border-t pt-3 space-y-3">
131:           <div className="space-y-3">
132:             <div className="flex items-center justify-between">
133:               <div>
134:                 <div className="text-sm font-medium text-primary">
135:                   {hasMultiplePlants
136:                     ? "Current Plant Actions"
137:                     : "Quick Actions"}
138:                 </div>
139:                 <div className="text-xs text-muted-foreground">
140:                   Log activity for {currentPlant.name}
141:                 </div>
142:               </div>
143:               <Button
144:                 variant="outline"
145:                 size="sm"
146:                 onClick={(e) => {
147:                   e.stopPropagation();
148:                   setShowIndividualActions(!showIndividualActions);
149:                 }}
150:                 className="text-primary border-primary/50 hover:bg-primary/10"
151:               >
152:                 {showIndividualActions
153:                   ? "Cancel"
154:                   : hasMultiplePlants
155:                   ? "Log One"
156:                   : "Log Care"}
157:               </Button>
158:             </div>
159: 
160:             {showIndividualActions && (
161:               <div className="grid grid-cols-2 gap-2">
162:                 <Button
163:                   size="sm"
164:                   onClick={(e) => {
165:                     e.stopPropagation();
166:                     handleIndividualAction("water");
167:                   }}
168:                   className="bg-blue-500 hover:bg-blue-600 text-white"
169:                 >
170:                    Water
171:                 </Button>
172:                 <Button
173:                   size="sm"
174:                   onClick={(e) => {
175:                     e.stopPropagation();
176:                     handleIndividualAction("fertilize");
177:                   }}
178:                   className="bg-green-500 hover:bg-green-600 text-white"
179:                 >
180:                    Fertilize
181:                 </Button>
182:                 <Button
183:                   size="sm"
184:                   onClick={(e) => {
185:                     e.stopPropagation();
186:                     handleIndividualAction("observe");
187:                   }}
188:                   className="bg-orange-500 hover:bg-orange-600 text-white"
189:                 >
190:                    Inspect
191:                 </Button>
192:                 <Button
193:                   size="sm"
194:                   onClick={(e) => {
195:                     e.stopPropagation();
196:                     navigate(`/log-care/${currentPlant.id}`);
197:                   }}
198:                   variant="outline"
199:                 >
200:                    More
201:                 </Button>
202:               </div>
203:             )}
204:           </div>
205: 
206:           {hasMultiplePlants && (
207:             <div className="border-t pt-3 space-y-3">
208:               <div className="flex items-center justify-between">
209:                 <div>
210:                   <div className="text-sm font-medium text-primary">
211:                     Group Actions
212:                   </div>
213:                   <div className="text-xs text-muted-foreground">
214:                     Log activity for all {group.plants.length} plants
215:                   </div>
216:                 </div>
217:                 <Button
218:                   variant="outline"
219:                   size="sm"
220:                   onClick={(e) => {
221:                     e.stopPropagation();
222:                     setShowBulkActions(!showBulkActions);
223:                   }}
224:                   className="text-primary border-primary/50 hover:bg-primary/10"
225:                 >
226:                   {showBulkActions ? "Cancel" : "Log All"}
227:                 </Button>
228:               </div>
229: 
230:               {showBulkActions && (
231:                 <div className="grid grid-cols-2 gap-2">
232:                   <Button
233:                     size="sm"
234:                     onClick={(e) => {
235:                       e.stopPropagation();
236:                       handleBulkAction("water");
237:                     }}
238:                     className="bg-blue-500 hover:bg-blue-600 text-white"
239:                   >
240:                      Water All
241:                   </Button>
242:                   <Button
243:                     size="sm"
244:                     onClick={(e) => {
245:                       e.stopPropagation();
246:                       handleBulkAction("fertilize");
247:                     }}
248:                     className="bg-green-500 hover:bg-green-600 text-white"
249:                   >
250:                      Fertilize All
251:                   </Button>
252:                   <Button
253:                     size="sm"
254:                     onClick={(e) => {
255:                       e.stopPropagation();
256:                       handleBulkAction("observe");
257:                     }}
258:                     className="bg-orange-500 hover:bg-orange-600 text-white"
259:                   >
260:                      Inspect All
261:                   </Button>
262:                   <Button
263:                     size="sm"
264:                     onClick={(e) => {
265:                       e.stopPropagation();
266:                       handleBulkAction("note");
267:                     }}
268:                     className="bg-purple-500 hover:bg-purple-600 text-white"
269:                   >
270:                      Note All
271:                   </Button>
272:                 </div>
273:               )}
274:             </div>
275:           )}
276:         </div>
277:       </CardContent>
278:     </Card>
279:   );
280: };
281: 
282: export default PlantGroupCard;

================
File: src/components/plant/StageUpdateModal.tsx
================
  1: import React from "react";
  2: import { Button } from "@/components/ui/Button";
  3: import { Badge } from "@/components/ui/Badge";
  4: import {
  5:   Dialog,
  6:   DialogContent,
  7:   DialogHeader,
  8:   DialogTitle,
  9: } from "@/components/ui/Dialog";
 10: import { PlantRecord } from "@/types/database";
 11: import { GrowthStage } from "@/types/core";
 12: import { visualCues } from "@/data/visualCues";
 13: import { getNextStage } from "@/utils/growthStage";
 14: 
 15: interface StageUpdateModalProps {
 16:   plant: PlantRecord;
 17:   currentStage: GrowthStage;
 18:   isOpen: boolean;
 19:   onConfirm: (newStage: GrowthStage) => void;
 20:   onClose: () => void;
 21: }
 22: 
 23: export const StageUpdateModal: React.FC<StageUpdateModalProps> = ({
 24:   plant,
 25:   currentStage,
 26:   isOpen,
 27:   onConfirm,
 28:   onClose,
 29: }) => {
 30:   const nextStage = getNextStage(currentStage);
 31:   const cues = (plant.varietyName &&
 32:     nextStage &&
 33:     visualCues[plant.varietyName]?.[nextStage]) || [
 34:     "No specific visual cues available for this stage. Please refer to general knowledge for this variety.",
 35:   ];
 36: 
 37:   const handleConfirm = () => {
 38:     if (nextStage) {
 39:       onConfirm(nextStage);
 40:     }
 41:   };
 42: 
 43:   console.log("is", isOpen);
 44:   return (
 45:     <Dialog isOpen={isOpen} onClose={onClose}>
 46:       <DialogContent className="max-w-lg">
 47:         <DialogHeader>
 48:           <DialogTitle className="text-xl">Update Growth Stage</DialogTitle>
 49:           <p className="text-muted-foreground">
 50:             Is your "{plant.name || plant.varietyName}" ready for the next
 51:             stage?
 52:           </p>
 53:         </DialogHeader>
 54: 
 55:         <div className="space-y-4">
 56:           <div className="text-sm space-y-2">
 57:             <div className="flex items-center gap-2">
 58:               <span className="font-medium text-muted-foreground">
 59:                 Current Stage:
 60:               </span>
 61:               <Badge variant="secondary" className="capitalize">
 62:                 {currentStage.replace("-", " ")}
 63:               </Badge>
 64:             </div>
 65:             {nextStage && (
 66:               <div className="flex items-center gap-2">
 67:                 <span className="font-medium text-muted-foreground">
 68:                   Next Stage:
 69:                 </span>
 70:                 <Badge className="capitalize bg-emerald-600 text-white">
 71:                   {nextStage.replace("-", " ")}
 72:                 </Badge>
 73:               </div>
 74:             )}
 75:           </div>
 76: 
 77:           {nextStage ? (
 78:             <div className="p-4 bg-emerald-50 dark:bg-emerald-950/30 border border-emerald-200 dark:border-emerald-800 rounded-lg">
 79:               <h4 className="font-semibold mb-2 text-emerald-800 dark:text-emerald-200">
 80:                 Look for these signs for the '{nextStage.replace("-", " ")}'
 81:                 stage:
 82:               </h4>
 83:               <ul className="list-disc list-inside space-y-1 text-sm text-emerald-700 dark:text-emerald-300">
 84:                 {cues.map((cue, index) => (
 85:                   <li key={index}>{cue}</li>
 86:                 ))}
 87:               </ul>
 88:             </div>
 89:           ) : (
 90:             <div className="p-4 bg-emerald-50 dark:bg-emerald-950/30 border border-emerald-200 dark:border-emerald-800 rounded-lg text-center">
 91:               <p className="font-semibold text-emerald-800 dark:text-emerald-200">
 92:                 Your plant is in its final growth stage!
 93:               </p>
 94:             </div>
 95:           )}
 96: 
 97:           <div className="flex justify-end gap-3 pt-4">
 98:             <Button variant="outline" onClick={onClose}>
 99:               Cancel
100:             </Button>
101:             {nextStage && (
102:               <Button
103:                 onClick={handleConfirm}
104:                 className="bg-emerald-600 hover:bg-emerald-700 text-white"
105:               >
106:                 Yes, Confirm '{nextStage.replace("-", " ")}' Stage
107:               </Button>
108:             )}
109:           </div>
110:         </div>
111:       </DialogContent>
112:     </Dialog>
113:   );
114: };

================
File: src/components/ui/Badge.tsx
================
 1: import React from "react";
 2: import { cn } from "@/utils/cn";
 3: 
 4: interface BadgeProps extends React.HTMLAttributes<HTMLDivElement> {
 5:   variant?: "default" | "secondary" | "destructive" | "outline";
 6:   size?: "sm" | "md" | "lg";
 7:   children: React.ReactNode;
 8:   className?: string;
 9: }
10: 
11: export const Badge = ({
12:   variant = "default",
13:   size = "md",
14:   children,
15:   className,
16:   ...props
17: }: BadgeProps) => {
18:   const baseClasses =
19:     "inline-flex items-center font-medium rounded-full border";
20: 
21:   const variantClasses = {
22:     default: "bg-primary text-primary-foreground border-primary",
23:     secondary: "bg-secondary text-secondary-foreground border-secondary",
24:     destructive:
25:       "bg-destructive text-destructive-foreground border-destructive",
26:     outline: "text-foreground border-border bg-transparent",
27:   };
28: 
29:   const sizeClasses = {
30:     sm: "px-2 py-0.5 text-xs",
31:     md: "px-2.5 py-1 text-sm",
32:     lg: "px-3 py-1.5 text-base",
33:   };
34: 
35:   return (
36:     <div
37:       className={cn(
38:         baseClasses,
39:         variantClasses[variant],
40:         sizeClasses[size],
41:         className
42:       )}
43:       {...props}
44:     >
45:       {children}
46:     </div>
47:   );
48: };
49: 
50: export default Badge;

================
File: src/components/ui/Input.tsx
================
 1: import React from "react";
 2: import { cn } from "@/utils/cn";
 3: 
 4: interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {
 5:   className?: string;
 6: }
 7: 
 8: export const Input: React.FC<InputProps> = ({
 9:   className,
10:   type = "text",
11:   ...props
12: }) => {
13:   return (
14:     <input
15:       type={type}
16:       className={cn(
17:         "flex h-10 w-full rounded-md border border-border bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
18:         className
19:       )}
20:       {...props}
21:     />
22:   );
23: };

================
File: src/components/ui/LoadingSpinner.tsx
================
 1: import React from "react";
 2: import { cn } from "@/utils/cn";
 3: 
 4: interface LoadingSpinnerProps {
 5:   size?: "sm" | "md" | "lg";
 6:   className?: string;
 7: }
 8: 
 9: export const LoadingSpinner: React.FC<LoadingSpinnerProps> = ({
10:   size = "md",
11:   className,
12: }) => {
13:   const sizeClasses = {
14:     sm: "w-4 h-4",
15:     md: "w-6 h-6",
16:     lg: "w-8 h-8",
17:   };
18: 
19:   return (
20:     <div className={cn("flex items-center justify-center", className)}>
21:       <div
22:         className={cn(
23:           "animate-spin rounded-full border-2 border-garden-200 border-t-garden-600",
24:           sizeClasses[size]
25:         )}
26:       />
27:     </div>
28:   );
29: };

================
File: src/components/ui/OfflineIndicator.tsx
================
 1: import React, { useState, useEffect } from "react";
 2: 
 3: export const OfflineIndicator: React.FC = () => {
 4:   const [isOnline, setIsOnline] = useState(navigator.onLine);
 5: 
 6:   useEffect(() => {
 7:     function handleOnline() {
 8:       setIsOnline(true);
 9:     }
10: 
11:     function handleOffline() {
12:       setIsOnline(false);
13:     }
14: 
15:     window.addEventListener("online", handleOnline);
16:     window.addEventListener("offline", handleOffline);
17: 
18:     return () => {
19:       window.removeEventListener("online", handleOnline);
20:       window.removeEventListener("offline", handleOffline);
21:     };
22:   }, []);
23: 
24:   if (isOnline) return null;
25: 
26:   return (
27:     <div className="fixed top-0 left-0 right-0 bg-red-600 text-white px-4 py-2 text-center text-sm font-medium z-50">
28:        You're offline - Data will sync when connection returns
29:     </div>
30:   );
31: };

================
File: src/components/ui/StatusBadge.tsx
================
 1: import React from "react";
 2: import { cn } from "@/utils/cn";
 3: 
 4: interface StatusBadgeProps {
 5:   status: "healthy" | "attention" | "critical" | "new";
 6:   size?: "sm" | "md";
 7: }
 8: 
 9: export const StatusBadge: React.FC<StatusBadgeProps> = ({
10:   status,
11:   size = "md",
12: }) => {
13:   const baseClasses = "inline-flex items-center font-medium rounded-full";
14: 
15:   const sizeClasses = {
16:     sm: "px-2 py-0.5 text-xs",
17:     md: "px-2.5 py-1 text-sm",
18:   };
19: 
20:   const statusClasses = {
21:     healthy: "bg-green-100 text-green-800",
22:     attention: "bg-yellow-100 text-yellow-800",
23:     critical: "bg-red-100 text-red-800",
24:     new: "bg-blue-100 text-blue-800",
25:   };
26: 
27:   const statusIcons = {
28:     healthy: "",
29:     attention: "",
30:     critical: "",
31:     new: "",
32:   };
33: 
34:   return (
35:     <span className={cn(baseClasses, sizeClasses[size], statusClasses[status])}>
36:       <span className="mr-1">{statusIcons[status]}</span>
37:       {status}
38:     </span>
39:   );
40: };

================
File: src/data/visualCues.ts
================
  1: import { GrowthStage } from "@/types/core";
  2: 
  3: 
  4: 
  5: 
  6: 
  7: 
  8: export const visualCues: Record<
  9:   string,
 10:   Partial<Record<GrowthStage, string[]>>
 11: > = {
 12: 
 13:   "Little Finger Carrots": {
 14:     seedling: [
 15:       "First feathery, fern-like true leaves appear after the initial grass-like cotyledons.",
 16:       "True leaves are delicate and deeply divided with a lacy appearance.",
 17:       "Plant reaches 1-2 inches tall with pronounced carrot-like foliage.",
 18:     ],
 19:     vegetative: [
 20:       "Foliage grows to 8-10 inches tall with a deepening green color.",
 21:       "Multiple sets of feathery leaves develop, creating a robust, bushy appearance.",
 22:       "Leaf production slows as the plant channels energy to the root underground.",
 23:     ],
 24:     maturation: [
 25:       "Carrot shoulders (top of the root) begin to show at the soil surface.",
 26:       "Roots reach their mature size of 3-4 inches in length and 1/2 inch in diameter.",
 27:       "Foliage is lush, bushy, and about 10-12 inches tall.",
 28:     ],
 29:   },
 30:   "Detroit Dark Red Beets": {
 31:     vegetative: [
 32:       "The first true leaves emerge, which are broader and more rounded than the initial cotyledons.",
 33:       "True leaves display characteristic red-purple stems and prominent red veining.",
 34:       "Leaves progressively cover more ground area as the plant establishes its rosette.",
 35:     ],
 36:     maturation: [
 37:       "Beetroot shoulders begin swelling and become visible above the soil surface.",
 38:       "The root reaches its mature size, typically between golf ball and tennis ball size (1.5-3 inches).",
 39:       "Outer leaves may begin to show slight yellowing as the root reaches full maturity.",
 40:     ],
 41:   },
 42:   "Stuttgarter Onions": {
 43:     seedling: [
 44:       "Thin, grass-like shoots develop into hollow, tubular leaves.",
 45:       "The plant is established when it has 4-6 strong, upright green leaves.",
 46:     ],
 47:     vegetative: [
 48:       "Rapid leaf growth occurs, with the plant developing 8-10 flourishing leaves.",
 49:       "Leaves become notably thicker and more robust; the base remains thin like a pencil.",
 50:     ],
 51:     maturation: [
 52:       "Bulbing is triggered by 14+ hours of daily light, causing the base to swell noticeably.",
 53:       "The neck of the onion thickens and the top of the bulb may become visible at the soil line.",
 54:       "Harvest is indicated when tops begin to yellow and about 10-50% of them have fallen over.",
 55:     ],
 56:   },
 57:   "White Sweet Spanish Onions": {
 58:     seedling: [
 59:       "Thin, grass-like shoots develop into hollow, tubular leaves.",
 60:       "The plant is established when it has 4-6 strong, upright green leaves.",
 61:     ],
 62:     vegetative: [
 63:       "Rapid leaf growth occurs, with the plant developing 8-10 flourishing leaves.",
 64:       "Leaves become notably thicker and more robust; the base remains thin like a pencil.",
 65:     ],
 66:     maturation: [
 67:       "Bulbing is triggered by 14+ hours of daily light, causing the base to swell noticeably.",
 68:       "The neck of the onion thickens and the top of the bulb may become visible at the soil line.",
 69:       "Harvest is indicated when tops begin to yellow and about 10-50% of them have fallen over.",
 70:     ],
 71:   },
 72:   "Beauregard Sweet Potatoes": {
 73:     vegetative: [
 74:       "Slips develop heart-shaped leaves and establish a fibrous root system.",
 75:       "After a period of slow growth, vines begin to spread rapidly, reaching 6-12 feet with dense foliage.",
 76:     ],
 77:     maturation: [
 78:       "There are no reliable above-ground indicators of tuber size; timing is based on days from planting (90-120 days).",
 79:       "Vine growth slows and eventually stops as energy is sent to the storage roots.",
 80:       "Old leaves may begin to yellow and fall off.",
 81:     ],
 82:   },
 83: 
 84:   "Astro Arugula": {
 85:     seedling: [
 86:       "Rounded, slightly indented cotyledons appear first.",
 87:       "The first true leaves emerge; they are elongated and initially have smooth edges, unlike mature leaves.",
 88:     ],
 89:     vegetative: [
 90:       "Leaves transform from smooth to pinnately lobed, with 4-10 distinctive lobes developing.",
 91:       "The plant forms a rosette pattern and the color deepens to a darker green.",
 92:       "Harvest can begin when leaves are 2-4 inches long, around 3 weeks from planting.",
 93:     ],
 94:   },
 95:   "Baby's Leaf Spinach": {
 96:     seedling: [
 97:       "Rounded cotyledons emerge, followed by spade-shaped true leaves that are initially smooth-edged.",
 98:       "The plant begins rapid root and shoot growth.",
 99:     ],
100:     vegetative: [
101:       "A loose rosette formation with 6-12 leaves per plant develops.",
102:       "Leaves are bright green, tender, and ready for 'baby leaf' harvest when 2-4 inches long.",
103:     ],
104:   },
105:   "May Queen Lettuce": {
106:     seedling: [
107:       "Rounded cotyledons emerge, followed by smaller versions of the wavy, soft-textured mature leaves.",
108:     ],
109:     vegetative: [
110:       "An open, symmetric rosette of 8-15 smooth-edged leaves develops.",
111:       "Leaves begin to show their characteristic soft, buttery texture.",
112:     ],
113:     maturation: [
114:       "Center leaves begin to cup inward slightly while outer leaves become more horizontal.",
115:       "A color difference appears, with darker outer leaves and lighter inner leaves.",
116:       "The head is mature when it feels solid when gently squeezed.",
117:     ],
118:   },
119: 
120:   "Boston Pickling Cucumber": {
121:     vegetative: [
122:       "True leaves emerge, which are serrated, rough, and distinctly cucumber-like.",
123:       "Vines begin to develop side shoots and tendrils for climbing after 6 nodes.",
124:     ],
125:     flowering: [
126:       "Small yellow flower buds appear 4-6 weeks after planting.",
127:       "Male flowers appear first on slender stems; female flowers appear later with a tiny cucumber at their base.",
128:     ],
129:     fruiting: [
130:       "After pollination, the tiny cucumber at the base of the female flower begins to swell.",
131:       "Harvest when fruits are firm, uniformly green, and 3-6 inches long.",
132:     ],
133:   },
134:   "Sugar Snap Peas": {
135:     seedling: [
136:       "The first shoot (epicotyl) emerges from the soil in a loop, as cotyledons remain underground.",
137:     ],
138:     vegetative: [
139:       "Compound leaves with 1-3 pairs of leaflets plus tendrils for climbing develop.",
140:       "Provide climbing support as soon as tendrils appear, as this signals the start of the active vining phase.",
141:     ],
142:     flowering: [
143:       "White, pink, or purple self-pollinating flowers emerge from the leaf axils.",
144:       "This typically occurs when plants are 2-6 feet tall.",
145:     ],
146:     fruiting: [
147:       "After flowers fade, a tiny, flat pod becomes visible.",
148:       "Harvest when pods are plump with visible pea outlines but are still bright green and crisp.",
149:     ],
150:   },
151: 
152:   "Day-Neutral Strawberries": {
153:     vegetative: [
154:       "New crown leaves emerge from the center of the plant, transitioning from pale to deep green.",
155:       "The crown diameter increases as 5-6 fully expanded leaves develop.",
156:       "Remove all flowers for the first 4-6 weeks to encourage strong plant establishment.",
157:     ],
158:     flowering: [
159:       "Small white flower buds emerge from the crown center on stems rising above the foliage.",
160:       "Unlike standard strawberries, these will flower regardless of day length once mature.",
161:     ],
162:     fruiting: [
163:       "After the 5-petaled white flowers are pollinated, they develop into small green berries that gradually turn red.",
164:     ],
165:   },
166:   "Caroline Raspberries": {
167:     vegetative: [
168:       "New primocanes (first-year canes) emerge as bright green shoots.",
169:       "These canes develop alternating leaves and thorns along their length.",
170:     ],
171:     flowering: [
172:       "Flower buds develop at the terminal ends of the primocanes (the current year's growth).",
173:       "Flowers appear in clusters of 3-7. This variety does not require a cold period to flower.",
174:     ],
175:   },
176:   "Rasmus Broccoli": {
177:     seedling: [
178:       "Thick, blue-green cotyledons emerge, followed by lobed true leaves with a characteristic broccoli appearance.",
179:     ],
180:     vegetative: [
181:       "The plant develops a large, upright structure with a thick central stalk and large, grayish-green leaves.",
182:     ],
183:     maturation: [
184:       "A tiny, button-like head (pea-sized to quarter-sized) begins to form deep in the center of the plant's top leaves.",
185:       "The head is ready to harvest when it is 6-8 inches in diameter, firm, and the buds are tightly packed and uniformly green.",
186:     ],
187:   },
188: 
189:   "Greek Oregano": {
190:     vegetative: [
191:       "The plant becomes bushier with characteristic small, hairy, oval-shaped leaves and square stems.",
192:       "Essential oil content and flavor peak just before the plant begins to flower.",
193:     ],
194:   },
195:   "English Thyme": {
196:     vegetative: [
197:       "The plant develops into a dense, cushion-like appearance with small, gray-green, needle-like leaves that have white undersides.",
198:       "Aromatic intensity is at its peak just before flowering begins.",
199:     ],
200:   },
201:   "Greek Dwarf Basil": {
202:     vegetative: [
203:       "The plant forms a compact, dense, globe-like mound 6-8 inches tall with small, serrated leaves.",
204:       "Essential oil production and the characteristic spicy-anise fragrance peak just before the plant flowers.",
205:     ],
206:     flowering: [
207:       "The first sign is a change in the growth at the stem tips, forming a dense, cross-like pattern of new leaves.",
208:       "A flower stalk will begin to elongate from this point; pinch it off to prolong vegetative growth.",
209:     ],
210:   },
211: };

================
File: src/hooks/useDarkMode.ts
================
 1: import { useState, useEffect } from "react";
 2: 
 3: export const useDarkMode = () => {
 4:   const [isDarkMode, setIsDarkMode] = useState(() => {
 5: 
 6:     const saved = localStorage.getItem("darkMode");
 7:     if (saved !== null) {
 8:       return JSON.parse(saved);
 9:     }
10: 
11: 
12:     return window.matchMedia("(prefers-color-scheme: dark)").matches;
13:   });
14: 
15:   useEffect(() => {
16: 
17:     if (isDarkMode) {
18:       document.documentElement.classList.add("dark");
19:     } else {
20:       document.documentElement.classList.remove("dark");
21:     }
22: 
23: 
24:     localStorage.setItem("darkMode", JSON.stringify(isDarkMode));
25:   }, [isDarkMode]);
26: 
27: 
28:   useEffect(() => {
29:     const mediaQuery = window.matchMedia("(prefers-color-scheme: dark)");
30:     const handleChange = (e: MediaQueryListEvent) => {
31: 
32:       const saved = localStorage.getItem("darkMode");
33:       if (saved === null) {
34:         setIsDarkMode(e.matches);
35:       }
36:     };
37: 
38:     mediaQuery.addEventListener("change", handleChange);
39:     return () => mediaQuery.removeEventListener("change", handleChange);
40:   }, []);
41: 
42:   return { isDarkMode, toggleDarkMode: () => setIsDarkMode(!isDarkMode) };
43: };

================
File: src/hooks/useFirebaseAuth.ts
================
 1: import { useState, useEffect } from "react";
 2: import { User } from "firebase/auth";
 3: import { FirebaseAuthService } from "../services/firebase/authService";
 4: 
 5: export function useFirebaseAuth() {
 6:   const [user, setUser] = useState<User | null>(null);
 7:   const [loading, setLoading] = useState(true);
 8:   const [error, setError] = useState<string | null>(null);
 9: 
10:   useEffect(() => {
11:     const unsubscribe = FirebaseAuthService.onAuthStateChanged((user) => {
12:       setUser(user);
13:       setLoading(false);
14:     });
15: 
16:     return unsubscribe;
17:   }, []);
18: 
19:   const signIn = async (email: string, password: string) => {
20:     try {
21:       setError(null);
22:       setLoading(true);
23:       await FirebaseAuthService.signIn(email, password);
24:     } catch (err) {
25:       setError(err instanceof Error ? err.message : "Sign in failed");
26:       throw err;
27:     } finally {
28:       setLoading(false);
29:     }
30:   };
31: 
32:   const signUp = async (
33:     email: string,
34:     password: string,
35:     displayName?: string
36:   ) => {
37:     try {
38:       setError(null);
39:       setLoading(true);
40:       await FirebaseAuthService.signUp(email, password, displayName);
41:     } catch (err) {
42:       setError(err instanceof Error ? err.message : "Sign up failed");
43:       throw err;
44:     } finally {
45:       setLoading(false);
46:     }
47:   };
48: 
49:   const signOut = async () => {
50:     try {
51:       setError(null);
52:       await FirebaseAuthService.signOut();
53:     } catch (err) {
54:       setError(err instanceof Error ? err.message : "Sign out failed");
55:       throw err;
56:     }
57:   };
58: 
59:   const resetPassword = async (email: string) => {
60:     try {
61:       setError(null);
62:       await FirebaseAuthService.resetPassword(email);
63:     } catch (err) {
64:       setError(err instanceof Error ? err.message : "Password reset failed");
65:       throw err;
66:     }
67:   };
68: 
69:   return {
70:     user,
71:     loading,
72:     error,
73:     signIn,
74:     signUp,
75:     signOut,
76:     resetPassword,
77:   };
78: }

================
File: src/hooks/useFirebaseCareActivities.ts
================
 1: import { useState, useEffect } from "react";
 2: import { FirebaseCareActivityService } from "../services/firebase/careActivityService";
 3: import { useFirebaseAuth } from "./useFirebaseAuth";
 4: import { CareRecord } from "@/types";
 5: 
 6: export function useFirebaseCareActivities(plantId?: string) {
 7:   const [activities, setActivities] = useState<CareRecord[]>([]);
 8:   const [loading, setLoading] = useState(true);
 9:   const [error, setError] = useState<string | null>(null);
10:   const { user } = useFirebaseAuth();
11: 
12:   useEffect(() => {
13:     if (!plantId || !user?.uid) {
14:       setActivities([]);
15:       setLoading(false);
16:       return;
17:     }
18: 
19:     const unsubscribe = FirebaseCareActivityService.subscribeToPlantActivities(
20:       plantId,
21:       user.uid,
22:       (updatedActivities) => {
23:         setActivities(updatedActivities);
24:         setLoading(false);
25:         setError(null);
26:       }
27:     );
28: 
29:     return unsubscribe;
30:   }, [plantId, user?.uid]);
31: 
32:   const logActivity = async (
33:     activity: Omit<CareRecord, "id" | "createdAt" | "updatedAt">
34:   ) => {
35:     try {
36:       if (!user) throw new Error("User not authenticated");
37:       setError(null);
38:       return await FirebaseCareActivityService.createCareActivity(
39:         activity,
40:         user.uid
41:       );
42:     } catch (err) {
43:       const errorMessage =
44:         err instanceof Error ? err.message : "Failed to log activity";
45:       setError(errorMessage);
46:       throw new Error(errorMessage);
47:     }
48:   };
49: 
50:   return {
51:     activities,
52:     loading,
53:     error,
54:     logActivity,
55:   };
56: }

================
File: src/hooks/useFirstTimeUser.ts
================
 1: import { useState, useEffect } from "react";
 2: import { plantService } from "@/types/database";
 3: 
 4: export const useFirstTimeUser = () => {
 5:   const [isFirstTime, setIsFirstTime] = useState<boolean | null>(null);
 6:   const [isLoading, setIsLoading] = useState(true);
 7: 
 8:   useEffect(() => {
 9:     const checkFirstTimeUser = async () => {
10:       try {
11: 
12:         const plants = await plantService.getActivePlants();
13: 
14: 
15:         const hasCompletedOnboarding = localStorage.getItem(
16:           "smartgarden_onboarding_completed"
17:         );
18: 
19:         setIsFirstTime(plants.length === 0 && !hasCompletedOnboarding);
20:       } catch (error) {
21:         console.error("Error checking first time user:", error);
22:         setIsFirstTime(false);
23:       } finally {
24:         setIsLoading(false);
25:       }
26:     };
27: 
28:     checkFirstTimeUser();
29:   }, []);
30: 
31:   const markOnboardingComplete = () => {
32:     localStorage.setItem("smartgarden_onboarding_completed", "true");
33:     setIsFirstTime(false);
34:   };
35: 
36:   return {
37:     isFirstTime,
38:     isLoading,
39:     markOnboardingComplete,
40:   };
41: };

================
File: src/hooks/useNextPlantTask.ts
================
 1: import { useState, useEffect } from "react";
 2: import { CareSchedulingService } from "@/services/careSchedulingService";
 3: import { UpcomingTask } from "@/types/scheduling";
 4: 
 5: export const useNextPlantTask = (plantId: string) => {
 6:   const [nextTask, setNextTask] = useState<UpcomingTask | null>(null);
 7:   const [isLoading, setIsLoading] = useState(true);
 8: 
 9:   useEffect(() => {
10:     let mounted = true;
11: 
12:     const loadNextTask = async () => {
13:       try {
14:         setIsLoading(true);
15:         const task = await CareSchedulingService.getNextTaskForPlant(plantId);
16:         if (mounted) {
17:           setNextTask(task);
18:         }
19:       } catch (error) {
20:         console.error(`Failed to load next task for plant ${plantId}:`, error);
21:         if (mounted) {
22:           setNextTask(null);
23:         }
24:       } finally {
25:         if (mounted) {
26:           setIsLoading(false);
27:         }
28:       }
29:     };
30: 
31:     loadNextTask();
32: 
33:     return () => {
34:       mounted = false;
35:     };
36:   }, [plantId]);
37: 
38:   return { nextTask, isLoading };
39: };

================
File: src/hooks/useScheduledTasks.ts
================
 1: import { useState, useEffect } from "react";
 2: import { FirebaseScheduledTaskService } from "../services/firebase/scheduledTaskService";
 3: import { ScheduledTask } from "../services/ProtocolTranspilerService";
 4: import { useFirebaseAuth } from "./useFirebaseAuth";
 5: 
 6: export function useScheduledTasks() {
 7:   const [tasks, setTasks] = useState<ScheduledTask[]>([]);
 8:   const [loading, setLoading] = useState(true);
 9:   const [error, setError] = useState<string | null>(null);
10:   const { user } = useFirebaseAuth();
11: 
12:   useEffect(() => {
13:     if (!user) {
14:       setTasks([]);
15:       setLoading(false);
16:       return;
17:     }
18: 
19:     const unsubscribe = FirebaseScheduledTaskService.subscribeToUserTasks(
20:       user.uid,
21:       (userTasks) => {
22:         setTasks(userTasks);
23:         setLoading(false);
24:         setError(null);
25:       },
26:       (err) => {
27: 
28:         setError(err.message);
29:         setLoading(false);
30:       }
31:     );
32: 
33:     return unsubscribe;
34:   }, [user]);
35: 
36: 
37:   const getUpcomingFertilizationTasks = (daysAhead = 7) => {
38:     const cutoffDate = new Date();
39:     cutoffDate.setDate(cutoffDate.getDate() + daysAhead);
40: 
41:     return tasks.filter(
42:       (task) => task.taskType === "fertilize" && task.dueDate <= cutoffDate
43:     );
44:   };
45: 
46:   return {
47:     tasks,
48:     loading,
49:     error,
50:     getUpcomingFertilizationTasks,
51:   };
52: }

================
File: src/services/firebase/__mocks__/config.ts
================
1: export const db = {};
2: export const auth = {};
3: export const storage = {};
4: export const enableOfflineMode = jest.fn();
5: export const enableOnlineMode = jest.fn();

================
File: src/services/firebase/authService.ts
================
 1: import {
 2:   signInWithEmailAndPassword,
 3:   createUserWithEmailAndPassword,
 4:   signOut,
 5:   onAuthStateChanged,
 6:   User,
 7:   updateProfile,
 8:   sendPasswordResetEmail,
 9: } from "firebase/auth";
10: import { auth } from "./config";
11: 
12: export class FirebaseAuthService {
13:   static async signIn(email: string, password: string): Promise<User> {
14:     const result = await signInWithEmailAndPassword(auth, email, password);
15:     return result.user;
16:   }
17: 
18:   static async signUp(
19:     email: string,
20:     password: string,
21:     displayName?: string
22:   ): Promise<User> {
23:     const result = await createUserWithEmailAndPassword(auth, email, password);
24: 
25:     if (displayName) {
26:       await updateProfile(result.user, { displayName });
27:     }
28: 
29:     return result.user;
30:   }
31: 
32:   static async signOut(): Promise<void> {
33:     await signOut(auth);
34:   }
35: 
36:   static async resetPassword(email: string): Promise<void> {
37:     await sendPasswordResetEmail(auth, email);
38:   }
39: 
40:   static onAuthStateChanged(callback: (user: User | null) => void): () => void {
41:     return onAuthStateChanged(auth, callback);
42:   }
43: 
44:   static getCurrentUser(): User | null {
45:     return auth.currentUser;
46:   }
47: }

================
File: src/services/firebase/careActivityService.ts
================
 1: import {
 2:   collection,
 3:   addDoc,
 4:   onSnapshot,
 5:   query,
 6:   where,
 7:   orderBy,
 8:   limit,
 9: } from "firebase/firestore";
10: import { db } from "./config";
11: import {
12:   FirebaseCareRecord,
13:   convertCareActivityToFirebase,
14:   convertCareActivityFromFirebase,
15: } from "../../types/firebase";
16: import { CareRecord } from "../../types/database";
17: 
18: export class FirebaseCareActivityService {
19:   private static careActivitiesCollection = collection(db, "careActivities");
20: 
21:   static async createCareActivity(
22:     activity: Omit<CareRecord, "id" | "createdAt" | "updatedAt">,
23:     userId: string
24:   ): Promise<string> {
25:     const activityWithDates: CareRecord = {
26:       ...activity,
27:       id: "", // Will be set by Firebase
28:       createdAt: new Date(),
29:       updatedAt: new Date(),
30:     };
31: 
32:     const firebaseActivity = convertCareActivityToFirebase(
33:       activityWithDates,
34:       userId
35:     );
36:     const docRef = await addDoc(
37:       this.careActivitiesCollection,
38:       firebaseActivity
39:     );
40:     return docRef.id;
41:   }
42: 
43:   static subscribeToPlantActivities(
44:     plantId: string,
45:     callback: (activities: CareRecord[]) => void,
46:     userId: string,
47:     limitCount = 50
48:   ): () => void {
49:     const activitiesQuery = query(
50:       this.careActivitiesCollection,
51:       where("userId", "==", userId),
52: 
53:       where("plantId", "==", plantId),
54:       orderBy("date", "desc"),
55:       limit(limitCount)
56:     );
57: 
58:     return onSnapshot(activitiesQuery, (snapshot) => {
59:       const activities = snapshot.docs.map((doc) => {
60:         const data = doc.data() as FirebaseCareRecord;
61:         return convertCareActivityFromFirebase({ ...data, id: doc.id });
62:       });
63:       callback(activities);
64:     });
65:   }
66: 
67:   static subscribeToUserActivities(
68:     userId: string,
69:     callback: (activities: CareRecord[]) => void,
70:     limitCount = 100
71:   ): () => void {
72:     const activitiesQuery = query(
73:       this.careActivitiesCollection,
74:       where("userId", "==", userId),
75:       orderBy("date", "desc"),
76:       limit(limitCount)
77:     );
78: 
79:     return onSnapshot(activitiesQuery, (snapshot) => {
80:       const activities = snapshot.docs.map((doc) => {
81:         const data = doc.data() as FirebaseCareRecord;
82:         return convertCareActivityFromFirebase({ ...data, id: doc.id });
83:       });
84:       callback(activities);
85:     });
86:   }
87: }

================
File: src/services/dynamicSchedulingService.ts
================
  1: import { db, TaskCompletionRecord } from "@/types/database";
  2: import { CareActivityType, GrowthStage } from "@/types/core";
  3: import { addDays, differenceInDays } from "date-fns";
  4: import { generateUUID } from "@/utils/cn";
  5: 
  6: export interface SchedulingAdjustment {
  7:   plantId: string;
  8:   taskType: CareActivityType;
  9:   originalInterval: number;
 10:   adjustedInterval: number;
 11:   reason: string;
 12:   confidence: number;
 13: }
 14: 
 15: export class DynamicSchedulingService {
 16:   static async recordTaskCompletion(
 17:     plantId: string,
 18:     taskType: CareActivityType,
 19:     scheduledDate: Date,
 20:     actualCompletionDate: Date,
 21:     careActivityId: string,
 22:     plantStage: GrowthStage
 23:   ): Promise<void> {
 24:     try {
 25:       const varianceDays = differenceInDays(
 26:         actualCompletionDate,
 27:         scheduledDate
 28:       );
 29: 
 30:       await db.taskCompletions.add({
 31:         id: generateUUID(),
 32:         plantId,
 33:         taskType,
 34:         scheduledDate,
 35:         actualCompletionDate,
 36:         varianceDays,
 37:         careActivityId,
 38:         plantStage,
 39:         createdAt: new Date(),
 40:         updatedAt: new Date(),
 41:       });
 42:     } catch (error) {
 43:       console.error("Failed to record task completion:", error);
 44:       throw error;
 45:     }
 46:   }
 47: 
 48:   static async getNextDueDateForTask(
 49:     plantId: string,
 50:     taskType: CareActivityType,
 51:     lastCompletionDate: Date
 52:   ): Promise<Date> {
 53:     try {
 54:       const patterns = await this.getCompletionPatterns(plantId, taskType);
 55: 
 56: 
 57:       let intervalDays = 7;
 58: 
 59:       if (patterns.recommendedAdjustment !== 0 && patterns.consistency > 0.5) {
 60:         intervalDays += patterns.recommendedAdjustment;
 61:       }
 62: 
 63:       return addDays(lastCompletionDate, intervalDays);
 64:     } catch (error) {
 65:       console.error("Failed to get next due date for task:", error);
 66: 
 67:       return addDays(lastCompletionDate, 7);
 68:     }
 69:   }
 70:   static async getCompletionPatterns(
 71:     plantId: string,
 72:     taskType: CareActivityType,
 73:     lookbackDays: number = 90
 74:   ): Promise<{
 75:     averageVariance: number;
 76:     consistency: number;
 77:     recommendedAdjustment: number;
 78:   }> {
 79:     try {
 80:       const cutoffDate = addDays(new Date(), -lookbackDays);
 81: 
 82:       const completions = await db.taskCompletions
 83:         .where("plantId")
 84:         .equals(plantId)
 85:         .and(
 86:           (completion: TaskCompletionRecord) =>
 87:             completion.taskType === taskType &&
 88:             new Date(completion.scheduledDate) > cutoffDate
 89:         )
 90:         .toArray();
 91: 
 92:       if (completions.length < 3) {
 93:         return {
 94:           averageVariance: 0,
 95:           consistency: 0,
 96:           recommendedAdjustment: 0,
 97:         };
 98:       }
 99: 
100:       const variances = completions.map(
101:         (completion: TaskCompletionRecord) => completion.varianceDays
102:       );
103:       const averageVariance =
104:         variances.reduce((sum, variance) => sum + variance, 0) /
105:         variances.length;
106: 
107: 
108:       const mean = averageVariance;
109:       const squaredDiffs = variances.map((variance) =>
110:         Math.pow(variance - mean, 2)
111:       );
112:       const stdDev = Math.sqrt(
113:         squaredDiffs.reduce((sum, diff) => sum + diff, 0) / variances.length
114:       );
115:       const consistency = Math.max(0, 1 - stdDev / 7);
116: 
117: 
118:       let recommendedAdjustment = 0;
119:       if (Math.abs(averageVariance) > 1 && consistency > 0.6) {
120:         recommendedAdjustment = Math.round(averageVariance * 0.7);
121:       }
122: 
123:       return {
124:         averageVariance,
125:         consistency,
126:         recommendedAdjustment,
127:       };
128:     } catch (error) {
129:       console.error("Failed to get completion patterns:", error);
130:       return {
131:         averageVariance: 0,
132:         consistency: 0,
133:         recommendedAdjustment: 0,
134:       };
135:     }
136:   }
137: 
138:   static async getSchedulingAdjustments(
139:     plantId?: string
140:   ): Promise<SchedulingAdjustment[]> {
141:     try {
142:       const cutoffDate = addDays(new Date(), -60);
143: 
144:       let query = db.taskCompletions.where("scheduledDate").above(cutoffDate);
145: 
146:       if (plantId) {
147:         query = query.and(
148:           (completion: TaskCompletionRecord) => completion.plantId === plantId
149:         );
150:       }
151: 
152:       const completions = await query.toArray();
153: 
154: 
155:       const grouped = completions.reduce(
156:         (
157:           acc: Record<string, TaskCompletionRecord[]>,
158:           completion: TaskCompletionRecord
159:         ) => {
160:           const key = `${completion.plantId}-${completion.taskType}`;
161:           if (!acc[key]) {
162:             acc[key] = [];
163:           }
164:           acc[key].push(completion);
165:           return acc;
166:         },
167:         {}
168:       );
169: 
170:       const adjustments: SchedulingAdjustment[] = [];
171: 
172:       for (const [key, taskCompletions] of Object.entries(grouped)) {
173:         if (taskCompletions.length < 3) continue;
174: 
175:         const [plantId, taskType] = key.split("-");
176:         const patterns = await this.getCompletionPatterns(
177:           plantId,
178:           taskType as CareActivityType
179:         );
180: 
181:         if (Math.abs(patterns.recommendedAdjustment) > 0) {
182:           adjustments.push({
183:             plantId,
184:             taskType: taskType as CareActivityType,
185:             originalInterval: 7,
186:             adjustedInterval: 7 + patterns.recommendedAdjustment,
187:             reason:
188:               patterns.averageVariance > 0
189:                 ? `Tasks consistently completed ${Math.abs(
190:                     patterns.averageVariance
191:                   )} days late`
192:                 : `Tasks consistently completed ${Math.abs(
193:                     patterns.averageVariance
194:                   )} days early`,
195:             confidence: patterns.consistency,
196:           });
197:         }
198:       }
199: 
200:       return adjustments.sort((a, b) => b.confidence - a.confidence);
201:     } catch (error) {
202:       console.error("Failed to get scheduling adjustments:", error);
203:       return [];
204:     }
205:   }
206: }

================
File: src/services/index.ts
================
1: export { PlantRegistrationService } from "./PlantRegistrationService";
2: export { ProtocolTranspilerService } from "./ProtocolTranspilerService";
3: export type { ScheduledTask } from "./ProtocolTranspilerService";
4: 
5: 
6: export { plantService, varietyService } from "@/types";

================
File: src/services/PlantRegistrationService.ts
================
  1: import { PlantRecord } from "@/types";
  2: import {
  3:   ProtocolTranspilerService,
  4:   ScheduledTask,
  5: } from "./ProtocolTranspilerService";
  6: import { plantService, varietyService } from ".";
  7: 
  8: 
  9: const scheduledTasksStore: ScheduledTask[] = [];
 10: 
 11: export class PlantRegistrationService {
 12: 
 13: 
 14: 
 15:   static async registerPlant(plantData: PlantRecord): Promise<void> {
 16:     try {
 17: 
 18:       const { id, createdAt, updatedAt, ...plantDataForDb } = plantData;
 19:       await plantService.addPlant(plantDataForDb);
 20: 
 21:       const variety = await varietyService.getVariety(plantData.varietyId);
 22:       if (!variety) {
 23:         throw new Error(`Variety not found: ${plantData.varietyId}`);
 24:       }
 25: 
 26:       if (variety.protocols?.fertilization) {
 27:         const scheduledTasks =
 28:           await ProtocolTranspilerService.transpilePlantProtocol(
 29:             plantData,
 30:             variety
 31:           );
 32:         scheduledTasksStore.push(...scheduledTasks);
 33:       }
 34:     } catch (error) {
 35: 
 36:       try {
 37:         await plantService.deletePlant(plantData.id);
 38:       } catch (rollbackError) {
 39:         console.error("Failed to rollback plant creation:", rollbackError);
 40:       }
 41:       throw new Error(`Failed to register plant: ${(error as Error).message}`);
 42:     }
 43:   }
 44: 
 45: 
 46: 
 47: 
 48:   static async createPlantFromForm(formData: {
 49:     varietyId: string;
 50:     name?: string;
 51:     plantedDate: Date;
 52:     location: string;
 53:     container: string;
 54:     soilMix?: string;
 55:     notes?: string[];
 56:     quantity?: number;
 57:     reminderPreferences?: {
 58:       watering: boolean;
 59:       fertilizing: boolean;
 60:       observation: boolean;
 61:       lighting: boolean;
 62:       pruning: boolean;
 63:     };
 64:   }): Promise<PlantRecord> {
 65: 
 66:     const variety = await varietyService.getVariety(formData.varietyId);
 67:     if (!variety) {
 68:       throw new Error(`Variety not found: ${formData.varietyId}`);
 69:     }
 70: 
 71: 
 72:     const plantId = crypto.randomUUID();
 73: 
 74:     const plant: PlantRecord = {
 75:       id: plantId,
 76:       varietyId: formData.varietyId,
 77:       varietyName: variety.name,
 78:       name: formData.name,
 79:       plantedDate: formData.plantedDate,
 80:       location: formData.location,
 81:       container: formData.container,
 82:       soilMix: formData.soilMix,
 83:       isActive: true,
 84:       notes: formData.notes,
 85:       quantity: formData.quantity || 1,
 86:       reminderPreferences: formData.reminderPreferences || {
 87:         watering: true,
 88:         fertilizing: true,
 89:         observation: true,
 90:         lighting: true,
 91:         pruning: true,
 92:       },
 93:       createdAt: new Date(),
 94:       updatedAt: new Date(),
 95:     };
 96: 
 97:     await this.registerPlant(plant);
 98:     return plant;
 99:   }
100: 
101: 
102: 
103: 
104:   static getScheduledTasksForPlant(plantId: string): ScheduledTask[] {
105:     return scheduledTasksStore.filter((task) => task.plantId === plantId);
106:   }
107: 
108: 
109: 
110: 
111:   static getPendingFertilizationTasks(): ScheduledTask[] {
112:     return scheduledTasksStore.filter(
113:       (task) => task.status === "pending" && task.taskType === "fertilize"
114:     );
115:   }
116: }

================
File: src/services/StageManagementService.ts
================
 1: import { FirebasePlantService } from "./firebase/plantService";
 2: import { varietyService } from "@/types/database";
 3: import { GrowthStage } from "@/types/core";
 4: import { ProtocolTranspilerService } from "./ProtocolTranspilerService";
 5: import { FirebaseScheduledTaskService } from "./firebase/scheduledTaskService";
 6: import { toast } from "react-hot-toast";
 7: 
 8: export class StageManagementService {
 9: 
10: 
11: 
12: 
13: 
14: 
15: 
16:   static async confirmNewStage(
17:     plantId: string,
18:     newStage: GrowthStage,
19:     userId: string
20:   ): Promise<void> {
21:     const plant = await FirebasePlantService.getPlant(plantId, userId);
22:     if (!plant) throw new Error("Plant not found during stage update.");
23: 
24:     const variety = await varietyService.getVariety(plant.varietyId);
25:     if (!variety)
26:       throw new Error("Variety information could not be loaded for the plant.");
27: 
28: 
29:     await FirebasePlantService.updatePlant(plantId, {
30:       confirmedStage: newStage,
31:       stageConfirmedDate: new Date(),
32:       updatedAt: new Date(),
33:     });
34: 
35: 
36:     await FirebaseScheduledTaskService.deletePendingTasksForPlant(
37:       plantId,
38:       userId
39:     );
40: 
41: 
42:     const updatedPlant = {
43:       ...plant,
44:       confirmedStage: newStage,
45:       stageConfirmedDate: new Date(),
46:     };
47:     const newTasks = await ProtocolTranspilerService.transpileProtocolFromStage(
48:       updatedPlant,
49:       variety,
50:       newStage
51:     );
52: 
53:     if (newTasks.length > 0) {
54:       await FirebaseScheduledTaskService.createMultipleTasks(newTasks, userId);
55:       toast.success(`${newTasks.length} new care tasks have been scheduled.`);
56:     }
57:   }
58: }

================
File: src/types/protocols.ts
================
  1: import { GrowthStage, ApplicationMethod } from "./core";
  2: 
  3: export interface GrowthTimeline {
  4:   germination: number;
  5:   seedling: number;
  6:   vegetative: number;
  7:   maturation: number;
  8:   rootDevelopment?: number;
  9: }
 10: 
 11: export interface FertilizerProtocol {
 12:   product?: string;
 13:   dilution?: string;
 14:   amount?: string;
 15:   method?: ApplicationMethod;
 16: }
 17: 
 18: export interface ApplicationDetails {
 19:   dilution?: string;
 20:   amount?: string;
 21:   method?: ApplicationMethod;
 22: }
 23: 
 24: 
 25: 
 26: export interface VarietyProtocols {
 27:   watering?: Record<
 28:     GrowthStage,
 29:     {
 30:       trigger?: { moistureLevel?: string | number };
 31:       target?: { moistureLevel?: string | number };
 32:       volume?: { amount?: string | number; frequency?: string };
 33:     }
 34:   >;
 35:   fertilization?: Record<
 36:     GrowthStage,
 37:     {
 38:       schedule?: FertilizationScheduleItem[];
 39:       notes?: string[];
 40:     }
 41:   >;
 42:   lighting?: Record<
 43:     GrowthStage,
 44:     {
 45:       ppfd?: { min: number; max: number; unit: string };
 46:       photoperiod?: { hours: number };
 47:       dli?: { min: number; max: number; unit: string };
 48:     }
 49:   >;
 50:   environment?: EnvironmentalProtocol;
 51:   soilMixture?: SoilMixture;
 52:   container?: ContainerRequirements;
 53:   succession?: SuccessionProtocol;
 54:   specialRequirements?: string[];
 55: }
 56: export interface CategoryMoistureDefaults {
 57:   trigger: [number, number];
 58:   target: [number, number];
 59: }
 60: 
 61: export interface MoistureProtocolInfo {
 62:   trigger: [number, number];
 63:   target: [number, number];
 64:   varietyName: string;
 65:   currentStage: GrowthStage;
 66:   isDefault: boolean;
 67:   source: "custom" | "category" | "universal";
 68: }
 69: 
 70: export interface FertilizationScheduleItem {
 71:   taskName: string;
 72:   details: {
 73:     product: string;
 74:     dilution?: string;
 75:     amount?: string;
 76:     method?: ApplicationMethod;
 77:   };
 78:   startDays: number;
 79:   frequencyDays: number;
 80:   repeatCount: number;
 81: }
 82: 
 83: export interface StageSpecificWateringProtocol {
 84:   [stageName: string]: {
 85:     trigger: {
 86:       moistureLevel: string | number;
 87:       description?: string;
 88:     };
 89:     target: {
 90:       moistureLevel: string | number;
 91:       description?: string;
 92:     };
 93:     volume: {
 94:       amount: string;
 95:       frequency: string;
 96:       perPlant?: boolean;
 97:     };
 98:     notes?: string[];
 99:   };
100: }
101: 
102: export interface StageSpecificLightingProtocol {
103:   [stageName: string]: {
104:     ppfd: {
105:       min: number;
106:       max: number;
107:       optimal?: number;
108:       unit: "mol/m/s";
109:     };
110:     photoperiod: {
111:       hours: number;
112:       maxHours?: number;
113:       minHours?: number;
114:       constraint?: string;
115:     };
116:     dli: {
117:       min: number;
118:       max: number;
119:       unit: "mol/m/day";
120:     };
121:     notes?: string[];
122:   };
123: }
124: 
125: export interface FertilizationScheduleItem {
126:   taskName: string;
127:   details: {
128:     product: string;
129:     dilution?: string;
130:     amount?: string;
131:     method?: "soil-drench" | "foliar-spray" | "top-dress" | "mix-in-soil";
132:   };
133:   startDays: number;
134:   frequencyDays: number;
135:   repeatCount: number;
136: }
137: 
138: export interface StageSpecificFertilizationProtocol {
139:   [stageName: string]: {
140:     schedule?: FertilizationScheduleItem[];
141:     notes?: string[];
142:   };
143: }
144: 
145: 
146: export interface EnvironmentalProtocol {
147:   temperature?: {
148:     min?: number;
149:     max?: number;
150:     optimal?: number;
151:     unit: "F" | "C";
152:     criticalMax?: number;
153:     criticalMin?: number;
154:     stage?: string;
155:   };
156:   humidity?: {
157:     min?: number;
158:     max?: number;
159:     optimal?: number;
160:     criticalForStage?: string;
161:   };
162:   pH: {
163:     min: number;
164:     max: number;
165:     optimal: number;
166:   };
167:   specialConditions?: string[];
168:   constraints?: {
169:     description: string;
170:     parameter: "temperature" | "humidity" | "light" | "other";
171:     threshold: number;
172:     consequence: string;
173:   }[];
174: }
175: 
176: export interface SoilMixture {
177:   components: {
178:     [component: string]: number;
179:   };
180:   amendments?: {
181:     [amendment: string]: string;
182:   };
183: }
184: 
185: export interface ContainerRequirements {
186:   minSize?: string;
187:   depth: string;
188:   drainage?: string;
189:   staging?: {
190:     seedling?: string;
191:     intermediate?: string;
192:     final: string;
193:   };
194: }
195: 
196: export interface SuccessionProtocol {
197:   interval: number;
198:   method: "continuous" | "zoned" | "single";
199:   harvestMethod: "cut-and-come-again" | "single-harvest" | "selective";
200:   productiveWeeks?: number;
201:   notes?: string[];
202: }

================
File: src/utils/cn.ts
================
 1: import { type ClassValue, clsx } from "clsx";
 2: import { twMerge } from "tailwind-merge";
 3: 
 4: export function cn(...inputs: ClassValue[]) {
 5:   return twMerge(clsx(inputs));
 6: }
 7: 
 8: export function generateUUID() {
 9:   return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (c) {
10:     const r = (Math.random() * 16) | 0,
11:       v = c == "x" ? r : (r & 0x3) | 0x8;
12:     return v.toString(16);
13:   });
14: }

================
File: src/utils/fertilizationUtils.ts
================
 1: import { ApplicationMethod } from "@/types/core";
 2: 
 3: export const getMethodIcon = (method: ApplicationMethod | string) => {
 4:   switch (method) {
 5:     case "soil-drench":
 6:       return "";
 7:     case "foliar-spray":
 8:       return "";
 9:     case "top-dress":
10:       return "";
11:     case "side-dress":
12:       return "";
13:     default:
14:       return "";
15:   }
16: };
17: 
18: export const getMethodDisplay = (method: ApplicationMethod | string) => {
19:   switch (method) {
20:     case "soil-drench":
21:       return "Soil Drench";
22:     case "foliar-spray":
23:       return "Foliar Spray";
24:     case "top-dress":
25:       return "Top Dress";
26:     case "side-dress":
27:       return "Side Dress";
28:     default:
29:       return method;
30:   }
31: };
32: 
33: export const getMethodDescription = (method: ApplicationMethod | string) => {
34:   switch (method) {
35:     case "soil-drench":
36:       return "Apply diluted fertilizer solution directly to soil, watering thoroughly";
37:     case "foliar-spray":
38:       return "Spray diluted fertilizer directly onto leaves and stems";
39:     case "top-dress":
40:       return "Sprinkle dry fertilizer on soil surface and work in lightly";
41:     case "side-dress":
42:       return "Apply fertilizer around the base of the plant, avoiding direct contact with stems";
43:     default:
44:       return "Follow fertilizer package instructions";
45:   }
46: };
47: 
48: export const requiresWater = (method: ApplicationMethod | string): boolean => {
49:   return method === "soil-drench";
50: };

================
File: src/utils/plantDisplay.ts
================
 1: import { PlantRecord } from "@/types/database";
 2: 
 3: 
 4: 
 5: 
 6: 
 7: export function getPlantDisplayName(plant: PlantRecord): string {
 8: 
 9:   if (plant.name?.trim()) {
10:     return plant.name.trim();
11:   }
12: 
13: 
14:   if (plant.varietyName?.trim()) {
15:     return plant.varietyName.trim();
16:   }
17: 
18:   return "Unknown Plant";
19: }

================
File: src/utils/plantGrouping.ts
================
 1: import { PlantRecord } from "@/types/database";
 2: 
 3: export interface PlantGroup {
 4:   id: string;
 5:   varietyId: string;
 6:   varietyName: string;
 7:   plantedDate: Date;
 8:   container: string;
 9:   soilMix?: string;
10:   location: string;
11:   plants: PlantRecord[];
12:   setupType: "multiple-containers" | "same-container";
13: }
14: 
15: export const groupPlantsByConditions = (
16:   plants: PlantRecord[]
17: ): PlantGroup[] => {
18:   const groupMap = new Map<string, PlantRecord[]>();
19: 
20:   plants.forEach((plant) => {
21: 
22:     const key = `${plant.varietyId}-${
23:       plant.plantedDate.toISOString().split("T")[0]
24:     }-${plant.container}-${plant.soilMix || "no-soil"}-${plant.location}`;
25: 
26:     if (!groupMap.has(key)) {
27:       groupMap.set(key, []);
28:     }
29:     groupMap.get(key)!.push(plant);
30:   });
31: 
32:   const groups: PlantGroup[] = [];
33: 
34:   groupMap.forEach((plantsInGroup) => {
35:     if (plantsInGroup.length === 0) return;
36: 
37: 
38:     const templatePlant = plantsInGroup[0];
39: 
40:     groups.push({
41:       id: `group-${
42:         templatePlant.varietyId
43:       }-${templatePlant.plantedDate.getTime()}`,
44:       varietyId: templatePlant.varietyId,
45:       varietyName: templatePlant.varietyName,
46:       plantedDate: templatePlant.plantedDate,
47:       container: templatePlant.container,
48:       soilMix: templatePlant.soilMix,
49:       location: templatePlant.location,
50:       plants: plantsInGroup.sort(
51:         (a, b) => a.name?.localeCompare(b.name || "") || 0
52:       ),
53:       setupType: templatePlant.setupType || "multiple-containers",
54:     });
55:   });
56: 
57:   return groups.sort((a, b) => a.varietyName.localeCompare(b.varietyName));
58: };

================
File: src/utils/plantStage.ts
================
 1: import { PlantRecord, varietyService } from "@/types/database";
 2: import { calculateCurrentStageWithVariety } from "./growthStage";
 3: import { GrowthStage } from "@/types";
 4: 
 5: export async function getPlantCurrentStage(
 6:   plant: PlantRecord
 7: ): Promise<GrowthStage> {
 8: 
 9: 
10: 
11: 
12: 
13:   try {
14:     const variety = await varietyService.getVariety(plant.varietyId);
15: 
16:     if (!variety) {
17: 
18:       const allVarieties = await varietyService.getAllVarieties();
19:       const varietyByName = allVarieties.find(
20:         (v) => v.name === plant.varietyName
21:       );
22: 
23:       if (varietyByName) {
24:         return calculateCurrentStageWithVariety(
25:           plant.plantedDate,
26:           varietyByName
27:         );
28:       }
29: 
30:       console.warn("Could not find variety, defaulting to germination");
31:       return "germination";
32:     }
33: 
34:     return calculateCurrentStageWithVariety(plant.plantedDate, variety);
35:   } catch (error) {
36:     console.error("Error calculating stage:", error);
37:     return "germination";
38:   }
39: }

================
File: src/index.css
================
 1: :root {
 2:   font-family: system-ui, Avenir, Helvetica, Arial, sans-serif;
 3:   line-height: 1.5;
 4:   font-weight: 400;
 5: 
 6:   color-scheme: light dark;
 7:   color: rgba(255, 255, 255, 0.87);
 8:   background-color: #242424;
 9: 
10:   font-synthesis: none;
11:   text-rendering: optimizeLegibility;
12:   -webkit-font-smoothing: antialiased;
13:   -moz-osx-font-smoothing: grayscale;
14: }
15: 
16: a {
17:   font-weight: 500;
18:   color: #646cff;
19:   text-decoration: inherit;
20: }
21: a:hover {
22:   color: #535bf2;
23: }
24: 
25: body {
26:   margin: 0;
27:   display: flex;
28:   place-items: center;
29:   min-width: 320px;
30:   min-height: 100vh;
31: }
32: 
33: h1 {
34:   font-size: 3.2em;
35:   line-height: 1.1;
36: }
37: 
38: button {
39:   border-radius: 8px;
40:   border: 1px solid transparent;
41:   padding: 0.6em 1.2em;
42:   font-size: 1em;
43:   font-weight: 500;
44:   font-family: inherit;
45:   background-color: #1a1a1a;
46:   cursor: pointer;
47:   transition: border-color 0.25s;
48: }
49: button:hover {
50:   border-color: #646cff;
51: }
52: button:focus,
53: button:focus-visible {
54:   outline: 4px auto -webkit-focus-ring-color;
55: }
56: 
57: @media (prefers-color-scheme: light) {
58:   :root {
59:     color: #213547;
60:     background-color: #ffffff;
61:   }
62:   a:hover {
63:     color: #747bff;
64:   }
65:   button {
66:     background-color: #f9f9f9;
67:   }
68: }

================
File: src/main.tsx
================
 1: import React from "react";
 2: import ReactDOM from "react-dom/client";
 3: import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
 4: import { BrowserRouter } from "react-router-dom";
 5: import App from "./App.tsx";
 6: import "./styles/globals.css";
 7: 
 8: 
 9: const queryClient = new QueryClient({
10:   defaultOptions: {
11:     queries: {
12: 
13:       staleTime: 5 * 60 * 1000,
14: 
15:       gcTime: 24 * 60 * 60 * 1000,
16: 
17:       retry: (failureCount) => {
18: 
19:         if (!navigator.onLine) return false;
20:         return failureCount < 3;
21:       },
22:     },
23:   },
24: });
25: 
26: ReactDOM.createRoot(document.getElementById("root")!).render(
27:   <React.StrictMode>
28:     <QueryClientProvider client={queryClient}>
29:       <BrowserRouter>
30:         <App />
31:       </BrowserRouter>
32:     </QueryClientProvider>
33:   </React.StrictMode>
34: );

================
File: tests/e2e/helpers/auth-helper.ts
================
 1: import { Page } from "@playwright/test";
 2: 
 3: export interface TestUser {
 4:   email: string;
 5:   password: string;
 6:   name?: string;
 7: }
 8: 
 9: export const TEST_USER: TestUser = {
10:   email: "test123@example.com",
11:   password: "testpassword123",
12:   name: "Test User",
13: };
14: 
15: export class AuthHelper {
16:   constructor(private page: Page) {}
17: 
18:   async login(user: TestUser = TEST_USER): Promise<void> {
19:     await this.page.goto("/");
20: 
21: 
22:     await this.page.fill('input[type="email"]', user.email);
23:     await this.page.fill('input[type="password"]', user.password);
24:     await this.page.click('button[type="submit"]');
25: 
26: 
27:     await this.page.waitForTimeout(5000);
28: 
29: 
30:     const currentUrl = this.page.url();
31:     if (!currentUrl.includes("/")) {
32:       console.log(" Login successful, redirected to:", currentUrl);
33:     }
34:   }
35: 
36:   async logout(): Promise<void> {
37: 
38:     const userMenuSelector =
39:       '[data-testid="user-menu"], .user-menu, text="Logout", text="Sign Out"';
40:     await this.page.click(userMenuSelector);
41: 
42:     const logoutSelector =
43:       '[data-testid="logout-button"], text="Logout", text="Sign Out"';
44:     await this.page.click(logoutSelector);
45: 
46:     await this.page.waitForURL("**/");
47:   }
48: 
49:   async ensureLoggedIn(): Promise<void> {
50: 
51:     const isOnLoginPage = this.page.url().includes("/login");
52:     const hasLoginForm =
53:       (await this.page.locator('input[type="password"]').count()) > 0;
54: 
55:     if (isOnLoginPage || hasLoginForm) {
56:       await this.login();
57:     }
58:   }
59: 
60:   async createTestAccount(user: TestUser): Promise<void> {
61:     await this.page.goto("/register");
62: 
63:     if (user.name) {
64:       await this.page.fill('input[type="text"]', user.name);
65:     }
66:     await this.page.fill('input[type="email"]', user.email);
67:     await this.page.fill('input[type="password"]', user.password);
68: 
69: 
70:     const passwordInputs = this.page.locator('input[type="password"]');
71:     if ((await passwordInputs.count()) > 1) {
72:       await passwordInputs.nth(1).fill(user.password);
73:     }
74: 
75:     await this.page.click('button[type="submit"]');
76: 
77: 
78:     await this.page.waitForTimeout(5000);
79:   }
80: }

================
File: tests/e2e/helpers/auth.setup.ts
================
 1: import { test as setup } from "@playwright/test";
 2: import path from "path";
 3: import { fileURLToPath } from "url";
 4: 
 5: const __filename = fileURLToPath(import.meta.url);
 6: const __dirname = path.dirname(__filename);
 7: 
 8: const authFile = path.join(__dirname, "../playwright/.auth/user.json");
 9: 
10: setup("authenticate with existing user", async ({ page }) => {
11:   console.log(" Authenticating with test user...");
12: 
13: 
14:   await page.goto("/login");
15: 
16: 
17:   await page.fill('input[type="email"]', "test123@example.com");
18:   await page.fill('input[type="password"]', "testpassword123");
19:   await page.click('button[type="submit"]');
20: 
21:   console.log(" Login submitted, waiting for Firebase auth...");
22: 
23: 
24:   await page.waitForTimeout(8000);
25: 
26: 
27:   await page.context().storageState({ path: authFile });
28:   console.log(" Authentication state saved");
29: });

================
File: tests/e2e/helpers/debug-setup.js
================
 1: import { chromium } from "@playwright/test";
 2: 
 3: async function debugSetup() {
 4:   const browser = await chromium.launch({ headless: false });
 5:   const page = await browser.newPage();
 6: 
 7:   try {
 8:     console.log(" Debugging your app...");
 9: 
10: 
11:     await page.goto("http://localhost:5173/");
12:     await page.waitForTimeout(2000);
13: 
14:     console.log(" Current URL:", page.url());
15:     console.log(" Page title:", await page.title());
16: 
17: 
18:     const routes = ["/login", "/auth", "/signin", "/sign-in", "/"];
19: 
20:     for (const route of routes) {
21:       try {
22:         console.log(` Trying route: ${route}`);
23:         await page.goto(`http://localhost:5173${route}`);
24:         await page.waitForTimeout(1000);
25: 
26:         const currentUrl = page.url();
27:         console.log(` Result URL: ${currentUrl}`);
28: 
29: 
30:         const emailInputs = await page.locator('input[type="email"]').count();
31:         const passwordInputs = await page
32:           .locator('input[type="password"]')
33:           .count();
34:         const allInputs = await page.locator("input").count();
35: 
36:         console.log(` Email inputs found: ${emailInputs}`);
37:         console.log(` Password inputs found: ${passwordInputs}`);
38:         console.log(` Total inputs found: ${allInputs}`);
39: 
40:         if (emailInputs > 0 || passwordInputs > 0) {
41:           console.log(" Found form elements at:", route);
42: 
43: 
44:           const formHtml = await page
45:             .locator("form")
46:             .first()
47:             .innerHTML()
48:             .catch(() => "No form found");
49:           console.log(" Form HTML:", formHtml);
50: 
51:           break;
52:         }
53:       } catch (error) {
54:         console.log(` Route ${route} failed:`, error.message);
55:       }
56:     }
57: 
58:     console.log(" Debug complete. Check the console output above.");
59:   } catch (error) {
60:     console.error(" Debug setup failed:", error);
61:   } finally {
62:     await browser.close();
63:   }
64: }
65: 
66: 
67: debugSetup().catch(console.error);

================
File: tests/e2e/helpers/global-setup.ts
================
  1: import { chromium } from "@playwright/test";
  2: import path from "path";
  3: import { fileURLToPath } from "url";
  4: 
  5: const __filename = fileURLToPath(import.meta.url);
  6: const __dirname = path.dirname(__filename);
  7: 
  8: const authFile = path.join(__dirname, "../../playwright/.auth/user.json");
  9: 
 10: async function globalSetup() {
 11:   const browser = await chromium.launch();
 12:   const page = await browser.newPage();
 13: 
 14:   try {
 15:     console.log(" Setting up authentication...");
 16: 
 17:     await page.goto("http://localhost:5173/", { timeout: 10000 });
 18:     console.log(" Dev server is running");
 19: 
 20: 
 21:     await page.goto("http://localhost:5173/login");
 22:     console.log(" Found login form at: /login");
 23: 
 24: 
 25:     console.log(" Filling login form...");
 26:     const emailInput = page.locator('input[type="email"]');
 27:     const passwordInput = page.locator('input[type="password"]');
 28: 
 29:     await emailInput.fill("test@example.com");
 30:     await passwordInput.fill("testpassword123");
 31: 
 32:     console.log(" Email and password filled");
 33: 
 34: 
 35:     const submitButton = page.locator('button[type="submit"]');
 36:     await submitButton.click();
 37:     console.log(" Login submitted, waiting for Firebase auth...");
 38: 
 39: 
 40:     await page.waitForTimeout(2000);
 41: 
 42: 
 43:     const errorSelectors = [
 44:       '[data-testid*="error"]',
 45:       ".error",
 46:       '[role="alert"]',
 47:       'text="Invalid"',
 48:       'text="incorrect"',
 49:       'text="not found"',
 50:       'text="failed"',
 51:       ".text-red-500",
 52:       ".text-destructive",
 53:     ];
 54: 
 55:     let hasErrors = false;
 56:     for (const selector of errorSelectors) {
 57:       try {
 58:         const errorElement = page.locator(selector);
 59:         if ((await errorElement.count()) > 0) {
 60:           const errorText = await errorElement.first().textContent();
 61:           console.log(` Found error: ${errorText}`);
 62:           hasErrors = true;
 63:         }
 64:       } catch (error) {
 65:         console.log(error);
 66: 
 67:       }
 68:     }
 69: 
 70:     if (hasErrors) {
 71:       console.log(" Errors found, attempting to create test user...");
 72:       await createTestUser(page);
 73:       return;
 74:     }
 75: 
 76: 
 77:     console.log(" Waiting for Firebase authentication...");
 78: 
 79: 
 80:     const maxWaitTime = 15000;
 81:     const startTime = Date.now();
 82: 
 83:     while (Date.now() - startTime < maxWaitTime) {
 84: 
 85:       const currentUrl = page.url();
 86:       if (!currentUrl.includes("/login")) {
 87:         console.log(` URL changed to: ${currentUrl}`);
 88:         break;
 89:       }
 90: 
 91: 
 92:       const authIndicators = [
 93:         '[data-testid*="dashboard"]',
 94:         '[data-testid*="user"]',
 95:         'text="Dashboard"',
 96:         'text="Welcome"',
 97:         'text="Plants"',
 98:         'text="Add Plant"',
 99:         'text="Logout"',
100:         'text="Sign Out"',
101:       ];
102: 
103:       for (const indicator of authIndicators) {
104:         try {
105:           const element = page.locator(indicator);
106:           if ((await element.count()) > 0) {
107:             console.log(` Found auth indicator: ${indicator}`);
108:             await page.context().storageState({ path: authFile });
109:             console.log(" Authentication state saved");
110:             return;
111:           }
112:         } catch (error) {
113:           console.log(error);
114: 
115:         }
116:       }
117: 
118: 
119:       await page.waitForTimeout(1000);
120:     }
121: 
122: 
123:     console.log(" Final verification...");
124:     const finalUrl = page.url();
125:     console.log(` Final URL: ${finalUrl}`);
126: 
127: 
128:     await page.screenshot({ path: "debug-login-state.png" });
129:     console.log(" Debug screenshot saved as debug-login-state.png");
130: 
131: 
132:     const pageContent = await page.content();
133:     if (
134:       pageContent.includes("dashboard") ||
135:       pageContent.includes("plants") ||
136:       !pageContent.includes("password")
137:     ) {
138:       console.log(" Appears to be logged in based on page content");
139:       await page.context().storageState({ path: authFile });
140:       console.log(" Authentication state saved");
141:       return;
142:     }
143: 
144: 
145:     console.log(
146:       " Login verification inconclusive, attempting to create test user..."
147:     );
148:     await createTestUser(page);
149:   } catch (error) {
150:     console.error(" Authentication setup failed:", error);
151: 
152: 
153:     try {
154:       await page.screenshot({ path: "debug-auth-error.png" });
155:       console.log(" Error screenshot saved as debug-auth-error.png");
156:     } catch (screenshotError) {
157:       console.error(screenshotError);
158: 
159:     }
160: 
161:     throw error;
162:   } finally {
163:     await browser.close();
164:   }
165: }
166: 
167: 
168: async function createTestUser(page: any) {
169:   try {
170:     console.log(" Attempting to create test user...");
171: 
172: 
173:     const signupSelectors = [
174:       'text="Sign up"',
175:       'text="Create account"',
176:       'text="Register"',
177:       'a[href*="register"]',
178:       'a[href*="signup"]',
179:       'a[href*="sign-up"]',
180:     ];
181: 
182:     let foundSignupLink = false;
183:     for (const selector of signupSelectors) {
184:       try {
185:         const element = page.locator(selector);
186:         if ((await element.count()) > 0) {
187:           await element.click();
188:           foundSignupLink = true;
189:           console.log(` Found and clicked signup link: ${selector}`);
190:           break;
191:         }
192:       } catch (error) {
193:         console.error(error);
194: 
195:       }
196:     }
197: 
198:     if (!foundSignupLink) {
199: 
200:       const signupRoutes = ["/register", "/signup", "/sign-up"];
201:       for (const route of signupRoutes) {
202:         try {
203:           await page.goto(`http://localhost:5173${route}`);
204:           await page.waitForTimeout(1000);
205: 
206: 
207:           const hasEmailInput =
208:             (await page.locator('input[type="email"]').count()) > 0;
209:           const hasPasswordInput =
210:             (await page.locator('input[type="password"]').count()) > 0;
211: 
212:           if (hasEmailInput && hasPasswordInput) {
213:             console.log(` Found signup page at: ${route}`);
214:             foundSignupLink = true;
215:             break;
216:           }
217:         } catch (error) {
218:           console.error(error);
219: 
220:         }
221:       }
222:     }
223: 
224:     if (!foundSignupLink) {
225:       console.log(" No signup page found, cannot create test user");
226:       throw new Error("Cannot create test user - no signup page found");
227:     }
228: 
229: 
230:     await page.waitForTimeout(1000);
231: 
232:     const emailInput = page.locator('input[type="email"]');
233:     const passwordInput = page.locator('input[type="password"]').first();
234:     const confirmPasswordInput = page.locator('input[type="password"]').nth(1);
235:     const nameInput = page.locator('input[type="text"]').first();
236: 
237: 
238:     if ((await nameInput.count()) > 0) {
239:       await nameInput.fill("Test User");
240:       console.log(" Name filled");
241:     }
242: 
243:     await emailInput.fill("test@example.com");
244:     await passwordInput.fill("testpassword123");
245: 
246: 
247:     if ((await confirmPasswordInput.count()) > 0) {
248:       await confirmPasswordInput.fill("testpassword123");
249:       console.log(" Confirm password filled");
250:     }
251: 
252:     console.log(" Signup form filled");
253: 
254: 
255:     const submitButton = page.locator('button[type="submit"]');
256:     await submitButton.click();
257: 
258:     console.log(" Signup submitted, waiting for completion...");
259: 
260: 
261:     await page.waitForTimeout(5000);
262: 
263: 
264:     const currentUrl = page.url();
265:     if (!currentUrl.includes("register") && !currentUrl.includes("signup")) {
266:       console.log(" Signup appears successful");
267:       await page.context().storageState({ path: authFile });
268:       console.log(" Authentication state saved after signup");
269:       return;
270:     }
271: 
272: 
273:     const successIndicators = [
274:       '[data-testid*="dashboard"]',
275:       'text="Welcome"',
276:       'text="Dashboard"',
277:     ];
278: 
279:     for (const indicator of successIndicators) {
280:       if ((await page.locator(indicator).count()) > 0) {
281:         console.log(" Found success indicator after signup");
282:         await page.context().storageState({ path: authFile });
283:         console.log(" Authentication state saved");
284:         return;
285:       }
286:     }
287: 
288:     console.log(" Signup completed but verification uncertain");
289:     await page.context().storageState({ path: authFile });
290:     console.log(" Authentication state saved anyway");
291:   } catch (error) {
292:     console.error(" Failed to create test user:", error);
293:     throw error;
294:   }
295: }
296: 
297: export default globalSetup;

================
File: tests/e2e/helpers/simple-global-setup.ts
================
 1: import { chromium } from "@playwright/test";
 2: import path from "path";
 3: import { fileURLToPath } from "url";
 4: 
 5: const __filename = fileURLToPath(import.meta.url);
 6: const __dirname = path.dirname(__filename);
 7: 
 8: const authFile = path.join(__dirname, "../../playwright/.auth/user.json");
 9: 
10: async function globalSetup() {
11:   const browser = await chromium.launch({ headless: false });
12:   const page = await browser.newPage();
13: 
14:   try {
15:     console.log(" Setting up authentication with existing user...");
16: 
17: 
18:     await page.goto("http://localhost:5173/");
19: 
20: 
21:     await page.fill('input[type="email"]', "test123@example.com");
22:     await page.fill('input[type="password"]', "testpassword123");
23:     await page.click('button[type="submit"]');
24: 
25:     console.log(" Login submitted, waiting...");
26: 
27: 
28:     await page.waitForTimeout(3000);
29: 
30: 
31:     await page.context().storageState({ path: authFile });
32:     console.log(" Authentication state saved");
33:   } catch (error) {
34:     console.error(" Setup failed:", error);
35:     throw error;
36:   } finally {
37:     await browser.close();
38:   }
39: }
40: 
41: export default globalSetup;

================
File: tests/e2e/utils/test-data-helper.ts
================
 1: import { Page } from "@playwright/test";
 2: 
 3: export class TestDataHelper {
 4:   constructor(private page: Page) {}
 5: 
 6:   async clearUserData(): Promise<void> {
 7: 
 8:     await this.page.evaluate(() => {
 9:       localStorage.clear();
10:       sessionStorage.clear();
11: 
12: 
13:       if ("indexedDB" in window) {
14:         indexedDB.deleteDatabase("SmartGardenDB");
15:       }
16:     });
17:   }
18: 
19:   async createTestPlant(name: string = "Test Plant"): Promise<void> {
20:     await this.page.goto("/dashboard");
21:     await this.page.click('[data-testid="add-plant-button"]');
22:     await this.page.fill('[data-testid="plant-name-input"]', name);
23:     await this.page.selectOption(
24:       '[data-testid="variety-select"]',
25:       "basil-genovese"
26:     );
27:     await this.page.click('[data-testid="save-plant-button"]');
28:   }
29: }

================
File: tests/playwright/.auth/user.json
================
 1: {
 2:   "cookies": [],
 3:   "origins": [
 4:     {
 5:       "origin": "http://localhost:5173",
 6:       "localStorage": [
 7:         {
 8:           "name": "darkMode",
 9:           "value": "false"
10:         }
11:       ]
12:     }
13:   ]
14: }

================
File: .firebaserc
================
1: {
2:   "projects": {
3:     "default": "smartgarden-41f21"
4:   }
5: }

================
File: eslint.config.js
================
 1: import js from '@eslint/js'
 2: import globals from 'globals'
 3: import reactHooks from 'eslint-plugin-react-hooks'
 4: import reactRefresh from 'eslint-plugin-react-refresh'
 5: import tseslint from 'typescript-eslint'
 6: 
 7: export default tseslint.config(
 8:   { ignores: ['dist'] },
 9:   {
10:     extends: [js.configs.recommended, ...tseslint.configs.recommended],
11:     files: ['**/*.{ts,tsx}'],
12:     languageOptions: {
13:       ecmaVersion: 2020,
14:       globals: globals.browser,
15:     },
16:     plugins: {
17:       'react-hooks': reactHooks,
18:       'react-refresh': reactRefresh,
19:     },
20:     rules: {
21:       ...reactHooks.configs.recommended.rules,
22:       'react-refresh/only-export-components': [
23:         'warn',
24:         { allowConstantExport: true },
25:       ],
26:     },
27:   },
28: )

================
File: firebase.json
================
 1: {
 2:   "firestore": {
 3:     "database": "(default)",
 4:     "location": "nam5",
 5:     "rules": "firestore.rules",
 6:     "indexes": "firestore.indexes.json"
 7:   },
 8:   "storage": {
 9:     "rules": "storage.rules"
10:   },
11:   "emulators": {
12:     "auth": {
13:       "port": 9099
14:     },
15:     "firestore": {
16:       "port": 8080
17:     },
18:     "storage": {
19:       "port": 9199
20:     },
21:     "ui": {
22:       "enabled": true
23:     },
24:     "singleProjectMode": true
25:   }
26: }

================
File: playwright.config.ts
================
 1: import { defineConfig, devices } from "@playwright/test";
 2: import path from "path";
 3: import { fileURLToPath } from "url";
 4: 
 5: const __filename = fileURLToPath(import.meta.url);
 6: const __dirname = path.dirname(__filename);
 7: 
 8: export default defineConfig({
 9:   testDir: "./tests",
10:   fullyParallel: true,
11:   forbidOnly: !!process.env.CI,
12:   retries: process.env.CI ? 2 : 0,
13:   workers: process.env.CI ? 1 : undefined,
14:   reporter: "html",
15: 
16: 
17:   globalSetup: path.join(
18:     __dirname,
19:     "./tests/e2e/helpers/simple-global-setup.ts"
20:   ),
21: 
22:   use: {
23:     baseURL: "http://localhost:5173",
24:     trace: "on-first-retry",
25:     screenshot: "only-on-failure",
26:   },
27: 
28:   projects: [
29: 
30:     {
31:       name: "chromium",
32:       use: {
33:         ...devices["Desktop Chrome"],
34:         storageState: "./playwright/.auth/user.json",
35:       },
36:     },
37:   ],
38: 
39:   webServer: {
40:     command: "npm run dev",
41:     url: "http://localhost:5173",
42:     reuseExistingServer: !process.env.CI,
43:   },
44: });

================
File: postcss.config.js
================
1: export default {
2:   plugins: {
3:     tailwindcss: {},
4:     autoprefixer: {},
5:   },
6: }

================
File: repomix.config.json
================
 1: {
 2:   "output": {
 3:     "style": "plain",
 4:     "filePath": "custom-output.txt",
 5:     "removeComments": true,
 6:     "showLineNumbers": true,
 7:     "topFilesLength": 10
 8:   },
 9:   "ignore": {
10:     "customPatterns": [
11:       "logs",
12:       "*.log",
13:       "npm-debug.log*",
14:       "yarn-debug.log*",
15:       "yarn-error.log*",
16:       "pnpm-debug.log*",
17:       "lerna-debug.log*",
18:       ".cache/",
19:       ".parcel-cache/",
20:       "node_modules",
21:       "dist",
22:       "dist-ssr",
23:       "*.local",
24:       ".vscode/*",
25:       "*.suo",
26:       "*.ntvs*",
27:       "*.njsproj",
28:       "*.sln",
29:       "*.sw?",
30:       "._*",
31:       ".Spotlight-V100",
32:       ".Trashes",
33:       "ehthumbs.db",
34:       "Thumbs.db",
35:       ".vscode/",
36:       ".idea/",
37:       ".env.local",
38:       ".env.development.local",
39:       ".env.test.local",
40:       ".env.production.local",
41:       "*.tmp",
42:       "*.temp"
43:     ]
44:   }
45: }

================
File: tsconfig.app.json
================
 1: {
 2:   "compilerOptions": {
 3:     "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",
 4:     "target": "ES2020",
 5:     "useDefineForClassFields": true,
 6:     "lib": ["ES2020", "DOM", "DOM.Iterable"],
 7:     "module": "ESNext",
 8:     "skipLibCheck": true,
 9: 
10:     /* Bundler mode */
11:     "moduleResolution": "bundler",
12:     "allowImportingTsExtensions": true,
13:     "verbatimModuleSyntax": true,
14:     "moduleDetection": "force",
15:     "noEmit": true,
16:     "jsx": "react-jsx",
17: 
18:     /* Linting */
19:     "strict": true,
20:     "noUnusedLocals": true,
21:     "noUnusedParameters": true,
22:     "erasableSyntaxOnly": true,
23:     "noFallthroughCasesInSwitch": true,
24:     "noUncheckedSideEffectImports": true
25:   },
26:   "include": ["src"]
27: }

================
File: tsconfig.node.json
================
 1: {
 2:   "compilerOptions": {
 3:     "composite": true,
 4:     "skipLibCheck": true,
 5:     "module": "ESNext",
 6:     "moduleResolution": "bundler",
 7:     "allowSyntheticDefaultImports": true,
 8:     "strict": true,
 9:     "noEmit": true
10:   },
11:   "include": ["vite.config.ts"]
12: }

================
File: src/__tests__/components/AddPlant.test.tsx
================
  1: import { render, screen, waitFor } from "@testing-library/react";
  2: import userEvent from "@testing-library/user-event";
  3: import { BrowserRouter } from "react-router-dom";
  4: import AddPlant from "@/pages/plants/AddPlant";
  5: import { useFirebaseAuth } from "@/hooks/useFirebaseAuth";
  6: import { useFirebasePlants } from "@/hooks/useFirebasePlants";
  7: import { varietyService } from "@/types";
  8: 
  9: 
 10: jest.mock("@/hooks/useFirebaseAuth");
 11: jest.mock("@/hooks/useFirebasePlants");
 12: jest.mock("@/types/database");
 13: 
 14: const mockNavigate = jest.fn();
 15: jest.mock("react-router-dom", () => ({
 16:   ...jest.requireActual("react-router-dom"),
 17:   useNavigate: () => mockNavigate,
 18: }));
 19: 
 20: const mockUser = {
 21:   uid: "test-user-id",
 22:   email: "test@example.com",
 23:   displayName: "Test User",
 24: };
 25: 
 26: const mockVarieties = [
 27:   {
 28:     id: "variety-1",
 29:     name: "Test Variety",
 30:     category: "herbs" as const,
 31:     growthTimeline: {
 32:       germination: 7,
 33:       seedling: 14,
 34:       vegetative: 21,
 35:       maturation: 45,
 36:     },
 37:     createdAt: new Date(),
 38:   },
 39: ];
 40: 
 41: describe("AddPlant Page", () => {
 42:   const user = userEvent.setup();
 43: 
 44:   beforeEach(() => {
 45:     jest.clearAllMocks();
 46: 
 47:     (useFirebaseAuth as jest.Mock).mockReturnValue({
 48:       user: mockUser,
 49:       signOut: jest.fn(),
 50:     });
 51: 
 52:     (useFirebasePlants as jest.Mock).mockReturnValue({
 53:       createPlant: jest.fn().mockResolvedValue("plant-id"),
 54:     });
 55: 
 56:     (varietyService.getAllVarieties as jest.Mock).mockResolvedValue(
 57:       mockVarieties
 58:     );
 59:   });
 60: 
 61:   const renderWithRouter = (component: React.ReactElement) => {
 62:     return render(<BrowserRouter>{component}</BrowserRouter>);
 63:   };
 64: 
 65:   it("renders the add plant page with proper styling", async () => {
 66:     renderWithRouter(<AddPlant />);
 67: 
 68: 
 69:     expect(screen.getByText("Add New Plant")).toBeInTheDocument();
 70:     expect(
 71:       screen.getByText("Register a new plant to start tracking its growth")
 72:     ).toBeInTheDocument();
 73: 
 74: 
 75:     expect(
 76:       screen.getByRole("button", { name: /go back/i })
 77:     ).toBeInTheDocument();
 78: 
 79: 
 80:     expect(screen.getByText("Welcome, Test User")).toBeInTheDocument();
 81: 
 82: 
 83:     await waitFor(() => {
 84:       expect(screen.getByText("Register Your Plant")).toBeInTheDocument();
 85:     });
 86:   });
 87: 
 88:   it("navigates back to dashboard when back button is clicked", async () => {
 89:     renderWithRouter(<AddPlant />);
 90: 
 91:     const backButton = screen.getByRole("button", { name: /go back/i });
 92:     await user.click(backButton);
 93: 
 94:     expect(mockNavigate).toHaveBeenCalledWith("/");
 95:   });
 96: 
 97:   it("navigates to dashboard on successful plant registration", async () => {
 98:     renderWithRouter(<AddPlant />);
 99: 
100: 
101:     await waitFor(() => {
102:       expect(screen.getByText("Register Your Plant")).toBeInTheDocument();
103:     });
104: 
105: 
106:     const varietySelect = screen.getByLabelText(/plant variety/i);
107:     await user.selectOptions(varietySelect, "variety-1");
108: 
109: 
110:     const growBagButton = screen.getByTestId("container-type-grow-bag");
111:     await user.click(growBagButton);
112: 
113: 
114:     const soilMixtureCard = screen.getByTestId(
115:       "mixture-card-leafy-greens-standard"
116:     );
117:     await user.click(soilMixtureCard);
118: 
119: 
120:     const submitButton = screen.getByRole("button", {
121:       name: /register plant/i,
122:     });
123: 
124: 
125:     await waitFor(() => {
126:       expect(submitButton).toBeEnabled();
127:     });
128:     await user.click(submitButton);
129: 
130: 
131:     await waitFor(() => {
132:       expect(mockNavigate).toHaveBeenCalledWith("/");
133:     });
134:   });
135: 
136:   it("shows offline indicator when navigator is offline", () => {
137: 
138:     const onlineSpy = jest.spyOn(navigator, "onLine", "get");
139:     onlineSpy.mockReturnValue(false);
140: 
141:     renderWithRouter(<AddPlant />);
142: 
143: 
144:     expect(
145:       screen.getByText(
146:         /You're offline - Data will sync when connection returns/i
147:       )
148:     ).toBeInTheDocument();
149: 
150: 
151:     onlineSpy.mockRestore();
152:   });
153: 
154:   it("includes navigation component", () => {
155:     renderWithRouter(<AddPlant />);
156: 
157: 
158:     expect(screen.getByRole("navigation")).toBeInTheDocument();
159:   });
160: });

================
File: src/__tests__/components/PlantStageDisplay.test.tsx
================
 1: import { render, screen } from "@testing-library/react";
 2: import PlantStageDisplay from "@/components/plant/PlantStageDisplay";
 3: import { PlantRecord } from "@/types/database";
 4: 
 5: 
 6: jest.mock("@/hooks/useDynamicStage", () => ({
 7:   useDynamicStage: jest.fn(),
 8: }));
 9: 
10: import { useDynamicStage } from "@/hooks/useDynamicStage";
11: const mockUseDynamicStage = useDynamicStage as jest.MockedFunction<
12:   typeof useDynamicStage
13: >;
14: 
15: describe("PlantStageDisplay", () => {
16:   const mockPlant: PlantRecord = {
17:     id: "test-plant",
18:     varietyId: "test-variety",
19:     varietyName: "Test Variety",
20:     name: "Test Plant",
21:     plantedDate: new Date(),
22:     location: "Indoor",
23:     container: "5 gallon",
24:     isActive: true,
25:     createdAt: new Date(),
26:     updatedAt: new Date(),
27:   };
28: 
29:   beforeEach(() => {
30:     mockUseDynamicStage.mockReturnValue("flowering");
31:   });
32: 
33:   afterEach(() => {
34:     jest.clearAllMocks();
35:   });
36: 
37:   it("displays plant stage without emoji by default", () => {
38:     render(<PlantStageDisplay plant={mockPlant} />);
39: 
40:     expect(screen.getByText("Stage: flowering")).toBeInTheDocument();
41:     expect(screen.queryByText("")).not.toBeInTheDocument();
42:   });
43: 
44:   it("displays plant stage with emoji when showEmoji is true", () => {
45:     render(<PlantStageDisplay plant={mockPlant} showEmoji={true} />);
46: 
47:     expect(screen.getByText("Stage: flowering")).toBeInTheDocument();
48:     expect(screen.getByText("")).toBeInTheDocument();
49:   });
50: 
51:   it("applies custom className when provided", () => {
52:     render(<PlantStageDisplay plant={mockPlant} className="custom-class" />);
53: 
54:     const stageDisplay = screen.getByText(/Stage:/).closest("div");
55:     expect(stageDisplay).toHaveClass("custom-class");
56:   });
57: 
58:   it("uses calculated stage from useDynamicStage hook", () => {
59:     mockUseDynamicStage.mockReturnValue("harvest");
60: 
61:     render(<PlantStageDisplay plant={mockPlant} />);
62: 
63:     expect(screen.getByText("Stage: harvest")).toBeInTheDocument();
64:     expect(mockUseDynamicStage).toHaveBeenCalledWith(mockPlant);
65:   });
66: });

================
File: src/__tests__/components/SoilMixtureSelector.test.tsx
================
  1: import { render, screen, waitFor } from "@testing-library/react";
  2: import userEvent from "@testing-library/user-event";
  3: import SoilMixtureSelector from "@/components/plant/SoilMixtureSelector";
  4: 
  5: describe("SoilMixtureSelector", () => {
  6:   const user = userEvent.setup();
  7:   const mockOnMixtureChange = jest.fn();
  8: 
  9:   beforeEach(() => {
 10:     jest.clearAllMocks();
 11:   });
 12: 
 13:   const renderSelector = (props = {}) => {
 14:     return render(
 15:       <SoilMixtureSelector onMixtureChange={mockOnMixtureChange} {...props} />
 16:     );
 17:   };
 18: 
 19:   describe("Initial Rendering", () => {
 20:     it("renders with default state", () => {
 21:       renderSelector();
 22: 
 23:       expect(screen.getByText("Soil Mixture *")).toBeInTheDocument();
 24:       expect(
 25:         screen.getByText(
 26:           "Choose a preset mixture or create your own custom blend"
 27:         )
 28:       ).toBeInTheDocument();
 29:       expect(screen.getByText(" Create Custom Mixture")).toBeInTheDocument();
 30:     });
 31: 
 32:     it("displays all preset mixtures", () => {
 33:       renderSelector();
 34: 
 35:       expect(screen.getByText("Leafy Greens Mix")).toBeInTheDocument();
 36:       expect(screen.getByText("Root Vegetables Mix")).toBeInTheDocument();
 37:       expect(screen.getByText("Mediterranean Herbs Mix")).toBeInTheDocument();
 38:       expect(screen.getByText("Berry & Fruit Mix")).toBeInTheDocument();
 39:       expect(screen.getByText("Fruiting Plants Mix")).toBeInTheDocument();
 40:       expect(screen.getByText("Universal Garden Mix")).toBeInTheDocument();
 41:     });
 42: 
 43:     it("shows mixture descriptions and components", () => {
 44:       renderSelector();
 45: 
 46:       expect(
 47:         screen.getByText(
 48:           "Nutrient-rich blend perfect for arugula, spinach, and lettuce"
 49:         )
 50:       ).toBeInTheDocument();
 51:       expect(
 52:         screen.getByText(
 53:           /40% Coco Coir, 25% Perlite, 25% Vermiculite, 10% Worm Castings/
 54:         )
 55:       ).toBeInTheDocument();
 56:     });
 57:   });
 58: 
 59:   describe("Preset Selection", () => {
 60:     it("calls onMixtureChange when preset is clicked", async () => {
 61:       renderSelector();
 62: 
 63:       const leafyGreensCard = screen.getByTestId(
 64:         "mixture-card-leafy-greens-standard"
 65:       );
 66:       await user.click(leafyGreensCard);
 67: 
 68:       expect(mockOnMixtureChange).toHaveBeenCalledWith(
 69:         "Leafy Greens Mix: 40% Coco Coir, 25% Perlite, 25% Vermiculite, 10% Worm Castings"
 70:       );
 71:     });
 72: 
 73:     it("shows selected state when mixture is selected", () => {
 74:       renderSelector({
 75:         selectedMixture:
 76:           "Leafy Greens Mix: 40% Coco Coir, 25% Perlite, 25% Vermiculite, 10% Worm Castings",
 77:       });
 78: 
 79:       const leafyGreensCard = screen.getByTestId(
 80:         "mixture-card-leafy-greens-standard"
 81:       );
 82: 
 83:       expect(leafyGreensCard).toHaveClass("cursor-pointer");
 84:       expect(leafyGreensCard).toHaveClass(
 85:         "ring-4",
 86:         "ring-ring",
 87:         "bg-muted",
 88:         "border-ring",
 89:         "shadow-lg"
 90:       );
 91:     });
 92: 
 93:     it("displays selected mixture information", () => {
 94:       const selectedMixture =
 95:         "Root Vegetables Mix: 40% Coco Coir, 30% Perlite, 25% Vermiculite, 5% Worm Castings";
 96:       renderSelector({ selectedMixture });
 97: 
 98:       expect(screen.getByText("Selected Mixture:")).toBeInTheDocument();
 99:       expect(screen.getByText(selectedMixture)).toBeInTheDocument();
100:     });
101:   });
102: 
103:   describe("Custom Mixture Functionality", () => {
104:     it("switches to custom mode when button clicked", async () => {
105:       renderSelector();
106: 
107:       const customButton = screen.getByText(" Create Custom Mixture");
108:       await user.click(customButton);
109: 
110:       expect(screen.getByText("Custom Soil Mixture")).toBeInTheDocument();
111:       expect(screen.getByText("Mixture Description")).toBeInTheDocument();
112:       expect(screen.getByPlaceholderText(/40% coco coir/)).toBeInTheDocument();
113:     });
114: 
115:     it("allows typing in custom mixture textarea", async () => {
116:       renderSelector();
117: 
118:       const customButton = screen.getByText(" Create Custom Mixture");
119:       await user.click(customButton);
120: 
121:       const textarea = screen.getByPlaceholderText(/40% coco coir/);
122:       await user.type(textarea, "50% peat moss, 30% perlite, 20% sand");
123: 
124:       expect(textarea).toHaveValue("50% peat moss, 30% perlite, 20% sand");
125:     });
126: 
127:     it("calls onMixtureChange when custom mixture is submitted", async () => {
128:       renderSelector();
129: 
130:       const customButton = screen.getByText(" Create Custom Mixture");
131:       await user.click(customButton);
132: 
133:       const textarea = screen.getByPlaceholderText(/40% coco coir/);
134:       await user.type(textarea, "Custom mix");
135: 
136:       const saveButton = screen.getByRole("button", {
137:         name: /save custom mixture/i,
138:       });
139:       await user.click(saveButton);
140: 
141:       expect(mockOnMixtureChange).toHaveBeenCalledWith("Custom mix");
142:     });
143: 
144:     it("disables submit button when textarea is empty", async () => {
145:       renderSelector();
146: 
147:       const customButton = screen.getByText(" Create Custom Mixture");
148:       await user.click(customButton);
149: 
150:       const saveButton = screen.getByRole("button", {
151:         name: /save custom mixture/i,
152:       });
153:       expect(saveButton).toBeDisabled();
154:     });
155: 
156:     it("returns to presets when cancel button clicked", async () => {
157:       renderSelector();
158: 
159:       const customButton = screen.getByText(" Create Custom Mixture");
160:       await user.click(customButton);
161: 
162:       const cancelButton = screen.getByRole("button", {
163:         name: /cancel/i,
164:       });
165:       await user.click(cancelButton);
166: 
167:       expect(screen.getByText("Leafy Greens Mix")).toBeInTheDocument();
168:       expect(screen.queryByText("Custom Soil Mixture")).not.toBeInTheDocument();
169:     });
170: 
171:     it("closes custom mode after successful submission", async () => {
172:       renderSelector();
173: 
174:       const customButton = screen.getByText(" Create Custom Mixture");
175:       await user.click(customButton);
176: 
177:       const textarea = screen.getByPlaceholderText(/40% coco coir/);
178:       await user.type(textarea, "Custom mix");
179: 
180:       const saveButton = screen.getByRole("button", {
181:         name: /save custom mixture/i,
182:       });
183:       await user.click(saveButton);
184: 
185:       await waitFor(() => {
186:         expect(screen.getByText("Leafy Greens Mix")).toBeInTheDocument();
187:         expect(
188:           screen.queryByText("Custom Soil Mixture")
189:         ).not.toBeInTheDocument();
190:       });
191:     });
192:   });
193: 
194:   describe("Mixture Information Display", () => {
195:     it("shows components for different mixtures", () => {
196:       renderSelector();
197: 
198:       const leafyGreensComponents = screen.getAllByText(
199:         /40% Coco Coir, 25% Perlite, 25% Vermiculite, 10% Worm Castings/
200:       );
201:       expect(leafyGreensComponents.length).toBeGreaterThan(0);
202: 
203:       const rootVegComponents = screen.getAllByText(
204:         /40% Coco Coir, 30% Perlite, 25% Vermiculite, 5% Worm Castings/
205:       );
206:       expect(rootVegComponents.length).toBeGreaterThan(0);
207:     });
208: 
209:     it("shows amendments when available", () => {
210:       renderSelector();
211: 
212:       expect(
213:         screen.getByText(/Compost \(1 cup per cubic foot\)/)
214:       ).toBeInTheDocument();
215:       expect(
216:         screen.getByText(/Bone Meal \(1 tsp per gallon\)/)
217:       ).toBeInTheDocument();
218:     });
219: 
220:     it("shows suitable plants information", () => {
221:       renderSelector();
222: 
223:       expect(
224:         screen.getByText(/Arugula, Spinach, Lettuce, Kale/)
225:       ).toBeInTheDocument();
226:       expect(
227:         screen.getByText(/Carrots, Beets, Onions, Radishes/)
228:       ).toBeInTheDocument();
229:     });
230:   });
231: 
232:   describe("Edge Cases", () => {
233:     it("handles undefined selectedMixture gracefully", () => {
234:       renderSelector({ selectedMixture: undefined });
235: 
236:       expect(screen.getByText("Soil Mixture *")).toBeInTheDocument();
237:       expect(screen.queryByText("Selected Mixture:")).not.toBeInTheDocument();
238:     });
239: 
240:     it("handles empty selectedMixture gracefully", () => {
241:       renderSelector({ selectedMixture: "" });
242: 
243:       expect(screen.getByText("Soil Mixture *")).toBeInTheDocument();
244:       expect(screen.queryByText("Selected Mixture:")).not.toBeInTheDocument();
245:     });
246: 
247:     it("handles undefined plantCategory gracefully", () => {
248:       renderSelector({ plantCategory: undefined });
249: 
250:       expect(screen.getByText("Soil Mixture *")).toBeInTheDocument();
251:       expect(screen.getByText("Universal Garden Mix")).toBeInTheDocument();
252:     });
253: 
254:     it("handles custom mixture with only whitespace", async () => {
255:       renderSelector();
256: 
257:       const customButton = screen.getByText(" Create Custom Mixture");
258:       await user.click(customButton);
259: 
260:       const textarea = screen.getByPlaceholderText(/40% coco coir/);
261:       await user.type(textarea, "   ");
262: 
263:       const saveButton = screen.getByRole("button", {
264:         name: /save custom mixture/i,
265:       });
266:       expect(saveButton).toBeDisabled();
267:     });
268:   });
269: 
270:   describe("Accessibility", () => {
271:     it("has proper labels and structure", () => {
272:       renderSelector();
273: 
274:       expect(screen.getByText("Soil Mixture *")).toBeInTheDocument();
275:       expect(
276:         screen.getByText(
277:           "Choose a preset mixture or create your own custom blend"
278:         )
279:       ).toBeInTheDocument();
280:     });
281: 
282:     it("has accessible buttons", () => {
283:       renderSelector();
284: 
285:       const customButton = screen.getByRole("button", {
286:         name: /create custom mixture/i,
287:       });
288:       expect(customButton).toBeInTheDocument();
289:     });
290: 
291:     it("maintains accessibility in custom mode", async () => {
292:       renderSelector();
293: 
294:       const customButton = screen.getByText(" Create Custom Mixture");
295:       await user.click(customButton);
296: 
297:       expect(screen.getByLabelText("Mixture Description")).toBeInTheDocument();
298:       expect(
299:         screen.getByRole("button", { name: /save custom mixture/i })
300:       ).toBeInTheDocument();
301:       expect(
302:         screen.getByRole("button", { name: /cancel/i })
303:       ).toBeInTheDocument();
304:     });
305:   });
306: });

================
File: src/__tests__/integration/plantDetailReminderSettings.test.tsx
================
 1: import { render, screen, waitFor } from "@testing-library/react";
 2: import userEvent from "@testing-library/user-event";
 3: import { BrowserRouter } from "react-router-dom";
 4: import PlantDetail from "@/pages/plants/PlantDetail";
 5: import { FirebasePlantService } from "@/services/firebase/plantService";
 6: import { useFirebaseAuth } from "@/hooks/useFirebaseAuth";
 7: 
 8: 
 9: jest.mock("@/services/firebase/plantService");
10: 
11: 
12: jest.mock("@/hooks/useFirebaseAuth");
13: 
14: jest.mock("react-router-dom", () => ({
15:   ...jest.requireActual("react-router-dom"),
16:   useParams: () => ({ plantId: "test-plant-1" }),
17:   useNavigate: () => jest.fn(),
18: }));
19: 
20: describe("PlantDetail Reminder Settings Integration", () => {
21:   beforeEach(() => {
22: 
23:     (useFirebaseAuth as jest.Mock).mockReturnValue({
24:       user: { uid: "test-user-id", displayName: "Test User" },
25:       loading: false,
26:     });
27:   });
28: 
29:   it("shows and hides reminder settings when settings button is clicked", async () => {
30:     const user = userEvent.setup();
31: 
32:     (
33:       FirebasePlantService.subscribeToPlantsChanges as jest.Mock
34:     ).mockImplementation((_, callback) => {
35:       const mockPlant = {
36:         id: "test-plant-1",
37:         varietyId: "tomato-1",
38:         varietyName: "Roma Tomato",
39:         name: "My Tomato",
40:         plantedDate: new Date(),
41:         currentStage: "vegetative",
42:         location: "Indoor",
43:         container: "5 gallon pot",
44:         isActive: true,
45:         notes: [],
46:         createdAt: new Date(),
47:         updatedAt: new Date(),
48:         reminderPreferences: {
49:           watering: true,
50:           fertilizing: false,
51:           observation: true,
52:           lighting: false,
53:           pruning: true,
54:         },
55:       };
56:       callback([mockPlant]);
57:       return jest.fn();
58:     });
59: 
60:     render(
61:       <BrowserRouter>
62:         <PlantDetail />
63:       </BrowserRouter>
64:     );
65: 
66:     await waitFor(() => {
67:       expect(
68:         screen.getByRole("heading", { name: /my tomato/i, level: 1 })
69:       ).toBeInTheDocument();
70:     });
71: 
72: 
73:     expect(screen.queryByText("Reminder Preferences")).not.toBeInTheDocument();
74: 
75:     const settingsButton = screen.getByRole("button", { name: /settings/i });
76:     await user.click(settingsButton);
77: 
78: 
79:     await waitFor(() => {
80:       expect(screen.getByText("Reminder Preferences")).toBeInTheDocument();
81:     });
82: 
83:     await user.click(settingsButton);
84: 
85: 
86:     await waitFor(() => {
87:       expect(
88:         screen.queryByText("Reminder Preferences")
89:       ).not.toBeInTheDocument();
90:     });
91:   });
92: 
93:   it.skip("displays active reminder preferences correctly", async () => {
94: 
95:   });
96: });

================
File: src/__tests__/integration/plantRegistrationFlow.test.tsx
================
  1: import { render, screen, waitFor } from "@testing-library/react";
  2: import userEvent from "@testing-library/user-event";
  3: import { BrowserRouter } from "react-router-dom";
  4: import { PlantRegistrationForm } from "@/components/plant/PlantRegistrationForm";
  5: import { useFirebaseAuth } from "@/hooks/useFirebaseAuth";
  6: import { FirebasePlantService } from "@/services/firebase/plantService";
  7: import { varietyService } from "@/types/database";
  8: 
  9: 
 10: jest.mock("firebase/firestore", () => ({
 11:   getFirestore: jest.fn(() => ({})),
 12:   collection: jest.fn(),
 13:   doc: jest.fn(),
 14:   addDoc: jest.fn(),
 15:   updateDoc: jest.fn(),
 16:   onSnapshot: jest.fn(),
 17:   query: jest.fn(),
 18:   where: jest.fn(),
 19:   orderBy: jest.fn(),
 20:   Timestamp: {
 21:     now: jest.fn(() => new Date()),
 22:     fromDate: jest.fn((date) => date),
 23:   },
 24:   writeBatch: jest.fn(),
 25: }));
 26: 
 27: 
 28: jest.mock("@/hooks/useFirebaseAuth");
 29: jest.mock("@/services/firebase/plantService");
 30: jest.mock("@/types/database");
 31: 
 32: const mockUser = {
 33:   uid: "test-user-id",
 34:   email: "test@example.com",
 35:   displayName: "Test User",
 36: };
 37: 
 38: const mockVarieties = [
 39:   {
 40:     id: "variety-1",
 41:     name: "Test Variety",
 42:     category: "herbs" as const,
 43:     growthTimeline: {
 44:       germination: 7,
 45:       seedling: 14,
 46:       vegetative: 21,
 47:       maturation: 45,
 48:     },
 49:     createdAt: new Date(),
 50:   },
 51: ];
 52: 
 53: describe("Plant Registration Integration Flow", () => {
 54:   const user = userEvent.setup();
 55: 
 56:   beforeEach(() => {
 57:     jest.clearAllMocks();
 58: 
 59:     (useFirebaseAuth as jest.Mock).mockReturnValue({
 60:       user: mockUser,
 61:     });
 62: 
 63:     (varietyService.getAllVarieties as jest.Mock).mockResolvedValue(
 64:       mockVarieties
 65:     );
 66:     (FirebasePlantService.createPlant as jest.Mock).mockResolvedValue(
 67:       "new-plant-id"
 68:     );
 69:   });
 70: 
 71:   const renderWithRouter = (component: React.ReactElement) => {
 72:     return render(<BrowserRouter>{component}</BrowserRouter>);
 73:   };
 74: 
 75:   it("completes full plant registration workflow", async () => {
 76:     renderWithRouter(<PlantRegistrationForm />);
 77: 
 78: 
 79:     await waitFor(() => {
 80:       expect(screen.getByText("Register Your Plant")).toBeInTheDocument();
 81:     });
 82: 
 83: 
 84:     const varietySelect = screen.getByLabelText(/plant variety/i);
 85:     await user.selectOptions(varietySelect, "variety-1");
 86: 
 87: 
 88:     const dateInput = screen.getByLabelText(/planting date/i);
 89:     const today = new Date().toISOString().split("T")[0];
 90:     await user.clear(dateInput);
 91:     await user.type(dateInput, today);
 92: 
 93: 
 94:     const growBagButton = screen.getByText("Grow Bag");
 95:     await user.click(growBagButton);
 96: 
 97: 
 98:     await waitFor(() => {
 99:       expect(screen.getByDisplayValue("1 Gallon")).toBeInTheDocument();
100:     });
101: 
102: 
103:     const selectSoilButton = screen.getByTestId(
104:       "mixture-card-leafy-greens-standard"
105:     );
106:     await user.click(selectSoilButton);
107: 
108: 
109:     const submitButton = screen.getByRole("button", {
110:       name: /register plant/i,
111:     });
112:     await user.click(submitButton);
113: 
114: 
115:     await waitFor(() => {
116:       expect(FirebasePlantService.createPlant).toHaveBeenCalledWith(
117:         expect.objectContaining({
118:           varietyId: "variety-1",
119:           varietyName: "Test Variety",
120:           location: "Indoor",
121:           container: "1 Gallon Grow Bag",
122:           isActive: true,
123:         }),
124:         mockUser.uid
125:       );
126:     });
127:   });
128: 
129:   it("handles offline scenario gracefully", async () => {
130: 
131:     (FirebasePlantService.createPlant as jest.Mock).mockRejectedValue(
132:       new Error("Network error")
133:     );
134: 
135:     renderWithRouter(<PlantRegistrationForm />);
136: 
137:     await waitFor(() => {
138:       expect(screen.getByText("Register Your Plant")).toBeInTheDocument();
139:     });
140: 
141: 
142:     const varietySelect = screen.getByLabelText(/plant variety/i);
143:     await user.selectOptions(varietySelect, "variety-1");
144: 
145:     const growBagButton = screen.getByText("Grow Bag");
146:     await user.click(growBagButton);
147: 
148:     const selectSoilButton = screen.getByTestId(
149:       "mixture-card-leafy-greens-standard"
150:     );
151:     await user.click(selectSoilButton);
152: 
153:     const submitButton = screen.getByRole("button", {
154:       name: /register plant/i,
155:     });
156:     await user.click(submitButton);
157: 
158: 
159:     await waitFor(() => {
160:       expect(screen.getByText("Network error")).toBeInTheDocument();
161:     });
162: 
163: 
164:     expect(screen.getByDisplayValue("Test Variety")).toBeInTheDocument();
165:   });
166: });

================
File: src/__tests__/utils/plantDisplay.test.ts
================
 1: import { getPlantDisplayName } from "@/utils/plantDisplay";
 2: import { PlantRecord } from "@/types/database";
 3: 
 4: describe("getPlantDisplayName", () => {
 5:   const basePlant: PlantRecord = {
 6:     id: "test-id",
 7:     varietyId: "some-uuid-123",
 8:     varietyName: "Roma Tomato",
 9:     plantedDate: new Date(),
10:     location: "Indoor",
11:     container: "5 gallon",
12:     isActive: true,
13:     notes: [],
14:     createdAt: new Date(),
15:     updatedAt: new Date(),
16:   };
17: 
18:   it("returns custom name when provided", () => {
19:     const plant = { ...basePlant, name: "My Special Tomato" };
20:     expect(getPlantDisplayName(plant)).toBe("My Special Tomato");
21:   });
22: 
23:   it("returns variety name when no custom name", () => {
24:     const plant = { ...basePlant, name: undefined };
25:     expect(getPlantDisplayName(plant)).toBe("Roma Tomato");
26:   });
27: 
28:   it("returns fallback when no custom name or variety name", () => {
29:     const plant = { ...basePlant, name: undefined, varietyName: "" };
30:     expect(getPlantDisplayName(plant)).toBe("Unknown Plant");
31:   });
32: 
33:   it("returns fallback when varietyName is empty", () => {
34:     const plant = { ...basePlant, name: undefined, varietyName: "" };
35:     expect(getPlantDisplayName(plant)).toBe("Unknown Plant");
36:   });
37: 
38:   it("returns fallback when varietyName is whitespace only", () => {
39:     const plant = { ...basePlant, name: undefined, varietyName: "   " };
40:     expect(getPlantDisplayName(plant)).toBe("Unknown Plant");
41:   });
42: });

================
File: src/__tests__/utils/testHelpers.tsx
================
 1: import { render } from "@testing-library/react";
 2: import { BrowserRouter } from "react-router-dom";
 3: import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
 4: 
 5: interface RenderOptions {
 6:   initialEntries?: string[];
 7:   withRouter?: boolean;
 8:   queryClient?: QueryClient;
 9: }
10: 
11: export const renderWithProviders = (
12:   ui: React.ReactElement,
13:   options: RenderOptions = {}
14: ) => {
15:   const {
16:     withRouter = true,
17:     queryClient = new QueryClient({
18:       defaultOptions: {
19:         queries: {
20:           retry: false,
21:         },
22:         mutations: {
23:           retry: false,
24:         },
25:       },
26:     }),
27:   } = options;
28: 
29:   const Wrapper: React.FC<{ children: React.ReactNode }> = ({ children }) => {
30:     const content = (
31:       <QueryClientProvider client={queryClient}>{children}</QueryClientProvider>
32:     );
33: 
34:     if (withRouter) {
35:       return <BrowserRouter>{content}</BrowserRouter>;
36:     }
37: 
38:     return content;
39:   };
40: 
41:   return render(ui, { wrapper: Wrapper });
42: };
43: 
44: 
45: export const mockPlantData = [
46:   {
47:     id: "plant-1",
48:     varietyId: "tomato-1",
49:     varietyName: "Cherry Tomato",
50:     name: "My Cherry Tomato",
51:     plantedDate: new Date("2024-01-01"),
52:     currentStage: "vegetative" as const,
53:     location: "Indoor",
54:     container: "5 gallon pot",
55:     isActive: true,
56:     notes: [],
57:     createdAt: new Date(),
58:     updatedAt: new Date(),
59:   },
60:   {
61:     id: "plant-2",
62:     varietyId: "basil-1",
63:     varietyName: "Sweet Basil",
64:     name: "My Basil",
65:     plantedDate: new Date("2024-01-15"),
66:     currentStage: "seedling" as const,
67:     location: "Indoor",
68:     container: "3 gallon pot",
69:     isActive: true,
70:     notes: [],
71:     createdAt: new Date(),
72:     updatedAt: new Date(),
73:   },
74: ];
75: 
76: export const mockUser = {
77:   uid: "test-user-id",
78:   email: "test@example.com",
79:   displayName: "Test User",
80: };

================
File: src/components/layouts/EmptyState.tsx
================
 1: import React from "react";
 2: import { Card, CardContent } from "@/components/ui/Card";
 3: import { Button } from "@/components/ui/Button";
 4: import { Link } from "react-router-dom";
 5: 
 6: interface EmptyStateProps {
 7:   title: string;
 8:   description: string;
 9:   icon: string;
10:   actionLabel: string;
11:   actionTo: string;
12:   showWelcome?: boolean;
13: }
14: 
15: const EmptyState: React.FC<EmptyStateProps> = ({
16:   title,
17:   description,
18:   icon,
19:   actionLabel,
20:   actionTo,
21:   showWelcome = false,
22: }) => {
23:   return (
24:     <div className="flex items-center justify-center min-h-96">
25:       <Card className="w-full max-w-md mx-4 shadow-sm border border-border">
26:         <CardContent className="text-center py-12 px-6 space-y-6">
27:           {showWelcome && (
28:             <div className="mb-8">
29:               <h1 className="text-3xl font-bold text-foreground mb-2">
30:                  Welcome to SmartGarden
31:               </h1>
32:               <p className="text-muted-foreground">
33:                 Your digital gardening companion
34:               </p>
35:             </div>
36:           )}
37: 
38:           <div className="text-6xl mb-4" role="img" aria-label={title}>
39:             {icon}
40:           </div>
41: 
42:           <div className="space-y-3">
43:             <h2 className="text-xl font-semibold text-foreground">{title}</h2>
44:             <p className="text-muted-foreground leading-relaxed">
45:               {description}
46:             </p>
47:           </div>
48: 
49:           <div className="pt-4">
50:             <Link to={actionTo} className="block">
51:               <Button size="lg" className="w-full">
52:                 {actionLabel}
53:               </Button>
54:             </Link>
55:           </div>
56: 
57:           {showWelcome && (
58:             <div className="pt-6 border-t border-gray-100">
59:               <p className="text-sm text-muted-foreground">
60:                 Need help getting started?{" "}
61:                 <button
62:                   className="text-green-700 underline hover:text-green-800"
63:                   onClick={() => {
64:                     console.log("Show tutorial");
65:                   }}
66:                 >
67:                   View quick tutorial
68:                 </button>
69:               </p>
70:             </div>
71:           )}
72:         </CardContent>
73:       </Card>
74:     </div>
75:   );
76: };
77: 
78: export default EmptyState;

================
File: src/components/plant/PlantInfoCard.tsx
================
  1: import { useState, useEffect } from "react";
  2: import { Card, CardContent } from "@/components/ui/Card";
  3: import { Button } from "@/components/ui/Button";
  4: import { Badge } from "@/components/ui/Badge";
  5: import { PlantRecord, VarietyRecord } from "@/types/database";
  6: import { useDynamicStage } from "@/hooks/useDynamicStage";
  7: import { formatDate, getDaysSincePlanting } from "@/utils/dateUtils";
  8: import { getPlantDisplayName } from "@/utils/plantDisplay";
  9: import { useNavigate } from "react-router-dom";
 10: import { Calendar, MapPin, Package, Sun, Droplet } from "lucide-react";
 11: import { GrowthStage } from "@/types";
 12: import { varietyService } from "@/services";
 13: 
 14: interface PlantInfoCardProps {
 15:   plant: PlantRecord;
 16:   onLogCare?: (plantId: string, activityType: string) => void;
 17:   className?: string;
 18:   showQuickActions?: boolean;
 19: }
 20: 
 21: 
 22: 
 23: 
 24: 
 25: 
 26: 
 27: 
 28: const getProtocolForStage = (
 29:   protocols: any,
 30:   stage: GrowthStage
 31: ): any | null => {
 32:   if (!protocols) return null;
 33: 
 34: 
 35:   if (protocols[stage]) return protocols[stage];
 36: 
 37: 
 38:   const stageMappings: { [key in GrowthStage]?: string[] } = {
 39:     vegetative: ["vegetativeGrowth", "vegetativeVining"],
 40:     flowering: ["flowerBudFormation"],
 41:     harvest: ["fruitingHarvesting", "podSetMaturation"],
 42:     "ongoing-production": ["ongoingProduction"],
 43:     germination: ["germinationEmergence", "slipProduction"],
 44:     seedling: ["establishment"],
 45:   };
 46: 
 47:   const possibleKeys = stageMappings[stage] || [];
 48:   for (const key of possibleKeys) {
 49:     if (protocols[key]) {
 50:       return protocols[key];
 51:     }
 52:   }
 53: 
 54: 
 55:   return null;
 56: };
 57: 
 58: const PlantInfoCard = ({
 59:   plant,
 60:   onLogCare,
 61:   className = "",
 62:   showQuickActions = true,
 63: }: PlantInfoCardProps) => {
 64:   const [showActions, setShowActions] = useState(false);
 65:   const navigate = useNavigate();
 66:   const stage = useDynamicStage(plant);
 67:   const daysSincePlanting = getDaysSincePlanting(plant.plantedDate);
 68:   const plantDisplayName = getPlantDisplayName(plant);
 69:   const [variety, setVariety] = useState<VarietyRecord | null>(null);
 70: 
 71:   useEffect(() => {
 72:     const fetchVariety = async () => {
 73:       if (plant.varietyId) {
 74:         const varietyData = await varietyService.getVariety(plant.varietyId);
 75:         setVariety(varietyData || null);
 76:       }
 77:     };
 78:     fetchVariety();
 79:   }, [plant.varietyId]);
 80: 
 81:   const lightingProtocol = getProtocolForStage(
 82:     variety?.protocols?.lighting,
 83:     stage
 84:   );
 85:   const wateringProtocol = getProtocolForStage(
 86:     variety?.protocols?.watering,
 87:     stage
 88:   );
 89: 
 90:   const handleQuickAction = (activityType: string) => {
 91:     if (onLogCare) {
 92:       onLogCare(plant.id, activityType);
 93:     } else {
 94:       const params = new URLSearchParams();
 95:       params.set("plantId", plant.id);
 96:       params.set("type", activityType);
 97:       navigate(`/log-care?${params.toString()}`);
 98:     }
 99:   };
100: 
101:   const handleCardClick = () => {
102:     navigate(`/plants/${plant.id}`);
103:   };
104: 
105:   return (
106:     <Card
107:       className={`transition-all duration-200 hover:shadow-md ${className}`}
108:     >
109:       <CardContent className="p-4">
110:         <div onClick={handleCardClick} className="cursor-pointer space-y-3">
111:           <div className="flex items-start justify-between">
112:             <div className="flex-1">
113:               <h3 className="font-semibold text-foreground text-lg leading-tight">
114:                 {plantDisplayName}
115:               </h3>
116:               <div className="flex items-center gap-2 mt-1">
117:                 <Badge variant="secondary" className="text-xs">
118:                   {stage}
119:                 </Badge>
120:                 <span className="text-xs text-muted-foreground">
121:                   Day {daysSincePlanting}
122:                 </span>
123:               </div>
124:             </div>
125:           </div>
126: 
127:           <div className="space-y-2 text-sm">
128:             <div className="flex items-center gap-2 text-muted-foreground">
129:               <Calendar size={14} />
130:               <span>Planted {formatDate(plant.plantedDate)}</span>
131:             </div>
132: 
133:             {plant.location && (
134:               <div className="flex items-center gap-2 text-muted-foreground">
135:                 <MapPin size={14} />
136:                 <span>{plant.location}</span>
137:               </div>
138:             )}
139: 
140:             {plant.container && (
141:               <div className="flex items-center gap-2 text-muted-foreground">
142:                 <Package size={14} />
143:                 <span>{plant.container}</span>
144:               </div>
145:             )}
146:             {lightingProtocol && (
147:               <div className="flex items-center gap-2 text-muted-foreground">
148:                 <Sun size={14} />
149:                 <span>
150:                   {lightingProtocol.photoperiod.hours}h light | PPFD:{" "}
151:                   {lightingProtocol.ppfd.min}-{lightingProtocol.ppfd.max}{" "}
152:                   {lightingProtocol.ppfd.optimal &&
153:                     `"| Optimal " ${lightingProtocol.ppfd.optimal}`}{" "}
154:                   {lightingProtocol.ppfd.unit}
155:                 </span>
156:               </div>
157:             )}
158:             {wateringProtocol && (
159:               <div className="flex items-start gap-2 text-muted-foreground">
160:                 <Droplet size={14} className="mt-0.5 flex-shrink-0" />
161:                 <div className="flex flex-col">
162:                   {(() => {
163:                     if (wateringProtocol.volume) {
164:                       const details = [
165:                         ...wateringProtocol.volume.amount
166:                           .split(",")
167:                           .map((s: string) => s.trim()),
168:                       ];
169:                       let frequencyString = wateringProtocol.volume.frequency;
170:                       if (wateringProtocol.volume.perPlant) {
171:                         frequencyString += " per plant";
172:                       }
173:                       details.push(frequencyString);
174: 
175:                       return details.map((detail, index) => (
176:                         <span key={index}>{detail}</span>
177:                       ));
178:                     }
179:                     return (
180:                       <span>
181:                         Water at moisture:{" "}
182:                         {wateringProtocol.trigger.moistureLevel}
183:                       </span>
184:                     );
185:                   })()}
186:                 </div>
187:               </div>
188:             )}
189:           </div>
190:         </div>
191: 
192:         {showQuickActions && (
193:           <div className="mt-4 pt-3 border-t border-border">
194:             <div className="flex items-center justify-between">
195:               <div>
196:                 <div className="text-sm font-medium text-primary">
197:                   Quick Actions
198:                 </div>
199:                 <div className="text-xs text-muted-foreground">
200:                   Log activity for this plant
201:                 </div>
202:               </div>
203:               <Button
204:                 variant="outline"
205:                 size="sm"
206:                 onClick={(e) => {
207:                   e.stopPropagation();
208:                   setShowActions(!showActions);
209:                 }}
210:                 className="text-primary border-primary/50 hover:bg-primary/10"
211:               >
212:                 {showActions ? "Cancel" : "Log Care"}
213:               </Button>
214:             </div>
215: 
216:             {showActions && (
217:               <div className="grid grid-cols-2 gap-2 mt-3">
218:                 <Button
219:                   size="sm"
220:                   onClick={(e) => {
221:                     e.stopPropagation();
222:                     handleQuickAction("water");
223:                   }}
224:                   className="bg-blue-500 hover:bg-blue-600 text-white"
225:                 >
226:                    Water
227:                 </Button>
228:                 <Button
229:                   size="sm"
230:                   onClick={(e) => {
231:                     e.stopPropagation();
232:                     handleQuickAction("fertilize");
233:                   }}
234:                   className="bg-green-500 hover:bg-green-600 text-white"
235:                 >
236:                    Fertilize
237:                 </Button>
238:                 <Button
239:                   size="sm"
240:                   onClick={(e) => {
241:                     e.stopPropagation();
242:                     handleQuickAction("observe");
243:                   }}
244:                   className="bg-orange-500 hover:bg-orange-600 text-white"
245:                 >
246:                    Inspect
247:                 </Button>
248:                 <Button
249:                   size="sm"
250:                   onClick={(e) => {
251:                     e.stopPropagation();
252:                     handleQuickAction("photo");
253:                   }}
254:                   className="bg-purple-500 hover:bg-purple-600 text-white"
255:                 >
256:                    Photo
257:                 </Button>
258:               </div>
259:             )}
260:           </div>
261:         )}
262:       </CardContent>
263:     </Card>
264:   );
265: };
266: 
267: export default PlantInfoCard;

================
File: src/components/plant/PlantStageDisplay.tsx
================
 1: import { PlantRecord } from "@/types/database";
 2: import { useDynamicStage } from "@/hooks/useDynamicStage";
 3: 
 4: interface PlantStageDisplayProps {
 5:   plant: PlantRecord;
 6:   showEmoji?: boolean;
 7:   className?: string;
 8: }
 9: 
10: const PlantStageDisplay = ({
11:   plant,
12:   showEmoji = false,
13:   className = "text-sm font-medium text-muted-foreground capitalize",
14: }: PlantStageDisplayProps) => {
15:   const calculatedStage = useDynamicStage(plant);
16: 
17:   return (
18:     <div className={className}>
19:       {showEmoji && <span className="mr-1"></span>}
20:       Stage: {calculatedStage}
21:     </div>
22:   );
23: };
24: 
25: export default PlantStageDisplay;

================
File: src/components/plant/ReminderPreferencesSection.tsx
================
 1: import { Switch } from "@/components/ui/Switch";
 2: import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/Card";
 3: 
 4: 
 5: interface ReminderPreferences {
 6:   watering: boolean;
 7:   fertilizing: boolean;
 8:   observation: boolean;
 9:   lighting: boolean;
10:   pruning: boolean;
11: }
12: 
13: interface ReminderPreferencesProps {
14:   preferences: ReminderPreferences;
15:   onChange: (preferences: ReminderPreferences) => void;
16: }
17: 
18: const ReminderPreferencesSection = ({
19:   preferences,
20:   onChange,
21: }: ReminderPreferencesProps) => {
22:   const handleToggle = (key: keyof ReminderPreferences) => {
23:     onChange({
24:       ...preferences,
25:       [key]: !preferences[key],
26:     });
27:   };
28: 
29:   const reminderTypes = [
30:     {
31:       key: "watering" as const,
32:       label: "Watering",
33:       icon: "",
34:       description: "Get notified when watering is due",
35:     },
36:     {
37:       key: "fertilizing" as const,
38:       label: "Fertilizing",
39:       icon: "",
40:       description: "Reminders for feeding schedule",
41:     },
42:     {
43:       key: "observation" as const,
44:       label: "Health Checks",
45:       icon: "",
46:       description: "Regular observation reminders",
47:     },
48:     {
49:       key: "lighting" as const,
50:       label: "Lighting",
51:       icon: "",
52:       description: "Light schedule adjustments",
53:     },
54:     {
55:       key: "pruning" as const,
56:       label: "Maintenance",
57:       icon: "",
58:       description: "Pruning and maintenance tasks",
59:     },
60:   ];
61: 
62:   return (
63:     <Card className="border-emerald-200 bg-emerald-50/30">
64:       <CardHeader className="pb-3">
65:         <CardTitle className="text-lg flex items-center gap-2">
66:           <span></span>
67:           Reminder Preferences
68:         </CardTitle>
69:         <p className="text-sm text-muted-foreground">
70:           Choose which types of care reminders you'd like to receive for this
71:           plant
72:         </p>
73:       </CardHeader>
74:       <CardContent className="space-y-3">
75:         {reminderTypes.map(({ key, label, icon, description }) => (
76:           <div
77:             key={key}
78:             className="flex items-center justify-between p-3 rounded-lg border border-emerald-100 bg-card/50 hover:bg-card/80 transition-colors"
79:           >
80:             <div className="flex-1">
81:               <div className="flex items-center gap-2 mb-1">
82:                 <span className="text-lg">{icon}</span>
83:                 <span className="font-medium text-foreground">{label}</span>
84:               </div>
85:               <p className="text-sm text-muted-foreground">{description}</p>
86:             </div>
87:             <Switch
88:               checked={preferences[key]}
89:               onCheckedChange={() => handleToggle(key)}
90:               className="ml-4"
91:             />
92:           </div>
93:         ))}
94:       </CardContent>
95:     </Card>
96:   );
97: };
98: 
99: export default ReminderPreferencesSection;

================
File: src/components/ui/DarkModeToggle.tsx
================
 1: import React from "react";
 2: import { useDarkMode } from "@/hooks/useDarkMode";
 3: import { cn } from "@/utils/cn";
 4: 
 5: interface DarkModeToggleProps {
 6:   size?: "sm" | "md" | "lg";
 7:   className?: string;
 8:   showLabels?: boolean;
 9: }
10: 
11: export const DarkModeToggle: React.FC<DarkModeToggleProps> = ({
12:   size = "md",
13:   className,
14:   showLabels = false,
15: }) => {
16:   const { isDarkMode, toggleDarkMode } = useDarkMode();
17: 
18:   const sizeClasses = {
19:     sm: {
20:       button: "w-12 h-6",
21:       circle: "w-4 h-4",
22:       translate: "translate-x-6",
23:       icon: "text-xs",
24:     },
25:     md: {
26:       button: "w-14 h-7",
27:       circle: "w-5 h-5",
28:       translate: "translate-x-7",
29:       icon: "text-sm",
30:     },
31:     lg: {
32:       button: "w-16 h-8",
33:       circle: "w-6 h-6",
34:       translate: "translate-x-8",
35:       icon: "text-base",
36:     },
37:   };
38: 
39:   const sizes = sizeClasses[size];
40: 
41:   return (
42:     <div className={cn("flex items-center gap-2", className)}>
43:       {showLabels && (
44:         <span
45:           className={cn(
46:             "relative inline-flex flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2",
47:             sizes.button,
48:             isDarkMode
49:               ? "bg-emerald-600 hover:bg-emerald-700"
50:               : "bg-gray-300 hover:bg-gray-400 dark:bg-gray-600 dark:hover:bg-background0"
51:           )}
52:         >
53:           
54:         </span>
55:       )}
56: 
57:       <button
58:         type="button"
59:         onClick={toggleDarkMode}
60:         className={cn(
61:           "relative inline-flex flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2",
62:           sizes.button,
63:           isDarkMode
64:             ? "bg-emerald-600 hover:bg-emerald-700"
65:             : "bg-gray-300 hover:bg-gray-400 dark:bg-gray-600 dark:hover:bg-background0"
66:         )}
67:         aria-label={`Switch to ${isDarkMode ? "light" : "dark"} mode`}
68:       >
69:         <span
70:           className={cn(
71:             "pointer-events-none inline-block rounded-full bg-card shadow transform ring-0 transition duration-200 ease-in-out flex items-center justify-center",
72:             sizes.circle,
73:             isDarkMode ? sizes.translate : "translate-x-0"
74:           )}
75:         >
76:           <span className={cn(sizes.icon)}>{isDarkMode ? "" : ""}</span>
77:         </span>
78:       </button>
79: 
80:       {showLabels && (
81:         <span
82:           className={cn(
83:             "text-sm font-medium transition-colors",
84:             isDarkMode
85:               ? "text-emerald-700 dark:text-emerald-500"
86:               : "text-muted-foreground dark:text-muted-foreground"
87:           )}
88:         >
89:           
90:         </span>
91:       )}
92:     </div>
93:   );
94: };

================
File: src/components/ui/LocationToggle.tsx
================
 1: import React from "react";
 2: import { cn } from "@/utils/cn";
 3: 
 4: interface LocationToggleProps {
 5:   isOutdoor: boolean;
 6:   onChange: (isOutdoor: boolean) => void;
 7:   disabled?: boolean;
 8:   className?: string;
 9: }
10: 
11: export const LocationToggle: React.FC<LocationToggleProps> = ({
12:   isOutdoor,
13:   onChange,
14:   disabled = false,
15:   className,
16: }) => {
17:   return (
18:     <div
19:       className={cn("relative inline-flex rounded-lg p-1 bg-muted", className)}
20:     >
21:       <button
22:         type="button"
23:         disabled={disabled}
24:         onClick={() => onChange(false)}
25:         className={cn(
26:           "relative flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2",
27:           !isOutdoor
28:             ? "bg-card text-emerald-700 shadow-sm"
29:             : "text-muted-foreground hover:text-foreground",
30:           disabled && "opacity-50 cursor-not-allowed"
31:         )}
32:       >
33:         <span className="text-lg"></span>
34:         <span>Indoor</span>
35:       </button>
36: 
37:       <button
38:         type="button"
39:         disabled={disabled}
40:         onClick={() => onChange(true)}
41:         className={cn(
42:           "relative flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2",
43:           isOutdoor
44:             ? "bg-card text-emerald-700 shadow-sm"
45:             : "text-muted-foreground hover:text-foreground",
46:           disabled && "opacity-50 cursor-not-allowed"
47:         )}
48:       >
49:         <span className="text-lg"></span>
50:         <span>Outdoor</span>
51:       </button>
52:     </div>
53:   );
54: };

================
File: src/components/ui/Switch.tsx
================
  1: import React from "react";
  2: import { cn } from "@/utils/cn";
  3: 
  4: interface SwitchProps {
  5:   checked: boolean;
  6:   onCheckedChange: (checked: boolean) => void;
  7:   disabled?: boolean;
  8:   leftLabel?: string;
  9:   rightLabel?: string;
 10:   leftIcon?: React.ReactNode;
 11:   rightIcon?: React.ReactNode;
 12:   size?: "sm" | "md" | "lg";
 13:   className?: string;
 14:   id?: string;
 15:   "aria-label"?: string;
 16:   "aria-labelledby"?: string;
 17: }
 18: 
 19: export const Switch: React.FC<SwitchProps> = ({
 20:   checked,
 21:   onCheckedChange,
 22:   disabled = false,
 23:   leftLabel,
 24:   rightLabel,
 25:   leftIcon,
 26:   rightIcon,
 27:   size = "md",
 28:   className,
 29:   id,
 30:   "aria-label": ariaLabel,
 31:   "aria-labelledby": ariaLabelledBy,
 32: }) => {
 33:   const sizeClasses = {
 34:     sm: {
 35:       track: "w-10 h-5",
 36:       thumb: "w-4 h-4",
 37:       translate: "translate-x-5",
 38:       text: "text-sm",
 39:       gap: "gap-2",
 40:     },
 41:     md: {
 42:       track: "w-12 h-6",
 43:       thumb: "w-5 h-5",
 44:       translate: "translate-x-6",
 45:       text: "text-base",
 46:       gap: "gap-3",
 47:     },
 48:     lg: {
 49:       track: "w-14 h-7",
 50:       thumb: "w-6 h-6",
 51:       translate: "translate-x-7",
 52:       text: "text-lg",
 53:       gap: "gap-4",
 54:     },
 55:   };
 56: 
 57:   const sizes = sizeClasses[size];
 58: 
 59:   return (
 60:     <div className={cn("flex items-center", sizes.gap, className)}>
 61:       {}
 62:       {(leftLabel || leftIcon) && (
 63:         <div
 64:           className={cn(
 65:             "flex items-center gap-2 transition-colors duration-200",
 66:             sizes.text,
 67:             !checked
 68:               ? "text-emerald-700 font-semibold"
 69:               : "text-muted-foreground",
 70:             disabled && "opacity-50"
 71:           )}
 72:         >
 73:           {leftIcon && <span className="flex-shrink-0">{leftIcon}</span>}
 74:           {leftLabel && <span>{leftLabel}</span>}
 75:         </div>
 76:       )}
 77: 
 78:       {}
 79:       <button
 80:         type="button"
 81:         role="switch"
 82:         aria-checked={checked}
 83:         aria-label={ariaLabel}
 84:         aria-labelledby={ariaLabelledBy}
 85:         id={id}
 86:         disabled={disabled}
 87:         onClick={() => onCheckedChange(!checked)}
 88:         className={cn(
 89:           "relative inline-flex flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2",
 90:           sizes.track,
 91:           checked
 92:             ? "bg-emerald-600 hover:bg-emerald-700"
 93:             : "bg-gray-300 hover:bg-gray-400",
 94:           disabled && "cursor-not-allowed opacity-50 hover:bg-gray-300"
 95:         )}
 96:       >
 97:         <span
 98:           className={cn(
 99:             "pointer-events-none inline-block rounded-full bg-card shadow transform ring-0 transition duration-200 ease-in-out",
100:             sizes.thumb,
101:             checked ? sizes.translate : "translate-x-0"
102:           )}
103:         />
104:       </button>
105: 
106:       {}
107:       {(rightLabel || rightIcon) && (
108:         <div
109:           className={cn(
110:             "flex items-center gap-2 transition-colors duration-200",
111:             sizes.text,
112:             checked
113:               ? "text-emerald-700 font-semibold"
114:               : "text-muted-foreground",
115:             disabled && "opacity-50"
116:           )}
117:         >
118:           {rightIcon && <span className="flex-shrink-0">{rightIcon}</span>}
119:           {rightLabel && <span>{rightLabel}</span>}
120:         </div>
121:       )}
122:     </div>
123:   );
124: };

================
File: src/components/AuthForm.tsx
================
  1: import React, { useState } from "react";
  2: import { useFirebaseAuth } from "../hooks/useFirebaseAuth";
  3: import { Card, CardContent, CardHeader, CardTitle } from "./ui/Card";
  4: import { Button } from "./ui/Button";
  5: import { Input } from "./ui/Input";
  6: 
  7: export const AuthForm = () => {
  8:   const [isSignUp, setIsSignUp] = useState(false);
  9:   const [email, setEmail] = useState("");
 10:   const [password, setPassword] = useState("");
 11:   const [displayName, setDisplayName] = useState("");
 12:   const { signIn, signUp, loading, error } = useFirebaseAuth();
 13: 
 14:   const handleSubmit = async (e: React.FormEvent) => {
 15:     e.preventDefault();
 16: 
 17:     try {
 18:       if (isSignUp) {
 19:         await signUp(email, password, displayName);
 20:       } else {
 21:         await signIn(email, password);
 22:       }
 23:     } catch {
 24:       // Error is handled by the hook
 25:     }
 26:   };
 27: 
 28:   return (
 29:     <div className="min-h-screen flex items-center justify-center bg-gray-50">
 30:       <Card className="w-full max-w-md">
 31:         <CardHeader>
 32:           <CardTitle className="text-center">
 33:             {isSignUp ? "Create Account" : "Sign In"}
 34:           </CardTitle>
 35:         </CardHeader>
 36:         <CardContent>
 37:           <form onSubmit={handleSubmit} className="space-y-4">
 38:             {isSignUp && (
 39:               <div>
 40:                 <label
 41:                   htmlFor="displayName"
 42:                   className="block text-sm font-medium text-foreground mb-2"
 43:                 >
 44:                   Display Name
 45:                 </label>
 46:                 <Input
 47:                   id="displayName"
 48:                   type="text"
 49:                   placeholder="Display Name"
 50:                   value={displayName}
 51:                   onChange={(e: React.ChangeEvent<HTMLInputElement>) =>
 52:                     setDisplayName(e.target.value)
 53:                   }
 54:                   required
 55:                 />
 56:               </div>
 57:             )}
 58:             <div>
 59:               <label
 60:                 htmlFor="email"
 61:                 className="block text-sm font-medium text-foreground mb-2"
 62:               >
 63:                 Email
 64:               </label>
 65:               <Input
 66:                 id="email"
 67:                 type="email"
 68:                 placeholder="Email"
 69:                 value={email}
 70:                 onChange={(e: React.ChangeEvent<HTMLInputElement>) =>
 71:                   setEmail(e.target.value)
 72:                 }
 73:                 required
 74:               />
 75:             </div>
 76:             <div>
 77:               <label
 78:                 htmlFor="password"
 79:                 className="block text-sm font-medium text-foreground mb-2"
 80:               >
 81:                 Password
 82:               </label>
 83:               <Input
 84:                 id="password"
 85:                 type="password"
 86:                 placeholder=""
 87:                 value={password}
 88:                 onChange={(e: React.ChangeEvent<HTMLInputElement>) =>
 89:                   setPassword(e.target.value)
 90:                 }
 91:                 required
 92:               />
 93:             </div>
 94: 
 95:             {error && <div className="text-red-600 text-sm">{error}</div>}
 96: 
 97:             <Button type="submit" className="w-full" loading={loading}>
 98:               {isSignUp ? "Create Account" : "Sign In"}
 99:             </Button>
100: 
101:             <Button
102:               type="button"
103:               variant="ghost"
104:               className="w-full"
105:               onClick={() => setIsSignUp(!isSignUp)}
106:             >
107:               {isSignUp
108:                 ? "Already have an account? Sign in"
109:                 : "Don't have an account? Sign up"}
110:             </Button>
111:           </form>
112:         </CardContent>
113:       </Card>
114:     </div>
115:   );
116: };

================
File: src/hooks/useAppInitialization.ts
================
 1: import { useEffect } from "react";
 2: import { initializeDatabase } from "@/db/seedData";
 3: 
 4: export function useAppInitialization() {
 5:   useEffect(() => {
 6:     const initializeApp = async () => {
 7:       try {
 8:         console.log(" Initializing database...");
 9:         await initializeDatabase();
10:         console.log(" Database initialization complete");
11:       } catch (error) {
12:         console.error(" Error during app initialization:", error);
13:       }
14:     };
15: 
16:     initializeApp();
17:   }, []);
18: }

================
File: src/hooks/useFirebasePlants.ts
================
 1: import { useState, useEffect } from "react";
 2: import { FirebasePlantService } from "../services/firebase/plantService";
 3: import { PlantRecord } from "../types/database";
 4: import { useFirebaseAuth } from "./useFirebaseAuth";
 5: 
 6: export function useFirebasePlants(includeInactive = false) {
 7:   const [plants, setPlants] = useState<PlantRecord[]>([]);
 8:   const [loading, setLoading] = useState(true);
 9:   const [error, setError] = useState<string | null>(null);
10:   const { user } = useFirebaseAuth();
11: 
12:   useEffect(() => {
13:     if (!user?.uid) {
14:       setPlants([]);
15:       setLoading(false);
16:       return;
17:     }
18: 
19: 
20:     if (typeof user.uid !== "string") {
21:       console.error(" user.uid is not a string:", user.uid);
22:       setError("Invalid user authentication");
23:       setLoading(false);
24:       return;
25:     }
26: 
27:     const unsubscribe = FirebasePlantService.subscribeToPlantsChanges(
28:       user.uid,
29:       (updatedPlants) => {
30:         setPlants(updatedPlants);
31:         setLoading(false);
32:         setError(null);
33:       },
34:       { includeInactive }
35:     );
36: 
37:     return unsubscribe;
38:   }, [user?.uid, includeInactive]);
39: 
40:   const createPlant = async (
41:     plant: Omit<PlantRecord, "id" | "createdAt" | "updatedAt">
42:   ) => {
43:     try {
44:       if (!user) {
45:         throw new Error("User not authenticated");
46:       }
47:       setError(null);
48:       return await FirebasePlantService.createPlant(plant, user.uid);
49:     } catch (err) {
50:       const errorMessage =
51:         err instanceof Error ? err.message : "Failed to create plant";
52:       setError(errorMessage);
53:       throw new Error(errorMessage);
54:     }
55:   };
56: 
57:   const updatePlant = async (
58:     plantId: string,
59:     updates: Partial<PlantRecord>
60:   ) => {
61:     try {
62:       setError(null);
63:       await FirebasePlantService.updatePlant(plantId, updates);
64:     } catch (err) {
65:       const errorMessage =
66:         err instanceof Error ? err.message : "Failed to update plant";
67:       setError(errorMessage);
68:       throw new Error(errorMessage);
69:     }
70:   };
71: 
72:   const deletePlant = async (plantId: string) => {
73:     try {
74:       setError(null);
75:       await FirebasePlantService.deletePlant(plantId);
76:     } catch (err) {
77:       const errorMessage =
78:         err instanceof Error ? err.message : "Failed to delete plant";
79:       setError(errorMessage);
80:       throw new Error(errorMessage);
81:     }
82:   };
83: 
84:   return {
85:     plants,
86:     loading,
87:     error,
88:     createPlant,
89:     updatePlant,
90:     deletePlant,
91:   };
92: }

================
File: src/pages/care/PhotoCapture.tsx
================
  1: import React, { useState, useRef } from "react";
  2: import { Button } from "@/components/ui/Button";
  3: 
  4: interface PhotoCaptureProps {
  5:   photos: string[];
  6:   onPhotosChange: (photos: string[]) => void;
  7:   maxPhotos?: number;
  8: }
  9: 
 10: export function PhotoCapture({
 11:   photos,
 12:   onPhotosChange,
 13:   maxPhotos = 5,
 14: }: PhotoCaptureProps) {
 15:   const [isCapturing, setIsCapturing] = useState(false);
 16:   const [error, setError] = useState<string | null>(null);
 17:   const videoRef = useRef<HTMLVideoElement>(null);
 18:   const canvasRef = useRef<HTMLCanvasElement>(null);
 19:   const streamRef = useRef<MediaStream | null>(null);
 20: 
 21: 
 22:   async function startCamera() {
 23:     setError(null);
 24:     setIsCapturing(true);
 25: 
 26:     try {
 27: 
 28:       const stream = await navigator.mediaDevices.getUserMedia({
 29:         video: {
 30:           facingMode: "environment",
 31:           width: { ideal: 1280 },
 32:           height: { ideal: 720 },
 33:         },
 34:       });
 35: 
 36:       if (videoRef.current) {
 37:         videoRef.current.srcObject = stream;
 38:         streamRef.current = stream;
 39:       }
 40:     } catch (err) {
 41:       console.error("Failed to start camera:", err);
 42:       setError("Unable to access camera. Please check permissions.");
 43:       setIsCapturing(false);
 44:     }
 45:   }
 46: 
 47: 
 48:   function stopCamera() {
 49:     if (streamRef.current) {
 50:       streamRef.current.getTracks().forEach((track) => track.stop());
 51:       streamRef.current = null;
 52:     }
 53:     setIsCapturing(false);
 54:   }
 55: 
 56: 
 57:   function capturePhoto() {
 58:     if (!videoRef.current || !canvasRef.current) return;
 59: 
 60:     const video = videoRef.current;
 61:     const canvas = canvasRef.current;
 62:     const context = canvas.getContext("2d");
 63: 
 64:     if (!context) return;
 65: 
 66: 
 67:     canvas.width = video.videoWidth;
 68:     canvas.height = video.videoHeight;
 69: 
 70: 
 71:     context.drawImage(video, 0, 0, canvas.width, canvas.height);
 72: 
 73: 
 74:     canvas.toBlob(
 75:       (blob) => {
 76:         if (blob) {
 77:           const photoUrl = URL.createObjectURL(blob);
 78:           onPhotosChange([...photos, photoUrl]);
 79:         }
 80:       },
 81:       "image/jpeg",
 82:       0.8
 83:     );
 84: 
 85:     stopCamera();
 86:   }
 87: 
 88: 
 89:   function removePhoto(index: number) {
 90:     const newPhotos = photos.filter((_, i) => i !== index);
 91:     onPhotosChange(newPhotos);
 92:   }
 93: 
 94: 
 95:   function handleFileInput(event: React.ChangeEvent<HTMLInputElement>) {
 96:     const files = event.target.files;
 97:     if (!files) return;
 98: 
 99:     Array.from(files).forEach((file) => {
100:       if (file.type.startsWith("image/")) {
101:         const photoUrl = URL.createObjectURL(file);
102:         onPhotosChange([...photos, photoUrl]);
103:       }
104:     });
105: 
106: 
107:     event.target.value = "";
108:   }
109: 
110:   const canAddMore = photos.length < maxPhotos;
111: 
112:   return (
113:     <div className="space-y-4">
114:       {}
115:       {isCapturing ? (
116:         <div className="space-y-4">
117:           <div className="relative bg-black rounded-lg overflow-hidden">
118:             <video
119:               ref={videoRef}
120:               autoPlay
121:               playsInline
122:               className="w-full h-64 object-cover"
123:             />
124:             <canvas ref={canvasRef} className="hidden" />
125:           </div>
126: 
127:           <div className="flex gap-2">
128:             <Button
129:               type="button"
130:               variant="primary"
131:               onClick={capturePhoto}
132:               className="flex-1"
133:             >
134:                Capture Photo
135:             </Button>
136:             <Button type="button" variant="outline" onClick={stopCamera}>
137:               Cancel
138:             </Button>
139:           </div>
140:         </div>
141:       ) : (
142: 
143:         <div className="space-y-4">
144:           {}
145:           <div className="flex gap-2">
146:             {canAddMore && (
147:               <>
148:                 <Button
149:                   type="button"
150:                   variant="outline"
151:                   onClick={startCamera}
152:                   className="flex-1"
153:                 >
154:                    Take Photo
155:                 </Button>
156: 
157:                 {}
158:                 <label className="flex-1">
159:                   <Button
160:                     type="button"
161:                     variant="outline"
162:                     className="w-full"
163:                     onClick={() => {}}
164:                   >
165:                      Choose File
166:                   </Button>
167:                   <input
168:                     type="file"
169:                     accept="image/*"
170:                     multiple
171:                     onChange={handleFileInput}
172:                     className="hidden"
173:                   />
174:                 </label>
175:               </>
176:             )}
177:           </div>
178: 
179:           {}
180:           {error && (
181:             <div className="p-3 bg-red-50 border border-red-200 rounded-md">
182:               <p className="text-sm text-red-600">{error}</p>
183:             </div>
184:           )}
185: 
186:           {}
187:           {photos.length > 0 && (
188:             <p className="text-sm text-muted-foreground">
189:               {photos.length} of {maxPhotos} photos added
190:             </p>
191:           )}
192:         </div>
193:       )}
194: 
195:       {}
196:       {photos.length > 0 && (
197:         <div className="grid grid-cols-2 gap-2">
198:           {photos.map((photo, index) => (
199:             <div key={index} className="relative">
200:               <img
201:                 src={photo}
202:                 alt={`Captured photo ${index + 1}`}
203:                 className="w-full h-24 object-cover rounded-md border border-border"
204:               />
205:               <button
206:                 type="button"
207:                 onClick={() => removePhoto(index)}
208:                 className="absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600"
209:               >
210:                 
211:               </button>
212:             </div>
213:           ))}
214:         </div>
215:       )}
216:     </div>
217:   );
218: }

================
File: src/pages/dashboard/TaskGroup.tsx
================
 1: import React, { useState } from "react";
 2: import { Card, CardContent, CardHeader } from "@/components/ui/Card";
 3: import TaskItem from "./TaskItem";
 4: import { TaskGroup as TaskGroupType } from "@/types/scheduling";
 5: import { QuickCompletionValues } from "@/services/smartDefaultsService";
 6: 
 7: interface TaskGroupProps {
 8:   group: TaskGroupType;
 9:   onQuickComplete?: (
10:     taskId: string,
11:     values: QuickCompletionValues
12:   ) => Promise<void>;
13:   onBypass?: (taskId: string, reason: string) => Promise<void>;
14:   onToggleExpanded?: (groupType: string) => void;
15: }
16: 
17: const TaskGroup: React.FC<TaskGroupProps> = ({
18:   group,
19:   onQuickComplete,
20:   onBypass,
21:   onToggleExpanded,
22: }) => {
23:   const [isExpanded, setIsExpanded] = useState(group.isExpanded);
24: 
25:   const handleToggle = () => {
26:     const newExpanded = !isExpanded;
27:     setIsExpanded(newExpanded);
28:     onToggleExpanded?.(group.type);
29:   };
30: 
31:   const urgentTaskCount = group.tasks.filter(
32:     (task) => task.priority === "high" || task.dueIn.includes("overdue")
33:   ).length;
34: 
35:   return (
36:     <Card className="w-full">
37:       <CardHeader className="cursor-pointer hover:bg-muted/50 transition-colors">
38:         <div
39:           className="flex items-center justify-between"
40:           onClick={handleToggle}
41:         >
42:           {}
43:           <div className="flex items-center gap-3">
44:             <span className="text-2xl">{group.emoji}</span>
45:             <div>
46:               <h3 className="text-lg font-semibold">{group.title}</h3>
47:               <p className="text-sm text-muted-foreground">
48:                 {group.tasks.length} task{group.tasks.length !== 1 ? "s" : ""}
49:                 {urgentTaskCount > 0 && (
50:                   <span className="ml-2 px-2 py-0.5 bg-red-100 text-red-700 rounded-full text-xs font-medium">
51:                     {urgentTaskCount} urgent
52:                   </span>
53:                 )}
54:               </p>
55:             </div>
56:           </div>
57: 
58:           <div className="flex items-center gap-2">
59:             <svg
60:               className={`w-5 h-5 transition-transform ${
61:                 isExpanded ? "rotate-180" : ""
62:               }`}
63:               fill="none"
64:               stroke="currentColor"
65:               viewBox="0 0 24 24"
66:             >
67:               <path
68:                 strokeLinecap="round"
69:                 strokeLinejoin="round"
70:                 strokeWidth={2}
71:                 d="M19 9l-7 7-7-7"
72:               />
73:             </svg>
74:           </div>
75:         </div>
76:       </CardHeader>
77: 
78:       {isExpanded && (
79:         <CardContent className="pt-0">
80:           <div className="space-y-3">
81:             {group.tasks.map((task) => (
82:               <TaskItem
83:                 key={task.id}
84:                 task={task}
85:                 onQuickComplete={onQuickComplete}
86:                 onBypass={onBypass}
87:               />
88:             ))}
89:           </div>
90:         </CardContent>
91:       )}
92:     </Card>
93:   );
94: };
95: 
96: export default TaskGroup;

================
File: src/pages/settings/index.tsx
================
 1: import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/Card";
 2: 
 3: const Settings = () => {
 4:   return (
 5:     <div className="space-y-6">
 6:       <h1 className="text-2xl font-bold">Settings</h1>
 7: 
 8:       <Card>
 9:         <CardHeader>
10:           <CardTitle>Sync Settings</CardTitle>
11:         </CardHeader>
12:       </Card>
13: 
14:       <Card>
15:         <CardHeader>
16:           <CardTitle>App Information</CardTitle>
17:         </CardHeader>
18:         <CardContent className="space-y-2">
19:           <div className="flex justify-between">
20:             <span>Version:</span>
21:             <span>1.0.0</span>
22:           </div>
23:           <div className="flex justify-between">
24:             <span>Build:</span>
25:             <span>Development</span>
26:           </div>
27:         </CardContent>
28:       </Card>
29:     </div>
30:   );
31: };
32: 
33: export default Settings;

================
File: src/services/firebase/config.ts
================
 1: import { initializeApp } from "firebase/app";
 2: import { getAuth, connectAuthEmulator } from "firebase/auth";
 3: import { getFirestore, connectFirestoreEmulator } from "firebase/firestore";
 4: import { getStorage, connectStorageEmulator } from "firebase/storage";
 5: 
 6: const firebaseConfig = {
 7:   apiKey: import.meta.env.VITE_FIREBASE_API_KEY,
 8:   authDomain: import.meta.env.VITE_FIREBASE_AUTH_DOMAIN,
 9:   projectId: import.meta.env.VITE_FIREBASE_PROJECT_ID,
10:   storageBucket: import.meta.env.VITE_FIREBASE_STORAGE_BUCKET,
11:   messagingSenderId: import.meta.env.VITE_FIREBASE_MESSAGING_SENDER_ID,
12:   appId: import.meta.env.VITE_FIREBASE_APP_ID,
13: };
14: 
15: const app = initializeApp(firebaseConfig);
16: 
17: export const auth = getAuth(app);
18: export const db = getFirestore(app);
19: export const storage = getStorage(app);

================
File: src/services/firebase/scheduledTaskService.ts
================
  1: import {
  2:   collection,
  3:   addDoc,
  4:   query,
  5:   where,
  6:   onSnapshot,
  7:   orderBy,
  8:   Timestamp,
  9:   writeBatch,
 10:   getDocs,
 11: } from "firebase/firestore";
 12: import { db } from "./config";
 13: import { ScheduledTask } from "../ProtocolTranspilerService";
 14: 
 15: export interface FirebaseScheduledTask {
 16:   id?: string;
 17:   userId: string;
 18:   plantId: string;
 19:   taskName: string;
 20:   taskType: string;
 21:   details: {
 22:     type: string;
 23:     product: string;
 24:     dilution: string;
 25:     amount: string;
 26:     method: string;
 27:   };
 28:   dueDate: Timestamp;
 29:   status: string;
 30:   sourceProtocol: {
 31:     stage: string;
 32:     originalStartDays: number;
 33:     isDynamic: boolean;
 34:   };
 35:   createdAt: Timestamp;
 36:   updatedAt: Timestamp;
 37: }
 38: 
 39: export class FirebaseScheduledTaskService {
 40:   private static tasksCollection = collection(db, "scheduledTasks");
 41: 
 42:   static async createTask(
 43:     task: ScheduledTask,
 44:     userId: string
 45:   ): Promise<string> {
 46:     const firebaseTask: Omit<FirebaseScheduledTask, "id"> = {
 47:       userId,
 48:       plantId: task.plantId,
 49:       taskName: task.taskName,
 50:       taskType: task.taskType,
 51:       details: task.details,
 52:       dueDate: Timestamp.fromDate(task.dueDate),
 53:       status: task.status,
 54:       sourceProtocol: task.sourceProtocol,
 55:       createdAt: Timestamp.now(),
 56:       updatedAt: Timestamp.now(),
 57:     };
 58: 
 59:     const docRef = await addDoc(this.tasksCollection, firebaseTask);
 60:     return docRef.id;
 61:   }
 62: 
 63:   static async createMultipleTasks(
 64:     tasks: ScheduledTask[],
 65:     userId: string
 66:   ): Promise<string[]> {
 67:     const promises = tasks.map((task) => this.createTask(task, userId));
 68:     const taskIds = await Promise.all(promises);
 69: 
 70:     return taskIds;
 71:   }
 72: 
 73:   static subscribeToUserTasks(
 74:     userId: string,
 75:     callback: (tasks: ScheduledTask[]) => void,
 76:     errorCallback: (error: Error) => void
 77:   ) {
 78:     const q = query(
 79:       this.tasksCollection,
 80:       where("userId", "==", userId),
 81:       where("status", "==", "pending"),
 82:       orderBy("dueDate", "asc")
 83:     );
 84: 
 85:     return onSnapshot(
 86:       q,
 87:       (snapshot) => {
 88:         const tasks: ScheduledTask[] = snapshot.docs.map((doc) => {
 89:           const data = doc.data() as FirebaseScheduledTask;
 90:           return {
 91:             id: doc.id,
 92:             plantId: data.plantId,
 93:             taskName: data.taskName,
 94:             taskType: data.taskType as ScheduledTask["taskType"],
 95:             details: data.details as ScheduledTask["details"],
 96:             dueDate: data.dueDate.toDate(),
 97:             status: data.status as ScheduledTask["status"],
 98:             sourceProtocol:
 99:               data.sourceProtocol as ScheduledTask["sourceProtocol"],
100:             createdAt: data.createdAt.toDate(),
101:             updatedAt: data.updatedAt.toDate(),
102:           };
103:         });
104:         callback(tasks);
105:       },
106:       (error) => {
107: 
108:         console.error(" Error subscribing to tasks:", error);
109:         errorCallback(error);
110:       }
111:     );
112:   }
113:   static async deletePendingTasksForPlant(
114:     plantId: string,
115:     userId: string
116:   ): Promise<void> {
117:     try {
118:       const q = query(
119:         this.tasksCollection,
120:         where("userId", "==", userId),
121:         where("plantId", "==", plantId),
122:         where("status", "==", "pending")
123:       );
124: 
125:       const querySnapshot = await getDocs(q);
126:       if (querySnapshot.empty) {
127:         return;
128:       }
129: 
130:       const batch = writeBatch(db);
131:       querySnapshot.forEach((doc) => {
132:         batch.delete(doc.ref);
133:       });
134: 
135:       await batch.commit();
136:       console.log(
137:         ` Deleted ${querySnapshot.size} pending tasks for plant ${plantId}.`
138:       );
139:     } catch (error) {
140:       console.error(
141:         ` Failed to delete pending tasks for plant ${plantId}:`,
142:         error
143:       );
144: 
145: 
146:       throw error;
147:     }
148:   }
149: }

================
File: src/services/bulkActivityService.ts
================
 1: import { CareActivityType } from "@/types";
 2: import { careService } from "@/types/database";
 3: import { CareActivityDetails } from "@/types/database";
 4: 
 5: export interface BulkActivityData {
 6:   type: CareActivityType;
 7:   date?: Date;
 8:   details: Partial<CareActivityDetails>;
 9: }
10: 
11: export class BulkActivityService {
12:   static async logActivityForPlants(
13:     plantIds: string[],
14:     activityData: BulkActivityData
15:   ): Promise<string[]> {
16:     const results: string[] = [];
17:     const date = activityData.date || new Date();
18: 
19:     for (const plantId of plantIds) {
20:       try {
21:         const careId = await careService.addCareActivity({
22:           plantId,
23:           type: activityData.type,
24:           date,
25:           details: {
26:             type: activityData.type,
27:             ...activityData.details,
28:           } as CareActivityDetails,
29:         });
30:         results.push(careId);
31:       } catch (error) {
32:         console.error(`Failed to log activity for plant ${plantId}:`, error);
33:       }
34:     }
35: 
36:     return results;
37:   }
38: 
39:   static async createBulkWateringActivity(
40:     amount: number,
41:     unit: string,
42:     moistureBefore?: number,
43:     moistureAfter?: number,
44:     notes?: string
45:   ): Promise<BulkActivityData> {
46:     return {
47:       type: "water",
48:       details: {
49:         type: "water",
50:         amount: { value: amount, unit: unit as any },
51:         moistureLevel:
52:           moistureBefore && moistureAfter
53:             ? {
54:                 before: moistureBefore,
55:                 after: moistureAfter,
56:                 scale: "1-10" as const,
57:               }
58:             : undefined,
59:         notes,
60:       },
61:     };
62:   }
63: 
64:   static async createBulkFertilizeActivity(
65:     product: string,
66:     dilution: string,
67:     amount: string,
68:     notes?: string
69:   ): Promise<BulkActivityData> {
70:     return {
71:       type: "fertilize",
72:       details: {
73:         type: "fertilize",
74:         product,
75:         dilution,
76:         amount,
77:         notes,
78:       },
79:     };
80:   }
81: 
82:   static async createBulkObservationActivity(
83:     healthAssessment: "excellent" | "good" | "fair" | "concerning" | "critical",
84:     observations: string,
85:     notes?: string
86:   ): Promise<BulkActivityData> {
87:     return {
88:       type: "observe",
89:       details: {
90:         type: "observe",
91:         healthAssessment,
92:         observations,
93:         notes,
94:       },
95:     };
96:   }
97: }

================
File: src/services/ProtocolTranspilerService.ts
================
  1: import {
  2:   PlantRecord,
  3:   VarietyRecord,
  4:   GrowthStage,
  5:   CareActivityType,
  6:   FertilizationScheduleItem,
  7:   GrowthTimeline,
  8: } from "@/types";
  9: 
 10: export interface ScheduledTask {
 11:   id: string;
 12:   plantId: string;
 13:   taskName: string;
 14:   taskType: CareActivityType;
 15:   details: {
 16:     type: "fertilize";
 17:     product: string;
 18:     dilution: string;
 19:     amount: string;
 20:     method: "soil-drench" | "foliar-spray" | "top-dress" | "mix-in-soil";
 21:   };
 22:   dueDate: Date;
 23:   status: "pending" | "completed" | "skipped" | "bypassed";
 24:   sourceProtocol: {
 25:     stage: GrowthStage;
 26:     originalStartDays: number;
 27:     isDynamic: boolean;
 28:   };
 29:   coordinatedWith?: string[];
 30:   priority?: "low" | "normal" | "high" | "critical";
 31:   createdAt: Date;
 32:   updatedAt: Date;
 33: }
 34: 
 35: 
 36: const STAGE_ORDER: GrowthStage[] = [
 37:   "germination",
 38:   "seedling",
 39:   "vegetative",
 40:   "flowering",
 41:   "fruiting",
 42:   "maturation",
 43:   "ongoing-production",
 44:   "harvest",
 45: ];
 46: 
 47: export class ProtocolTranspilerService {
 48:   static async transpileProtocolFromStage(
 49:     plant: PlantRecord,
 50:     variety: VarietyRecord,
 51:     startStage: GrowthStage,
 52:     anchorDate: Date = new Date()
 53:   ): Promise<ScheduledTask[]> {
 54:     const tasks: ScheduledTask[] = [];
 55:     if (!variety.protocols?.fertilization) {
 56:       return tasks;
 57:     }
 58: 
 59:     const startStageIndex = STAGE_ORDER.indexOf(startStage);
 60:     if (startStageIndex === -1) {
 61:       console.error(`Invalid start stage provided: ${startStage}`);
 62:       return [];
 63:     }
 64: 
 65:     const anchorStageStartDays = this.calculateStageStartDays(
 66:       variety.growthTimeline,
 67:       startStage
 68:     );
 69: 
 70: 
 71:     for (let i = startStageIndex; i < STAGE_ORDER.length; i++) {
 72:       const currentStage = STAGE_ORDER[i];
 73:       const stageProtocol = variety.protocols.fertilization[currentStage];
 74: 
 75:       if (!stageProtocol || !stageProtocol.schedule) {
 76:         continue;
 77:       }
 78: 
 79:       const stageStartDays = this.calculateStageStartDays(
 80:         variety.growthTimeline,
 81:         currentStage
 82:       );
 83: 
 84: 
 85:       const daysFromAnchor = stageStartDays - anchorStageStartDays;
 86: 
 87:       for (const scheduleItem of stageProtocol.schedule) {
 88:         const taskInstances = this.createTaskInstances(
 89:           plant,
 90:           currentStage,
 91:           scheduleItem,
 92:           anchorDate,
 93:           daysFromAnchor
 94:         );
 95:         tasks.push(...taskInstances);
 96:       }
 97:     }
 98: 
 99:     return tasks;
100:   }
101: 
102:   static async transpilePlantProtocol(
103:     plant: PlantRecord,
104:     variety: VarietyRecord
105:   ): Promise<ScheduledTask[]> {
106:     return this.transpileProtocolFromStage(
107:       plant,
108:       variety,
109:       "germination",
110:       plant.plantedDate
111:     );
112:   }
113:   private static calculateStageStartDays(
114:     growthTimeline: GrowthTimeline,
115:     stageName: GrowthStage
116:   ): number {
117:     switch (stageName) {
118:       case "germination":
119:         return 0;
120:       case "seedling":
121:         return growthTimeline.germination;
122:       case "vegetative":
123:         return growthTimeline.germination + growthTimeline.seedling;
124:       case "flowering":
125:         return (
126:           growthTimeline.germination +
127:           growthTimeline.seedling +
128:           growthTimeline.vegetative
129:         );
130:       case "fruiting":
131:       case "maturation":
132:       case "ongoing-production":
133:       case "harvest":
134:         return growthTimeline.maturation;
135:       default:
136:         console.warn(
137:           `Unknown stage name: ${stageName} in calculateStageStartDays`
138:         );
139:         return 0;
140:     }
141:   }
142: 
143: 
144: 
145: 
146:   private static createTaskInstances(
147:     plant: PlantRecord,
148:     stage: GrowthStage,
149:     scheduleItem: FertilizationScheduleItem,
150:     anchorDate: Date,
151:     stageStartDays: number
152:   ): ScheduledTask[] {
153:     const tasks: ScheduledTask[] = [];
154:     const absoluteStartDays = stageStartDays + scheduleItem.startDays;
155: 
156:     for (let i = 0; i < scheduleItem.repeatCount; i++) {
157:       const dueDate = new Date(anchorDate);
158:       dueDate.setDate(
159:         dueDate.getDate() + absoluteStartDays + i * scheduleItem.frequencyDays
160:       );
161: 
162: 
163:       if (dueDate < new Date()) {
164:         continue;
165:       }
166: 
167:       const taskId = `${plant.id}-${stage}-${scheduleItem.taskName
168:         .replace(/\s+/g, "-")
169:         .toLowerCase()}-${i}-${new Date().getTime()}`;
170: 
171:       tasks.push({
172:         id: taskId,
173:         plantId: plant.id,
174:         taskName: scheduleItem.taskName,
175:         taskType: "fertilize",
176:         details: {
177:           type: "fertilize",
178:           product: scheduleItem.details.product,
179:           dilution: scheduleItem.details.dilution || "As directed",
180:           amount: scheduleItem.details.amount || "Apply as needed",
181:           method: scheduleItem.details.method || "soil-drench",
182:         },
183:         dueDate,
184:         status: "pending",
185:         sourceProtocol: {
186:           stage,
187:           originalStartDays: scheduleItem.startDays,
188:           isDynamic: true,
189:         },
190:         priority: "normal",
191:         createdAt: new Date(),
192:         updatedAt: new Date(),
193:       });
194:     }
195: 
196:     return tasks;
197:   }
198: }

================
File: src/styles/globals.css
================
 1: @tailwind base;
 2: @tailwind components;
 3: @tailwind utilities;
 4: 
 5: @layer base {
 6:   :root {
 7: 
 8:     --background: 249 250 251;
 9:     --foreground: 17 24 39;
10:     --card: 255 255 255;
11:     --card-foreground: 17 24 39;
12:     --primary: 52 211 153;
13:     --primary-foreground: 17 24 39;
14:     --secondary: 156 163 175;
15:     --secondary-foreground: 17 24 39;
16:     --muted: 243 244 246;
17:     --muted-foreground: 107 114 128;
18:     --accent: 52 211 153;
19:     --accent-foreground: 17 24 39;
20:     --border: 229 231 235;
21:     --ring: 52 211 153;
22:     --input: 255 255 255;
23:     --input-foreground: 17 24 39;
24:   }
25: 
26:   .dark {
27: 
28:     --background: 17 24 39;
29:     --foreground: 243 244 246;
30:     --card: 31 41 55;
31:     --card-foreground: 243 244 246;
32:     --primary: 34 197 94;
33:     --primary-foreground: 243 244 246;
34:     --secondary: 75 85 99;
35:     --secondary-foreground: 243 244 246;
36:     --muted: 55 65 81;
37:     --muted-foreground: 156 163 175;
38:     --accent: 34 197 94;
39:     --accent-foreground: 243 244 246;
40:     --border: 75 85 99;
41:     --ring: 34 197 94;
42:     --input: 31 41 55;
43:     --input-foreground: 243 244 246;
44:   }
45: }
46: 
47: 
48: * {
49:   -webkit-tap-highlight-color: transparent;
50: }
51: 
52: html {
53:   scroll-behavior: smooth;
54: }
55: 
56: body {
57:   background-color: rgb(var(--background));
58:   color: rgb(var(--foreground));
59:   font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
60:     "Helvetica Neue", Arial, sans-serif;
61:   -webkit-font-smoothing: antialiased;
62:   -moz-osx-font-smoothing: grayscale;
63: }
64: 
65: #root {
66:   background-color: rgb(var(--background));
67:   min-height: 100vh;
68: }
69: 
70: 
71: button {
72:   -webkit-appearance: none;
73:   appearance: none;
74: }
75: 
76: 
77: button:focus-visible {
78:   outline: 2px solid #3b82f6;
79:   outline-offset: 2px;
80: }

================
File: src/types/firebase.ts
================
  1: import { Timestamp } from "firebase/firestore";
  2: import { CareActivityType, PlantCategory } from "./core";
  3: import {
  4:   PlantRecord,
  5:   CareActivityRecord,
  6:   CareActivityDetails,
  7: } from "./database";
  8: 
  9: export interface FirebasePlantRecord {
 10:   id?: string;
 11:   userId: string;
 12:   varietyId: string;
 13:   varietyName: string;
 14:   name?: string;
 15:   plantedDate: Timestamp;
 16:   location: string;
 17:   container: string;
 18:   soilMix?: string;
 19:   isActive: boolean;
 20:   notes?: string[];
 21:   quantity?: number;
 22:   setupType?: "multiple-containers" | "same-container";
 23:   reminderPreferences?: {
 24:     watering?: boolean;
 25:     fertilizing?: boolean;
 26:     observation?: boolean;
 27:     lighting?: boolean;
 28:     pruning?: boolean;
 29:   };
 30:   createdAt: Timestamp;
 31:   updatedAt: Timestamp;
 32: }
 33: 
 34: export interface FirebaseCareRecord {
 35:   id?: string;
 36:   userId: string;
 37:   plantId: string;
 38:   type: CareActivityType;
 39:   date: Timestamp;
 40:   details: CareActivityDetails;
 41:   createdAt: Timestamp;
 42:   updatedAt: Timestamp;
 43: }
 44: 
 45: export interface FirebaseVarietyRecord {
 46:   id?: string;
 47:   userId?: string;
 48:   name: string;
 49:   category: PlantCategory;
 50:   growthTimeline: {
 51:     germination: number;
 52:     seedling: number;
 53:     vegetative: number;
 54:     maturation: number;
 55:   };
 56:   protocols?: Record<string, unknown>;
 57:   moistureProtocols?: Record<string, unknown>;
 58:   isCustom?: boolean;
 59:   isEverbearing?: boolean;
 60:   productiveLifespan?: number;
 61:   createdAt: Timestamp;
 62: }
 63: 
 64: export interface FirebaseScheduledTask {
 65:   id?: string;
 66:   userId: string;
 67:   plantId: string;
 68:   taskName: string;
 69:   taskType: string;
 70:   details: {
 71:     type: string;
 72:     product: string;
 73:     dilution: string;
 74:     amount: string;
 75:     method: string;
 76:   };
 77:   dueDate: Timestamp;
 78:   status: string;
 79:   sourceProtocol: {
 80:     stage: string;
 81:     originalStartDays: number;
 82:     isDynamic: boolean;
 83:   };
 84:   createdAt: Timestamp;
 85:   updatedAt: Timestamp;
 86: }
 87: 
 88: export const toFirebaseTimestamp = (date: Date): Timestamp => {
 89:   return Timestamp.fromDate(date);
 90: };
 91: 
 92: export const fromFirebaseTimestamp = (timestamp: Timestamp): Date => {
 93:   return timestamp.toDate();
 94: };
 95: 
 96: export const convertPlantToFirebase = (
 97:   plant: PlantRecord,
 98:   userId: string
 99: ): Omit<FirebasePlantRecord, "id"> => ({
100:   userId,
101:   varietyId: plant.varietyId,
102:   varietyName: plant.varietyName,
103:   name: plant.name || plant.varietyName,
104:   plantedDate: toFirebaseTimestamp(plant.plantedDate),
105:   location: plant.location,
106:   container: plant.container,
107:   soilMix: plant.soilMix,
108:   isActive: plant.isActive,
109:   notes: plant.notes,
110:   quantity: plant.quantity,
111:   setupType: plant.setupType,
112:   reminderPreferences: plant.reminderPreferences,
113:   createdAt: Timestamp.now(),
114:   updatedAt: Timestamp.now(),
115: });
116: 
117: export const convertPlantFromFirebase = (
118:   firebasePlant: FirebasePlantRecord
119: ): PlantRecord => ({
120:   id: firebasePlant.id!,
121:   varietyId: firebasePlant.varietyId,
122:   varietyName: firebasePlant.varietyName,
123:   name: firebasePlant.name,
124:   plantedDate: fromFirebaseTimestamp(firebasePlant.plantedDate),
125:   location: firebasePlant.location,
126:   container: firebasePlant.container,
127:   soilMix: firebasePlant.soilMix,
128:   isActive: firebasePlant.isActive,
129:   notes: firebasePlant.notes,
130:   quantity: firebasePlant.quantity,
131:   setupType: firebasePlant.setupType,
132:   reminderPreferences: firebasePlant.reminderPreferences,
133:   createdAt: fromFirebaseTimestamp(firebasePlant.createdAt),
134:   updatedAt: fromFirebaseTimestamp(firebasePlant.updatedAt),
135: });
136: 
137: export const convertCareActivityToFirebase = (
138:   activity: CareActivityRecord,
139:   userId: string
140: ): Omit<FirebaseCareRecord, "id"> => ({
141:   userId,
142:   plantId: activity.plantId,
143:   type: activity.type,
144:   date: toFirebaseTimestamp(activity.date),
145:   details: activity.details,
146:   createdAt: Timestamp.now(),
147:   updatedAt: Timestamp.now(),
148: });
149: 
150: export const convertCareActivityFromFirebase = (
151:   firebaseActivity: FirebaseCareRecord
152: ): CareActivityRecord => ({
153:   id: firebaseActivity.id!,
154:   plantId: firebaseActivity.plantId,
155:   type: firebaseActivity.type,
156:   date: fromFirebaseTimestamp(firebaseActivity.date),
157:   details: firebaseActivity.details as CareActivityDetails,
158:   createdAt: fromFirebaseTimestamp(firebaseActivity.createdAt),
159:   updatedAt: fromFirebaseTimestamp(firebaseActivity.updatedAt),
160: });

================
File: src/types/user.ts
================
 1: export interface UserSettings {
 2:   id: string;
 3:   units: {
 4:     temperature: "fahrenheit" | "celsius";
 5:     volume: "ounces" | "liters";
 6:   };
 7:   notifications: {
 8:     careReminders: boolean;
 9:     harvestAlerts: boolean;
10:   };
11:   location: {
12:     timezone: string;
13:     zipCode?: string;
14:   };
15: }
16: 
17: export interface UserProfile {
18:   id: string;
19:   email: string;
20:   displayName?: string;
21:   settings: UserSettings;
22:   createdAt: Date;
23:   lastLoginAt: Date;
24: }

================
File: src/utils/dateUtils.ts
================
 1: import { differenceInDays } from "date-fns";
 2: 
 3: export function formatDate(date: Date): string {
 4:   return new Intl.DateTimeFormat("en-US", {
 5:     month: "short",
 6:     day: "numeric",
 7:     year: "numeric",
 8:   }).format(date);
 9: }
10: 
11: export function getDaysSincePlanting(plantedDate: Date): number {
12:   const now = new Date();
13: 
14: 
15:   const days = differenceInDays(now, plantedDate);
16:   return days + 1;
17: }
18: 
19: export function formatDateTime(date: Date): string {
20:   return new Intl.DateTimeFormat("en-US", {
21:     month: "short",
22:     day: "numeric",
23:     hour: "numeric",
24:     minute: "2-digit",
25:   }).format(date);
26: }
27: 
28: export function formatTime(date: Date): string {
29:   return new Intl.DateTimeFormat("en-US", {
30:     hour: "numeric",
31:     minute: "2-digit",
32:   }).format(date);
33: }

================
File: src/jest.polyfills.ts
================
 1: import { TextDecoder, TextEncoder } from "util";
 2: 
 3: Object.assign(global, { TextDecoder, TextEncoder });
 4: 
 5: 
 6: Object.defineProperty(global, "importMeta", {
 7:   value: {
 8:     env: {
 9:       VITE_FIREBASE_API_KEY: "test-api-key",
10:       VITE_FIREBASE_AUTH_DOMAIN: "test-project.firebaseapp.com",
11:       VITE_FIREBASE_PROJECT_ID: "test-project",
12:       VITE_FIREBASE_STORAGE_BUCKET: "test-project.appspot.com",
13:       VITE_FIREBASE_MESSAGING_SENDER_ID: "123456789",
14:       VITE_FIREBASE_APP_ID: "test-app-id",
15:     },
16:   },
17: });
18: 
19: 
20: declare global {
21:   const importMeta: {
22:     env: {
23:       VITE_FIREBASE_API_KEY: string;
24:       VITE_FIREBASE_AUTH_DOMAIN: string;
25:       VITE_FIREBASE_PROJECT_ID: string;
26:       VITE_FIREBASE_STORAGE_BUCKET: string;
27:       VITE_FIREBASE_MESSAGING_SENDER_ID: string;
28:       VITE_FIREBASE_APP_ID: string;
29:     };
30:   };
31: }

================
File: src/vite-env.d.ts
================
 1: interface ImportMetaEnv {
 2:   readonly VITE_FIREBASE_API_KEY: string;
 3:   readonly VITE_FIREBASE_AUTH_DOMAIN: string;
 4:   readonly VITE_FIREBASE_PROJECT_ID: string;
 5:   readonly VITE_FIREBASE_STORAGE_BUCKET: string;
 6:   readonly VITE_FIREBASE_MESSAGING_SENDER_ID: string;
 7:   readonly VITE_FIREBASE_APP_ID: string;
 8: }
 9: 
10: interface ImportMeta {
11:   readonly env: ImportMetaEnv;
12: }

================
File: tests/e2e/pwa-functionality.spec.ts
================
 1: import { test, expect } from "@playwright/test";
 2: import { AuthHelper } from "./helpers/auth-helper";
 3: 
 4: test.describe("PWA Functionality", () => {
 5: 
 6: 
 7:   test.only("app loads and displays correctly", async ({ page }) => {
 8: 
 9:     await page.goto("/");
10: 
11: 
12:     await page.waitForTimeout(2000);
13: 
14: 
15:     const isAuthenticated =
16:       (await page
17:         .locator('text="SmartGarden", text="Dashboard", text="Plants"')
18:         .count()) > 0;
19: 
20:     if (isAuthenticated) {
21:       console.log(" Already authenticated via storage state");
22:     } else {
23:       console.log(" Not authenticated, performing manual login");
24:       const authHelper = new AuthHelper(page);
25:       await authHelper.login();
26:     }
27: 
28: 
29:     await expect(page.locator('text="SmartGarden"')).toBeVisible({
30:       timeout: 10000,
31:     });
32:   });
33: 
34: 
35:   test("can navigate to main sections", async ({ page }) => {
36:     await page.goto("/");
37:     await page.waitForTimeout(2000);
38: 
39: 
40:     const hasContent =
41:       (await page
42:         .locator('text="Plants", text="Dashboard", text="Add"')
43:         .count()) > 0;
44:     expect(hasContent).toBeTruthy();
45:   });
46: });

================
File: firestore.indexes.json
================
 1: {
 2:   "indexes": [
 3:     {
 4:       "collectionGroup": "plants",
 5:       "queryScope": "COLLECTION",
 6:       "fields": [
 7:         { "fieldPath": "userId", "order": "ASCENDING" },
 8:         { "fieldPath": "isActive", "order": "ASCENDING" },
 9:         { "fieldPath": "createdAt", "order": "DESCENDING" }
10:       ]
11:     },
12:     {
13:       "collectionGroup": "plants",
14:       "queryScope": "COLLECTION",
15:       "fields": [
16:         { "fieldPath": "userId", "order": "ASCENDING" },
17:         { "fieldPath": "createdAt", "order": "DESCENDING" }
18:       ]
19:     },
20:     {
21:       "collectionGroup": "careActivities",
22:       "queryScope": "COLLECTION",
23:       "fields": [
24:         { "fieldPath": "plantId", "order": "ASCENDING" },
25:         { "fieldPath": "date", "order": "DESCENDING" }
26:       ]
27:     },
28:     {
29:       "collectionGroup": "careActivities",
30:       "queryScope": "COLLECTION",
31:       "fields": [
32:         { "fieldPath": "userId", "order": "ASCENDING" },
33:         { "fieldPath": "date", "order": "DESCENDING" }
34:       ]
35:     },
36:     {
37:       "collectionGroup": "scheduledTasks",
38:       "queryScope": "COLLECTION",
39:       "fields": [
40:         { "fieldPath": "userId", "order": "ASCENDING" },
41:         { "fieldPath": "status", "order": "ASCENDING" },
42:         { "fieldPath": "dueDate", "order": "ASCENDING" }
43:       ]
44:     }
45:   ],
46:   "fieldOverrides": []
47: }

================
File: index.html
================
 1: <!DOCTYPE html>
 2: <html lang="en">
 3:   <head>
 4:     <meta charset="UTF-8" />
 5:     <meta name="darkreader-lock" />
 6:     <link rel="icon" type="image/svg+xml" href="/vite.svg" />
 7:     <meta name="viewport" content="width=device-width, initial-scale=1.0" />
 8:     <title>Vite + React + TS</title>
 9:   </head>
10:   <body>
11:     <div id="root"></div>
12:     <script type="module" src="/src/main.tsx"></script>
13:   </body>
14: </html>

================
File: print_structure.py
================
 1: import os
 2: 
 3: def print_directory_structure(root_dir, prefix=""):
 4:     for item in os.listdir(root_dir):
 5:         path = os.path.join(root_dir, item)
 6:         if os.path.isdir(path):
 7: 
 8:             if item == "node_modules":
 9:                 continue
10:             if item == "__pycache__":
11:                 continue
12:             if item == ".git":
13:                 continue
14:             if item == ".vscode":
15:                 continue
16:             if item == ".idea":
17:                 continue
18:             if item == ".DS_Store":
19:                 continue
20:             print(f"{prefix} {item}/")
21:             print_directory_structure(path, prefix + "   ")
22:         else:
23:             print(f"{prefix} {item}")
24: 
25: if __name__ == "__main__":
26:     project_root = "."
27:     print_directory_structure(project_root)

================
File: README.md
================
 1: #  SmartGarden PWA
 2: 
 3: A Progressive Web Application for managing indoor gardening with scientifically-backed growing protocols, offline-first plant tracking, and intelligent care scheduling.
 4: 
 5: ##  Features
 6: 
 7: - **Plant Registration**: Track varieties with custom container configurations
 8: - **Growth Stage Tracking**: Automated stage progression based on planting dates
 9: - **Care Scheduling**: Protocol-driven watering, fertilizing, and observation reminders
10: - **Offline-First**: Full functionality without internet connection
11: - **Mobile Optimized**: Touch-friendly interface designed for gloved hands
12: - **PWA**: Installable app experience on mobile and desktop
13: 
14: ##  Tech Stack
15: 
16: - **Frontend**: React 18 + TypeScript
17: - **Styling**: TailwindCSS + shadcn/ui components
18: - **State**: Zustand for global state management
19: - **Database**: IndexedDB via Dexie.js (offline-first)
20: - **Testing**: Jest + React Testing Library + Cypress
21: - **PWA**: Service Worker + Web App Manifest
22: 
23: ##  Quick Start
24: 
25: ```bash
26: # Install dependencies
27: npm install
28: 
29: # Start development server
30: npm run dev
31: 
32: # Run tests
33: npm test
34: 
35: # Build for production
36: npm run build
37: ```

================
File: storage.rules
================
1: rules_version = '2';
2: 
3: service firebase.storage {
4:   match /b/{bucket}/o {
5:     match /{allPaths=**} {
6:       allow read, write: if false;
7:     }
8:   }
9: }

================
File: tailwind.config.js
================
 1: module.exports = {
 2:   content: ["./index.html", "./src/**/*.{js,ts,jsx,tsx}"],
 3:   theme: {
 4:     extend: {
 5:       colors: {
 6: 
 7:         background: "rgb(var(--background) / <alpha-value>)",
 8:         foreground: "rgb(var(--foreground) / <alpha-value>)",
 9:         card: {
10:           DEFAULT: "rgb(var(--card) / <alpha-value>)",
11:           foreground: "rgb(var(--card-foreground) / <alpha-value>)",
12:         },
13:         primary: {
14:           DEFAULT: "rgb(var(--primary) / <alpha-value>)",
15:           foreground: "rgb(var(--primary-foreground) / <alpha-value>)",
16:         },
17:         secondary: {
18:           DEFAULT: "rgb(var(--secondary) / <alpha-value>)",
19:           foreground: "rgb(var(--secondary-foreground) / <alpha-value>)",
20:         },
21:         muted: {
22:           DEFAULT: "rgb(var(--muted) / <alpha-value>)",
23:           foreground: "rgb(var(--muted-foreground) / <alpha-value>)",
24:         },
25:         accent: {
26:           DEFAULT: "rgb(var(--accent) / <alpha-value>)",
27:           foreground: "rgb(var(--accent-foreground) / <alpha-value>)",
28:         },
29:         border: "rgb(var(--border) / <alpha-value>)",
30:         ring: "rgb(var(--ring) / <alpha-value>)",
31: 
32: 
33:         garden: {
34:           50: "#f0f9f4",
35:           100: "#dcf2e4",
36:           200: "#bce5cd",
37:           300: "#8dd0aa",
38:           400: "#57b380",
39:           500: "#349960",
40:           600: "#2F6F4E",
41:           700: "#1e5a3a",
42:           800: "#1a4a31",
43:           900: "#163d29",
44:         },
45: 
46: 
47:         success: "#38A169",
48:         warning: "#DD6B20",
49:         error: "#E53E3E",
50: 
51:         input: {
52:           DEFAULT: "rgb(var(--input) / <alpha-value>)",
53:           foreground: "rgb(var(--input-foreground) / <alpha-value>)",
54:         },
55:       },
56:       boxShadow: {
57:         sm: "0 1px 2px 0 rgb(0 0 0 / 0.05)",
58:         md: "0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)",
59:         lg: "0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)",
60:       },
61:     },
62:   },
63:   darkMode: "class",
64:   plugins: [],
65: };

================
File: vite.config.ts
================
 1: import { defineConfig } from "vite";
 2: import react from "@vitejs/plugin-react";
 3: import { VitePWA } from "vite-plugin-pwa";
 4: import path from "path";
 5: 
 6: export default defineConfig({
 7:   plugins: [
 8:     react(),
 9:     VitePWA({
10:       registerType: "autoUpdate",
11:       workbox: {
12:         globPatterns: ["**/*.{js,css,html,ico,png,svg,jpg,jpeg}"],
13:         runtimeCaching: [
14:           {
15:             urlPattern: /^https:\/\/.*\.(png|jpg|jpeg|svg|gif)$/,
16:             handler: "CacheFirst",
17:             options: {
18:               cacheName: "images",
19:               expiration: {
20:                 maxEntries: 100,
21:                 maxAgeSeconds: 60 * 60 * 24 * 30,
22:               },
23:             },
24:           },
25:         ],
26:       },
27:     }),
28:   ],
29:   resolve: {
30:     alias: {
31:       "@": path.resolve(__dirname, "./src"),
32:     },
33:   },
34:   server: {
35:     host: "0.0.0.0",
36:     port: 5173,
37:   },
38: });

================
File: src/__tests__/database/plantService.test.ts
================
  1: import { plantService, PlantRecord } from "../../types/database";
  2: 
  3: describe("plantService", () => {
  4:   beforeEach(async () => {
  5: 
  6:     const db = await import("../../types/database").then((m) => m.db);
  7:     await db.plants.clear();
  8:   });
  9: 
 10:   it("adds and retrieves a plant", async () => {
 11:     const plantData: Omit<PlantRecord, "id" | "createdAt" | "updatedAt"> = {
 12:       varietyId: "test-variety",
 13:       name: "Test Plant",
 14:       varietyName: "Test Variety",
 15:       plantedDate: new Date("2024-01-01"),
 16:       location: "Indoor",
 17:       container: "Test Container",
 18:       isActive: true,
 19:       notes: ["Test note"],
 20:     };
 21: 
 22:     const plantId = await plantService.addPlant(plantData);
 23:     expect(plantId).toBeDefined();
 24: 
 25:     const retrievedPlant = await plantService.getPlant(plantId);
 26:     expect(retrievedPlant).toBeDefined();
 27:     expect(retrievedPlant?.name).toBe("Test Plant");
 28:     expect(retrievedPlant?.varietyId).toBe("test-variety");
 29:   });
 30: 
 31:   it("should update a plant's name", async () => {
 32: 
 33:     const plantData: Omit<PlantRecord, "id" | "createdAt" | "updatedAt"> = {
 34:       varietyId: "test-variety",
 35:       name: "Old Name",
 36:       varietyName: "Test Variety",
 37:       plantedDate: new Date("2024-01-01"),
 38:       location: "Indoor",
 39:       container: "Test Container",
 40:       isActive: true,
 41:     };
 42:     const plantId = await plantService.addPlant(plantData);
 43:     const originalPlant = await plantService.getPlant(plantId);
 44: 
 45: 
 46:     await new Promise((resolve) => setTimeout(resolve, 10));
 47: 
 48: 
 49:     const newName = "New Updated Name";
 50:     await plantService.updatePlant(plantId, { name: newName });
 51: 
 52: 
 53:     const updatedPlant = await plantService.getPlant(plantId);
 54:     expect(updatedPlant).toBeDefined();
 55:     expect(updatedPlant?.name).toBe(newName);
 56: 
 57:     expect(updatedPlant?.updatedAt?.getTime()).toBeGreaterThan(
 58:       originalPlant!.createdAt.getTime()
 59:     );
 60:   });
 61: 
 62:   it("should mark a plant as inactive on delete, but not remove it", async () => {
 63: 
 64:     const plantData: Omit<PlantRecord, "id" | "createdAt" | "updatedAt"> = {
 65:       varietyId: "test-variety-2",
 66:       name: "To Be Deleted",
 67:       varietyName: "Test Variety 2",
 68:       plantedDate: new Date("2024-01-01"),
 69:       location: "Outdoor",
 70:       container: "Another Container",
 71:       isActive: true,
 72:     };
 73:     const plantId = await plantService.addPlant(plantData);
 74: 
 75: 
 76:     await plantService.deletePlant(plantId);
 77: 
 78: 
 79:     const deletedPlant = await plantService.getPlant(plantId);
 80:     expect(deletedPlant).toBeDefined();
 81:     expect(deletedPlant?.isActive).toBe(false);
 82: 
 83: 
 84:     const activePlants = await plantService.getActivePlants();
 85:     const findDeleted = activePlants.find((p) => p.id === plantId);
 86:     expect(findDeleted).toBeUndefined();
 87:   });
 88: 
 89:   it("retrieves only active plants", async () => {
 90: 
 91:     await plantService.addPlant({
 92:       varietyId: "active-variety",
 93:       varietyName: "Active Variety",
 94:       plantedDate: new Date(),
 95:       location: "Location 1",
 96:       container: "Container 1",
 97:       isActive: true,
 98:     });
 99: 
100: 
101:     const inactiveId = await plantService.addPlant({
102:       varietyId: "inactive-variety",
103:       varietyName: "Inactive Variety",
104:       plantedDate: new Date(),
105:       location: "Location 2",
106:       container: "Container 2",
107:       isActive: true,
108:     });
109: 
110: 
111:     await plantService.updatePlant(inactiveId, { isActive: false });
112: 
113:     const activePlants = await plantService.getActivePlants();
114:     expect(activePlants).toHaveLength(1);
115:     expect(activePlants[0].varietyId).toBe("active-variety");
116:   });
117: });

================
File: src/__tests__/services/smartDefaultsService.test.ts
================
  1: import { SmartDefaultsService } from "@/services/smartDefaultsService";
  2: import { varietyService } from "@/types/database";
  3: import { GrowthStage } from "@/types/core";
  4: 
  5: 
  6: jest.mock("@/types/database", () => ({
  7:   varietyService: {
  8:     getAllVarieties: jest.fn(),
  9:     getVariety: jest.fn(),
 10:     getVarietyByName: jest.fn(),
 11:     addVariety: jest.fn(),
 12:   },
 13:   careService: {
 14:     getLastCareActivityByType: jest.fn(),
 15:   },
 16:   db: {
 17:     careActivities: {
 18:       where: jest.fn(() => ({
 19:         equals: jest.fn(() => ({
 20:           toArray: jest.fn(),
 21:         })),
 22:       })),
 23:     },
 24:   },
 25: }));
 26: 
 27: describe("SmartDefaultsService", () => {
 28:   beforeEach(async () => {
 29:     jest.clearAllMocks();
 30:   });
 31: 
 32:   describe("error handling and edge cases", () => {
 33:     it("handles corrupted care log data without crashing", async () => {
 34:       const varieties = [
 35:         {
 36:           id: "test-variety",
 37:           name: "Test Variety",
 38:           category: "leafy-greens" as const,
 39:           growthTimeline: {
 40:             germination: { min: 3, max: 7 },
 41:             seedling: { min: 14, max: 21 },
 42:             vegetative: { min: 21, max: 35 },
 43:             mature: { min: 35, max: 50 },
 44:             flowering: { min: 50, max: 70 },
 45:             fruiting: { min: 70, max: 90 },
 46:           },
 47:           createdAt: new Date(),
 48:         },
 49:       ];
 50: 
 51: 
 52:       const mockPlant = {
 53:         id: "test-plant",
 54:         varietyId: "test-variety",
 55:         varietyName: "Test Variety",
 56:         name: "Test Plant",
 57:         plantedDate: new Date(),
 58:         currentStage: "vegetative" as GrowthStage,
 59:         location: "Indoor",
 60:         container: "4-inch pot",
 61:         isActive: true,
 62:         createdAt: new Date(),
 63:         updatedAt: new Date(),
 64:       };
 65: 
 66:       (varietyService.getAllVarieties as jest.Mock).mockResolvedValue(
 67:         varieties
 68:       );
 69:       (varietyService.getVariety as jest.Mock).mockResolvedValue(varieties[0]);
 70: 
 71:       const result = await SmartDefaultsService.getDefaultsForPlant(mockPlant);
 72: 
 73: 
 74:       expect(result).toBeDefined();
 75: 
 76: 
 77:       if (result) {
 78:         expect(result).toHaveProperty("watering");
 79:         expect(result).toHaveProperty("fertilizer");
 80:       }
 81:     });
 82: 
 83:     it("returns null for invalid plant data", async () => {
 84:       const invalidPlant = {
 85:         id: "invalid-plant",
 86:         varietyId: "non-existent-variety",
 87:         varietyName: "Non-existent",
 88:         name: "Invalid Plant",
 89:         plantedDate: new Date(),
 90:         currentStage: "vegetative" as GrowthStage,
 91:         location: "Indoor",
 92:         container: "4-inch pot",
 93:         isActive: true,
 94:         createdAt: new Date(),
 95:         updatedAt: new Date(),
 96:       };
 97: 
 98:       (varietyService.getVariety as jest.Mock).mockResolvedValue(null);
 99: 
100:       const result = await SmartDefaultsService.getDefaultsForPlant(
101:         invalidPlant
102:       );
103: 
104:       expect(result).toBeNull();
105:     });
106: 
107:     it("handles missing growth timeline gracefully", async () => {
108:       const varietyWithoutTimeline = {
109:         id: "test-variety",
110:         name: "Test Variety",
111:         category: "leafy-greens" as const,
112:         createdAt: new Date(),
113: 
114:       };
115: 
116:       const mockPlant = {
117:         id: "test-plant",
118:         varietyId: "test-variety",
119:         varietyName: "Test Variety",
120:         name: "Test Plant",
121:         plantedDate: new Date(),
122:         currentStage: "vegetative" as GrowthStage,
123:         location: "Indoor",
124:         container: "4-inch pot",
125:         isActive: true,
126:         createdAt: new Date(),
127:         updatedAt: new Date(),
128:       };
129: 
130:       (varietyService.getVariety as jest.Mock).mockResolvedValue(
131:         varietyWithoutTimeline
132:       );
133: 
134:       const result = await SmartDefaultsService.getDefaultsForPlant(mockPlant);
135: 
136: 
137:       expect(result).toBeDefined();
138:     });
139:   });
140: 
141:   describe("quick completion options", () => {
142:     it("generates appropriate options for watering", async () => {
143:       const mockPlant = {
144:         id: "test-plant",
145:         varietyId: "test-variety",
146:         varietyName: "Test Variety",
147:         name: "Test Plant",
148:         plantedDate: new Date(),
149:         currentStage: "vegetative" as GrowthStage,
150:         location: "Indoor",
151:         container: "4-inch pot",
152:         isActive: true,
153:         createdAt: new Date(),
154:         updatedAt: new Date(),
155:       };
156: 
157: 
158:       const mockVariety = {
159:         id: "test-variety",
160:         name: "Test Variety",
161:         category: "leafy-greens" as const,
162:         growthTimeline: {
163:           germination: { min: 3, max: 7 },
164:           seedling: { min: 14, max: 21 },
165:           vegetative: { min: 21, max: 35 },
166:           mature: { min: 35, max: 50 },
167:           flowering: { min: 50, max: 70 },
168:           fruiting: { min: 70, max: 90 },
169:         },
170:         createdAt: new Date(),
171:       };
172: 
173:       (varietyService.getVariety as jest.Mock).mockResolvedValue(mockVariety);
174: 
175:       const options = await SmartDefaultsService.getQuickCompletionOptions(
176:         mockPlant,
177:         "water"
178:       );
179: 
180: 
181:       expect(options).not.toBeNull();
182:       if (options) {
183:         expect(Array.isArray(options)).toBe(true);
184:         expect(options.length).toBeGreaterThanOrEqual(0);
185:       }
186:     });
187:   });
188: });

================
File: src/__tests__/utils/plantRegistration.test.ts
================
 1: import { calculateCurrentStageWithVariety } from "@/utils/growthStage";
 2: 
 3: describe("Plant Registration Utils", () => {
 4:   const mockVariety = {
 5:     id: "test-variety",
 6:     name: "Test Plant",
 7:     normalizedName: "Test Plant",
 8:     category: "herbs" as const,
 9:     growthTimeline: {
10:       germination: 7,
11:       seedling: 14,
12:       vegetative: 21,
13:       maturation: 45,
14:       rootDevelopment: 14,
15:     },
16:     createdAt: new Date(),
17:     updatedAt: new Date(),
18:   };
19: 
20:   describe("calculateCurrentStageWithVariety", () => {
21:     it("calculates germination stage correctly", () => {
22:       const plantedDate = new Date();
23:       plantedDate.setDate(plantedDate.getDate() - 3);
24: 
25:       const stage = calculateCurrentStageWithVariety(plantedDate, mockVariety);
26:       expect(stage).toBe("germination");
27:     });
28: 
29:     it("calculates seedling stage correctly", () => {
30:       const plantedDate = new Date();
31:       plantedDate.setDate(plantedDate.getDate() - 10);
32: 
33:       const stage = calculateCurrentStageWithVariety(plantedDate, mockVariety);
34:       expect(stage).toBe("seedling");
35:     });
36: 
37:     it("calculates vegetative stage correctly", () => {
38:       const plantedDate = new Date();
39:       plantedDate.setDate(plantedDate.getDate() - 25);
40: 
41:       const stage = calculateCurrentStageWithVariety(plantedDate, mockVariety);
42:       expect(stage).toBe("vegetative");
43:     });
44: 
45:     it("handles invalid variety gracefully", () => {
46:       const plantedDate = new Date();
47:       const stage = calculateCurrentStageWithVariety(plantedDate, null);
48:       expect(stage).toBe("vegetative");
49:     });
50:   });
51: });

================
File: src/components/layouts/Welcome.tsx
================
  1: import React, { useState } from "react";
  2: import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/Card";
  3: import { Button } from "@/components/ui/Button";
  4: import { Link } from "react-router-dom";
  5: 
  6: const Welcome: React.FC = () => {
  7:   const [currentStep, setCurrentStep] = useState(0);
  8: 
  9:   const onboardingSteps = [
 10:     {
 11:       title: "Welcome to SmartGarden",
 12:       content: (
 13:         <div className="text-center space-y-6">
 14:           <div className="text-7xl mb-6 animate-bounce"></div>
 15:           <div className="space-y-4">
 16:             <h2 className="text-3xl font-black text-foreground leading-tight">
 17:               Your digital gardening companion
 18:             </h2>
 19:             <p className="text-muted-foreground leading-relaxed text-lg">
 20:               Track your plants, schedule care tasks, and grow healthier gardens
 21:               with science-backed protocols.
 22:             </p>
 23:           </div>
 24:         </div>
 25:       ),
 26:     },
 27:     {
 28:       title: "Smart Care Scheduling",
 29:       content: (
 30:         <div className="text-center space-y-6">
 31:           <div className="text-7xl mb-6 animate-pulse"></div>
 32:           <div className="space-y-4">
 33:             <h2 className="text-3xl font-black text-foreground leading-tight">
 34:               Never miss a watering
 35:             </h2>
 36:             <p className="text-muted-foreground leading-relaxed text-lg">
 37:               Get personalized care reminders based on your plants' growth
 38:               stages and your logging history.
 39:             </p>
 40:           </div>
 41:         </div>
 42:       ),
 43:     },
 44:     {
 45:       title: "Photo & Progress Tracking",
 46:       content: (
 47:         <div className="text-center space-y-6">
 48:           <div className="text-7xl mb-6"></div>
 49:           <div className="space-y-4">
 50:             <h2 className="text-3xl font-black text-foreground leading-tight">
 51:               Document your garden's journey
 52:             </h2>
 53:             <p className="text-muted-foreground leading-relaxed text-lg">
 54:               Capture photos, log activities, and watch your plants thrive with
 55:               detailed growth tracking.
 56:             </p>
 57:           </div>
 58:         </div>
 59:       ),
 60:     },
 61:     {
 62:       title: "Ready to Start?",
 63:       content: (
 64:         <div className="text-center space-y-6">
 65:           <div className="text-7xl mb-6"></div>
 66:           <div className="space-y-4">
 67:             <h2 className="text-3xl font-black text-foreground leading-tight">
 68:               Let's add your first plant
 69:             </h2>
 70:             <p className="text-muted-foreground leading-relaxed text-lg">
 71:               Start your digital garden by registering your first plant. We'll
 72:               guide you through the process.
 73:             </p>
 74:           </div>
 75:         </div>
 76:       ),
 77:     },
 78:   ];
 79: 
 80:   const nextStep = () => {
 81:     if (currentStep < onboardingSteps.length - 1) {
 82:       setCurrentStep(currentStep + 1);
 83:     }
 84:   };
 85: 
 86:   const previousStep = () => {
 87:     if (currentStep > 0) {
 88:       setCurrentStep(currentStep - 1);
 89:     }
 90:   };
 91: 
 92:   const currentStepData = onboardingSteps[currentStep];
 93:   const isLastStep = currentStep === onboardingSteps.length - 1;
 94:   const isFirstStep = currentStep === 0;
 95: 
 96:   return (
 97:     <div className="min-h-screen bg-gradient-to-br from-emerald-50 via-green-50 to-blue-50 flex items-center justify-center p-4">
 98:       <div className="w-full max-w-sm">
 99:         <Card className="shadow-2xl border-0 bg-card/95 backdrop-blur-lg rounded-3xl overflow-hidden">
100:           <CardHeader className="text-center pb-6 bg-gradient-to-r from-emerald-500/5 to-green-500/5">
101:             <CardTitle className="text-xs font-bold text-muted-foreground uppercase tracking-widest">
102:               {currentStepData.title}
103:             </CardTitle>
104: 
105:             {}
106:             <div className="flex justify-center mt-8 space-x-2">
107:               {onboardingSteps.map((_, index) => (
108:                 <div
109:                   key={index}
110:                   className={`h-3 rounded-full transition-all duration-500 ease-out ${
111:                     index === currentStep
112:                       ? "w-8 bg-gradient-to-r from-emerald-500 to-green-600 shadow-lg shadow-emerald-500/40"
113:                       : index < currentStep
114:                       ? "w-3 bg-emerald-400"
115:                       : "w-3 bg-gray-200"
116:                   }`}
117:                 />
118:               ))}
119:             </div>
120:           </CardHeader>
121: 
122:           <CardContent className="pb-8 px-6">
123:             {}
124:             <div className="min-h-80 flex items-center justify-center mb-8">
125:               {currentStepData.content}
126:             </div>
127: 
128:             {}
129:             <div className="space-y-4">
130:               {}
131:               <div className="w-full">
132:                 {isLastStep ? (
133:                   <Link to="/add-plant" className="block">
134:                     <Button
135:                       size="lg"
136:                       className="w-full group"
137:                       rightIcon={
138:                         <span className="text-2xl group-hover:scale-110 transition-transform duration-200">
139:                           
140:                         </span>
141:                       }
142:                     >
143:                       Add My First Plant
144:                     </Button>
145:                   </Link>
146:                 ) : (
147:                   <Button
148:                     onClick={nextStep}
149:                     size="lg"
150:                     className="w-full group"
151:                     rightIcon={
152:                       <svg
153:                         className="w-5 h-5 group-hover:translate-x-1 transition-transform duration-200"
154:                         fill="none"
155:                         stroke="currentColor"
156:                         viewBox="0 0 24 24"
157:                       >
158:                         <path
159:                           strokeLinecap="round"
160:                           strokeLinejoin="round"
161:                           strokeWidth={3}
162:                           d="M9 5l7 7-7 7"
163:                         />
164:                       </svg>
165:                     }
166:                   >
167:                     Continue
168:                   </Button>
169:                 )}
170:               </div>
171: 
172:               {}
173:               <div className="flex gap-3">
174:                 <div className="flex-1">
175:                   {!isFirstStep && (
176:                     <Button
177:                       variant="ghost"
178:                       onClick={previousStep}
179:                       className="w-full"
180:                       leftIcon={
181:                         <svg
182:                           className="w-4 h-4"
183:                           fill="none"
184:                           stroke="currentColor"
185:                           viewBox="0 0 24 24"
186:                         >
187:                           <path
188:                             strokeLinecap="round"
189:                             strokeLinejoin="round"
190:                             strokeWidth={2}
191:                             d="M15 19l-7-7 7-7"
192:                           />
193:                         </svg>
194:                       }
195:                     >
196:                       Back
197:                     </Button>
198:                   )}
199:                 </div>
200:                 <div className="flex-1">
201:                   {!isLastStep && (
202:                     <Link to="/add-plant" className="block">
203:                       <Button
204:                         variant="ghost"
205:                         className="w-full"
206:                         rightIcon={
207:                           <svg
208:                             className="w-4 h-4"
209:                             fill="none"
210:                             stroke="currentColor"
211:                             viewBox="0 0 24 24"
212:                           >
213:                             <path
214:                               strokeLinecap="round"
215:                               strokeLinejoin="round"
216:                               strokeWidth={2}
217:                               d="M9 5l7 7-7 7"
218:                             />
219:                           </svg>
220:                         }
221:                       >
222:                         Skip
223:                       </Button>
224:                     </Link>
225:                   )}
226:                 </div>
227:               </div>
228:             </div>
229:           </CardContent>
230:         </Card>
231:       </div>
232:     </div>
233:   );
234: };
235: 
236: export default Welcome;

================
File: src/components/ui/Button.tsx
================
  1: import React from "react";
  2: import { cn } from "@/utils/cn";
  3: 
  4: interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  5:   variant?: "primary" | "secondary" | "outline" | "ghost" | "destructive";
  6:   size?: "sm" | "md" | "lg" | "xl";
  7:   children: React.ReactNode;
  8:   loading?: boolean;
  9:   leftIcon?: React.ReactNode;
 10:   rightIcon?: React.ReactNode;
 11: }
 12: 
 13: export const Button: React.FC<ButtonProps> = ({
 14:   variant = "primary",
 15:   size = "md",
 16:   className,
 17:   children,
 18:   loading = false,
 19:   leftIcon,
 20:   rightIcon,
 21:   disabled,
 22:   ...props
 23: }) => {
 24:   const baseClasses = [
 25:     "inline-flex items-center justify-center",
 26:     "font-bold tracking-wide",
 27:     "rounded-2xl",
 28:     "transition-all duration-200 ease-out",
 29:     "focus:outline-none focus:ring-4 focus:ring-offset-0",
 30:     "active:scale-95",
 31:     "disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100",
 32:     "select-none",
 33:     "relative overflow-hidden",
 34:   ].join(" ");
 35: 
 36:   const variantClasses = {
 37:     primary: [
 38:       "bg-gradient-to-r from-emerald-500 to-green-600",
 39:       "text-white",
 40:       "hover:from-emerald-600 hover:to-green-700",
 41:       "active:from-emerald-700 active:to-green-800",
 42:       "focus:ring-emerald-400/50",
 43:       "shadow-lg shadow-emerald-500/25",
 44:       "hover:shadow-xl hover:shadow-emerald-500/30",
 45:       "border-0",
 46:     ].join(" "),
 47: 
 48:     secondary: [
 49:       "bg-gradient-to-r from-amber-400 to-orange-500",
 50:       "text-white",
 51:       "hover:from-amber-500 hover:to-orange-600",
 52:       "focus:ring-amber-400/50",
 53:       "shadow-lg shadow-amber-400/25",
 54:       "border-0",
 55:     ].join(" "),
 56: 
 57:     outline: [
 58:       "bg-card text-primary",
 59:       "hover:bg-muted hover:text-primary",
 60:       "active:bg-muted",
 61:       "focus:ring-ring/50",
 62:       "border-2 border-border",
 63:       "hover:border-ring",
 64:       "shadow-sm hover:shadow-md",
 65:     ].join(" "),
 66: 
 67:     ghost: [
 68:       "bg-transparent text-muted-foreground",
 69:       "hover:bg-muted hover:text-foreground",
 70:       "active:bg-muted",
 71:       "focus:ring-ring/50",
 72:       "border-0",
 73:       "shadow-none",
 74:     ].join(" "),
 75: 
 76:     destructive: [
 77:       "bg-gradient-to-r from-red-500 to-red-600",
 78:       "text-white",
 79:       "hover:from-red-600 hover:to-red-700",
 80:       "active:from-red-700 active:to-red-800",
 81:       "focus:ring-red-400/50",
 82:       "shadow-lg shadow-red-500/25",
 83:       "hover:shadow-xl hover:shadow-red-500/30",
 84:       "border-0",
 85:     ].join(" "),
 86:   };
 87: 
 88:   const sizeClasses = {
 89:     sm: "px-3 py-1.5 text-sm gap-1.5",
 90:     md: "px-4 py-2 text-base gap-2",
 91:     lg: "px-6 py-3 text-lg gap-2.5",
 92:     xl: "px-8 py-4 text-xl gap-3",
 93:   };
 94: 
 95:   const isDisabled = disabled || loading;
 96: 
 97:   return (
 98:     <button
 99:       className={cn(
100:         baseClasses,
101:         variantClasses[variant],
102:         sizeClasses[size],
103:         className
104:       )}
105:       disabled={isDisabled}
106:       {...props}
107:     >
108:       {loading && (
109:         <div className="absolute inset-0 flex items-center justify-center">
110:           <div className="w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin" />
111:         </div>
112:       )}
113: 
114:       <div className={cn("flex items-center gap-2", loading && "opacity-0")}>
115:         {leftIcon && <span className="flex-shrink-0">{leftIcon}</span>}
116:         <span>{children}</span>
117:         {rightIcon && <span className="flex-shrink-0">{rightIcon}</span>}
118:       </div>
119:     </button>
120:   );
121: };

================
File: src/components/ui/Card.tsx
================
 1: import React from "react";
 2: import { cn } from "@/utils/cn";
 3: 
 4: interface CardProps {
 5:   children: React.ReactNode;
 6:   className?: string;
 7: }
 8: 
 9: interface CardHeaderProps extends React.HTMLAttributes<HTMLDivElement> {
10:   children: React.ReactNode;
11:   className?: string;
12: }
13: 
14: interface CardContentProps extends React.HTMLAttributes<HTMLDivElement> {
15:   children: React.ReactNode;
16:   className?: string;
17: }
18: 
19: export function Card({ children, className }: CardProps) {
20:   return (
21:     <div
22:       className={cn(
23:         "rounded-lg border bg-card text-card-foreground shadow-sm",
24:         className
25:       )}
26:     >
27:       {children}
28:     </div>
29:   );
30: }
31: 
32: export function CardHeader({
33:   children,
34:   className,
35:   ...props
36: }: CardHeaderProps) {
37:   return (
38:     <div
39:       className={cn("px-6 py-4 border-b border-border", className)}
40:       {...props}
41:     >
42:       {children}
43:     </div>
44:   );
45: }
46: 
47: export function CardContent({
48:   children,
49:   className,
50:   ...props
51: }: CardContentProps) {
52:   return (
53:     <div
54:       className={cn(
55:         "p-6 pt-0 text-card-foreground",
56:         className
57:       )}
58:       {...props}
59:     >
60:       {children}
61:     </div>
62:   );
63: }
64: 
65: export function CardTitle({ children, className }: CardProps) {
66:   return (
67:     <h3
68:       className={cn(
69:         "text-2xl font-semibold leading-none tracking-tight text-card-foreground",
70:         className
71:       )}
72:     >
73:       {children}
74:     </h3>
75:   );
76: }

================
File: src/components/Navigation.tsx
================
 1: import React from "react";
 2: import { Link, useLocation } from "react-router-dom";
 3: import { cn } from "@/utils/cn";
 4: import { DarkModeToggle } from "@/components/ui/DarkModeToggle";
 5: 
 6: const Navigation: React.FC = () => {
 7:   const location = useLocation();
 8: 
 9:   const navItems = [
10:     { path: "/", label: "Dashboard", icon: "" },
11:     { path: "/plants", label: "Plants", icon: "" },
12:     { path: "/add-plant", label: "Add Plant", icon: "" },
13:   ];
14: 
15:   return (
16:     <nav className="fixed bottom-0 left-0 right-0 bg-card dark:bg-background border-t border-border z-50">
17:       <div className="flex justify-around items-center h-16 px-4">
18:         {navItems.map((item) => (
19:           <Link
20:             key={item.path}
21:             to={item.path}
22:             className={cn(
23:               "flex flex-col items-center justify-center min-w-touch h-full px-2",
24:               "text-xs font-medium transition-colors",
25:               location.pathname === item.path
26:                 ? "text-garden-600 dark:text-emerald-500 bg-garden-50 dark:bg-card"
27:                 : "text-muted-foreground dark:text-muted-foreground hover:text-garden-500 dark:hover:text-emerald-500"
28:             )}
29:           >
30:             <span className="text-xl mb-1">{item.icon}</span>
31:             <span className="text-xs">{item.label}</span>
32:           </Link>
33:         ))}
34: 
35:         {}
36:         <div className="flex flex-col items-center justify-center h-full px-2">
37:           <DarkModeToggle size="sm" />
38:           <span className="text-xs text-muted-foreground dark:text-muted-foreground mt-1">
39:             Theme
40:           </span>
41:         </div>
42:       </div>
43:     </nav>
44:   );
45: };
46: 
47: export default Navigation;

================
File: src/data/seedVarieties.ts
================
   1: import { PlantCategory } from "@/types";
   2: 
   3: import {
   4:   StageSpecificWateringProtocol,
   5:   StageSpecificLightingProtocol,
   6:   StageSpecificFertilizationProtocol,
   7:   EnvironmentalProtocol,
   8:   SoilMixture,
   9:   ContainerRequirements,
  10:   SuccessionProtocol,
  11: } from "@/types";
  12: 
  13: export interface ComprehensivePlantProtocols {
  14:   lighting?: StageSpecificLightingProtocol;
  15:   watering?: StageSpecificWateringProtocol;
  16:   fertilization?: StageSpecificFertilizationProtocol;
  17:   environment?: EnvironmentalProtocol;
  18:   soilMixture?: SoilMixture;
  19:   container?: ContainerRequirements;
  20:   succession?: SuccessionProtocol;
  21:   specialRequirements?: string[];
  22: }
  23: 
  24: export interface SeedVariety {
  25:   name: string;
  26:   category: PlantCategory;
  27:   growthTimeline: {
  28:     [stageName: string]: number;
  29:   };
  30:   protocols?: ComprehensivePlantProtocols;
  31:   isEverbearing?: boolean;
  32:   productiveLifespan?: number;
  33: }
  34: 
  35: 
  36: 
  37: 
  38: 
  39: 
  40: 
  41: 
  42: export const seedVarieties: SeedVariety[] = [
  43:   {
  44:     name: "Astro Arugula",
  45:     category: "leafy-greens",
  46:     isEverbearing: true,
  47:     productiveLifespan: 56,
  48:     growthTimeline: {
  49:       germination: 7,
  50:       seedling: 14,
  51:       vegetative: 14,
  52:       maturation: 37,
  53:     },
  54:     protocols: {
  55:       watering: {
  56:         germination: {
  57:           trigger: { moistureLevel: "3-4" },
  58:           target: { moistureLevel: "6-7" },
  59:           volume: { amount: "2-4 fl oz", frequency: "2-3x/week" },
  60:         },
  61:         seedling: {
  62:           trigger: { moistureLevel: "3-4" },
  63:           target: { moistureLevel: "6-7" },
  64:           volume: { amount: "2-4 fl oz", frequency: "2-3x/week" },
  65:         },
  66:         vegetative: {
  67:           trigger: { moistureLevel: "3-4" },
  68:           target: { moistureLevel: "6-7" },
  69:           volume: { amount: "8-12 fl oz", frequency: "2-3x/week" },
  70:         },
  71:       },
  72:       fertilization: {
  73:         seedling: {
  74:           schedule: [
  75:             {
  76:               taskName: "Light Fish Emulsion",
  77:               details: { product: "Fish Emulsion", dilution: "1-2 Tbsp/gal" },
  78:               startDays: 14,
  79:               frequencyDays: 14,
  80:               repeatCount: 1,
  81:             },
  82:           ],
  83:         },
  84:         vegetative: {
  85:           schedule: [
  86:             {
  87:               taskName: "Regular Fish Emulsion",
  88:               details: { product: "Fish Emulsion", dilution: "1-2 Tbsp/gal" },
  89:               startDays: 28,
  90:               frequencyDays: 14,
  91:               repeatCount: 2,
  92:             },
  93:           ],
  94:         },
  95:       },
  96:     },
  97:   },
  98:   {
  99:     name: "Baby's Leaf Spinach",
 100:     category: "leafy-greens",
 101:     isEverbearing: true,
 102:     productiveLifespan: 60,
 103:     growthTimeline: {
 104:       germination: 7,
 105:       seedling: 14,
 106:       vegetative: 9,
 107:       maturation: 30,
 108:     },
 109:     protocols: {
 110:       watering: {
 111:         germination: {
 112:           trigger: { moistureLevel: "<4" },
 113:           target: { moistureLevel: "6" },
 114:           volume: { amount: "Mist as needed", frequency: "Daily" },
 115:         },
 116:         seedling: {
 117:           trigger: { moistureLevel: "<4" },
 118:           target: { moistureLevel: "6" },
 119:           volume: { amount: "Mist as needed", frequency: "As needed" },
 120:         },
 121:         vegetative: {
 122:           trigger: { moistureLevel: "<4" },
 123:           target: { moistureLevel: "6" },
 124:           volume: { amount: "~1 gal/week for bed", frequency: "As needed" },
 125:         },
 126:       },
 127:       fertilization: {
 128:         seedling: {
 129:           schedule: [
 130:             {
 131:               taskName: "Light Fish Emulsion",
 132:               details: { product: "Fish emulsion", dilution: "2 Tbsp/gal" },
 133:               startDays: 14,
 134:               frequencyDays: 14,
 135:               repeatCount: 1,
 136:             },
 137:           ],
 138:         },
 139:         vegetative: {
 140:           schedule: [
 141:             {
 142:               taskName: "Regular Fish Emulsion",
 143:               details: { product: "Fish emulsion", dilution: "2 Tbsp/gal" },
 144:               startDays: 28,
 145:               frequencyDays: 14,
 146:               repeatCount: 2,
 147:             },
 148:           ],
 149:         },
 150:       },
 151:     },
 152:   },
 153:   {
 154:     name: "May Queen Lettuce",
 155:     category: "leafy-greens",
 156:     isEverbearing: true,
 157:     productiveLifespan: 60,
 158:     growthTimeline: {
 159:       germination: 10,
 160:       seedling: 20,
 161:       vegetative: 20,
 162:       maturation: 60,
 163:     },
 164:     protocols: {
 165:       watering: {
 166:         germination: {
 167:           trigger: { moistureLevel: "Keep surface moist" },
 168:           target: { moistureLevel: "7-8" },
 169:           volume: { amount: "16-32 oz", frequency: "Daily/as needed" },
 170:         },
 171:         seedling: {
 172:           trigger: { moistureLevel: "3-4" },
 173:           target: { moistureLevel: "8-10" },
 174:           volume: { amount: "0.5-1 gal", frequency: "Every 1-3 days" },
 175:         },
 176:         vegetative: {
 177:           trigger: { moistureLevel: "3-4" },
 178:           target: { moistureLevel: "8-10" },
 179:           volume: { amount: "0.75-1.5 gal", frequency: "Every 2-3 days" },
 180:         },
 181:       },
 182:       fertilization: {
 183:         seedling: {
 184:           schedule: [
 185:             {
 186:               taskName: "Diluted Fish Emulsion",
 187:               details: {
 188:                 product: "Fish emulsion/fish+kelp blend",
 189:                 dilution: "0.5-1 Tbsp/gal",
 190:               },
 191:               startDays: 25,
 192:               frequencyDays: 14,
 193:               repeatCount: 2,
 194:             },
 195:           ],
 196:         },
 197:       },
 198:     },
 199:   },
 200:   {
 201:     name: "Rasmus Broccoli",
 202:     category: "fruiting-plants",
 203:     productiveLifespan: 95,
 204:     growthTimeline: {
 205:       germination: 7,
 206:       seedling: 17,
 207:       vegetative: 31,
 208:       maturation: 90,
 209:     },
 210:     protocols: {
 211:       fertilization: {
 212:         seedling: {
 213:           schedule: [
 214:             {
 215:               taskName: "Fish + Seaweed Blend",
 216:               details: {
 217:                 product: "Fish + Seaweed blend",
 218:                 dilution: " strength",
 219:               },
 220:               startDays: 7,
 221:               frequencyDays: 7,
 222:               repeatCount: 3,
 223:             },
 224:           ],
 225:         },
 226:         vegetative: {
 227:           schedule: [
 228:             {
 229:               taskName: "Fish + Seaweed Blend",
 230:               details: {
 231:                 product: "Fish + Seaweed blend",
 232:                 dilution: "full strength",
 233:               },
 234:               startDays: 28,
 235:               frequencyDays: 7,
 236:               repeatCount: 4,
 237:             },
 238:           ],
 239:         },
 240:       },
 241:     },
 242:   },
 243:   {
 244:     name: "Stuttgarter Onions",
 245:     category: "root-vegetables",
 246:     productiveLifespan: 120,
 247:     growthTimeline: {
 248:       germination: 14,
 249:       seedling: 42,
 250:       vegetative: 42,
 251:       maturation: 120,
 252:     },
 253:     protocols: {},
 254:   },
 255:   {
 256:     name: "White Sweet Spanish Onions",
 257:     category: "root-vegetables",
 258:     productiveLifespan: 120,
 259:     growthTimeline: {
 260:       germination: 14,
 261:       seedling: 42,
 262:       vegetative: 42,
 263:       maturation: 120,
 264:     },
 265:     protocols: {},
 266:   },
 267:   {
 268:     name: "Garlic",
 269:     category: "root-vegetables",
 270:     productiveLifespan: 270,
 271:     growthTimeline: {
 272:       germination: 30,
 273:       seedling: 120,
 274:       vegetative: 90,
 275:       maturation: 270,
 276:     },
 277:     protocols: {},
 278:   },
 279:   {
 280:     name: "Rosemary",
 281:     category: "herbs",
 282:     productiveLifespan: 730,
 283:     growthTimeline: {
 284:       germination: 21,
 285:       seedling: 40,
 286:       vegetative: 180,
 287:       maturation: 365,
 288:     },
 289:     protocols: {},
 290:   },
 291:   {
 292:     name: "Greek Oregano",
 293:     category: "herbs",
 294:     productiveLifespan: 730,
 295:     growthTimeline: {
 296:       germination: 14,
 297:       seedling: 28,
 298:       vegetative: 48,
 299:       maturation: 90,
 300:     },
 301:     protocols: {},
 302:   },
 303:   {
 304:     name: "Italian Flat Leaf Parsley",
 305:     category: "herbs",
 306:     isEverbearing: true,
 307:     productiveLifespan: 90,
 308:     growthTimeline: {
 309:       germination: 28,
 310:       seedling: 21,
 311:       vegetative: 41,
 312:       maturation: 90,
 313:     },
 314:     protocols: {},
 315:   },
 316:   {
 317:     name: "Greek Dwarf Basil",
 318:     category: "herbs",
 319:     isEverbearing: true,
 320:     productiveLifespan: 60,
 321:     growthTimeline: {
 322:       germination: 10,
 323:       seedling: 28,
 324:       vegetative: 42,
 325:       maturation: 60,
 326:     },
 327:     protocols: {},
 328:   },
 329:   {
 330:     name: "English Thyme",
 331:     category: "herbs",
 332:     productiveLifespan: 730,
 333:     growthTimeline: {
 334:       germination: 14,
 335:       seedling: 21,
 336:       vegetative: 84,
 337:       maturation: 120,
 338:     },
 339:     protocols: {},
 340:   },
 341:   {
 342:     name: "Boston Pickling Cucumber",
 343:     category: "fruiting-plants",
 344:     isEverbearing: false,
 345:     productiveLifespan: 70,
 346:     growthTimeline: {
 347:       germination: 7,
 348:       seedling: 14,
 349:       vegetative: 21,
 350:       flowering: 42,
 351:       fruitingHarvesting: 50,
 352:     },
 353:     protocols: {
 354:       lighting: {
 355:         seedling: {
 356:           ppfd: {
 357:             min: 200,
 358:             max: 400,
 359:             unit: "mol/m/s",
 360:           },
 361:           photoperiod: {
 362:             hours: 12,
 363:             maxHours: 16,
 364:           },
 365:           dli: {
 366:             min: 8.6,
 367:             max: 23,
 368:             unit: "mol/m/day",
 369:           },
 370:           notes: [
 371:             "Start feeding 2-3 weeks post-germination with balanced liquid fertilizer",
 372:             "Half strength during establishment to avoid nutrient burn",
 373:           ],
 374:         },
 375:         vegetativeGrowth: {
 376:           ppfd: {
 377:             min: 400,
 378:             max: 600,
 379:             unit: "mol/m/s",
 380:           },
 381:           photoperiod: {
 382:             hours: 14,
 383:             maxHours: 16,
 384:           },
 385:           dli: {
 386:             min: 20.2,
 387:             max: 34.6,
 388:             unit: "mol/m/day",
 389:           },
 390:           notes: [
 391:             "Vigorous vine growth requires high light intensity",
 392:             "Higher nitrogen during this phase supports leaf and vine development",
 393:           ],
 394:         },
 395:         flowering: {
 396:           ppfd: {
 397:             min: 500,
 398:             max: 700,
 399:             unit: "mol/m/s",
 400:           },
 401:           photoperiod: {
 402:             hours: 14,
 403:             maxHours: 16,
 404:           },
 405:           dli: {
 406:             min: 28.8,
 407:             max: 40.3,
 408:             unit: "mol/m/day",
 409:           },
 410:           notes: [
 411:             "Critical phase - flower production determines fruit yield",
 412:             "Hand pollination required daily during flowering period",
 413:           ],
 414:         },
 415:         fruitingHarvesting: {
 416:           ppfd: {
 417:             min: 500,
 418:             max: 700,
 419:             unit: "mol/m/s",
 420:           },
 421:           photoperiod: {
 422:             hours: 14,
 423:             maxHours: 16,
 424:           },
 425:           dli: {
 426:             min: 28.8,
 427:             max: 40.3,
 428:             unit: "mol/m/day",
 429:           },
 430:           notes: [
 431:             "Harvest 8-10 days after fruit set",
 432:             "Regular picking encourages continued production",
 433:           ],
 434:         },
 435:       },
 436:       watering: {
 437:         seedling: {
 438:           trigger: {
 439:             moistureLevel: "consistent moisture",
 440:           },
 441:           target: {
 442:             moistureLevel: "adequate but not waterlogged",
 443:           },
 444:           volume: {
 445:             amount: "as needed for establishment",
 446:             frequency: "daily monitoring",
 447:           },
 448:           notes: ["Heavy feeders require consistent moisture from start"],
 449:         },
 450:         vegetativeGrowth: {
 451:           trigger: {
 452:             moistureLevel: "when top inch dry",
 453:           },
 454:           target: {
 455:             moistureLevel: "thoroughly moist",
 456:           },
 457:           volume: {
 458:             amount: "heavy watering",
 459:             frequency: "as soil indicates",
 460:           },
 461:           notes: [
 462:             "Consistent moisture critical - never allow drought stress",
 463:             "Container growing requires more frequent attention than ground cultivation",
 464:           ],
 465:         },
 466:         flowering: {
 467:           trigger: {
 468:             moistureLevel: "when top inch dry",
 469:           },
 470:           target: {
 471:             moistureLevel: "thoroughly moist",
 472:           },
 473:           volume: {
 474:             amount: "heavy watering",
 475:             frequency: "consistent schedule",
 476:           },
 477:           notes: [
 478:             "Water stress during flowering dramatically reduces fruit set",
 479:             "Morning watering preferred to allow leaves to dry before evening",
 480:           ],
 481:         },
 482:         fruitingHarvesting: {
 483:           trigger: {
 484:             moistureLevel: "when top inch dry",
 485:           },
 486:           target: {
 487:             moistureLevel: "thoroughly moist",
 488:           },
 489:           volume: {
 490:             amount: "heavy watering",
 491:             frequency: "daily during peak production",
 492:           },
 493:           notes: [
 494:             "Fruit development requires enormous water uptake",
 495:             "Inconsistent watering causes bitter or malformed fruit",
 496:           ],
 497:         },
 498:       },
 499:       fertilization: {
 500:         seedling: {
 501:           schedule: [
 502:             {
 503:               taskName: "Initial balanced liquid feed",
 504:               details: {
 505:                 product: "Balanced liquid fertilizer",
 506:                 dilution: "half strength",
 507:               },
 508:               startDays: 14,
 509:               frequencyDays: 0,
 510:               repeatCount: 1,
 511:             },
 512:           ],
 513:         },
 514:         vegetative: {
 515:           schedule: [
 516:             {
 517:               taskName: "Balanced liquid feed",
 518:               details: {
 519:                 product: "Balanced liquid fertilizer",
 520:                 dilution: "full strength",
 521:               },
 522:               startDays: 21,
 523:               frequencyDays: 10,
 524:               repeatCount: 2,
 525:             },
 526:           ],
 527:         },
 528:         flowering: {
 529:           schedule: [
 530:             {
 531:               taskName: "Apply bloom booster fertilizer",
 532:               details: {
 533:                 product: "Higher P-K fertilizer (bloom booster)",
 534:               },
 535:               startDays: 42,
 536:               frequencyDays: 10,
 537:               repeatCount: 2,
 538:             },
 539:           ],
 540:         },
 541:         fruitingHarvesting: {
 542:           schedule: [
 543:             {
 544:               taskName: "Continue bloom booster fertilizer",
 545:               details: {
 546:                 product: "Higher P-K fertilizer",
 547:               },
 548:               startDays: 56,
 549:               frequencyDays: 10,
 550:               repeatCount: 2,
 551:             },
 552:           ],
 553:         },
 554:       },
 555:       environment: {
 556:         pH: {
 557:           min: 5.8,
 558:           max: 6.5,
 559:           optimal: 6.2,
 560:         },
 561:       },
 562:       soilMixture: {
 563:         components: {
 564:           "coco coir": 30,
 565:           perlite: 25,
 566:           vermiculite: 25,
 567:           compost: 20,
 568:         },
 569:         amendments: {
 570:           "well-rotted manure": "3 tbsp per gallon",
 571:           "bone meal": "1 tbsp per gallon",
 572:         },
 573:       },
 574:       container: {
 575:         minSize: "2-3 gallons",
 576:         depth: "18-24 inches minimum",
 577:         staging: {
 578:           seedling: "4 inch pot or cell tray with deeper cells",
 579:           final: "Large container or main bed section",
 580:         },
 581:       },
 582:       succession: {
 583:         interval: 21,
 584:         method: "continuous",
 585:         harvestMethod: "selective",
 586:         productiveWeeks: 8,
 587:         notes: [
 588:           "Succession every 3-4 weeks for overlapping production",
 589:           "Each plant produces for 6-8 weeks once fruiting begins",
 590:         ],
 591:       },
 592:       specialRequirements: [
 593:         "A-frame trellis essential for vine support and light exposure",
 594:         "Hand pollination critical - transfer pollen from male to female flowers daily",
 595:         "Female flowers identifiable by tiny cucumber at base",
 596:         "Harvest regularly to encourage continued production",
 597:         "Heavy feeders requiring rich, well-draining soil",
 598:       ],
 599:     },
 600:   },
 601:   {
 602:     name: "Sugar Snap Peas",
 603:     category: "fruiting-plants",
 604:     isEverbearing: true,
 605:     productiveLifespan: 56,
 606:     growthTimeline: {
 607:       germinationEmergence: 10,
 608:       seedling: 14,
 609:       vegetativeVining: 21,
 610:       flowerBudFormation: 50,
 611:       podSetMaturation: 60,
 612:     },
 613:     protocols: {
 614:       lighting: {
 615:         germinationEmergence: {
 616:           ppfd: {
 617:             min: 100,
 618:             max: 250,
 619:             unit: "mol/m/s",
 620:           },
 621:           photoperiod: {
 622:             hours: 14,
 623:             maxHours: 16,
 624:           },
 625:           dli: {
 626:             min: 5,
 627:             max: 14.4,
 628:             unit: "mol/m/day",
 629:           },
 630:           notes: ["Keep soil consistently moist during germination period"],
 631:         },
 632:         seedling: {
 633:           ppfd: {
 634:             min: 200,
 635:             max: 400,
 636:             unit: "mol/m/s",
 637:           },
 638:           photoperiod: {
 639:             hours: 14,
 640:             maxHours: 16,
 641:           },
 642:           dli: {
 643:             min: 11.5,
 644:             max: 23,
 645:             unit: "mol/m/day",
 646:           },
 647:           notes: [
 648:             "First true leaves and tendrils developing - watch for climbing behavior",
 649:           ],
 650:         },
 651:         vegetativeVining: {
 652:           ppfd: {
 653:             min: 400,
 654:             max: 600,
 655:             unit: "mol/m/s",
 656:           },
 657:           photoperiod: {
 658:             hours: 14,
 659:             maxHours: 16,
 660:           },
 661:           dli: {
 662:             min: 23,
 663:             max: 34.6,
 664:             unit: "mol/m/day",
 665:           },
 666:           notes: ["Rapid vine growth - ensure trellis support is adequate"],
 667:         },
 668:         flowerBudFormation: {
 669:           ppfd: {
 670:             min: 500,
 671:             max: 700,
 672:             unit: "mol/m/s",
 673:           },
 674:           photoperiod: {
 675:             hours: 12,
 676:             maxHours: 14,
 677:           },
 678:           dli: {
 679:             min: 21.6,
 680:             max: 35.3,
 681:             unit: "mol/m/day",
 682:           },
 683:           notes: [
 684:             "Slight photoperiod reduction can encourage flowering",
 685:             "Monitor for first flower buds around days 40-50",
 686:           ],
 687:         },
 688:         podSetMaturation: {
 689:           ppfd: {
 690:             min: 500,
 691:             max: 700,
 692:             unit: "mol/m/s",
 693:           },
 694:           photoperiod: {
 695:             hours: 12,
 696:           },
 697:           dli: {
 698:             min: 21.6,
 699:             max: 30.2,
 700:             unit: "mol/m/day",
 701:           },
 702:           notes: [
 703:             "Harvest pods when plump but before peas become starchy",
 704:             "Regular harvesting encourages continued pod production",
 705:           ],
 706:         },
 707:       },
 708:       watering: {
 709:         germinationEmergence: {
 710:           trigger: {
 711:             moistureLevel: "3-4",
 712:           },
 713:           target: {
 714:             moistureLevel: "7-8",
 715:           },
 716:           volume: {
 717:             amount: "16-24 oz (470-710 mL)",
 718:             frequency: "3x/week",
 719:           },
 720:           notes: [
 721:             "Keep consistently moist but not waterlogged during germination",
 722:           ],
 723:         },
 724:         seedling: {
 725:           trigger: {
 726:             moistureLevel: "3-4",
 727:           },
 728:           target: {
 729:             moistureLevel: "7-8",
 730:           },
 731:           volume: {
 732:             amount: "20-32 oz (590-945 mL)",
 733:             frequency: "3x/week",
 734:           },
 735:           notes: ["Establishing root system requires consistent moisture"],
 736:         },
 737:         vegetativeVining: {
 738:           trigger: {
 739:             moistureLevel: "3-4",
 740:           },
 741:           target: {
 742:             moistureLevel: "7-8",
 743:           },
 744:           volume: {
 745:             amount: "32-42 oz (945-1240 mL)",
 746:             frequency: "3-4x/week",
 747:           },
 748:           notes: ["Rapid vine growth increases water demands significantly"],
 749:         },
 750:         flowerBudFormation: {
 751:           trigger: {
 752:             moistureLevel: "3-4",
 753:           },
 754:           target: {
 755:             moistureLevel: "7-8",
 756:           },
 757:           volume: {
 758:             amount: "40-48 oz (1180-1419 mL)",
 759:             frequency: "4x/week",
 760:           },
 761:           notes: [
 762:             "Critical period - water stress reduces flower and pod formation",
 763:           ],
 764:         },
 765:         podSetMaturation: {
 766:           trigger: {
 767:             moistureLevel: "3-4",
 768:           },
 769:           target: {
 770:             moistureLevel: "7-8",
 771:           },
 772:           volume: {
 773:             amount: "40-54 oz (1180-1600 mL)",
 774:             frequency: "3-4x/week",
 775:           },
 776:           notes: ["Pod filling requires substantial water uptake"],
 777:         },
 778:       },
 779:       fertilization: {
 780:         germinationEmergence: {
 781:           schedule: [
 782:             {
 783:               taskName: "Apply Rhizobium inoculant",
 784:               details: {
 785:                 product: "Rhizobium leguminosarum inoculant",
 786:                 method: "soil-drench",
 787:               },
 788:               startDays: 0,
 789:               frequencyDays: 0,
 790:               repeatCount: 1,
 791:             },
 792:           ],
 793:           notes: [
 794:             "Inoculant enables nitrogen fixation - critical for pea nutrition.",
 795:             "Soil pre-amended with gypsum, bone meal, and kelp meal.",
 796:           ],
 797:         },
 798:         seedling: {
 799:           schedule: [
 800:             {
 801:               taskName: "Light container feed",
 802:               details: {
 803:                 product: "5-10-10 fertilizer (light dose)",
 804:               },
 805:               startDays: 14,
 806:               frequencyDays: 0,
 807:               repeatCount: 1,
 808:             },
 809:           ],
 810:           notes: ["Minimal nitrogen needed - peas fix their own nitrogen."],
 811:         },
 812:         vegetativeVining: {
 813:           schedule: [
 814:             {
 815:               taskName: "Optional light feeding",
 816:               details: {
 817:                 product: "Fish emulsion/fish+kelp (optional)",
 818:               },
 819:               startDays: 21,
 820:               frequencyDays: 10,
 821:               repeatCount: 2,
 822:             },
 823:             {
 824:               taskName: "Worm casting top-dress",
 825:               details: {
 826:                 product: "Worm casting",
 827:                 method: "top-dress",
 828:               },
 829:               startDays: 30,
 830:               frequencyDays: 30,
 831:               repeatCount: 1,
 832:             },
 833:           ],
 834:         },
 835:         flowerBudFormation: {
 836:           schedule: [
 837:             {
 838:               taskName: "Boost phosphorus with Bone Meal",
 839:               details: {
 840:                 product: "Bone meal",
 841:                 method: "top-dress",
 842:               },
 843:               startDays: 42,
 844:               frequencyDays: 0,
 845:               repeatCount: 1,
 846:             },
 847:             {
 848:               taskName: "Apply Kelp/sea-mineral",
 849:               details: {
 850:                 product: "Kelp/sea-mineral (if continuing liquid feed)",
 851:               },
 852:               startDays: 49,
 853:               frequencyDays: 0,
 854:               repeatCount: 1,
 855:             },
 856:           ],
 857:           notes: [
 858:             "Reduce nitrogen completely.",
 859:             "Boost phosphorus and potassium for flower and pod development.",
 860:           ],
 861:         },
 862:         podSetMaturation: {
 863:           schedule: [],
 864:           notes: [
 865:             "Minimal feeding during harvest - focus on consistent watering.",
 866:           ],
 867:         },
 868:       },
 869:       environment: {
 870:         pH: {
 871:           min: 6.2,
 872:           max: 6.8,
 873:           optimal: 6.5,
 874:         },
 875:       },
 876:       soilMixture: {
 877:         components: {
 878:           "coco coir": 35,
 879:           perlite: 20,
 880:           vermiculite: 20,
 881:           compost: 15,
 882:           "worm castings": 5,
 883:           biochar: 5,
 884:         },
 885:         amendments: {
 886:           gypsum: " cup per 15-gal bag",
 887:           "bone meal": "2-3 Tbsp forked into top 4-6 inches",
 888:           "kelp meal": "2 Tbsp into top 4-6 inches",
 889:           "basalt rock dust (optional)": " cup for additional micronutrients",
 890:         },
 891:       },
 892:       container: {
 893:         minSize: "2-3 gallons (15-gallon preferred)",
 894:         depth: "12 inches minimum",
 895:       },
 896:       succession: {
 897:         interval: 14,
 898:         method: "continuous",
 899:         harvestMethod: "selective",
 900:         productiveWeeks: 6,
 901:         notes: [
 902:           "Succession every 2-3 weeks for continuous harvest",
 903:           "Each planting productive for 6-8 weeks once podding begins",
 904:         ],
 905:       },
 906:       specialRequirements: [
 907:         "Rhizobium inoculant essential for nitrogen fixation",
 908:         "A-frame trellis or netting required for climbing support",
 909:         "Self-pollinating but benefits from gentle daily shaking of flowers",
 910:         "Harvest pods when full but before peas become starchy",
 911:         "Cool-season crop - performs best in moderate temperatures",
 912:         "Succession planting every 2-3 weeks extends harvest window",
 913:       ],
 914:     },
 915:   },
 916:   {
 917:     name: "Albion Strawberries",
 918:     category: "berries",
 919:     isEverbearing: true,
 920:     productiveLifespan: 730,
 921:     growthTimeline: {
 922:       germination: 14,
 923:       establishment: 14,
 924:       vegetative: 28,
 925:       flowering: 56,
 926:       fruiting: 91,
 927:       ongoingProduction: 98,
 928:     },
 929:     protocols: {
 930:       lighting: {
 931:         establishment: {
 932:           ppfd: {
 933:             min: 200,
 934:             max: 200,
 935:             optimal: 200,
 936:             unit: "mol/m/s",
 937:           },
 938:           photoperiod: {
 939:             hours: 14,
 940:             maxHours: 16,
 941:             constraint: "day-neutral varieties require consistent photoperiod",
 942:           },
 943:           dli: {
 944:             min: 10.1,
 945:             max: 11.5,
 946:             unit: "mol/m/day",
 947:           },
 948:           notes: [
 949:             "Remove flowers for the first 4-6 weeks to encourage strong plant establishment",
 950:             "Focus energy on root and crown development",
 951:           ],
 952:         },
 953:         vegetative: {
 954:           ppfd: {
 955:             min: 300,
 956:             max: 400,
 957:             unit: "mol/m/s",
 958:           },
 959:           photoperiod: {
 960:             hours: 16,
 961:             constraint:
 962:               "consistent 16h photoperiod is critical for continuous production",
 963:           },
 964:           dli: {
 965:             min: 17.3,
 966:             max: 23,
 967:             unit: "mol/m/day",
 968:           },
 969:           notes: [
 970:             "Remove ALL runners as soon as they are spotted - check weekly",
 971:             "Energy must go to fruit production, not vegetative reproduction",
 972:           ],
 973:         },
 974:         flowering: {
 975:           ppfd: {
 976:             min: 350,
 977:             max: 400,
 978:             unit: "mol/m/s",
 979:           },
 980:           photoperiod: {
 981:             hours: 16,
 982:             constraint:
 983:               "critical for continuous flowering in day-neutral types",
 984:           },
 985:           dli: {
 986:             min: 20.2,
 987:             max: 23,
 988:             unit: "mol/m/day",
 989:           },
 990:           notes: [
 991:             "Hand pollination is critical indoors",
 992:             "Use a small brush to transfer pollen every 1-2 days",
 993:           ],
 994:         },
 995:         fruiting: {
 996:           ppfd: {
 997:             min: 450,
 998:             max: 500,
 999:             unit: "mol/m/s",
1000:           },
1001:           photoperiod: {
1002:             hours: 16,
1003:           },
1004:           dli: {
1005:             min: 25.9,
1006:             max: 28.8,
1007:             unit: "mol/m/day",
1008:           },
1009:           notes: [
1010:             "Higher light intensity supports fruit development and sugar accumulation",
1011:           ],
1012:         },
1013:         ongoingProduction: {
1014:           ppfd: {
1015:             min: 350,
1016:             max: 400,
1017:             unit: "mol/m/s",
1018:           },
1019:           photoperiod: {
1020:             hours: 16,
1021:           },
1022:           dli: {
1023:             min: 20.2,
1024:             max: 23,
1025:             unit: "mol/m/day",
1026:           },
1027:           notes: [
1028:             "Monthly flush with pH-adjusted plain water until 20-30% runoff",
1029:             "Prevents salt buildup from intensive feeding",
1030:           ],
1031:         },
1032:       },
1033:       watering: {
1034:         establishment: {
1035:           trigger: {
1036:             moistureLevel: "3-4",
1037:           },
1038:           target: {
1039:             moistureLevel: "6-7",
1040:           },
1041:           volume: {
1042:             amount:
1043:               "5-gal: 20-30 oz (590-890 mL), 2-gal hanging: 8-10 oz (235-300 mL)",
1044:             frequency: "3-4x/week",
1045:             perPlant: true,
1046:           },
1047:           notes: [
1048:             "Remove flowers for first 4-6 weeks to encourage establishment",
1049:           ],
1050:         },
1051:         vegetative: {
1052:           trigger: {
1053:             moistureLevel: "3-4",
1054:           },
1055:           target: {
1056:             moistureLevel: "6-7",
1057:           },
1058:           volume: {
1059:             amount:
1060:               "5-gal: 25-35 oz (740-1030 mL), 2-gal hanging: 10-13 oz (300-385 mL)",
1061:             frequency: "3-5x/week",
1062:             perPlant: true,
1063:           },
1064:           notes: [
1065:             "Remove ALL runners as soon as spotted - weekly checks essential",
1066:           ],
1067:         },
1068:         flowering: {
1069:           trigger: {
1070:             moistureLevel: "3-4",
1071:           },
1072:           target: {
1073:             moistureLevel: "6-7",
1074:           },
1075:           volume: {
1076:             amount:
1077:               "5-gal: 30-35 oz (890-1030 mL), 2-gal hanging: 10-13 oz (300-385 mL)",
1078:             frequency: "4-5x/week",
1079:             perPlant: true,
1080:           },
1081:           notes: [
1082:             "Consistent moisture critical during flower and early fruit development",
1083:           ],
1084:         },
1085:         fruiting: {
1086:           trigger: {
1087:             moistureLevel: "3-4",
1088:           },
1089:           target: {
1090:             moistureLevel: "6-7",
1091:           },
1092:           volume: {
1093:             amount:
1094:               "5-gal: 30-35 oz (890-1030 mL), 2-gal hanging: 10-13 oz (300-385 mL)",
1095:             frequency: "4-5x/week",
1096:             perPlant: true,
1097:           },
1098:         },
1099:         ongoingProduction: {
1100:           trigger: {
1101:             moistureLevel: "3-4",
1102:           },
1103:           target: {
1104:             moistureLevel: "6-7",
1105:           },
1106:           volume: {
1107:             amount:
1108:               "5-gal: 25-35 oz (740-1030 mL), 2-gal hanging: 10-13 oz (300-385 mL)",
1109:             frequency: "3-5x/week",
1110:             perPlant: true,
1111:           },
1112:           notes: [
1113:             "Monthly flush: irrigate with pH-adjusted plain water until 20-30% runoff",
1114:           ],
1115:         },
1116:       },
1117:       fertilization: {
1118:         establishment: {
1119:           schedule: [
1120:             {
1121:               taskName: "Mix in Bone Meal at planting",
1122:               details: {
1123:                 product: "Bone meal",
1124:                 amount: "1 Tbsp/5gal",
1125:                 method: "mix-in-soil",
1126:               },
1127:               startDays: 0,
1128:               frequencyDays: 0,
1129:               repeatCount: 1,
1130:             },
1131:             {
1132:               taskName: "Apply Fish + Seaweed",
1133:               details: {
1134:                 product: "Neptune's Harvest Fish + Seaweed",
1135:                 dilution: " strength, 0.5 Tbsp/gal",
1136:               },
1137:               startDays: 14,
1138:               frequencyDays: 0,
1139:               repeatCount: 1,
1140:             },
1141:           ],
1142:         },
1143:         vegetative: {
1144:           schedule: [
1145:             {
1146:               taskName: "Apply Neptune's Harvest ( strength)",
1147:               details: {
1148:                 product: "Neptune's Harvest",
1149:                 dilution: " strength",
1150:               },
1151:               startDays: 28,
1152:               frequencyDays: 14,
1153:               repeatCount: 1,
1154:             },
1155:             {
1156:               taskName: "Apply Neptune's Harvest (full strength)",
1157:               details: {
1158:                 product: "Neptune's Harvest",
1159:                 dilution: "full strength, 1 Tbsp/gal",
1160:               },
1161:               startDays: 35,
1162:               frequencyDays: 14,
1163:               repeatCount: 1,
1164:             },
1165:           ],
1166:         },
1167:         flowering: {
1168:           schedule: [
1169:             {
1170:               taskName: "Top-dress with Espoma Berry-Tone",
1171:               details: {
1172:                 product: "Espoma Berry-Tone",
1173:                 amount: "2 Tbsp/bag",
1174:                 method: "top-dress",
1175:               },
1176:               startDays: 56,
1177:               frequencyDays: 0,
1178:               repeatCount: 1,
1179:             },
1180:             {
1181:               taskName: "Apply Kelp/Sea-Mineral",
1182:               details: {
1183:                 product: "Kelp/sea-mineral",
1184:                 dilution: "1 Tbsp/gal",
1185:               },
1186:               startDays: 63,
1187:               frequencyDays: 14,
1188:               repeatCount: 2,
1189:             },
1190:             {
1191:               taskName: "Top-dress with Bone Meal",
1192:               details: {
1193:                 product: "Bone meal",
1194:                 amount: " Tbsp/bag",
1195:                 method: "top-dress",
1196:               },
1197:               startDays: 70,
1198:               frequencyDays: 0,
1199:               repeatCount: 1,
1200:             },
1201:           ],
1202:         },
1203:         fruiting: {
1204:           schedule: [
1205:             {
1206:               taskName: "Apply Kelp/Sea-Mineral",
1207:               details: {
1208:                 product: "Kelp/sea-mineral",
1209:                 dilution: "1 Tbsp/gal",
1210:               },
1211:               startDays: 91,
1212:               frequencyDays: 14,
1213:               repeatCount: 2,
1214:             },
1215:             {
1216:               taskName: "Apply High-K Supplement",
1217:               details: {
1218:                 product: "Fish & Seaweed + high-K supplement",
1219:               },
1220:               startDays: 98,
1221:               frequencyDays: 14,
1222:               repeatCount: 3,
1223:             },
1224:           ],
1225:         },
1226:         ongoingProduction: {
1227:           schedule: [
1228:             {
1229:               taskName: "Apply Kelp",
1230:               details: {
1231:                 product: "Kelp",
1232:                 dilution: "1 Tbsp/gal",
1233:               },
1234:               startDays: 98,
1235:               frequencyDays: 28,
1236:               repeatCount: 26,
1237:             },
1238:             {
1239:               taskName: "Top-dress with Berry-Tone",
1240:               details: {
1241:                 product: "Berry-Tone",
1242:                 amount: "1 Tbsp/bag",
1243:                 method: "top-dress",
1244:               },
1245:               startDays: 112,
1246:               frequencyDays: 28,
1247:               repeatCount: 25,
1248:             },
1249:           ],
1250:         },
1251:       },
1252:       environment: {
1253:         pH: {
1254:           min: 5.8,
1255:           max: 6.5,
1256:           optimal: 6.2,
1257:         },
1258:       },
1259:       soilMixture: {
1260:         components: {
1261:           "coco coir": 35,
1262:           perlite: 25,
1263:           compost: 20,
1264:           "worm castings": 15,
1265:           vermiculite: 5,
1266:         },
1267:         amendments: {
1268:           "bone meal": "1 Tbsp per gallon of mix at planting",
1269:           "rock dust": " cup per 5-gal bag",
1270:         },
1271:       },
1272:       specialRequirements: [
1273:         "Day-neutral varieties require consistent 16-hour photoperiod for continuous production",
1274:         "Hand pollination essential indoors - use small brush every 1-2 days during flowering",
1275:         "Remove ALL runners immediately to focus energy on fruit production",
1276:         "Remove flowers for first 4-6 weeks to establish strong root system",
1277:         "Monthly salt flush prevents nutrient lockout from intensive feeding",
1278:         "Replace plants every 2 years when productivity declines",
1279:       ],
1280:     },
1281:   },
1282:   {
1283:     name: "Caroline Raspberries",
1284:     category: "berries",
1285:     isEverbearing: true,
1286:     productiveLifespan: 1095,
1287:     growthTimeline: {
1288:       caneEstablishment: 0,
1289:       vegetative: 21,
1290:       floweringFruiting: 63,
1291:       ongoing: 120,
1292:     },
1293:     protocols: {
1294:       lighting: {
1295:         caneEstablishment: {
1296:           ppfd: {
1297:             min: 200,
1298:             max: 300,
1299:             unit: "mol/m/s",
1300:           },
1301:           photoperiod: {
1302:             hours: 16,
1303:             maxHours: 18,
1304:           },
1305:           dli: {
1306:             min: 11.5,
1307:             max: 19.4,
1308:             unit: "mol/m/day",
1309:           },
1310:           notes: [
1311:             "Focus on establishing strong root system and cane structure",
1312:           ],
1313:         },
1314:         vegetative: {
1315:           ppfd: {
1316:             min: 300,
1317:             max: 400,
1318:             unit: "mol/m/s",
1319:           },
1320:           photoperiod: {
1321:             hours: 16,
1322:           },
1323:           dli: {
1324:             min: 17.3,
1325:             max: 23,
1326:             unit: "mol/m/day",
1327:           },
1328:         },
1329:         floweringFruiting: {
1330:           ppfd: {
1331:             min: 400,
1332:             max: 600,
1333:             unit: "mol/m/s",
1334:           },
1335:           photoperiod: {
1336:             hours: 14,
1337:             maxHours: 16,
1338:           },
1339:           dli: {
1340:             min: 22.7,
1341:             max: 34.6,
1342:             unit: "mol/m/day",
1343:           },
1344:           notes: [
1345:             "Higher light intensity supports fruit development and sugar content",
1346:           ],
1347:         },
1348:         ongoing: {
1349:           ppfd: {
1350:             min: 350,
1351:             max: 500,
1352:             unit: "mol/m/s",
1353:           },
1354:           photoperiod: {
1355:             hours: 16,
1356:           },
1357:           dli: {
1358:             min: 20.2,
1359:             max: 28.8,
1360:             unit: "mol/m/day",
1361:           },
1362:         },
1363:       },
1364:       watering: {
1365:         caneEstablishment: {
1366:           trigger: {
1367:             moistureLevel: "3-4",
1368:           },
1369:           target: {
1370:             moistureLevel: "6-7",
1371:           },
1372:           volume: {
1373:             amount: "monitor with soil moisture meter",
1374:             frequency: "as needed",
1375:           },
1376:           notes: ["Always water until slight drainage occurs"],
1377:         },
1378:         vegetative: {
1379:           trigger: {
1380:             moistureLevel: "3-4",
1381:           },
1382:           target: {
1383:             moistureLevel: "6-7",
1384:           },
1385:           volume: {
1386:             amount: "monitor with soil moisture meter",
1387:             frequency: "as needed",
1388:           },
1389:         },
1390:         floweringFruiting: {
1391:           trigger: {
1392:             moistureLevel: "3-4",
1393:           },
1394:           target: {
1395:             moistureLevel: "7-8",
1396:           },
1397:           volume: {
1398:             amount: "monitor with soil moisture meter",
1399:             frequency: "as needed",
1400:           },
1401:           notes: ["Higher moisture during fruit development"],
1402:         },
1403:         ongoing: {
1404:           trigger: {
1405:             moistureLevel: "3-4",
1406:           },
1407:           target: {
1408:             moistureLevel: "6-7",
1409:           },
1410:           volume: {
1411:             amount: "monitor with soil moisture meter",
1412:             frequency: "as needed",
1413:           },
1414:         },
1415:       },
1416:       fertilization: {
1417:         caneEstablishment: {
1418:           schedule: [
1419:             {
1420:               taskName: "Top-dress with Compost",
1421:               details: {
1422:                 product: "Compost",
1423:                 amount: "1-2 inches",
1424:                 method: "top-dress",
1425:               },
1426:               startDays: 0,
1427:               frequencyDays: 0,
1428:               repeatCount: 1,
1429:             },
1430:           ],
1431:         },
1432:         vegetative: {
1433:           schedule: [
1434:             {
1435:               taskName: "Apply Fish Emulsion",
1436:               details: {
1437:                 product: "Fish Emulsion",
1438:                 dilution: "1-2 tbsp/gallon",
1439:               },
1440:               startDays: 21,
1441:               frequencyDays: 21,
1442:               repeatCount: 2,
1443:             },
1444:           ],
1445:         },
1446:         floweringFruiting: {
1447:           schedule: [
1448:             {
1449:               taskName: "Apply Liquid Kelp & Balanced Fertilizer",
1450:               details: {
1451:                 product: "Liquid Kelp + balanced organic fertilizer",
1452:               },
1453:               startDays: 63,
1454:               frequencyDays: 21,
1455:               repeatCount: 2,
1456:             },
1457:             {
1458:               taskName: "Apply K-Rich Formula",
1459:               details: {
1460:                 product: "Kelp Extract + K-rich formula",
1461:               },
1462:               startDays: 70,
1463:               frequencyDays: 10,
1464:               repeatCount: 5,
1465:             },
1466:           ],
1467:         },
1468:         ongoing: {
1469:           schedule: [
1470:             {
1471:               taskName: "Apply Compost Tea",
1472:               details: {
1473:                 product: "Aerobically brewed compost tea",
1474:               },
1475:               startDays: 120,
1476:               frequencyDays: 30,
1477:               repeatCount: 12,
1478:             },
1479:           ],
1480:         },
1481:       },
1482:       environment: {
1483:         pH: {
1484:           min: 5.8,
1485:           max: 6.5,
1486:           optimal: 6,
1487:         },
1488:       },
1489:       soilMixture: {
1490:         components: {
1491:           "compost (equal parts worm castings and composted manure)": 50,
1492:           "peat moss": 20,
1493:           perlite: 20,
1494:           "pine bark fines": 10,
1495:         },
1496:         amendments: {
1497:           "bone meal": "2.7 tbsp per 10-gallon container",
1498:           "dried blood meal": "1.3 tbsp per 10-gallon container",
1499:         },
1500:       },
1501:       container: {
1502:         minSize: "2  10-gallon containers per plant",
1503:         depth: "12 inches minimum",
1504:       },
1505:       specialRequirements: [
1506:         "Primocane-fruiting variety produces on current year's canes",
1507:         "Requires strong trellis system for support",
1508:         "Prune spent canes after harvest to encourage new growth",
1509:         "Benefits from good air circulation to prevent fungal issues",
1510:         "Hand pollination by gently shaking plants during flowering",
1511:       ],
1512:     },
1513:   },
1514:   {
1515:     name: "Little Finger Carrots",
1516:     category: "root-vegetables",
1517:     isEverbearing: false,
1518:     growthTimeline: {
1519:       germination: 14,
1520:       seedling: 14,
1521:       vegetative: 28,
1522:       rootDevelopment: 42,
1523:     },
1524:     protocols: {
1525:       lighting: {
1526:         germination: {
1527:           ppfd: {
1528:             min: 100,
1529:             max: 150,
1530:             unit: "mol/m/s",
1531:           },
1532:           photoperiod: {
1533:             hours: 12,
1534:             maxHours: 12,
1535:             constraint: "strict maximum to prevent bolting",
1536:           },
1537:           dli: {
1538:             min: 4.3,
1539:             max: 6.5,
1540:             unit: "mol/m/day",
1541:           },
1542:           notes: [
1543:             "Maintain consistent moisture",
1544:             "Critical photoperiod control",
1545:           ],
1546:         },
1547:         seedling: {
1548:           ppfd: {
1549:             min: 150,
1550:             max: 300,
1551:             unit: "mol/m/s",
1552:           },
1553:           photoperiod: {
1554:             hours: 12,
1555:             maxHours: 12,
1556:             constraint: "photoperiods >12h may trigger premature bolting",
1557:           },
1558:           dli: {
1559:             min: 6.5,
1560:             max: 13,
1561:             unit: "mol/m/day",
1562:           },
1563:           notes: ["Critical photoperiod - max 12 hours"],
1564:         },
1565:         vegetative: {
1566:           ppfd: {
1567:             min: 200,
1568:             max: 200,
1569:             optimal: 200,
1570:             unit: "mol/m/s",
1571:           },
1572:           photoperiod: {
1573:             hours: 12,
1574:             maxHours: 12,
1575:             constraint:
1576:               "photoperiods >12h may trigger premature bolting, especially if warm",
1577:           },
1578:           dli: {
1579:             min: 8.6,
1580:             max: 8.6,
1581:             unit: "mol/m/day",
1582:           },
1583:           notes: ["Strict 12-hour maximum", "Especially critical if warm"],
1584:         },
1585:         rootDevelopment: {
1586:           ppfd: {
1587:             min: 300,
1588:             max: 600,
1589:             unit: "mol/m/s",
1590:           },
1591:           photoperiod: {
1592:             hours: 12,
1593:             maxHours: 12,
1594:             constraint: "maintain strict limit",
1595:           },
1596:           dli: {
1597:             min: 13,
1598:             max: 25.9,
1599:             unit: "mol/m/day",
1600:           },
1601:           notes: [
1602:             "Consistent moisture prevents splitting",
1603:             "21-day succession",
1604:           ],
1605:         },
1606:       },
1607:       watering: {
1608:         germination: {
1609:           trigger: {
1610:             moistureLevel: "surface dry",
1611:             description: "Keep surface moist",
1612:           },
1613:           target: {
1614:             moistureLevel: "6-7",
1615:             description: "top inch",
1616:           },
1617:           volume: {
1618:             amount: "8-12 oz",
1619:             frequency: "daily",
1620:           },
1621:           notes: ["Maintain consistent moisture"],
1622:         },
1623:         seedling: {
1624:           trigger: {
1625:             moistureLevel: "4-5",
1626:           },
1627:           target: {
1628:             moistureLevel: "6-7",
1629:           },
1630:           volume: {
1631:             amount: "16-24 oz",
1632:             frequency: "every 2-3 days",
1633:           },
1634:         },
1635:         vegetative: {
1636:           trigger: {
1637:             moistureLevel: "3-4",
1638:           },
1639:           target: {
1640:             moistureLevel: "6-7",
1641:           },
1642:           volume: {
1643:             amount: "24-32 oz",
1644:             frequency: "every 2-4 days",
1645:           },
1646:           notes: [
1647:             "Photoperiods >12h may trigger premature bolting, especially if warm",
1648:           ],
1649:         },
1650:         rootDevelopment: {
1651:           trigger: {
1652:             moistureLevel: "3-4",
1653:           },
1654:           target: {
1655:             moistureLevel: "6-7",
1656:           },
1657:           volume: {
1658:             amount: "32-40 oz",
1659:             frequency: "every 3-4 days",
1660:           },
1661:           notes: [
1662:             "Consistent moisture prevents splitting",
1663:             "21-day succession",
1664:           ],
1665:         },
1666:       },
1667:       fertilization: {
1668:         seedling: {
1669:           schedule: [
1670:             {
1671:               taskName: "Apply Worm Casting Tea",
1672:               details: {
1673:                 product: "Worm Casting Tea",
1674:                 dilution: "1 part castings:10 parts water",
1675:               },
1676:               startDays: 21,
1677:               frequencyDays: 10,
1678:               repeatCount: 2,
1679:             },
1680:           ],
1681:         },
1682:         vegetative: {
1683:           schedule: [
1684:             {
1685:               taskName: "Apply Lower-N Fish Emulsion",
1686:               details: {
1687:                 product: "Lower-N Fish Emulsion",
1688:                 dilution: "1 Tbsp/gal",
1689:               },
1690:               startDays: 35,
1691:               frequencyDays: 21,
1692:               repeatCount: 2,
1693:             },
1694:           ],
1695:         },
1696:         rootDevelopment: {
1697:           schedule: [],
1698:         },
1699:       },
1700:       environment: {
1701:         pH: {
1702:           min: 6,
1703:           max: 6.8,
1704:           optimal: 6.5,
1705:         },
1706:       },
1707:       soilMixture: {
1708:         components: {
1709:           "coco coir": 40,
1710:           perlite: 30,
1711:           vermiculite: 25,
1712:           "coarse sand (2-4mm)": 5,
1713:         },
1714:       },
1715:       container: {
1716:         depth: "12 inches minimum",
1717:         staging: {
1718:           final:
1719:             "Direct sow only - avoid transplanting to prevent root deformities",
1720:         },
1721:       },
1722:       succession: {
1723:         interval: 21,
1724:         method: "zoned",
1725:         harvestMethod: "single-harvest",
1726:         notes: ["Divide bed into zones", "Sow new zone every 3 weeks"],
1727:       },
1728:       specialRequirements: [
1729:         "Strict 12-hour photoperiod maximum",
1730:         "Direct sow only - no transplanting",
1731:         "Stone-free soil essential for straight roots",
1732:         "Fresh manure causes forking - avoid",
1733:       ],
1734:     },
1735:   },
1736:   {
1737:     name: "Detroit Dark Red Beets",
1738:     category: "root-vegetables",
1739:     isEverbearing: false,
1740:     growthTimeline: {
1741:       germination: 7,
1742:       seedling: 14,
1743:       vegetative: 21,
1744:       rootDevelopment: 42,
1745:       maturation: 60,
1746:     },
1747:     protocols: {
1748:       lighting: {
1749:         germination: {
1750:           ppfd: { min: 100, max: 200, unit: "mol/m/s" },
1751:           photoperiod: { hours: 12, maxHours: 14 },
1752:           dli: { min: 4.3, max: 10.1, unit: "mol/m/day" },
1753:           notes: ["Ideal temp: 70-85F for germination"],
1754:         },
1755:         vegetative: {
1756:           ppfd: { min: 250, max: 400, unit: "mol/m/s" },
1757:           photoperiod: { hours: 12, maxHours: 14 },
1758:           dli: { min: 10.8, max: 20.2, unit: "mol/m/day" },
1759:           notes: ["Temperatures >75F can cause bolting"],
1760:         },
1761:         rootDevelopment: {
1762:           ppfd: { min: 400, max: 600, unit: "mol/m/s" },
1763:           photoperiod: { hours: 12, maxHours: 14 },
1764:           dli: { min: 17.3, max: 30.2, unit: "mol/m/day" },
1765:           notes: ["Maintain consistent moisture"],
1766:         },
1767:         maturation: {
1768:           ppfd: { min: 300, max: 450, unit: "mol/m/s" },
1769:           photoperiod: { hours: 12, maxHours: 14 },
1770:           dli: { min: 13, max: 22.7, unit: "mol/m/day" },
1771:           notes: ["21-day succession"],
1772:         },
1773:       },
1774:       watering: {
1775:         germination: {
1776:           trigger: { moistureLevel: "surface dry" },
1777:           target: { moistureLevel: "7-8" },
1778:           volume: { amount: "8-12 oz per session", frequency: "daily misting" },
1779:           notes: ["Ideal temp: 70-85F (21-29C) for germination"],
1780:         },
1781:         vegetative: {
1782:           trigger: { moistureLevel: "4-5 (weeks 1-3), 3-4 (weeks 3-6)" },
1783:           target: { moistureLevel: "7-8 (weeks 1-3), 6-7 (weeks 3-6)" },
1784:           volume: {
1785:             amount: "16-20 oz (weeks 1-3), 20-24 oz (weeks 3-6)",
1786:             frequency: "every 2-3 days (weeks 1-3), every 3-4 days (weeks 3-6)",
1787:           },
1788:           notes: ["Temperatures >75F (24C) can cause bolting"],
1789:         },
1790:         rootDevelopment: {
1791:           trigger: { moistureLevel: "3-4" },
1792:           target: { moistureLevel: "6-7" },
1793:           volume: { amount: "24-28 oz", frequency: "every 3-4 days" },
1794:           notes: ["Maintain consistent moisture"],
1795:         },
1796:         maturation: {
1797:           trigger: { moistureLevel: "2-3" },
1798:           target: { moistureLevel: "5-6" },
1799:           volume: { amount: "20-24 oz", frequency: "every 4-5 days" },
1800:           notes: ["21-day succession"],
1801:         },
1802:       },
1803:       fertilization: {
1804:         vegetative: {
1805:           schedule: [
1806:             {
1807:               taskName: "Apply diluted Fish/Kelp Tea",
1808:               details: { product: "Fish/Kelp Tea", dilution: " strength" },
1809:               startDays: 14,
1810:               frequencyDays: 0,
1811:               repeatCount: 1,
1812:             },
1813:             {
1814:               taskName: "Top-dress with Worm Castings & Bone Meal",
1815:               details: {
1816:                 product: "Worm Castings & Bone Meal",
1817:                 amount: "1 tbsp each",
1818:                 method: "top-dress",
1819:               },
1820:               startDays: 21,
1821:               frequencyDays: 0,
1822:               repeatCount: 1,
1823:             },
1824:           ],
1825:         },
1826:         rootDevelopment: {
1827:           schedule: [
1828:             {
1829:               taskName: "Apply Liquid Kelp",
1830:               details: {
1831:                 product: "Liquid kelp or fish + seaweed",
1832:                 dilution: "1 tbsp/gal",
1833:               },
1834:               startDays: 42,
1835:               frequencyDays: 14,
1836:               repeatCount: 2,
1837:             },
1838:           ],
1839:         },
1840:       },
1841:       environment: {
1842:         temperature: { min: 65, max: 75, optimal: 70, unit: "F" },
1843:         pH: { min: 6.5, max: 7, optimal: 6.8 },
1844:       },
1845:       soilMixture: {
1846:         components: {
1847:           "coco coir": 40,
1848:           perlite: 30,
1849:           vermiculite: 25,
1850:           "compost (or worm castings)": 5,
1851:         },
1852:         amendments: {
1853:           "compost or worm castings": "2 tbsp per gallon",
1854:           "Epsom salts": "1 tsp per gallon",
1855:           "bone meal": "1 tbsp per gallon",
1856:         },
1857:       },
1858:       container: { depth: "10 inches minimum" },
1859:       succession: {
1860:         interval: 21,
1861:         method: "zoned",
1862:         harvestMethod: "selective",
1863:         notes: ["Can harvest greens at 30-40 days", "Roots ready 50-70 days"],
1864:       },
1865:       specialRequirements: [
1866:         "Sensitive to boron deficiency",
1867:         "Avoid high nitrogen after seedling stage",
1868:         "Can be direct sown or carefully transplanted",
1869:       ],
1870:     },
1871:   },
1872:   {
1873:     name: "Beauregard Sweet Potatoes",
1874:     category: "root-vegetables",
1875:     isEverbearing: false,
1876:     growthTimeline: {
1877:       slipProduction: 14,
1878:       vegetativeGrowth: 21,
1879:       tuberDevelopment: 56,
1880:       maturation: 100,
1881:     },
1882:     protocols: {
1883:       lighting: {
1884:         slipProduction: {
1885:           ppfd: { min: 200, max: 200, optimal: 200, unit: "mol/m/s" },
1886:           photoperiod: { hours: 14, maxHours: 16 },
1887:           dli: { min: 10.1, max: 11.5, unit: "mol/m/day" },
1888:           notes: ["High humidity 85-90%", "Temp: 75-80F"],
1889:         },
1890:         vegetativeGrowth: {
1891:           ppfd: { min: 350, max: 600, unit: "mol/m/s" },
1892:           photoperiod: { hours: 14, maxHours: 16 },
1893:           dli: { min: 17.6, max: 34.6, unit: "mol/m/day" },
1894:           notes: ["Vigorous vine growth phase"],
1895:         },
1896:         tuberDevelopment: {
1897:           ppfd: { min: 600, max: 800, unit: "mol/m/s" },
1898:           photoperiod: {
1899:             hours: 10,
1900:             maxHours: 12,
1901:             constraint: "reduce photoperiod to trigger tuber formation",
1902:           },
1903:           dli: { min: 21.6, max: 34.6, unit: "mol/m/day" },
1904:           notes: ["Critical photoperiod reduction for tuberization"],
1905:         },
1906:         maturation: {
1907:           ppfd: { min: 500, max: 600, unit: "mol/m/s" },
1908:           photoperiod: { hours: 8, maxHours: 10 },
1909:           dli: { min: 14.4, max: 21.6, unit: "mol/m/day" },
1910:           notes: ["Further photoperiod reduction"],
1911:         },
1912:       },
1913:       watering: {
1914:         slipProduction: {
1915:           trigger: { moistureLevel: "top 1 inch dry (~4-5)" },
1916:           target: { moistureLevel: "adequate moisture" },
1917:           volume: {
1918:             amount: "16-20 oz (470-590 mL)/plant",
1919:             frequency: "daily for first week, then every 1-2 days",
1920:           },
1921:           notes: ["High humidity (85-90%)", "Temp: 75-80F (24-27C)"],
1922:         },
1923:         vegetativeGrowth: {
1924:           trigger: { moistureLevel: "top 1-2 inches dry (~4)" },
1925:           target: { moistureLevel: "adequate moisture" },
1926:           volume: {
1927:             amount: "30-40 oz (890-1200 mL)/plant",
1928:             frequency: "2x per week",
1929:           },
1930:           notes: ["Vigorous vine growth phase"],
1931:         },
1932:         tuberDevelopment: {
1933:           trigger: { moistureLevel: "top 2 inches dry (~3-4)" },
1934:           target: { moistureLevel: "adequate moisture" },
1935:           volume: { amount: "40-48 oz (1200-1400 mL)", frequency: "2x/week" },
1936:           notes: ["Reduce photoperiod to trigger tuber formation"],
1937:         },
1938:         maturation: {
1939:           trigger: { moistureLevel: "top 2-3 inches dry (~3)" },
1940:           target: { moistureLevel: "minimal" },
1941:           volume: {
1942:             amount: "12-20 oz (350-590 mL)/plant",
1943:             frequency: "1x/week then stop completely 3-7 days pre-harvest",
1944:           },
1945:           notes: ["Final phase preparation"],
1946:         },
1947:       },
1948:       fertilization: {
1949:         slipProduction: { schedule: [] },
1950:         vegetativeGrowth: {
1951:           schedule: [
1952:             {
1953:               taskName: "Apply Blood Meal",
1954:               details: {
1955:                 product: "Blood Meal",
1956:                 amount: "0.5c bed / 5 Tbsp bag",
1957:               },
1958:               startDays: 28,
1959:               frequencyDays: 0,
1960:               repeatCount: 1,
1961:             },
1962:           ],
1963:         },
1964:         tuberDevelopment: {
1965:           schedule: [
1966:             {
1967:               taskName: "Apply Kelp Meal",
1968:               details: {
1969:                 product: "Kelp Meal",
1970:                 amount: "0.75c bed / 7.5 Tbsp bag",
1971:               },
1972:               startDays: 56,
1973:               frequencyDays: 28,
1974:               repeatCount: 2,
1975:             },
1976:             {
1977:               taskName: "Foliar spray with KSO",
1978:               details: {
1979:                 product: "KSO",
1980:                 dilution: "1-2 Tbsp/gal",
1981:                 method: "foliar-spray",
1982:               },
1983:               startDays: 70,
1984:               frequencyDays: 0,
1985:               repeatCount: 1,
1986:             },
1987:           ],
1988:         },
1989:         maturation: {
1990:           schedule: [
1991:             {
1992:               taskName: "Apply KSO/KNO for skin set",
1993:               details: { product: "KSO/KNO" },
1994:               startDays: 80,
1995:               frequencyDays: 0,
1996:               repeatCount: 1,
1997:             },
1998:           ],
1999:           notes: ["Cease all feeding 3-4 wks pre-harvest"],
2000:         },
2001:       },
2002:       environment: {
2003:         temperature: {
2004:           min: 75,
2005:           max: 85,
2006:           optimal: 80,
2007:           unit: "F",
2008:           stage: "tuber development",
2009:         },
2010:         humidity: { min: 85, max: 90, optimal: 87 },
2011:         pH: { min: 5.8, max: 6.2, optimal: 6 },
2012:       },
2013:       soilMixture: {
2014:         components: {
2015:           "coco coir": 40,
2016:           perlite: 30,
2017:           vermiculite: 25,
2018:           "sandy loam": 5,
2019:         },
2020:         amendments: { "well-rotted manure": "3 tbsp per gallon" },
2021:       },
2022:       container: {
2023:         depth: "18-24 inches",
2024:         staging: { final: "Large containers for extensive root system" },
2025:       },
2026:       succession: {
2027:         interval: 0,
2028:         method: "single",
2029:         harvestMethod: "single-harvest",
2030:         notes: ["Long cycle (90-120 days) best for single large harvest"],
2031:       },
2032:       specialRequirements: [
2033:         "Post-harvest curing at 80-85F with high humidity for 5-10 days",
2034:         "Critical photoperiod reduction for tuberization",
2035:         "Soil temperature 75-85F optimal for tuber development",
2036:       ],
2037:     },
2038:   },
2039: ];

================
File: src/pages/care/QuickCompletionButtons.tsx
================
 1: import { useState, useEffect } from "react";
 2: import { Button } from "@/components/ui/Button";
 3: import {
 4:   SmartDefaultsService,
 5:   QuickCompletionValues,
 6: } from "@/services/smartDefaultsService";
 7: import { PlantRecord } from "@/types/database";
 8: 
 9: interface QuickCompletionButtonsProps {
10:   plant: PlantRecord;
11:   activityType: "water" | "fertilize";
12:   onQuickComplete: (values: QuickCompletionValues) => void;
13:   className?: string;
14: }
15: 
16: const QuickCompletionButtons = ({
17:   plant,
18:   activityType,
19:   onQuickComplete,
20:   className = "",
21: }: QuickCompletionButtonsProps) => {
22:   const [options, setOptions] = useState<Array<{
23:     label: string;
24:     values: QuickCompletionValues;
25:   }> | null>(null);
26:   const [isLoading, setIsLoading] = useState(false);
27: 
28:   useEffect(() => {
29:     const loadOptions = async () => {
30:       try {
31:         setIsLoading(true);
32:         const completionOptions =
33:           await SmartDefaultsService.getQuickCompletionOptions(
34:             plant,
35:             activityType
36:           );
37:         setOptions(completionOptions);
38:       } catch (error) {
39:         console.error("Error loading quick completion options:", error);
40:         setOptions(null);
41:       } finally {
42:         setIsLoading(false);
43:       }
44:     };
45: 
46:     if (plant) {
47:       loadOptions();
48:     }
49:   }, [plant, activityType]);
50: 
51:   if (isLoading) {
52:     return (
53:       <div className={`flex gap-2 ${className}`}>
54:         <div className="animate-pulse bg-gray-200 rounded-full h-8 w-20"></div>
55:         <div className="animate-pulse bg-gray-200 rounded-full h-8 w-20"></div>
56:       </div>
57:     );
58:   }
59: 
60:   if (!options || options.length === 0) {
61:     return null;
62:   }
63: 
64:   return (
65:     <div className={`flex gap-2 flex-wrap ${className}`}>
66:       <span className="text-xs text-muted-foreground self-center">
67:         Quick actions:
68:       </span>
69:       {options.map((option, index) => (
70:         <Button
71:           key={index}
72:           type="button"
73:           variant="outline"
74:           size="sm"
75:           onClick={() => onQuickComplete(option.values)}
76:         >
77:           {option.label}
78:         </Button>
79:       ))}
80:     </div>
81:   );
82: };
83: 
84: export default QuickCompletionButtons;

================
File: src/services/firebase/plantService.ts
================
  1: import {
  2:   collection,
  3:   doc,
  4:   addDoc,
  5:   updateDoc,
  6:   onSnapshot,
  7:   query,
  8:   where,
  9:   Timestamp,
 10:   writeBatch,
 11:   serverTimestamp,
 12: } from "firebase/firestore";
 13: import { db } from "./config";
 14: import {
 15:   FirebasePlantRecord,
 16:   convertPlantToFirebase,
 17:   convertPlantFromFirebase,
 18: } from "../../types/firebase";
 19: import { PlantRecord, varietyService } from "../../types/database";
 20: import { ProtocolTranspilerService } from "../ProtocolTranspilerService";
 21: import { FirebaseScheduledTaskService } from "./scheduledTaskService";
 22: 
 23: export class FirebasePlantService {
 24:   private static plantsCollection = collection(db, "plants");
 25: 
 26:   static async updatePlant(
 27:     plantId: string,
 28:     updates: Partial<PlantRecord>
 29:   ): Promise<void> {
 30:     const plantRef = doc(this.plantsCollection, plantId);
 31:     const firebaseUpdates = {
 32:       ...updates,
 33:       updatedAt: serverTimestamp(),
 34:       ...(updates.plantedDate && {
 35:         plantedDate: Timestamp.fromDate(updates.plantedDate),
 36:       }),
 37:     };
 38: 
 39:     await updateDoc(plantRef, firebaseUpdates);
 40:   }
 41: 
 42:   static async deletePlant(plantId: string): Promise<void> {
 43: 
 44:     await this.updatePlant(plantId, { isActive: false });
 45:   }
 46: 
 47:   static async hardDeletePlant(plantId: string): Promise<void> {
 48:     const batch = writeBatch(db);
 49: 
 50: 
 51:     const plantRef = doc(this.plantsCollection, plantId);
 52:     batch.delete(plantRef);
 53: 
 54: 
 55:     await batch.commit();
 56:   }
 57: 
 58:   public static subscribeToPlantsChanges(
 59:     userId: string,
 60:     callback: (plants: PlantRecord[]) => void,
 61:     options: { includeInactive: boolean } = { includeInactive: false }
 62:   ): () => void {
 63:     console.log(" Creating plants query for userId:", userId);
 64: 
 65:     let q;
 66:     if (options.includeInactive) {
 67: 
 68:       q = query(this.plantsCollection, where("userId", "==", userId));
 69:     } else {
 70: 
 71:       q = query(
 72:         this.plantsCollection,
 73:         where("userId", "==", userId),
 74:         where("isActive", "==", true)
 75:       );
 76:     }
 77: 
 78:     console.log(" Plants query created:", q);
 79: 
 80:     const unsubscribe = onSnapshot(
 81:       q,
 82:       (querySnapshot) => {
 83:         console.log(
 84:           " Plants query successful, received:",
 85:           querySnapshot.size,
 86:           "documents"
 87:         );
 88: 
 89:         const plants: PlantRecord[] = [];
 90:         querySnapshot.forEach((doc) => {
 91:           const data = doc.data();
 92:           plants.push({
 93:             id: doc.id,
 94:             ...data,
 95: 
 96:             plantedDate: (data.plantedDate as Timestamp)?.toDate(),
 97:             createdAt: (data.createdAt as Timestamp)?.toDate(),
 98:             updatedAt: (data.updatedAt as Timestamp)?.toDate(),
 99:           } as PlantRecord);
100:         });
101:         callback(plants);
102:       },
103:       (error) => {
104:         console.error(" Plants query failed:", error);
105:         console.error(" Query details:", { userId, options });
106:       }
107:     );
108: 
109:     return unsubscribe;
110:   }
111: 
112: 
113:   static async getPlant(
114:     plantId: string,
115:     userId: string
116:   ): Promise<PlantRecord | null> {
117:     return new Promise((resolve, reject) => {
118:       const plantRef = doc(this.plantsCollection, plantId);
119:       const unsubscribe = onSnapshot(
120:         plantRef,
121:         (doc) => {
122:           if (doc.exists()) {
123:             const data = doc.data() as FirebasePlantRecord;
124: 
125: 
126:             if (data.userId !== userId) {
127:               console.error(" User does not own this plant");
128:               resolve(null);
129:               return;
130:             }
131: 
132:             resolve(convertPlantFromFirebase({ ...data, id: doc.id }));
133:           } else {
134:             resolve(null);
135:           }
136:           unsubscribe();
137:         },
138:         (error) => {
139:           console.error(" Error fetching plant:", error);
140:           resolve(null);
141:           unsubscribe();
142:         }
143:       );
144:     });
145:   }
146: 
147:   static async createPlant(
148:     plant: Omit<PlantRecord, "id" | "createdAt" | "updatedAt">,
149:     userId: string
150:   ): Promise<string> {
151:     try {
152: 
153:       const plantWithDates: PlantRecord = {
154:         ...plant,
155:         id: "",
156:         userId,
157:         createdAt: new Date(),
158:         updatedAt: new Date(),
159:       };
160:       const firebasePlantData = convertPlantToFirebase(plantWithDates, userId);
161:       const docRef = await addDoc(collection(db, "plants"), firebasePlantData);
162: 
163:       const variety = await varietyService.getVariety(plant.varietyId);
164: 
165:       if (!variety) {
166:         console.error(" Variety not found:", plant.varietyId);
167:         return docRef.id;
168:       }
169: 
170:       if (variety.protocols?.fertilization) {
171:         const fullPlant: PlantRecord = {
172:           ...plantWithDates,
173:           id: docRef.id,
174:         };
175: 
176:         const scheduledTasks =
177:           await ProtocolTranspilerService.transpilePlantProtocol(
178:             fullPlant,
179:             variety
180:           );
181: 
182: 
183:         if (scheduledTasks.length > 0) {
184: 
185:           await FirebaseScheduledTaskService.createMultipleTasks(
186:             scheduledTasks,
187:             userId
188:           );
189:         } else {
190:           console.log(" No tasks generated");
191:         }
192:       } else {
193:         console.log(" No fertilization protocols found for variety");
194:       }
195: 
196:       return docRef.id;
197:     } catch (error) {
198:       console.error(" Error creating plant:", error);
199:       throw error;
200:     }
201:   }
202: }

================
File: src/types/core.ts
================
 1: export type GrowthStage =
 2:   | "germination"
 3:   | "seedling"
 4:   | "vegetative"
 5:   | "flowering"
 6:   | "fruiting"
 7:   | "maturation"
 8:   | "harvest"
 9:   | "ongoing-production";
10: 
11: export type PlantCategory =
12:   | "root-vegetables"
13:   | "leafy-greens"
14:   | "herbs"
15:   | "berries"
16:   | "fruiting-plants";
17: 
18: export type CareActivityType =
19:   | "water"
20:   | "fertilize"
21:   | "observe"
22:   | "harvest"
23:   | "transplant"
24:   | "photo"
25:   | "note";
26: 
27: export type QualityRating =
28:   | "excellent"
29:   | "good"
30:   | "fair"
31:   | "poor"
32:   | "unsaleable";
33: 
34: export type HealthAssessment =
35:   | "excellent"
36:   | "good"
37:   | "fair"
38:   | "concerning"
39:   | "critical";
40: 
41: 
42: export type VolumeUnit = "oz" | "ml" | "gal" | "L" | "cups";
43: export type WeightUnit = "oz" | "lbs" | "g" | "kg";
44: export type LengthUnit = "inches" | "cm" | "ft" | "m";
45: export type TemperatureUnit = "F" | "C";
46: 
47: 
48: export type ApplicationMethod =
49:   | "soil-drench"
50:   | "foliar-spray"
51:   | "top-dress"
52:   | "mix-in-soil";
53: 
54: export type WateringMethod =
55:   | "top-watering"
56:   | "bottom-watering"
57:   | "drip"
58:   | "misting";
59: 
60: 
61: export interface Volume {
62:   amount: number;
63:   unit: VolumeUnit;
64: }
65: 
66: export interface Weight {
67:   amount: number;
68:   unit: WeightUnit;
69: }
70: 
71: export interface MoistureReading {
72:   before: number;
73:   after: number;
74:   scale: "1-10" | "visual";
75: }

================
File: src/types/index.ts
================
 1: export * from "./core";
 2: export * from "./protocols";
 3: export * from "./database";
 4: export * from "./scheduling";
 5: export * from "./firebase";
 6: export * from "./user";
 7: 
 8: 
 9: export { plantService, varietyService, careService, db } from "./database";
10: 
11: 
12: export type {
13:   PlantRecord as Plant,
14:   VarietyRecord as Variety,
15:   CareActivityRecord as CareActivity,
16: } from "./database";

================
File: src/App.css
================
 1: #root {
 2:   max-width: 1280px;
 3:   margin: 0 auto;
 4:   padding: 2rem;
 5:   text-align: center;
 6:   @apply bg-background;
 7: }
 8: 
 9: .logo {
10:   height: 6em;
11:   padding: 1.5em;
12:   will-change: filter;
13:   transition: filter 300ms;
14: }
15: .logo:hover {
16:   filter: drop-shadow(0 0 2em #646cffaa);
17: }
18: .logo.react:hover {
19:   filter: drop-shadow(0 0 2em #61dafbaa);
20: }
21: 
22: @keyframes logo-spin {
23:   from {
24:     transform: rotate(0deg);
25:   }
26:   to {
27:     transform: rotate(360deg);
28:   }
29: }
30: 
31: @media (prefers-reduced-motion: no-preference) {
32:   a:nth-of-type(2) .logo {
33:     animation: logo-spin infinite 20s linear;
34:   }
35: }
36: 
37: .card {
38:   padding: 2em;
39: }
40: 
41: .read-the-docs {
42:   color: #888;
43: }

================
File: firestore.rules
================
 1: rules_version = '2';
 2: 
 3: service cloud.firestore {
 4:   match /databases/{database}/documents {
 5:     
 6:     // Helper function to check ownership
 7:     function isOwner(userId) {
 8:       return request.auth != null && request.auth.uid == userId;
 9:     }
10: 
11:     // Plants - users can only access their own plants
12:     match /plants/{plantId} {
13:       allow create: if isOwner(request.resource.data.userId);
14:       allow get, update, delete: if request.auth != null && resource.data.userId == request.auth.uid;
15:       //  CORRECTED list syntax
16:       allow list: if request.auth != null && 
17:         request.query.where.size() > 0 &&
18:         request.query.where[0][0] == 'userId' &&
19:         request.query.where[0][2] == request.auth.uid;
20:     }
21:     
22:     // Varieties - all authenticated users can read and write
23:     match /varieties/{varietyId} {
24:       allow read, write: if request.auth != null;
25:     }
26:     
27:     // Care Activities - users can only access their own activities
28:     match /careActivities/{activityId} {
29:       allow create: if isOwner(request.resource.data.userId);
30:       allow get, update, delete: if request.auth != null && resource.data.userId == request.auth.uid;
31:       //  CORRECTED list syntax
32:       allow list: if request.auth != null && 
33:         request.query.where.size() > 0 &&
34:         request.query.where[0][0] == 'userId' &&
35:         request.query.where[0][2] == request.auth.uid;
36:     }
37:     
38:     // Scheduled Tasks - users can only access their own tasks
39:     match /scheduledTasks/{taskId} {
40:       allow create: if isOwner(request.resource.data.userId);
41:       allow get, update, delete: if request.auth != null && resource.data.userId == request.auth.uid;
42:       //  CORRECTED list syntax
43:       allow list: if request.auth != null && 
44:         request.query.where.size() > 0 &&
45:         request.query.where[0][0] == 'userId' &&
46:         request.query.where[0][2] == request.auth.uid;
47:     }
48:   }
49: }

================
File: tsconfig.json
================
 1: {
 2:   "compilerOptions": {
 3:     "target": "ES2020",
 4:     "useDefineForClassFields": true,
 5:     "lib": ["ES2020", "DOM", "DOM.Iterable"],
 6:     "module": "ESNext",
 7:     "skipLibCheck": true,
 8:     "moduleResolution": "bundler",
 9:     "allowImportingTsExtensions": true,
10:     "resolveJsonModule": true,
11:     "isolatedModules": true,
12:     "noEmit": true,
13:     "jsx": "react-jsx",
14:     "strict": true,
15:     "noUnusedLocals": true,
16:     "noUnusedParameters": true,
17:     "noFallthroughCasesInSwitch": true,
18:     "baseUrl": ".",
19:     "paths": {
20:       "@/*": ["./src/*"],
21:       "@/components/*": ["./src/components/*"],
22:       "@/pages/*": ["./src/pages/*"],
23:       "@/hooks/*": ["./src/hooks/*"],
24:       "@/services/*": ["./src/services/*"],
25:       "@/types/*": ["./src/types/*"],
26:       "@/utils/*": ["./src/utils/*"]
27:     },
28:     "types": ["node", "jest", "@testing-library/jest-dom"]
29:   },
30:   "include": ["src", "vite.config.ts"],
31:   "setupFilesAfterEnv": ["<rootDir>/support/setupTests.js"]
32: }

================
File: src/__tests__/components/CareLogForm.test.tsx
================
  1: import { describe, it, expect, beforeEach } from "@jest/globals";
  2: import { render, screen, waitFor } from "@testing-library/react";
  3: import userEvent from "@testing-library/user-event";
  4: import { MemoryRouter } from "react-router-dom";
  5: import { CareLogForm } from "@/pages/care/CareLogForm";
  6: import { initializeDatabase } from "@/db/seedData";
  7: import { plantService } from "@/types/database";
  8: import { useFirebasePlants } from "@/hooks/useFirebasePlants";
  9: 
 10: jest.mock("@/hooks/useFirebasePlants");
 11: const mockUseFirebasePlants = useFirebasePlants as jest.Mock;
 12: 
 13: const renderWithRouter = (
 14:   component: React.ReactElement,
 15:   initialEntries: string[] = ["/log-care"]
 16: ) => {
 17:   return render(
 18:     <MemoryRouter initialEntries={initialEntries}>{component}</MemoryRouter>
 19:   );
 20: };
 21: 
 22: describe("CareLogForm Pre-Selection", () => {
 23:   const mockOnSuccess = jest.fn();
 24: 
 25:   beforeEach(async () => {
 26:     await initializeDatabase();
 27:     const { db } = await import("@/types/database");
 28:     await db.plants.clear();
 29: 
 30: 
 31:     mockUseFirebasePlants.mockReturnValue({
 32:       plants: [],
 33:       loading: false,
 34:       error: null,
 35:     });
 36:   });
 37: 
 38:   it("pre-selects plant when preselectedPlantId is provided", async () => {
 39: 
 40:     const plantId = await plantService.addPlant({
 41:       varietyId: "test-variety",
 42:       varietyName: "Test Variety",
 43:       name: "Test Plant",
 44:       plantedDate: new Date(),
 45:       location: "Location 1",
 46:       container: "Container 1",
 47:       isActive: true,
 48:     });
 49: 
 50: 
 51:     const createdPlant = await plantService.getPlant(plantId);
 52: 
 53: 
 54:     mockUseFirebasePlants.mockReturnValue({
 55:       plants: [createdPlant],
 56:       loading: false,
 57:       error: null,
 58:     });
 59: 
 60:     const mockOnSuccess = jest.fn();
 61: 
 62: 
 63:     renderWithRouter(
 64:       <CareLogForm onSuccess={mockOnSuccess} preselectedPlantId={plantId} />
 65:     );
 66: 
 67: 
 68:     await waitFor(() => {
 69:       const plantSelect = screen.getByLabelText(/Plant/i) as HTMLSelectElement;
 70:       expect(plantSelect.value).toBe(plantId);
 71:     });
 72:   });
 73: 
 74:   it("shows normal plant selection when no preselectedPlantId is provided", async () => {
 75: 
 76:     const plantId = await plantService.addPlant({
 77:       varietyId: "test-variety",
 78:       varietyName: "Test Variety",
 79:       name: "Test Plant",
 80:       plantedDate: new Date(),
 81:       location: "Location 1",
 82:       container: "Container 1",
 83:       isActive: true,
 84:     });
 85: 
 86: 
 87:     const createdPlant = await plantService.getPlant(plantId);
 88: 
 89: 
 90:     mockUseFirebasePlants.mockReturnValue({
 91:       plants: [createdPlant],
 92:       loading: false,
 93:       error: null,
 94:     });
 95: 
 96:     const mockOnSuccess = jest.fn();
 97:     renderWithRouter(<CareLogForm onSuccess={mockOnSuccess} />);
 98: 
 99: 
100:     await waitFor(() => {
101:       const plantSelect = screen.getByLabelText(/Plant/i) as HTMLSelectElement;
102:       expect(plantSelect.value).toBe("");
103:     });
104: 
105:     // 5. **CRITICAL FIX**: Assert using the correct text format
106:     await waitFor(() => {
107:       expect(
108:         screen.getByText("Test Plant (Test Variety) - Location 1")
109:       ).toBeInTheDocument();
110:     });
111:   });
112: 
113:   it("allows user to change pre-selected plant", async () => {
114: 
115:     const plant1Id = await plantService.addPlant({
116:       varietyId: "test-variety-1",
117:       varietyName: "Plant One",
118:       name: "Plant One",
119:       plantedDate: new Date(),
120:       location: "Location 1",
121:       container: "Container 1",
122:       isActive: true,
123:     });
124: 
125:     const plant2Id = await plantService.addPlant({
126:       varietyId: "test-variety-2",
127:       varietyName: "Plant Two",
128:       name: "Plant Two",
129:       plantedDate: new Date(),
130:       location: "Location 2",
131:       container: "Container 2",
132:       isActive: true,
133:     });
134: 
135: 
136:     const createdPlant1 = await plantService.getPlant(plant1Id);
137:     const createdPlant2 = await plantService.getPlant(plant2Id);
138: 
139: 
140:     mockUseFirebasePlants.mockReturnValue({
141:       plants: [createdPlant1, createdPlant2],
142:       loading: false,
143:       error: null,
144:     });
145: 
146:     const mockOnSuccess = jest.fn();
147:     const user = userEvent.setup();
148: 
149: 
150:     renderWithRouter(
151:       <CareLogForm onSuccess={mockOnSuccess} preselectedPlantId={plant1Id} />
152:     );
153: 
154: 
155:     await waitFor(() => {
156: 
157:       expect(
158:         screen.getByText("Plant One (Plant One) - Location 1")
159:       ).toBeInTheDocument();
160:       expect(
161:         screen.getByText("Plant Two (Plant Two) - Location 2")
162:       ).toBeInTheDocument();
163:     });
164: 
165: 
166:     await waitFor(() => {
167:       const plantSelect = screen.getByLabelText(/Plant/i) as HTMLSelectElement;
168:       expect(plantSelect.value).toBe(plant1Id);
169:     });
170: 
171:     const plantSelect = screen.getByLabelText(/Plant/i);
172:     await user.selectOptions(plantSelect, plant2Id);
173: 
174:     expect((plantSelect as HTMLSelectElement).value).toBe(plant2Id);
175:   });
176: 
177:   it("shows watering fields when water activity is selected", async () => {
178:     renderWithRouter(<CareLogForm onSuccess={mockOnSuccess} />);
179: 
180:     await waitFor(() => {
181:       expect(screen.getByText("Water Amount *")).toBeInTheDocument();
182:     });
183:     expect(screen.getByText(/Watering Log/i)).toBeInTheDocument();
184:     expect(screen.getByPlaceholderText("Amount")).toBeInTheDocument();
185: 
186:     expect(screen.getByText("oz")).toBeInTheDocument();
187:     expect(screen.getByText("ml")).toBeInTheDocument();
188:     expect(screen.getByText("cups")).toBeInTheDocument();
189:   });
190: 
191: 
192:   it.skip("handles plant without custom name correctly", async () => {
193:     await plantService.addPlant({
194:       varietyId: "test-variety",
195:       varietyName: "Roma Tomato",
196:       plantedDate: new Date(),
197:       location: "Greenhouse",
198:       container: "3 gallon pot",
199:       isActive: true,
200:     });
201: 
202:     const mockOnSuccess = jest.fn();
203: 
204:     renderWithRouter(<CareLogForm onSuccess={mockOnSuccess} />);
205: 
206:     await waitFor(() => {
207:       const expectedText = "Roma Tomato - Greenhouse";
208:       expect(screen.getByText(expectedText)).toBeInTheDocument();
209:     });
210:   });
211: });

================
File: src/__tests__/integration/smartDefaultsIntegration.test.tsx
================
  1: import { render, screen, waitFor } from "@testing-library/react";
  2: import userEvent from "@testing-library/user-event";
  3: import { MemoryRouter } from "react-router-dom";
  4: import { CareLogForm } from "@/pages/care/CareLogForm";
  5: import { initializeDatabase } from "@/db/seedData";
  6: import { varietyService, PlantRecord } from "@/types/database";
  7: import { useFirebasePlants } from "@/hooks/useFirebasePlants";
  8: 
  9: 
 10: jest.mock("@/hooks/useFirebasePlants");
 11: const mockUseFirebasePlants = useFirebasePlants as jest.Mock;
 12: 
 13: const renderWithRouter = (
 14:   component: React.ReactElement,
 15:   initialEntries: string[] = ["/log-care"]
 16: ) => {
 17:   return render(
 18:     <MemoryRouter initialEntries={initialEntries}>{component}</MemoryRouter>
 19:   );
 20: };
 21: 
 22: 
 23: const setupTest = async () => {
 24:   const varieties = await varietyService.getAllVarieties();
 25: 
 26: 
 27:   const testVariety = varieties.find((v) => v.name === "Sugar Snap Peas");
 28: 
 29:   const plant: PlantRecord = {
 30:     id: "plant-123",
 31:     varietyId: testVariety!.id,
 32:     varietyName: testVariety!.name,
 33:     name: "Test Plant",
 34:     plantedDate: new Date(),
 35:     location: "Indoor",
 36:     container: "5 gallon pot",
 37:     isActive: true,
 38:     createdAt: new Date(),
 39:     updatedAt: new Date(),
 40:   };
 41: 
 42:   mockUseFirebasePlants.mockReturnValue({
 43:     plants: [plant],
 44:     loading: false,
 45:     error: null,
 46:   });
 47: 
 48:   const user = userEvent.setup();
 49:   renderWithRouter(<CareLogForm onSuccess={jest.fn()} />);
 50: 
 51: 
 52:   const plantSelect = (await screen.findByLabelText(
 53:     /Plant \*/i
 54:   )) as HTMLSelectElement;
 55: 
 56:   return { user, plant, plantSelect };
 57: };
 58: 
 59: describe("Smart Defaults Integration", () => {
 60:   beforeAll(async () => {
 61: 
 62:     await initializeDatabase();
 63:   });
 64: 
 65:   beforeEach(() => {
 66: 
 67:     jest.clearAllMocks();
 68:   });
 69: 
 70:   it("should show smart watering suggestions when a plant is selected", async () => {
 71:     const { user, plant, plantSelect } = await setupTest();
 72: 
 73:     await user.selectOptions(plantSelect, plant.id);
 74: 
 75:     await waitFor(() => {
 76: 
 77: 
 78:       const protocolInfo = screen.getByText(/Protocol for/i);
 79:       expect(protocolInfo).toHaveTextContent("Protocol for germination stage:");
 80:     });
 81:   });
 82: 
 83:   it("should auto-fill water amount when using smart suggestions", async () => {
 84:     const { user, plant, plantSelect } = await setupTest();
 85: 
 86:     await user.selectOptions(plantSelect, plant.id);
 87: 
 88:     await waitFor(() => {
 89:       const waterAmountInput = screen.getByLabelText(
 90:         /Water Amount \*/i
 91:       ) as HTMLInputElement;
 92:       expect(waterAmountInput).toBeInTheDocument();
 93:     });
 94:   });
 95: 
 96: 
 97: 
 98:   it("should show quick completion buttons", async () => {
 99:     const { user, plant, plantSelect } = await setupTest();
100: 
101:     await user.selectOptions(plantSelect, plant.id);
102: 
103: 
104:     const activitySelect = screen.getByLabelText(/Activity Type \*/i);
105:     await user.selectOptions(activitySelect, "fertilize");
106: 
107:     await waitFor(() => {
108:       expect(screen.getByLabelText(/Amount \*/i)).toBeInTheDocument();
109:     });
110:   });
111: 
112:   it("should show fertilizer suggestions when fertilizer activity is selected", async () => {
113:     const { user, plant, plantSelect } = await setupTest();
114: 
115:     await user.selectOptions(plantSelect, plant.id);
116: 
117:     const activitySelect = screen.getByLabelText(/Activity Type \*/i);
118:     await user.selectOptions(activitySelect, "fertilize");
119: 
120:     await waitFor(() => {
121:       expect(
122:         screen.getByLabelText(/Fertilizer Product \*/i)
123:       ).toBeInTheDocument();
124:       expect(screen.getByLabelText(/Dilution/i)).toBeInTheDocument();
125:       expect(screen.getByLabelText(/Amount \*/i)).toBeInTheDocument();
126:     });
127:   });
128: });

================
File: src/__tests__/utils/growthStage.test.ts
================
  1: import {
  2:   calculateCurrentStage,
  3:   calculateCurrentStageWithVariety,
  4:   getStageProgress,
  5:   estimateStageTransition,
  6:   getNextStage,
  7: } from "../../utils/growthStage";
  8: import { restoreDate } from "../../setupTests";
  9: import { VarietyRecord } from "../../types/database";
 10: import { GrowthStage } from "@/types";
 11: 
 12: describe("Growth Stage Utilities", () => {
 13:   const mockTimeline = {
 14:     germination: 7,
 15:     seedling: 14,
 16:     vegetative: 21,
 17:     maturation: 60,
 18:   };
 19: 
 20: 
 21:   const mockEverbearingVariety: VarietyRecord = {
 22:     id: "albion-strawberry",
 23:     name: "Albion Strawberries",
 24:     normalizedName: "Albion Strawberries",
 25:     category: "berries",
 26:     growthTimeline: {
 27:       germination: 14,
 28:       seedling: 28,
 29:       vegetative: 42,
 30:       maturation: 90,
 31:     },
 32:     isEverbearing: true,
 33:     productiveLifespan: 730,
 34:     createdAt: new Date(),
 35:   };
 36: 
 37:   const mockNonEverbearingVariety: VarietyRecord = {
 38:     id: "little-finger-carrots",
 39:     name: "Little Finger Carrots",
 40:     normalizedName: "Little Finger Carrots",
 41:     category: "root-vegetables",
 42:     growthTimeline: {
 43:       germination: 10,
 44:       seedling: 14,
 45:       vegetative: 21,
 46:       maturation: 65,
 47:     },
 48:     isEverbearing: false,
 49:     createdAt: new Date(),
 50:   };
 51: 
 52:   beforeEach(() => {
 53:     restoreDate();
 54:   });
 55: 
 56:   describe("calculateCurrentStage (basic function)", () => {
 57:     it("returns germination for early days", () => {
 58:       const plantedDate = new Date("2024-01-01");
 59:       const currentDate = new Date("2024-01-05");
 60: 
 61:       const stage = calculateCurrentStage(
 62:         plantedDate,
 63:         mockTimeline,
 64:         currentDate
 65:       );
 66:       expect(stage).toBe("germination");
 67:     });
 68: 
 69:     it("transitions to seedling correctly", () => {
 70:       const plantedDate = new Date("2024-01-01");
 71:       const currentDate = new Date("2024-01-08");
 72: 
 73:       const stage = calculateCurrentStage(
 74:         plantedDate,
 75:         mockTimeline,
 76:         currentDate
 77:       );
 78:       expect(stage).toBe("seedling");
 79:     });
 80: 
 81:     it("transitions to vegetative correctly", () => {
 82:       const plantedDate = new Date("2024-01-01");
 83:       const currentDate = new Date("2024-01-22");
 84: 
 85:       const stage = calculateCurrentStage(
 86:         plantedDate,
 87:         mockTimeline,
 88:         currentDate
 89:       );
 90:       expect(stage).toBe("vegetative");
 91:     });
 92: 
 93:     it("transitions to flowering correctly", () => {
 94:       const plantedDate = new Date("2024-01-01");
 95:       const currentDate = new Date("2024-02-12");
 96: 
 97:       const stage = calculateCurrentStage(
 98:         plantedDate,
 99:         mockTimeline,
100:         currentDate
101:       );
102:       expect(stage).toBe("flowering");
103:     });
104: 
105:     it("returns harvest for plants past maturation date", () => {
106: 
107:       const plantedDate = new Date("2024-01-01");
108:       const currentDate = new Date("2024-03-05");
109: 
110:       const stage = calculateCurrentStage(
111:         plantedDate,
112:         mockTimeline,
113:         currentDate
114:       );
115:       expect(stage).toBe("harvest");
116:     });
117: 
118:     it("handles future planting dates gracefully", () => {
119:       const plantedDate = new Date("2024-12-31");
120:       const currentDate = new Date("2024-01-01");
121: 
122:       const stage = calculateCurrentStage(
123:         plantedDate,
124:         mockTimeline,
125:         currentDate
126:       );
127:       expect(stage).toBe("germination");
128:     });
129: 
130:     it("handles leap year edge cases", () => {
131:       const plantedDate = new Date("2024-02-28");
132:       const currentDate = new Date("2024-03-01");
133: 
134:       const stage = calculateCurrentStage(
135:         plantedDate,
136:         mockTimeline,
137:         currentDate
138:       );
139:       expect(stage).toBe("germination");
140:     });
141: 
142:     it("handles timezone DST transitions", () => {
143: 
144:       const plantedDate = new Date("2024-03-09T12:00:00");
145:       const currentDate = new Date("2024-03-11T12:00:00");
146: 
147:       const stage = calculateCurrentStage(
148:         plantedDate,
149:         mockTimeline,
150:         currentDate
151:       );
152:       expect(stage).toBe("germination");
153:     });
154:   });
155: 
156:   describe("calculateCurrentStageWithVariety (enhanced function)", () => {
157:     describe("everbearing plants", () => {
158:       it("returns ongoing-production for everbearing plants after maturation", () => {
159:         const plantedDate = new Date("2024-01-01");
160:         const currentDate = new Date("2024-04-05");
161: 
162:         const stage = calculateCurrentStageWithVariety(
163:           plantedDate,
164:           mockEverbearingVariety,
165:           currentDate
166:         );
167:         expect(stage).toBe("ongoing-production");
168:       });
169: 
170:       it("handles the exact strawberry scenario (103 days)", () => {
171:         const plantedDate = new Date("2024-01-01");
172:         const currentDate = new Date("2024-04-14");
173: 
174:         const stage = calculateCurrentStageWithVariety(
175:           plantedDate,
176:           mockEverbearingVariety,
177:           currentDate
178:         );
179:         expect(stage).toBe("ongoing-production");
180:       });
181: 
182:       it("returns harvest when past productive lifespan", () => {
183:         const plantedDate = new Date("2022-01-01");
184:         const currentDate = new Date("2024-02-01");
185: 
186:         const stage = calculateCurrentStageWithVariety(
187:           plantedDate,
188:           mockEverbearingVariety,
189:           currentDate
190:         );
191:         expect(stage).toBe("harvest");
192:       });
193: 
194:       it("follows normal growth stages before maturation", () => {
195:         const testCases = [
196:           { days: 5, expected: "germination" },
197:           { days: 20, expected: "seedling" },
198:           { days: 50, expected: "vegetative" },
199:           { days: 87, expected: "flowering" },
200:         ];
201: 
202:         testCases.forEach(({ days, expected }) => {
203:           const plantedDate = new Date("2024-01-01");
204:           const currentDate = new Date(plantedDate);
205:           currentDate.setDate(currentDate.getDate() + days);
206: 
207:           const stage = calculateCurrentStageWithVariety(
208:             plantedDate,
209:             mockEverbearingVariety,
210:             currentDate
211:           );
212:           expect(stage).toBe(expected);
213:         });
214:       });
215:     });
216: 
217:     describe("non-everbearing plants", () => {
218:       it("returns harvest for non-everbearing plants after maturation", () => {
219:         const plantedDate = new Date("2024-01-01");
220:         const currentDate = new Date("2024-03-10");
221: 
222:         const stage = calculateCurrentStageWithVariety(
223:           plantedDate,
224:           mockNonEverbearingVariety,
225:           currentDate
226:         );
227:         expect(stage).toBe("harvest");
228:       });
229: 
230:       it("follows normal growth stages before maturation", () => {
231:         const testCases = [
232:           { days: 5, expected: "germination" },
233:           { days: 15, expected: "seedling" },
234:           { days: 30, expected: "vegetative" },
235:           { days: 60, expected: "flowering" },
236:         ];
237: 
238:         testCases.forEach(({ days, expected }) => {
239:           const plantedDate = new Date("2024-01-01");
240:           const currentDate = new Date(plantedDate);
241:           currentDate.setDate(currentDate.getDate() + days);
242: 
243:           const stage = calculateCurrentStageWithVariety(
244:             plantedDate,
245:             mockNonEverbearingVariety,
246:             currentDate
247:           );
248:           expect(stage).toBe(expected);
249:         });
250:       });
251:     });
252: 
253:     describe("edge cases", () => {
254:       it("handles everbearing plants without productiveLifespan", () => {
255:         const varietyWithoutLifespan: VarietyRecord = {
256:           ...mockEverbearingVariety,
257:           productiveLifespan: undefined,
258:         };
259: 
260:         const plantedDate = new Date("2022-01-01");
261:         const currentDate = new Date("2024-01-01");
262: 
263:         const stage = calculateCurrentStageWithVariety(
264:           plantedDate,
265:           varietyWithoutLifespan,
266:           currentDate
267:         );
268:         expect(stage).toBe("harvest");
269:       });
270: 
271:       it("handles future planting dates gracefully", () => {
272:         const plantedDate = new Date("2024-12-31");
273:         const currentDate = new Date("2024-01-01");
274: 
275:         const stage = calculateCurrentStageWithVariety(
276:           plantedDate,
277:           mockEverbearingVariety,
278:           currentDate
279:         );
280:         expect(stage).toBe("germination");
281:       });
282:     });
283:   });
284: 
285:   describe("getStageProgress", () => {
286:     it("calculates progress correctly mid-stage", () => {
287:       const plantedDate = new Date("2024-01-01");
288:       const currentDate = new Date("2024-01-11");
289: 
290:       const progress = getStageProgress(plantedDate, mockTimeline, currentDate);
291: 
292:       expect(progress).toBeCloseTo(21, 0);
293:     });
294: 
295:     it("returns 100% for completed stages", () => {
296:       const plantedDate = new Date("2024-01-01");
297:       const currentDate = new Date("2024-03-01");
298: 
299:       const progress = getStageProgress(plantedDate, mockTimeline, currentDate);
300:       expect(progress).toBe(100);
301:     });
302: 
303:     it("handles all new stage types", () => {
304:       const plantedDate = new Date("2024-01-01");
305:       const currentDate = new Date("2024-03-01");
306: 
307: 
308:       const timeline = { ...mockTimeline };
309:       const progress = getStageProgress(plantedDate, timeline, currentDate);
310:       expect(progress).toBe(100);
311:     });
312:   });
313: 
314:   describe("getNextStage", () => {
315:     it("returns correct next stages for basic progression", () => {
316:       expect(getNextStage("germination")).toBe("seedling");
317:       expect(getNextStage("seedling")).toBe("vegetative");
318:       expect(getNextStage("vegetative")).toBe("flowering");
319:       expect(getNextStage("flowering")).toBe("maturation");
320:       expect(getNextStage("maturation")).toBe("ongoing-production");
321:       expect(getNextStage("ongoing-production")).toBe("harvest");
322:     });
323: 
324:     it("returns null for the final stage", () => {
325:       expect(getNextStage("harvest")).toBe(null);
326:     });
327: 
328:     it("handles invalid stages gracefully", () => {
329: 
330:       expect(getNextStage(undefined as unknown as GrowthStage)).toBe(null);
331: 
332: 
333:       const invalidStage = "not-a-real-stage" as unknown as GrowthStage;
334:       expect(getNextStage(invalidStage)).toBe(null);
335:     });
336:   });
337: 
338:   describe("estimateStageTransition", () => {
339:     it("estimates correct transition dates", () => {
340:       const plantedDate = new Date("2024-01-01");
341: 
342:       const floweringDate = estimateStageTransition(
343:         plantedDate,
344:         mockTimeline,
345:         "flowering"
346:       );
347:       expect(floweringDate).toEqual(new Date("2024-02-12"));
348:     });
349: 
350:     it("handles new stage types", () => {
351:       const plantedDate = new Date("2024-01-01");
352: 
353:       const ongoingProductionDate = estimateStageTransition(
354:         plantedDate,
355:         mockTimeline,
356:         "ongoing-production"
357:       );
358:       expect(ongoingProductionDate).toEqual(new Date("2024-03-01"));
359: 
360:       const harvestDate = estimateStageTransition(
361:         plantedDate,
362:         mockTimeline,
363:         "harvest"
364:       );
365:       expect(harvestDate).toEqual(new Date("2024-03-01"));
366:     });
367:   });
368: 
369:   describe("integration tests with real variety data", () => {
370:     it("correctly handles Albion strawberry timeline", () => {
371:       const plantedDate = new Date("2024-01-01");
372: 
373: 
374:       const testCases = [
375:         { days: 10, expected: "germination" },
376:         { days: 20, expected: "seedling" },
377:         { days: 50, expected: "vegetative" },
378:         { days: 87, expected: "flowering" },
379:         { days: 103, expected: "ongoing-production" },
380:         { days: 365, expected: "ongoing-production" },
381:         { days: 731, expected: "harvest" },
382:       ];
383: 
384:       testCases.forEach(({ days, expected }) => {
385:         const currentDate = new Date(plantedDate);
386:         currentDate.setDate(currentDate.getDate() + days);
387: 
388:         const stage = calculateCurrentStageWithVariety(
389:           plantedDate,
390:           mockEverbearingVariety,
391:           currentDate
392:         );
393: 
394:         expect(stage).toBe(expected);
395:       });
396:     });
397: 
398:     it("correctly handles Caroline raspberry timeline", () => {
399:       const raspberryVariety: VarietyRecord = {
400:         id: "caroline-raspberry",
401:         name: "Caroline Raspberries",
402:         normalizedName: "Caroline Raspberries",
403:         category: "berries",
404:         growthTimeline: {
405:           germination: 0,
406:           seedling: 21,
407:           vegetative: 42,
408:           maturation: 120,
409:         },
410:         isEverbearing: true,
411:         productiveLifespan: 1095,
412:         createdAt: new Date(),
413:       };
414: 
415:       const plantedDate = new Date("2024-01-01");
416:       const testCases = [
417:         { days: 10, expected: "seedling" },
418:         { days: 30, expected: "vegetative" },
419:         { days: 60, expected: "vegetative" },
420:         { days: 110, expected: "flowering" },
421:         { days: 130, expected: "ongoing-production" },
422:         { days: 1000, expected: "ongoing-production" },
423:         { days: 1100, expected: "harvest" },
424:       ];
425: 
426:       testCases.forEach(({ days, expected }) => {
427:         const currentDate = new Date(plantedDate);
428:         currentDate.setDate(currentDate.getDate() + days);
429: 
430:         const stage = calculateCurrentStageWithVariety(
431:           plantedDate,
432:           raspberryVariety,
433:           currentDate
434:         );
435: 
436:         expect(stage).toBe(expected);
437:       });
438:     });
439:   });
440: });

================
File: src/components/plant/CareActivityItem.tsx
================
  1: import React, { useState } from "react";
  2: import { CareRecord } from "@/types";
  3: import { formatDateTime } from "@/utils/dateUtils";
  4: 
  5: interface CareActivityItemProps {
  6:   activity: CareRecord;
  7: }
  8: 
  9: const CareActivityItem: React.FC<CareActivityItemProps> = ({ activity }) => {
 10:   const [isExpanded, setIsExpanded] = useState(false);
 11: 
 12:   const getActivityIcon = (type: string): string => {
 13:     switch (type) {
 14:       case "water":
 15:         return "";
 16:       case "fertilize":
 17:         return "";
 18:       case "observe":
 19:         return "";
 20:       case "harvest":
 21:         return "";
 22:       case "transplant":
 23:         return "";
 24:       default:
 25:         return "";
 26:     }
 27:   };
 28: 
 29:   const getActivityTitle = (activity: CareRecord): string => {
 30:     const details = activity.details;
 31: 
 32:     switch (activity.type) {
 33:       case "water": {
 34: 
 35:         let amountDisplay = "unknown amount";
 36:         if (typeof details.amount === "object" && details.amount?.value) {
 37:           amountDisplay = `${details.amount.value} ${details.amount.unit}`;
 38:         } else if (details.waterAmount && details.waterUnit) {
 39:           amountDisplay = `${details.waterAmount} ${details.waterUnit}`;
 40:         }
 41:         return `Watering (${amountDisplay})`;
 42:       }
 43:       case "fertilize": {
 44:         return `Fertilized with ${details.product || "fertilizer"}`;
 45:       }
 46:       case "observe": {
 47:         return `Health Check (${details.healthAssessment || "unknown"})`;
 48:       }
 49:       case "harvest": {
 50:         const amount =
 51:           typeof details.amount === "string"
 52:             ? details.amount
 53:             : "unknown amount";
 54:         return `Harvested ${amount}`;
 55:       }
 56:       case "transplant": {
 57:         return `Transplanted to ${details.toContainer || "new container"}`;
 58:       }
 59:       default:
 60:         return "Care Activity";
 61:     }
 62:   };
 63: 
 64:   const renderActivityDetails = (activity: CareRecord) => {
 65:     const details = activity.details;
 66: 
 67:     switch (activity.type) {
 68:       case "water": {
 69:         return (
 70:           <div className="space-y-2">
 71:             <div className="grid grid-cols-2 gap-4 text-sm">
 72:               <div>
 73:                 <span className="font-medium text-muted-foreground">
 74:                   Amount:
 75:                 </span>
 76:                 <div>
 77:                   {typeof details.amount === "object" && details.amount?.value
 78:                     ? `${details.amount.value} ${details.amount.unit}`
 79:                     : details.waterAmount && details.waterUnit
 80:                     ? `${details.waterAmount} ${details.waterUnit}`
 81:                     : "Not specified"}
 82:                 </div>
 83:               </div>
 84:               {details.method && (
 85:                 <div>
 86:                   <span className="font-medium text-muted-foreground">
 87:                     Method:
 88:                   </span>
 89:                   <div>{details.method.replace("-", " ")}</div>
 90:                 </div>
 91:               )}
 92:             </div>
 93:             {details.moistureLevel && (
 94:               <div>
 95:                 <span className="font-medium text-muted-foreground">
 96:                   Moisture Reading:
 97:                 </span>
 98:                 <div className="text-sm">
 99:                   Before: {details.moistureLevel.before}/10  After:{" "}
100:                   {details.moistureLevel.after}/10
101:                 </div>
102:               </div>
103:             )}
104:             {details.runoffObserved !== undefined && (
105:               <div>
106:                 <span className="font-medium text-muted-foreground">
107:                   Runoff:
108:                 </span>
109:                 <div className="text-sm">
110:                   {details.runoffObserved ? "Yes" : "No"}
111:                 </div>
112:               </div>
113:             )}
114:           </div>
115:         );
116:       }
117: 
118:       case "fertilize": {
119:         return (
120:           <div className="space-y-2">
121:             <div className="grid grid-cols-2 gap-4 text-sm">
122:               <div>
123:                 <span className="font-medium text-muted-foreground">
124:                   Product:
125:                 </span>
126:                 <div>{details.product || "Not specified"}</div>
127:               </div>
128:               <div>
129:                 <span className="font-medium text-muted-foreground">
130:                   Dilution:
131:                 </span>
132:                 <div>{details.dilution || "Not specified"}</div>
133:               </div>
134:               <div>
135:                 <span className="font-medium text-muted-foreground">
136:                   Amount:
137:                 </span>
138:                 <div>
139:                   {typeof details.amount === "string"
140:                     ? details.amount
141:                     : "Not specified"}
142:                 </div>
143:               </div>
144:             </div>
145:           </div>
146:         );
147:       }
148: 
149:       case "observe": {
150:         return (
151:           <div className="space-y-2">
152:             <div>
153:               <span className="font-medium text-muted-foreground">
154:                 Health Assessment:
155:               </span>
156:               <div className="text-sm capitalize">
157:                 {details.healthAssessment || "Not specified"}
158:               </div>
159:             </div>
160:             <div>
161:               <span className="font-medium text-muted-foreground">
162:                 Observations:
163:               </span>
164:               <div className="text-sm">{details.observations || "None"}</div>
165:             </div>
166:             {details.photos && details.photos.length > 0 && (
167:               <div>
168:                 <span className="font-medium text-muted-foreground">
169:                   Photos:
170:                 </span>
171:                 <div className="text-sm">
172:                   {details.photos.length} photo(s) attached
173:                 </div>
174:               </div>
175:             )}
176:           </div>
177:         );
178:       }
179: 
180:       case "harvest": {
181:         return (
182:           <div className="space-y-2">
183:             <div className="grid grid-cols-2 gap-4 text-sm">
184:               <div>
185:                 <span className="font-medium text-muted-foreground">
186:                   Amount:
187:                 </span>
188:                 <div>
189:                   {typeof details.amount === "string"
190:                     ? details.amount
191:                     : "Not specified"}
192:                 </div>
193:               </div>
194:               <div>
195:                 <span className="font-medium text-muted-foreground">
196:                   Quality:
197:                 </span>
198:                 <div className="capitalize">
199:                   {details.quality || "Not specified"}
200:                 </div>
201:               </div>
202:             </div>
203:             {details.harvestMethod && (
204:               <div>
205:                 <span className="font-medium text-muted-foreground">
206:                   Method:
207:                 </span>
208:                 <div className="text-sm">{details.harvestMethod}</div>
209:               </div>
210:             )}
211:           </div>
212:         );
213:       }
214: 
215:       case "transplant": {
216:         return (
217:           <div className="space-y-2">
218:             <div className="grid grid-cols-2 gap-4 text-sm">
219:               <div>
220:                 <span className="font-medium text-muted-foreground">From:</span>
221:                 <div>{details.fromContainer || "Not specified"}</div>
222:               </div>
223:               <div>
224:                 <span className="font-medium text-muted-foreground">To:</span>
225:                 <div>{details.toContainer || "Not specified"}</div>
226:               </div>
227:             </div>
228:             <div>
229:               <span className="font-medium text-muted-foreground">Reason:</span>
230:               <div className="text-sm">{details.reason || "Not specified"}</div>
231:             </div>
232:           </div>
233:         );
234:       }
235: 
236:       default:
237:         return null;
238:     }
239:   };
240: 
241:   return (
242:     <div className="border border-border rounded-lg">
243:       <div
244:         className="p-4 cursor-pointer hover:bg-background transition-colors"
245:         onClick={() => setIsExpanded(!isExpanded)}
246:       >
247:         <div className="flex items-start gap-3">
248:           <div className="text-xl">{getActivityIcon(activity.type)}</div>
249:           <div className="flex-1 min-w-0">
250:             <div className="flex items-start justify-between">
251:               <div>
252:                 <h4 className="font-medium text-foreground text-sm">
253:                   {getActivityTitle(activity)}
254:                 </h4>
255:                 <p className="text-xs text-muted-foreground mt-1">
256:                   {formatDateTime(activity.date)}
257:                 </p>
258:               </div>
259:               <svg
260:                 className={`w-4 h-4 text-muted-foreground transition-transform ${
261:                   isExpanded ? "rotate-180" : ""
262:                 }`}
263:                 fill="none"
264:                 stroke="currentColor"
265:                 viewBox="0 0 24 24"
266:               >
267:                 <path
268:                   strokeLinecap="round"
269:                   strokeLinejoin="round"
270:                   strokeWidth={2}
271:                   d="M19 9l-7 7-7-7"
272:                 />
273:               </svg>
274:             </div>
275:           </div>
276:         </div>
277:       </div>
278: 
279:       {isExpanded && (
280:         <div className="px-4 pb-4 border-t border-gray-100 bg-background">
281:           <div className="pt-3">
282:             {renderActivityDetails(activity)}
283: 
284:             {activity.details.notes && (
285:               <div className="mt-3 pt-3 border-t border-border">
286:                 <span className="font-medium text-muted-foreground">
287:                   Notes:
288:                 </span>
289:                 <div className="text-sm text-foreground mt-1">
290:                   {activity.details.notes}
291:                 </div>
292:               </div>
293:             )}
294:           </div>
295:         </div>
296:       )}
297:     </div>
298:   );
299: };
300: 
301: export default CareActivityItem;

================
File: src/components/plant/CareHistory.tsx
================
  1: import React, { useState } from "react";
  2: import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/Card";
  3: import { Button } from "@/components/ui/Button";
  4: import { CareRecord } from "@/types/database";
  5: import CareActivityItem from "./CareActivityItem";
  6: 
  7: interface CareHistoryProps {
  8:   careHistory: CareRecord[];
  9: }
 10: 
 11: const CareHistory: React.FC<CareHistoryProps> = ({ careHistory }) => {
 12:   const [showAll, setShowAll] = useState(false);
 13:   const [filter, setFilter] = useState<string>("all");
 14: 
 15: 
 16:   const filteredHistory = careHistory.filter((activity) => {
 17:     if (filter === "all") return true;
 18:     return activity.type === filter;
 19:   });
 20: 
 21: 
 22:   const displayedHistory = showAll
 23:     ? filteredHistory
 24:     : filteredHistory.slice(0, 5);
 25: 
 26:   const activityTypeFilters = [
 27:     { value: "all", label: "All Activities", icon: "" },
 28:     { value: "water", label: "Watering", icon: "" },
 29:     { value: "fertilize", label: "Fertilizing", icon: "" },
 30:     { value: "observe", label: "Observations", icon: "" },
 31:     { value: "harvest", label: "Harvest", icon: "" },
 32:     { value: "transplant", label: "Transplant", icon: "" },
 33:   ];
 34: 
 35:   return (
 36:     <Card>
 37:       <CardHeader>
 38:         <CardTitle className="flex items-center gap-2">
 39:           <span className="text-2xl"></span>
 40:           Care History
 41:           <span className="text-sm font-normal text-muted-foreground">
 42:             ({careHistory.length} activities)
 43:           </span>
 44:         </CardTitle>
 45:       </CardHeader>
 46:       <CardContent>
 47:         {careHistory.length === 0 ? (
 48:           <div className="text-center py-8">
 49:             <div className="text-4xl mb-2"></div>
 50:             <h3 className="text-lg font-medium text-foreground mb-2">
 51:               No care activities yet
 52:             </h3>
 53:             <p className="text-muted-foreground mb-4">
 54:               Start logging care activities to track your plant's progress
 55:             </p>
 56:             <Button variant="primary">Log First Activity</Button>
 57:           </div>
 58:         ) : (
 59:           <div className="space-y-4">
 60:             {}
 61:             <div className="flex gap-1 overflow-x-auto pb-2">
 62:               {activityTypeFilters.map((filterOption) => (
 63:                 <Button
 64:                   key={filterOption.value}
 65:                   variant={
 66:                     filter === filterOption.value ? "primary" : "outline"
 67:                   }
 68:                   size="sm"
 69:                   onClick={() => setFilter(filterOption.value)}
 70:                   className="whitespace-nowrap"
 71:                 >
 72:                   <span className="mr-1">{filterOption.icon}</span>
 73:                   {filterOption.label}
 74:                 </Button>
 75:               ))}
 76:             </div>
 77: 
 78:             {}
 79:             <div className="space-y-3">
 80:               {displayedHistory.map((activity) => (
 81:                 <CareActivityItem key={activity.id} activity={activity} />
 82:               ))}
 83:             </div>
 84: 
 85:             {}
 86:             {filteredHistory.length > 5 && (
 87:               <div className="text-center pt-4">
 88:                 <Button variant="outline" onClick={() => setShowAll(!showAll)}>
 89:                   {showAll
 90:                     ? "Show Less"
 91:                     : `Show All ${filteredHistory.length} Activities`}
 92:                 </Button>
 93:               </div>
 94:             )}
 95:           </div>
 96:         )}
 97:       </CardContent>
 98:     </Card>
 99:   );
100: };
101: 
102: export default CareHistory;

================
File: src/components/plant/CustomVarietyForm.tsx
================
  1: import { useState } from "react";
  2: import { useForm } from "react-hook-form";
  3: import { zodResolver } from "@hookform/resolvers/zod";
  4: import { z } from "zod";
  5: import { Button } from "@/components/ui/Button";
  6: import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/Card";
  7: import { varietyService } from "@/types/database";
  8: import toast from "react-hot-toast";
  9: 
 10: const customVarietySchema = z.object({
 11:   name: z.string().min(1, "Variety name is required"),
 12:   category: z.enum([
 13:     "root-vegetables",
 14:     "leafy-greens",
 15:     "herbs",
 16:     "berries",
 17:     "fruiting-plants",
 18:   ]),
 19:   growthTimeline: z.object({
 20:     germination: z.number().min(1).max(90),
 21:     seedling: z.number().min(1).max(90),
 22:     vegetative: z.number().min(1).max(180),
 23:     rootDevelopment: z.number().min(1).max(180),
 24:     maturation: z.number().min(1).max(365),
 25:   }),
 26:   customMoistureRanges: z.boolean().optional(),
 27:   triggerMin: z.number().min(1).max(10).optional(),
 28:   triggerMax: z.number().min(1).max(10).optional(),
 29:   targetMin: z.number().min(1).max(10).optional(),
 30:   targetMax: z.number().min(1).max(10).optional(),
 31: });
 32: 
 33: type CustomVarietyData = z.infer<typeof customVarietySchema>;
 34: 
 35: interface CustomVarietyFormProps {
 36:   onSuccess?: (varietyId: string) => void;
 37:   onCancel?: () => void;
 38: }
 39: 
 40: export function CustomVarietyForm({
 41:   onSuccess,
 42:   onCancel,
 43: }: CustomVarietyFormProps) {
 44:   const [isLoading, setIsLoading] = useState(false);
 45:   const [showMoistureCustomization, setShowMoistureCustomization] =
 46:     useState(false);
 47: 
 48:   const {
 49:     register,
 50:     handleSubmit,
 51:     formState: { errors },
 52:     reset,
 53:   } = useForm<CustomVarietyData>({
 54:     resolver: zodResolver(customVarietySchema),
 55:     defaultValues: {
 56:       triggerMin: 3,
 57:       triggerMax: 4,
 58:       targetMin: 6,
 59:       targetMax: 7,
 60:     },
 61:   });
 62: 
 63:   async function onSubmit(data: CustomVarietyData) {
 64:     setIsLoading(true);
 65:     try {
 66: 
 67:       let protocols = undefined;
 68:       if (
 69:         data.customMoistureRanges &&
 70:         data.triggerMin &&
 71:         data.triggerMax &&
 72:         data.targetMin &&
 73:         data.targetMax
 74:       ) {
 75:         const wateringRanges = {
 76:           trigger: { moistureLevel: `${data.triggerMin}-${data.triggerMax}` },
 77:           target: { moistureLevel: `${data.targetMin}-${data.targetMax}` },
 78:         };
 79: 
 80: 
 81:         protocols = {
 82:           watering: {
 83:             germination: wateringRanges,
 84:             seedling: wateringRanges,
 85:             vegetative: wateringRanges,
 86:             flowering: wateringRanges,
 87:             fruiting: wateringRanges,
 88:             maturation: wateringRanges,
 89:             harvest: wateringRanges,
 90:             "ongoing-production": wateringRanges,
 91:           },
 92:         };
 93:       }
 94: 
 95:       const varietyId = await varietyService.addVariety({
 96:         name: data.name,
 97:         category: data.category,
 98:         growthTimeline: {
 99:           ...data.growthTimeline,
100:           rootDevelopment: data.growthTimeline.rootDevelopment,
101:         },
102:         protocols,
103:         isCustom: true,
104:       });
105: 
106:       toast.success(`Created custom variety: ${data.name}!`);
107:       reset();
108:       onSuccess?.(varietyId);
109:     } catch (error) {
110:       console.error("Failed to create variety:", error);
111:       toast.error("Failed to create variety. Please try again.");
112:     } finally {
113:       setIsLoading(false);
114:     }
115:   }
116: 
117:   return (
118:     <Card className="max-w-2xl mx-auto">
119:       <CardHeader>
120:         <CardTitle>Create Custom Plant Variety</CardTitle>
121:         <p className="text-sm text-muted-foreground mt-1">
122:           Add your own plant varieties like pumpkins, exotic herbs, or local
123:           cultivars
124:         </p>
125:       </CardHeader>
126:       <CardContent>
127:         <form onSubmit={handleSubmit(onSubmit)} className="space-y-6">
128:           <div>
129:             <label className="block text-sm font-medium text-foreground mb-2">
130:               Variety Name *
131:             </label>
132:             <input
133:               {...register("name")}
134:               placeholder="e.g., Jack-o'-lantern Pumpkins, Cherokee Purple Tomatoes"
135:               className="w-full p-3 border border-border rounded-md focus:ring-2 focus:ring-garden-500"
136:             />
137:             {errors.name && (
138:               <p className="mt-1 text-sm text-red-600">{errors.name.message}</p>
139:             )}
140:           </div>
141: 
142:           <div>
143:             <label className="block text-sm font-medium text-foreground mb-2">
144:               Category *
145:             </label>
146:             <select
147:               {...register("category")}
148:               className="w-full p-3 border border-border rounded-md focus:ring-2 focus:ring-garden-500"
149:             >
150:               <option value="fruiting-plants">
151:                  Fruiting Plants (pumpkins, squash, melons, etc.)
152:               </option>
153:               <option value="leafy-greens">
154:                  Leafy Greens (lettuce, spinach, kale, etc.)
155:               </option>
156:               <option value="root-vegetables">
157:                  Root Vegetables (carrots, beets, radishes, etc.)
158:               </option>
159:               <option value="herbs">
160:                  Herbs (basil, cilantro, sage, etc.)
161:               </option>
162:               <option value="berries">
163:                  Berries (strawberries, raspberries, etc.)
164:               </option>
165:             </select>
166:             <p className="mt-1 text-xs text-muted-foreground">
167:               This determines default care guidelines and protocols
168:             </p>
169:           </div>
170: 
171:           {}
172:           <div>
173:             <h3 className="text-lg font-medium text-foreground mb-4">
174:               Growth Timeline (days)
175:             </h3>
176:             <p className="text-sm text-muted-foreground mb-4">
177:               How long does each growth stage typically last? These help predict
178:               care needs.
179:             </p>
180:             <div className="grid grid-cols-2 gap-4">
181:               <div>
182:                 <label className="block text-sm font-medium text-foreground mb-2">
183:                   Germination Days
184:                 </label>
185:                 <input
186:                   type="number"
187:                   {...register("growthTimeline.germination", {
188:                     valueAsNumber: true,
189:                   })}
190:                   placeholder="7"
191:                   className="w-full p-3 border border-border rounded-md focus:ring-2 focus:ring-garden-500"
192:                 />
193:                 <p className="text-xs text-muted-foreground mt-1">
194:                   Days to sprout
195:                 </p>
196:               </div>
197:               <div>
198:                 <label className="block text-sm font-medium text-foreground mb-2">
199:                   Seedling Stage Days
200:                 </label>
201:                 <input
202:                   type="number"
203:                   {...register("growthTimeline.seedling", {
204:                     valueAsNumber: true,
205:                   })}
206:                   placeholder="14"
207:                   className="w-full p-3 border border-border rounded-md focus:ring-2 focus:ring-garden-500"
208:                 />
209:                 <p className="text-xs text-muted-foreground mt-1">
210:                   Early growth period
211:                 </p>
212:               </div>
213:               <div>
214:                 <label className="block text-sm font-medium text-foreground mb-2">
215:                   Vegetative Growth Days
216:                 </label>
217:                 <input
218:                   type="number"
219:                   {...register("growthTimeline.vegetative", {
220:                     valueAsNumber: true,
221:                   })}
222:                   placeholder="30"
223:                   className="w-full p-3 border border-border rounded-md focus:ring-2 focus:ring-garden-500"
224:                 />
225:                 <p className="text-xs text-muted-foreground mt-1">
226:                   Leaf and stem development
227:                 </p>
228:               </div>
229:               <div>
230:                 <label className="block text-sm font-medium text-foreground mb-2">
231:                   Root Development Days
232:                 </label>
233:                 <input
234:                   type="number"
235:                   {...register("growthTimeline.rootDevelopment", {
236:                     valueAsNumber: true,
237:                   })}
238:                   placeholder="42"
239:                   className="w-full p-3 border border-border rounded-md focus:ring-2 focus:ring-garden-500"
240:                 />
241:                 <p className="text-xs text-muted-foreground mt-1">
242:                   Root system establishment
243:                 </p>
244:               </div>
245:               <div>
246:                 <label className="block text-sm font-medium text-foreground mb-2">
247:                   Total Days to Maturity
248:                 </label>
249:                 <input
250:                   type="number"
251:                   {...register("growthTimeline.maturation", {
252:                     valueAsNumber: true,
253:                   })}
254:                   placeholder="60"
255:                   className="w-full p-3 border border-border rounded-md focus:ring-2 focus:ring-garden-500"
256:                 />
257:                 <p className="text-xs text-muted-foreground mt-1">
258:                   Ready for harvest
259:                 </p>
260:               </div>
261:             </div>
262:           </div>
263: 
264:           {}
265:           <div className="border-t pt-6">
266:             <div className="flex items-center justify-between mb-4">
267:               <div>
268:                 <h3 className="text-lg font-medium text-foreground">
269:                   Custom Moisture Protocol
270:                 </h3>
271:                 <p className="text-sm text-muted-foreground">
272:                   Set specific watering ranges, or use category defaults
273:                 </p>
274:               </div>
275:               <button
276:                 type="button"
277:                 onClick={() =>
278:                   setShowMoistureCustomization(!showMoistureCustomization)
279:                 }
280:                 className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${
281:                   showMoistureCustomization ? "bg-garden-600" : "bg-gray-300"
282:                 }`}
283:               >
284:                 <span
285:                   className={`inline-block h-4 w-4 transform rounded-full bg-card transition-transform ${
286:                     showMoistureCustomization
287:                       ? "translate-x-6"
288:                       : "translate-x-1"
289:                   }`}
290:                 />
291:               </button>
292:             </div>
293: 
294:             {showMoistureCustomization && (
295:               <div className="space-y-4 bg-blue-50 p-4 rounded-lg">
296:                 <input
297:                   type="hidden"
298:                   {...register("customMoistureRanges")}
299:                   checked={showMoistureCustomization}
300:                 />
301: 
302:                 <div className="text-sm text-blue-800 mb-3">
303:                    <strong>Moisture Meter Guide:</strong> Most plants prefer
304:                   watering when moisture drops to 3-4, then watered until
305:                   reaching 6-8. Adjust based on your specific variety's needs.
306:                 </div>
307: 
308:                 <div className="grid grid-cols-2 gap-4">
309:                   <div>
310:                     <label className="block text-sm font-medium text-foreground mb-2">
311:                       Water When (Min Level)
312:                     </label>
313:                     <input
314:                       type="number"
315:                       min="1"
316:                       max="10"
317:                       step="0.5"
318:                       {...register("triggerMin", { valueAsNumber: true })}
319:                       className="w-full p-3 border border-border rounded-md focus:ring-2 focus:ring-garden-500"
320:                     />
321:                     <p className="text-xs text-muted-foreground mt-1">
322:                       Lowest moisture before watering
323:                     </p>
324:                   </div>
325:                   <div>
326:                     <label className="block text-sm font-medium text-foreground mb-2">
327:                       Water When (Max Level)
328:                     </label>
329:                     <input
330:                       type="number"
331:                       min="1"
332:                       max="10"
333:                       step="0.5"
334:                       {...register("triggerMax", { valueAsNumber: true })}
335:                       className="w-full p-3 border border-border rounded-md focus:ring-2 focus:ring-garden-500"
336:                     />
337:                     <p className="text-xs text-muted-foreground mt-1">
338:                       Highest moisture before watering
339:                     </p>
340:                   </div>
341:                   <div>
342:                     <label className="block text-sm font-medium text-foreground mb-2">
343:                       Target After (Min Level)
344:                     </label>
345:                     <input
346:                       type="number"
347:                       min="1"
348:                       max="10"
349:                       step="0.5"
350:                       {...register("targetMin", { valueAsNumber: true })}
351:                       className="w-full p-3 border border-border rounded-md focus:ring-2 focus:ring-garden-500"
352:                     />
353:                     <p className="text-xs text-muted-foreground mt-1">
354:                       Minimum moisture after watering
355:                     </p>
356:                   </div>
357:                   <div>
358:                     <label className="block text-sm font-medium text-foreground mb-2">
359:                       Target After (Max Level)
360:                     </label>
361:                     <input
362:                       type="number"
363:                       min="1"
364:                       max="10"
365:                       step="0.5"
366:                       {...register("targetMax", { valueAsNumber: true })}
367:                       className="w-full p-3 border border-border rounded-md focus:ring-2 focus:ring-garden-500"
368:                     />
369:                     <p className="text-xs text-muted-foreground mt-1">
370:                       Maximum moisture after watering
371:                     </p>
372:                   </div>
373:                 </div>
374:                 <p className="text-xs text-blue-700">
375:                    These ranges will apply to all growth stages initially. You
376:                   can refine them later as you learn your plant's specific needs
377:                   through the care logging system.
378:                 </p>
379:               </div>
380:             )}
381:           </div>
382: 
383:           <div className="flex gap-4 pt-4">
384:             <Button
385:               type="submit"
386:               variant="primary"
387:               disabled={isLoading}
388:               className="flex-1"
389:             >
390:               {isLoading ? "Creating..." : "Create Variety"}
391:             </Button>
392:             {onCancel && (
393:               <Button type="button" variant="outline" onClick={onCancel}>
394:                 Cancel
395:               </Button>
396:             )}
397:           </div>
398:         </form>
399:       </CardContent>
400:     </Card>
401:   );
402: }

================
File: src/components/plant/PlantReminderSettings.tsx
================
  1: import { useState } from "react";
  2: import { Button } from "@/components/ui/Button";
  3: import { plantService, PlantRecord } from "@/types/database";
  4: import ReminderPreferencesSection from "./ReminderPreferencesSection";
  5: import toast from "react-hot-toast";
  6: 
  7: interface PlantReminderSettingsProps {
  8:   plant: PlantRecord;
  9:   onUpdate: (updatedPlant: PlantRecord) => void;
 10: }
 11: 
 12: 
 13: interface ReminderPreferences {
 14:   watering: boolean;
 15:   fertilizing: boolean;
 16:   observation: boolean;
 17:   lighting: boolean;
 18:   pruning: boolean;
 19: }
 20: 
 21: const PlantReminderSettings = ({
 22:   plant,
 23:   onUpdate,
 24: }: PlantReminderSettingsProps) => {
 25: 
 26:   const [preferences, setPreferences] = useState<ReminderPreferences>({
 27:     watering: plant.reminderPreferences?.watering ?? true,
 28:     fertilizing: plant.reminderPreferences?.fertilizing ?? true,
 29:     observation: plant.reminderPreferences?.observation ?? true,
 30:     lighting: plant.reminderPreferences?.lighting ?? true,
 31:     pruning: plant.reminderPreferences?.pruning ?? true,
 32:   });
 33: 
 34:   const [isLoading, setIsLoading] = useState(false);
 35:   const [saveStatus, setSaveStatus] = useState<"idle" | "success" | "error">(
 36:     "idle"
 37:   );
 38: 
 39:   const handleSave = async () => {
 40:     try {
 41:       setIsLoading(true);
 42:       setSaveStatus("idle");
 43: 
 44:       await plantService.updatePlant(plant.id, {
 45:         reminderPreferences: preferences,
 46:         updatedAt: new Date(),
 47:       });
 48: 
 49:       const updatedPlant = {
 50:         ...plant,
 51:         reminderPreferences: preferences,
 52:       };
 53: 
 54:       onUpdate(updatedPlant);
 55:       setSaveStatus("success");
 56:       toast.success("Reminder preferences updated!");
 57:     } catch (error) {
 58:       console.error("Failed to update preferences:", error);
 59:       setSaveStatus("error");
 60:       toast.error("Failed to update preferences");
 61:     } finally {
 62:       setIsLoading(false);
 63:     }
 64:   };
 65: 
 66: 
 67:   const hasChanges =
 68:     preferences.watering !== (plant.reminderPreferences?.watering ?? true) ||
 69:     preferences.fertilizing !==
 70:       (plant.reminderPreferences?.fertilizing ?? true) ||
 71:     preferences.observation !==
 72:       (plant.reminderPreferences?.observation ?? true) ||
 73:     preferences.lighting !== (plant.reminderPreferences?.lighting ?? true) ||
 74:     preferences.pruning !== (plant.reminderPreferences?.pruning ?? true);
 75: 
 76:   return (
 77:     <div className="space-y-6">
 78:       <ReminderPreferencesSection
 79:         preferences={preferences}
 80:         onChange={setPreferences}
 81:       />
 82: 
 83:       <div className="flex gap-4 pt-4">
 84:         <Button
 85:           onClick={handleSave}
 86:           disabled={!hasChanges || isLoading}
 87:           variant={hasChanges ? "primary" : "outline"}
 88:           className="flex-1"
 89:         >
 90:           {isLoading ? "Saving..." : hasChanges ? "Save Changes" : "No Changes"}
 91:         </Button>
 92:       </div>
 93: 
 94:       {saveStatus === "success" && (
 95:         <p className="text-sm text-emerald-600">
 96:            Preferences saved successfully
 97:         </p>
 98:       )}
 99:       {saveStatus === "error" && (
100:         <p className="text-sm text-red-600"> Failed to save preferences</p>
101:       )}
102:     </div>
103:   );
104: };
105: 
106: export default PlantReminderSettings;

================
File: src/components/plant/SoilMixtureSelector.tsx
================
  1: import { useState } from "react";
  2: import { PlantCategory } from "@/types";
  3: import { Button } from "@/components/ui/Button";
  4: import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/Card";
  5: 
  6: interface SoilComponent {
  7:   name: string;
  8:   percentage: number;
  9: }
 10: 
 11: interface SoilMixture {
 12:   id: string;
 13:   name: string;
 14:   description: string;
 15:   category?: PlantCategory;
 16:   components: SoilComponent[];
 17:   amendments?: { name: string; amount: string }[];
 18:   suitable: string[];
 19:   notes?: string[];
 20: }
 21: 
 22: interface SoilMixtureSelectorProps {
 23:   selectedMixture?: string;
 24:   onMixtureChange: (mixture: string) => void;
 25:   plantCategory?: PlantCategory;
 26: }
 27: 
 28: const PRESET_MIXTURES: SoilMixture[] = [
 29:   {
 30:     id: "leafy-greens-standard",
 31:     name: "Leafy Greens Mix",
 32:     description:
 33:       "Nutrient-rich blend perfect for arugula, spinach, and lettuce",
 34:     category: "leafy-greens",
 35:     components: [
 36:       { name: "Coco Coir", percentage: 40 },
 37:       { name: "Perlite", percentage: 25 },
 38:       { name: "Vermiculite", percentage: 25 },
 39:       { name: "Worm Castings", percentage: 10 },
 40:     ],
 41:     amendments: [{ name: "Compost", amount: "1 cup per cubic foot" }],
 42:     suitable: ["Arugula", "Spinach", "Lettuce", "Kale"],
 43:     notes: ["Retains moisture well", "High in organic matter"],
 44:   },
 45:   {
 46:     id: "root-vegetables-standard",
 47:     name: "Root Vegetables Mix",
 48:     description: "Well-draining mix for carrots, beets, and onions",
 49:     category: "root-vegetables",
 50:     components: [
 51:       { name: "Coco Coir", percentage: 40 },
 52:       { name: "Perlite", percentage: 30 },
 53:       { name: "Vermiculite", percentage: 25 },
 54:       { name: "Worm Castings", percentage: 5 },
 55:     ],
 56:     amendments: [
 57:       { name: "Compost", amount: "2 tbsp per gallon" },
 58:       { name: "Bone Meal", amount: "1 tsp per gallon" },
 59:     ],
 60:     suitable: ["Carrots", "Beets", "Onions", "Radishes"],
 61:     notes: ["Excellent drainage", "Prevents root rot"],
 62:   },
 63:   {
 64:     id: "herbs-standard",
 65:     name: "Mediterranean Herbs Mix",
 66:     description: "Well-draining, lean mix for oregano, thyme, and rosemary",
 67:     category: "herbs",
 68:     components: [
 69:       { name: "Coco Coir", percentage: 30 },
 70:       { name: "Perlite", percentage: 35 },
 71:       { name: "Sand", percentage: 20 },
 72:       { name: "Vermiculite", percentage: 15 },
 73:     ],
 74:     amendments: [{ name: "Lime", amount: "1 tsp per gallon" }],
 75:     suitable: ["Oregano", "Thyme", "Rosemary", "Sage"],
 76:     notes: ["Slightly alkaline", "Fast draining"],
 77:   },
 78:   {
 79:     id: "berries-standard",
 80:     name: "Berry & Fruit Mix",
 81:     description: "Acidic mix designed for strawberries and berry plants",
 82:     category: "berries",
 83:     components: [
 84:       { name: "Peat Moss", percentage: 35 },
 85:       { name: "Coco Coir", percentage: 30 },
 86:       { name: "Perlite", percentage: 20 },
 87:       { name: "Worm Castings", percentage: 15 },
 88:     ],
 89:     amendments: [
 90:       { name: "Sulfur", amount: " tsp per gallon (for acidity)" },
 91:       { name: "Fish Emulsion", amount: "1 tbsp per gallon monthly" },
 92:     ],
 93:     suitable: ["Strawberries", "Blueberries", "Raspberries"],
 94:     notes: ["pH 5.5-6.5", "High organic matter"],
 95:   },
 96:   {
 97:     id: "fruiting-plants-standard",
 98:     name: "Fruiting Plants Mix",
 99:     description: "Heavy-feeder mix for tomatoes, peppers, and eggplants",
100:     category: "fruiting-plants",
101:     components: [
102:       { name: "Coco Coir", percentage: 35 },
103:       { name: "Perlite", percentage: 20 },
104:       { name: "Vermiculite", percentage: 20 },
105:       { name: "Compost", percentage: 15 },
106:       { name: "Worm Castings", percentage: 5 },
107:       { name: "Biochar", percentage: 5 },
108:     ],
109:     amendments: [
110:       { name: "Gypsum", amount: " cup per 15-gal bag" },
111:       { name: "Bone Meal", amount: "2-3 tbsp per container" },
112:       { name: "Kelp Meal", amount: "2 tbsp per container" },
113:     ],
114:     suitable: ["Tomatoes", "Peppers", "Peas", "Beans"],
115:     notes: ["Heavy feeder support", "Calcium-rich for fruit development"],
116:   },
117:   {
118:     id: "universal-standard",
119:     name: "Universal Garden Mix",
120:     description: "Balanced all-purpose mix suitable for most plants",
121:     components: [
122:       { name: "Coco Coir", percentage: 40 },
123:       { name: "Perlite", percentage: 25 },
124:       { name: "Vermiculite", percentage: 20 },
125:       { name: "Compost", percentage: 10 },
126:       { name: "Worm Castings", percentage: 5 },
127:     ],
128:     amendments: [{ name: "Bone Meal", amount: "1 tbsp per gallon" }],
129:     suitable: ["Most vegetables", "Herbs", "Annual flowers"],
130:     notes: ["Good drainage", "Balanced nutrition", "Easy to work with"],
131:   },
132: ];
133: 
134: export const SoilMixtureSelector = ({
135:   selectedMixture,
136:   onMixtureChange,
137:   plantCategory,
138: }: SoilMixtureSelectorProps) => {
139:   const [showCustom, setShowCustom] = useState(false);
140:   const [customMixture, setCustomMixture] = useState("");
141: 
142:   const getRelevantMixtures = () => {
143:     if (!plantCategory) {
144:       return PRESET_MIXTURES;
145:     }
146: 
147:     const categoryMixtures = PRESET_MIXTURES.filter(
148:       (mix) => mix.category === plantCategory
149:     );
150:     const otherMixtures = PRESET_MIXTURES.filter(
151:       (mix) => mix.category !== plantCategory
152:     );
153: 
154:     return [...categoryMixtures, ...otherMixtures];
155:   };
156: 
157:   const formatComponents = (components: SoilComponent[]) => {
158:     return components
159:       .map((comp) => `${comp.percentage}% ${comp.name}`)
160:       .join(", ");
161:   };
162: 
163:   const handlePresetSelect = (mixtureId: string) => {
164:     const mixture = PRESET_MIXTURES.find((m) => m.id === mixtureId);
165:     if (mixture) {
166:       const mixtureText = `${mixture.name}: ${formatComponents(
167:         mixture.components
168:       )}`;
169:       onMixtureChange(mixtureText);
170:       setShowCustom(false);
171:     }
172:   };
173: 
174:   const handleCustomSubmit = () => {
175:     if (customMixture.trim()) {
176:       onMixtureChange(customMixture);
177:       setShowCustom(false);
178:     }
179:   };
180: 
181:   return (
182:     <div className="space-y-4">
183:       <div>
184:         <label className="block text-sm font-medium text-foreground mb-2">
185:           Soil Mixture *
186:         </label>
187:         <p className="text-xs text-muted-foreground mb-3">
188:           Choose a preset mixture or create your own custom blend
189:         </p>
190:       </div>
191: 
192:       {!showCustom ? (
193:         <>
194:           {}
195:           <div className="grid gap-3">
196:             {getRelevantMixtures().map((mixture) => (
197:               <div
198:                 key={mixture.id}
199:                 data-testid={`mixture-card-${mixture.id}`}
200:                 className={`cursor-pointer transition-all border rounded-lg shadow-sm ${
201:                   selectedMixture?.includes(mixture.name)
202:                     ? "ring-4 ring-ring bg-muted border-ring shadow-lg" //  FIXED: Using semantic colors
203:                     : "bg-card border-border hover:bg-muted/50 hover:shadow-md"
204:                 }`}
205:                 onClick={() => handlePresetSelect(mixture.id)}
206:               >
207:                 <div className="p-4">
208:                   <div className="flex items-start justify-between">
209:                     <div className="flex-1">
210:                       <div className="font-medium text-foreground mb-1 flex items-center">
211:                         {selectedMixture?.includes(mixture.name) && (
212:                           <span className="mr-2 text-primary text-lg"></span>
213:                         )}
214:                         {mixture.name}
215:                         {mixture.category === plantCategory && (
216:                           <span className="ml-2 text-xs bg-primary/10 text-primary px-2 py-1 rounded-full">
217:                             Recommended
218:                           </span>
219:                         )}
220:                       </div>
221:                       <p className="text-sm text-muted-foreground mb-2">
222:                         {mixture.description}
223:                       </p>
224:                       <div className="text-xs text-muted-foreground space-y-1">
225:                         <div>
226:                           <strong>Components:</strong>{" "}
227:                           {formatComponents(mixture.components)}
228:                         </div>
229:                         {mixture.amendments && (
230:                           <div>
231:                             <strong>Amendments:</strong>{" "}
232:                             {mixture.amendments
233:                               .map((a) => `${a.name} (${a.amount})`)
234:                               .join(", ")}
235:                           </div>
236:                         )}
237:                         <div>
238:                           <strong>Best for:</strong>{" "}
239:                           {mixture.suitable.join(", ")}
240:                         </div>
241:                       </div>
242:                     </div>
243:                   </div>
244:                 </div>
245:               </div>
246:             ))}
247:           </div>
248: 
249:           {}
250:           <Button
251:             type="button"
252:             variant="primary"
253:             onClick={() => setShowCustom(true)}
254:             className="w-full"
255:           >
256:              Create Custom Mixture
257:           </Button>
258:         </>
259:       ) : (
260: 
261:         <Card>
262:           <CardHeader>
263:             <CardTitle className="text-lg">Custom Soil Mixture</CardTitle>
264:             <p className="text-sm text-muted-foreground">
265:               Describe your custom soil mixture with components and percentages
266:             </p>
267:           </CardHeader>
268:           <CardContent className="space-y-4">
269:             <div>
270:               <label
271:                 htmlFor="custom-mixture"
272:                 className="block text-sm font-medium text-foreground mb-2"
273:               >
274:                 Mixture Description
275:               </label>
276:               <textarea
277:                 id="custom-mixture"
278:                 value={customMixture}
279:                 onChange={(e) => setCustomMixture(e.target.value)}
280:                 placeholder="e.g., 40% coco coir, 30% perlite, 25% vermiculite, 5% compost"
281:                 rows={4}
282:                 className="w-full p-3 bg-input text-input-foreground border border-border rounded-md focus:ring-2 focus:ring-ring focus:border-ring placeholder:text-muted-foreground"
283:               />
284:             </div>
285: 
286:             <div className="flex gap-3">
287:               <Button
288:                 type="button"
289:                 variant="primary"
290:                 onClick={handleCustomSubmit}
291:                 disabled={!customMixture.trim()}
292:                 className="flex-1"
293:               >
294:                 Save Custom Mixture
295:               </Button>
296:               <Button
297:                 type="button"
298:                 variant="outline"
299:                 onClick={() => {
300:                   setShowCustom(false);
301:                   setCustomMixture("");
302:                 }}
303:                 className="flex-1"
304:               >
305:                 Cancel
306:               </Button>
307:             </div>
308:           </CardContent>
309:         </Card>
310:       )}
311: 
312:       {}
313:       {selectedMixture && !showCustom && (
314:         <div className="p-3 bg-muted border border-border rounded-md">
315:           {" "}
316:           {}
317:           <div className="text-sm font-medium text-foreground mb-1">
318:             {" "}
319:             {}
320:             Selected Mixture:
321:           </div>
322:           <div className="text-sm text-muted-foreground">
323:             {selectedMixture}
324:           </div>{" "}
325:           {}
326:         </div>
327:       )}
328:     </div>
329:   );
330: };
331: 
332: export default SoilMixtureSelector;

================
File: src/hooks/useDynamicStage.ts
================
 1: import { useEffect, useState } from "react";
 2: import { PlantRecord, varietyService } from "@/types/database";
 3: import { calculateCurrentStageWithVariety } from "@/utils/growthStage";
 4: import { GrowthStage } from "@/types";
 5: 
 6: export function useDynamicStage(plant: PlantRecord): GrowthStage {
 7:   const [calculatedStage, setCalculatedStage] =
 8:     useState<GrowthStage>("germination");
 9: 
10:   useEffect(() => {
11:     const calculateStage = async () => {
12: 
13:       if (plant?.confirmedStage) {
14:         setCalculatedStage(plant.confirmedStage);
15:         return;
16:       }
17: 
18: 
19:       if (!plant?.varietyId) {
20:         setCalculatedStage("germination");
21:         return;
22:       }
23: 
24:       try {
25:         const variety = await varietyService.getVariety(plant.varietyId);
26: 
27:         if (!variety) {
28:           console.warn(
29:             `Variety with id ${plant.varietyId} not found. Defaulting stage.`
30:           );
31:           setCalculatedStage("vegetative");
32:           return;
33:         }
34: 
35:         const stage = calculateCurrentStageWithVariety(
36:           plant.plantedDate,
37:           variety
38:         );
39:         setCalculatedStage(stage);
40:       } catch (error) {
41:         console.error(" Error calculating stage:", error);
42:         setCalculatedStage("germination");
43:       }
44:     };
45: 
46:     calculateStage();
47:   }, [plant]);
48: 
49:   return calculatedStage;
50: }

================
File: src/pages/care/LogCare.tsx
================
 1: import React from "react";
 2: import { CareLogForm } from "@/pages/care/CareLogForm";
 3: import { useNavigate, useSearchParams } from "react-router-dom";
 4: import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/Card";
 5: import { BookOpen } from "lucide-react";
 6: 
 7: const LogCare: React.FC = () => {
 8:   const navigate = useNavigate();
 9:   const [searchParams] = useSearchParams();
10:   const preSelectedPlantId = searchParams.get("plantId");
11: 
12:   const handleSuccess = () => {
13:     navigate(-1);
14:   };
15: 
16:   const handleCancel = () => {
17:     navigate(-1);
18:   };
19: 
20:   return (
21:     <div className="min-h-screen bg-background p-4 space-y-4">
22:       <Card className="border-border shadow-sm">
23:         <CardHeader className="pb-3">
24:           <CardTitle className="flex items-center gap-2 text-base">
25:             <BookOpen className="h-4 w-4" />
26:             Log Care Activity
27:           </CardTitle>
28:         </CardHeader>
29:         <CardContent className="pt-0">
30:           <p className="text-sm text-muted-foreground">
31:             Record care activities for your plants to track their health and
32:             growth progress.
33:           </p>
34:         </CardContent>
35:       </Card>
36: 
37:       <CareLogForm
38:         onSuccess={handleSuccess}
39:         onCancel={handleCancel}
40:         preselectedPlantId={preSelectedPlantId || undefined}
41:       />
42:     </div>
43:   );
44: };
45: 
46: export default LogCare;

================
File: src/pages/plants/AddPlant.tsx
================
 1: import React from "react";
 2: import { useNavigate } from "react-router-dom";
 3: import { Button } from "@/components/ui/Button";
 4: import { OfflineIndicator } from "@/components/ui/OfflineIndicator";
 5: import Navigation from "@/components/Navigation";
 6: import { useFirebaseAuth } from "@/hooks/useFirebaseAuth";
 7: import { ArrowLeft } from "lucide-react";
 8: import { PlantRegistrationForm } from "@/components/plant/PlantRegistrationForm";
 9: 
10: const AddPlant: React.FC = () => {
11:   const navigate = useNavigate();
12:   const { user, signOut } = useFirebaseAuth();
13: 
14:   const handleSuccess = () => {
15:     navigate("/");
16:   };
17: 
18:   const handleCancel = () => {
19:     navigate("/");
20:   };
21: 
22:   return (
23:     <>
24:       <OfflineIndicator />
25:       <div className="min-h-screen bg-background pb-20">
26:         {}
27:         <div className="bg-card border-b border-border sticky top-0 z-40">
28:           <div className="max-w-6xl mx-auto px-4 py-4">
29:             <div className="flex justify-between items-center">
30:               <div className="flex items-center gap-3">
31:                 <Button
32:                   variant="ghost"
33:                   size="sm"
34:                   onClick={() => navigate("/")}
35:                   className="p-2"
36:                   aria-label="Go back"
37:                 >
38:                   <ArrowLeft className="h-4 w-4" />
39:                 </Button>
40:                 <span className="text-2xl"></span>
41:                 <div>
42:                   <h1 className="text-xl font-bold text-foreground">
43:                     Add New Plant
44:                   </h1>
45:                   <p className="text-sm text-muted-foreground hidden sm:block">
46:                     Register a new plant to start tracking its growth
47:                   </p>
48:                 </div>
49:               </div>
50:               <div className="flex items-center gap-3">
51:                 <div className="hidden sm:block">
52:                   <span className="text-sm text-muted-foreground">
53:                     Welcome, {user?.displayName || user?.email}
54:                   </span>
55:                 </div>
56:                 <Button variant="outline" size="sm" onClick={signOut}>
57:                   Sign Out
58:                 </Button>
59:               </div>
60:             </div>
61:           </div>
62:         </div>
63: 
64:         {}
65:         <div className="max-w-6xl mx-auto p-4">
66:           <div className="flex justify-center">
67:             <div className="w-full max-w-2xl">
68:               <PlantRegistrationForm
69:                 onSuccess={handleSuccess}
70:                 onCancel={handleCancel}
71:               />
72:             </div>
73:           </div>
74:         </div>
75:       </div>
76:       <Navigation />
77:     </>
78:   );
79: };
80: 
81: export default AddPlant;

================
File: .gitignore
================
 1: # Logs
 2: logs
 3: *.log
 4: npm-debug.log*
 5: yarn-debug.log*
 6: yarn-error.log*
 7: pnpm-debug.log*
 8: lerna-debug.log*
 9: 
10: test-results/
11: 
12: # Cache directories
13: .cache/
14: .parcel-cache/
15: 
16: node_modules
17: dist
18: dist-ssr
19: *.local
20: 
21: # Editor directories and files
22: .vscode/*
23: !.vscode/extensions.json
24: .idea
25: .DS_Store
26: *.suo
27: *.ntvs*
28: *.njsproj
29: *.sln
30: *.sw?
31: # Testing
32: coverage/.DS_Store
33: .DS_Store?
34: **/.DS_Store
35: # macOS
36: .DS_Store
37: .DS_Store?
38: ._*
39: .Spotlight-V100
40: .Trashes
41: ehthumbs.db
42: Thumbs.db
43: 
44: # IDE
45: .vscode/
46: .idea/
47: 
48: # Environment
49: .env.local
50: .env.development.local
51: .env.test.local
52: .env.production.local
53: 
54: # Temporary files
55: *.tmp
56: *.temp

================
File: tsconfig.tsbuildinfo
================
1: {"root":["./src/app.tsx","./src/jest.polyfills.ts","./src/main.tsx","./src/setuptests.ts","./src/vite-env.d.ts","./src/__tests__/components/addplant.test.tsx","./src/__tests__/components/bulkactivitymodal.test.tsx","./src/__tests__/components/carelogform.test.tsx","./src/__tests__/components/dashboard.test.tsx","./src/__tests__/components/logcare.test.tsx","./src/__tests__/components/plantregistrationform.test.tsx","./src/__tests__/components/plantremindersettings.test.tsx","./src/__tests__/components/plantstagedisplay.test.tsx","./src/__tests__/components/reminderpreferencessection.test.tsx","./src/__tests__/components/soilmixtureselector.test.tsx","./src/__tests__/database/plantservice.test.ts","./src/__tests__/database/varietyservice.test.ts","./src/__tests__/e2e/plant-registration.spec.ts","./src/__tests__/integration/plantdetailremindersettings.test.tsx","./src/__tests__/integration/plantregistrationflow.test.tsx","./src/__tests__/integration/smartdefaultsintegration.test.tsx","./src/__tests__/integration/stagecalculationdisplay.test.tsx","./src/__tests__/services/careschedulingservice.test.ts","./src/__tests__/services/smartdefaultsservice.test.ts","./src/__tests__/setup/mockfirebase.ts","./src/__tests__/utils/dateutils.test.ts","./src/__tests__/utils/growthstage.test.ts","./src/__tests__/utils/plantdisplay.test.ts","./src/__tests__/utils/plantgrouping.test.ts","./src/__tests__/utils/plantregistration.test.ts","./src/__tests__/utils/testhelpers.tsx","./src/__tests__/utils/varietygrowthstages.test.ts","./src/components/authform.tsx","./src/components/navigation.tsx","./src/components/fertilization/fertilizationdashboardsection.tsx","./src/components/fertilization/fertilizationtaskcard.tsx","./src/components/layouts/emptystate.tsx","./src/components/layouts/welcome.tsx","./src/components/plant/bulkactivitymodal.tsx","./src/components/plant/careactivityitem.tsx","./src/components/plant/carehistory.tsx","./src/components/plant/customvarietyform.tsx","./src/components/plant/nextactivitycard.tsx","./src/components/plant/plantgroupcard.tsx","./src/components/plant/plantinfocard.tsx","./src/components/plant/plantregistrationform.tsx","./src/components/plant/plantremindersettings.tsx","./src/components/plant/plantstagedisplay.tsx","./src/components/plant/reminderpreferencessection.tsx","./src/components/plant/soilmixtureselector.tsx","./src/components/ui/badge.tsx","./src/components/ui/button.tsx","./src/components/ui/card.tsx","./src/components/ui/darkmodetoggle.tsx","./src/components/ui/input.tsx","./src/components/ui/loadingspinner.tsx","./src/components/ui/locationtoggle.tsx","./src/components/ui/offlineindicator.tsx","./src/components/ui/statusbadge.tsx","./src/components/ui/switch.tsx","./src/data/seedvarieties.ts","./src/db/seeddata.ts","./src/hooks/useappinitialization.ts","./src/hooks/usedarkmode.ts","./src/hooks/usedynamicstage.ts","./src/hooks/usefirebaseauth.ts","./src/hooks/usefirebasecareactivities.ts","./src/hooks/usefirebaseplants.ts","./src/hooks/usefirsttimeuser.ts","./src/hooks/usenextplanttask.ts","./src/hooks/usescheduledtasks.ts","./src/pages/analytics/index.tsx","./src/pages/care/carelogform.tsx","./src/pages/care/logcare.tsx","./src/pages/care/photocapture.tsx","./src/pages/care/quickcompletionbuttons.tsx","./src/pages/care/index.tsx","./src/pages/dashboard/taskgroup.tsx","./src/pages/dashboard/taskitem.tsx","./src/pages/dashboard/index.tsx","./src/pages/plants/addplant.tsx","./src/pages/plants/plantdetail.tsx","./src/pages/plants/plants.tsx","./src/pages/settings/index.tsx","./src/services/plantregistrationservice.ts","./src/services/protocoltranspilerservice.ts","./src/services/bulkactivityservice.ts","./src/services/careschedulingservice.ts","./src/services/dynamicschedulingservice.ts","./src/services/index.ts","./src/services/smartdefaultsservice.ts","./src/services/firebase/authservice.ts","./src/services/firebase/careactivityservice.ts","./src/services/firebase/config.ts","./src/services/firebase/plantservice.ts","./src/services/firebase/scheduledtaskservice.ts","./src/services/firebase/__mocks__/config.ts","./src/types/core.ts","./src/types/database.ts","./src/types/firebase.ts","./src/types/index.ts","./src/types/protocols.ts","./src/types/scheduling.ts","./src/types/user.ts","./src/utils/cn.ts","./src/utils/dateutils.ts","./src/utils/fertilizationutils.ts","./src/utils/growthstage.ts","./src/utils/plantdisplay.ts","./src/utils/plantgrouping.ts","./src/utils/plantstage.ts","./vite.config.ts"],"version":"5.8.3"}

================
File: src/__tests__/integration/stageCalculationDisplay.test.tsx
================
  1: import { render, screen, waitFor, within } from "@testing-library/react";
  2: import { BrowserRouter } from "react-router-dom";
  3: import Plants from "../../pages/plants/Plants";
  4: import { varietyService, PlantRecord } from "@/types/database";
  5: import {
  6:   initializeDatabase,
  7:   resetDatabaseInitializationFlag,
  8: } from "@/db/seedData";
  9: import { subDays } from "date-fns";
 10: 
 11: 
 12: jest.mock("@/hooks/useFirebasePlants", () => ({
 13:   useFirebasePlants: jest.fn(),
 14: }));
 15: import { useFirebasePlants } from "@/hooks/useFirebasePlants";
 16: 
 17: describe("Stage Calculation and Display Integration", () => {
 18: 
 19:   beforeEach(async () => {
 20: 
 21:     (useFirebasePlants as jest.Mock).mockClear();
 22: 
 23: 
 24:     resetDatabaseInitializationFlag();
 25: 
 26:     const { db } = await import("@/types/database");
 27:     await db.plants.clear();
 28:     await db.varieties.clear();
 29:     await initializeDatabase();
 30:   });
 31: 
 32:   const renderWithRouter = (component: React.ReactElement) => {
 33:     return render(<BrowserRouter>{component}</BrowserRouter>);
 34:   };
 35: 
 36: 
 37:   const setupMockPlants = (plants: PlantRecord[]) => {
 38:     (useFirebasePlants as jest.Mock).mockReturnValue({
 39:       plants: plants,
 40:       loading: false,
 41:       error: null,
 42:     });
 43:   };
 44: 
 45:   test("correctly displays 'Ongoing Production' for everbearing strawberries after maturation", async () => {
 46:     const varieties = await varietyService.getAllVarieties();
 47:     const albion = varieties.find((v) => v.name === "Albion Strawberries");
 48:     expect(albion).toBeDefined();
 49: 
 50:     const plantedDate = subDays(new Date(), 103);
 51:     const strawberryPlant = {
 52:       id: "strawberry-1",
 53:       varietyId: albion!.id,
 54:       varietyName: albion!.name,
 55:       name: "Test Strawberry",
 56:       plantedDate,
 57:       currentStage: "flowering",
 58:       location: "Indoor",
 59:       container: "5 gallon",
 60:       isActive: true,
 61:       createdAt: new Date(),
 62:       updatedAt: new Date(),
 63:     };
 64: 
 65:     setupMockPlants([strawberryPlant]);
 66:     renderWithRouter(<Plants />);
 67: 
 68:     await waitFor(() => {
 69: 
 70:       const stageElement = screen.getByText(/ongoing/i);
 71:       const productionElement = screen.getByText(/production/i);
 72:       expect(stageElement).toBeInTheDocument();
 73:       expect(productionElement).toBeInTheDocument();
 74:     });
 75:   });
 76: 
 77:   test("correctly displays 'Harvest' for non-everbearing carrots after maturation", async () => {
 78:     const varieties = await varietyService.getAllVarieties();
 79:     const carrots = varieties.find((v) => v.name === "Little Finger Carrots");
 80:     expect(carrots).toBeDefined();
 81: 
 82:     const plantedDate = subDays(new Date(), 80);
 83:     const carrotPlant = {
 84:       id: "carrot-1",
 85:       varietyId: carrots!.id,
 86:       varietyName: carrots!.name,
 87:       name: "Test Carrots",
 88:       plantedDate,
 89:       currentStage: "vegetative",
 90:       location: "Indoor",
 91:       container: "Deep container",
 92:       isActive: true,
 93:       createdAt: new Date(),
 94:       updatedAt: new Date(),
 95:     };
 96: 
 97:     setupMockPlants([carrotPlant]);
 98:     renderWithRouter(<Plants />);
 99: 
100:     await waitFor(() => {
101:       expect(screen.getByText(/harvest/i)).toBeInTheDocument();
102:     });
103:   });
104: 
105:   test("correctly displays 'Vegetative' stage for spinach", async () => {
106:     const varieties = await varietyService.getAllVarieties();
107:     const spinach = varieties.find((v) => v.name === "Baby's Leaf Spinach");
108:     expect(spinach).toBeDefined();
109: 
110: 
111:     const plantedDate = subDays(new Date(), 25);
112:     const spinachPlant = {
113:       id: "spinach-1",
114:       varietyId: spinach!.id,
115:       varietyName: spinach!.name,
116:       name: "Test Spinach",
117:       plantedDate,
118:       currentStage: "seedling",
119:       location: "Indoor",
120:       container: "Medium container",
121:       isActive: true,
122:       createdAt: new Date(),
123:       updatedAt: new Date(),
124:     };
125: 
126:     setupMockPlants([spinachPlant]);
127:     renderWithRouter(<Plants />);
128: 
129:     await waitFor(() => {
130:       expect(screen.getByText(/vegetative/i)).toBeInTheDocument();
131:     });
132:   });
133: 
134:   test("correctly displays 'Seedling' stage for beets", async () => {
135:     const varieties = await varietyService.getAllVarieties();
136:     const beets = varieties.find((v) => v.name === "Detroit Dark Red Beets");
137:     expect(beets).toBeDefined();
138: 
139: 
140: 
141:     const plantedDate = subDays(new Date(), 15);
142:     const beetPlant = {
143:       id: "beet-1",
144:       varietyId: beets!.id,
145:       varietyName: beets!.name,
146:       name: "Test Beets Seedling",
147:       plantedDate,
148:       currentStage: "germination",
149:       location: "Indoor",
150:       container: "Small container",
151:       isActive: true,
152:       createdAt: new Date(),
153:       updatedAt: new Date(),
154:     };
155: 
156:     setupMockPlants([beetPlant]);
157:     renderWithRouter(<Plants />);
158: 
159: 
160:     await waitFor(() => {
161:       const card = screen
162:         .getByText("Test Beets Seedling")
163:         .closest(".hover\\:shadow-lg");
164:       expect(card).toBeInTheDocument();
165: 
166:       const stageElement = within(card as HTMLElement).getByText(/seedling/i, {
167:         selector: "div.font-medium",
168:       });
169:       expect(stageElement).toBeInTheDocument();
170:     });
171:   });
172: 
173:   test("correctly displays 'Flowering' stage for sugar snap peas", async () => {
174:     const varieties = await varietyService.getAllVarieties();
175:     const peas = varieties.find((v) => v.name === "Sugar Snap Peas");
176:     expect(peas).toBeDefined();
177: 
178: 
179: 
180:     const plantedDate = subDays(new Date(), 55);
181:     const peaPlant = {
182:       id: "pea-1",
183:       varietyId: peas!.id,
184:       varietyName: peas!.name,
185:       name: "Test Peas",
186:       plantedDate,
187:       currentStage: "vegetative",
188:       location: "Indoor",
189:       container: "15 gallon",
190:       isActive: true,
191:       createdAt: new Date(),
192:       updatedAt: new Date(),
193:     };
194: 
195:     setupMockPlants([peaPlant]);
196:     renderWithRouter(<Plants />);
197: 
198:     await waitFor(() => {
199:       expect(screen.getByText(/flowering/i)).toBeInTheDocument();
200:     });
201:   });
202: });

================
File: src/services/smartDefaultsService.ts
================
  1: import {
  2:   varietyService,
  3:   careService,
  4:   PlantRecord,
  5:   VarietyRecord,
  6: } from "@/types/database";
  7: import { GrowthStage, PlantCategory, CareActivityType } from "@/types/core";
  8: import { calculateCurrentStage } from "@/utils/growthStage";
  9: 
 10: export interface QuickCompleteOption {
 11:   label: string;
 12:   values: QuickCompletionValues;
 13: }
 14: 
 15: export interface QuickCompletionValues {
 16:   waterValue?: number;
 17:   waterUnit?: "oz" | "ml" | "cups" | "liters" | "gallons";
 18:   product?: string;
 19:   dilution?: string;
 20:   amount?: string;
 21:   notes?: string;
 22: }
 23: 
 24: export interface SmartDefaults {
 25:   watering?: WateringDefaults;
 26:   fertilizer?: FertilizerDefaults;
 27: }
 28: 
 29: interface WateringDefaults {
 30:   suggestedAmount: number;
 31:   unit: "oz" | "ml" | "cups" | "liters" | "gallons";
 32:   confidence: "high" | "medium" | "low";
 33:   source: "protocol" | "category" | "universal";
 34:   reasoning: string;
 35: }
 36: 
 37: interface FertilizerDefaults {
 38:   products: Array<{
 39:     name: string;
 40:     dilution: string;
 41:     amount: string;
 42:     method?: ApplicationMethod;
 43:     confidence: "high" | "medium" | "low";
 44:   }>;
 45:   source: "protocol" | "category" | "universal";
 46:   reasoning: string;
 47: }
 48: 
 49: type ApplicationMethod = "soil-drench" | "foliar-spray" | "side-dress";
 50: 
 51: interface VolumeAmount {
 52:   amount: number;
 53:   unit: "oz" | "ml" | "cups" | "liters" | "gallons";
 54: }
 55: 
 56: export class SmartDefaultsService {
 57:   static async getDefaultsForPlant(
 58:     plant: PlantRecord
 59:   ): Promise<SmartDefaults | null> {
 60:     try {
 61:       const variety = await varietyService.getVariety(plant.varietyId);
 62:       if (!variety) return null;
 63: 
 64:       const currentStage = calculateCurrentStage(
 65:         plant.plantedDate,
 66:         variety.growthTimeline
 67:       );
 68: 
 69:       const watering = this.getWateringDefaults(variety, currentStage);
 70:       const fertilizer = this.getFertilizerDefaults(variety, currentStage);
 71: 
 72:       return {
 73:         watering,
 74:         fertilizer,
 75:       };
 76:     } catch (error) {
 77:       console.error("Failed to get defaults for plant:", error);
 78:       return null;
 79:     }
 80:   }
 81: 
 82:   private static getWateringDefaults(
 83:     variety: VarietyRecord,
 84:     currentStage: GrowthStage
 85:   ): WateringDefaults {
 86:     const stageProtocol = variety.protocols?.watering?.[currentStage] as {
 87:       volume?: { amount?: number | string; unit?: string };
 88:     };
 89: 
 90:     if (stageProtocol?.volume?.amount) {
 91:       const parsed = this.parseWaterAmount(stageProtocol.volume.amount);
 92:       if (parsed && stageProtocol.volume.unit) {
 93:         return {
 94:           suggestedAmount: parsed.amount,
 95:           unit: stageProtocol.volume.unit as
 96:             | "oz"
 97:             | "ml"
 98:             | "cups"
 99:             | "liters"
100:             | "gallons",
101:           confidence: "high",
102:           source: "protocol",
103:           reasoning: `Based on ${variety.name} protocol for ${currentStage} stage`,
104:         };
105:       }
106:     }
107: 
108:     const categoryDefaults = this.getCategoryWateringDefaults(
109:       variety.category,
110:       currentStage
111:     );
112:     if (categoryDefaults) {
113:       return {
114:         suggestedAmount: categoryDefaults.amount,
115:         unit: categoryDefaults.unit,
116:         confidence: "medium",
117:         source: "category",
118:         reasoning: `Based on ${variety.category} category guidelines for ${currentStage} stage`,
119:       };
120:     }
121: 
122:     return {
123:       suggestedAmount: 16,
124:       unit: "oz",
125:       confidence: "low",
126:       source: "universal",
127:       reasoning: "Using universal default amount",
128:     };
129:   }
130: 
131:   private static getFertilizerDefaults(
132:     variety: VarietyRecord,
133:     currentStage: GrowthStage
134:   ): FertilizerDefaults | undefined {
135:     const stageProtocol = variety.protocols?.fertilization?.[currentStage] as {
136:       fertilizer?: { product?: string };
137:       application?: { dilution?: string; amount?: string; method?: string };
138:     };
139: 
140:     if (stageProtocol?.fertilizer?.product && stageProtocol?.application) {
141:       return {
142:         products: [
143:           {
144:             name: stageProtocol.fertilizer.product,
145:             dilution: stageProtocol.application.dilution || "As directed",
146:             amount: stageProtocol.application.amount || "Apply to runoff",
147:             method:
148:               (stageProtocol.application.method as ApplicationMethod) ||
149:               "soil-drench",
150:             confidence: "high",
151:           },
152:         ],
153:         source: "protocol",
154:         reasoning: `Based on ${variety.name} fertilization protocol for ${currentStage} stage`,
155:       };
156:     }
157: 
158:     const categoryDefaults = this.getCategoryFertilizerDefaults(
159:       variety.category,
160:       currentStage
161:     );
162:     if (categoryDefaults) {
163:       return categoryDefaults;
164:     }
165: 
166:     return undefined;
167:   }
168: 
169:   private static getCategoryWateringDefaults(
170:     category: PlantCategory,
171:     stage: GrowthStage
172:   ): VolumeAmount | undefined {
173:     const categoryWateringGuides: Record<
174:       PlantCategory,
175:       Record<GrowthStage, VolumeAmount>
176:     > = {
177:       "leafy-greens": {
178:         germination: { amount: 8, unit: "oz" },
179:         seedling: { amount: 12, unit: "oz" },
180:         vegetative: { amount: 16, unit: "oz" },
181:         flowering: { amount: 16, unit: "oz" },
182:         fruiting: { amount: 16, unit: "oz" },
183:         maturation: { amount: 16, unit: "oz" },
184:         harvest: { amount: 16, unit: "oz" },
185:         "ongoing-production": { amount: 16, unit: "oz" },
186:       },
187:       "fruiting-plants": {
188:         germination: { amount: 12, unit: "oz" },
189:         seedling: { amount: 16, unit: "oz" },
190:         vegetative: { amount: 24, unit: "oz" },
191:         flowering: { amount: 28, unit: "oz" },
192:         fruiting: { amount: 32, unit: "oz" },
193:         maturation: { amount: 32, unit: "oz" },
194:         harvest: { amount: 32, unit: "oz" },
195:         "ongoing-production": { amount: 32, unit: "oz" },
196:       },
197:       "root-vegetables": {
198:         germination: { amount: 8, unit: "oz" },
199:         seedling: { amount: 12, unit: "oz" },
200:         vegetative: { amount: 20, unit: "oz" },
201:         flowering: { amount: 20, unit: "oz" },
202:         fruiting: { amount: 20, unit: "oz" },
203:         maturation: { amount: 20, unit: "oz" },
204:         harvest: { amount: 20, unit: "oz" },
205:         "ongoing-production": { amount: 20, unit: "oz" },
206:       },
207:       herbs: {
208:         germination: { amount: 6, unit: "oz" },
209:         seedling: { amount: 8, unit: "oz" },
210:         vegetative: { amount: 12, unit: "oz" },
211:         flowering: { amount: 12, unit: "oz" },
212:         fruiting: { amount: 12, unit: "oz" },
213:         maturation: { amount: 12, unit: "oz" },
214:         harvest: { amount: 12, unit: "oz" },
215:         "ongoing-production": { amount: 12, unit: "oz" },
216:       },
217:       berries: {
218:         germination: { amount: 10, unit: "oz" },
219:         seedling: { amount: 14, unit: "oz" },
220:         vegetative: { amount: 20, unit: "oz" },
221:         flowering: { amount: 24, unit: "oz" },
222:         fruiting: { amount: 28, unit: "oz" },
223:         maturation: { amount: 28, unit: "oz" },
224:         harvest: { amount: 28, unit: "oz" },
225:         "ongoing-production": { amount: 28, unit: "oz" },
226:       },
227:     };
228: 
229:     return categoryWateringGuides[category]?.[stage];
230:   }
231: 
232:   private static getCategoryFertilizerDefaults(
233:     category: PlantCategory,
234:     stage: GrowthStage
235:   ): FertilizerDefaults | undefined {
236:     const categoryFertilizerGuides: Record<
237:       PlantCategory,
238:       Record<string, { product: string; dilution: string; amount: string }>
239:     > = {
240:       "leafy-greens": {
241:         general: {
242:           product: "Balanced liquid fertilizer",
243:           dilution: "Half strength",
244:           amount: "Apply every 2 weeks",
245:         },
246:       },
247:       "fruiting-plants": {
248:         vegetative: {
249:           product: "High nitrogen fertilizer",
250:           dilution: "Full strength",
251:           amount: "Apply weekly",
252:         },
253:         flowering: {
254:           product: "Bloom booster",
255:           dilution: "Full strength",
256:           amount: "Apply bi-weekly",
257:         },
258:         fruiting: {
259:           product: "Potassium-rich fertilizer",
260:           dilution: "Full strength",
261:           amount: "Apply weekly",
262:         },
263:       },
264:       "root-vegetables": {
265:         general: {
266:           product: "Root vegetable fertilizer",
267:           dilution: "Half strength",
268:           amount: "Apply monthly",
269:         },
270:       },
271:       herbs: {
272:         general: {
273:           product: "Light liquid fertilizer",
274:           dilution: "Quarter strength",
275:           amount: "Apply monthly",
276:         },
277:       },
278:       berries: {
279:         general: {
280:           product: "Berry fertilizer",
281:           dilution: "Full strength",
282:           amount: "Apply bi-weekly",
283:         },
284:       },
285:     };
286: 
287:     const stageKey = ["flowering", "fruiting"].includes(stage)
288:       ? stage
289:       : "general";
290:     const defaults = categoryFertilizerGuides[category]?.[stageKey];
291: 
292:     if (defaults) {
293:       return {
294:         products: [
295:           {
296:             name: defaults.product,
297:             dilution: defaults.dilution,
298:             amount: defaults.amount,
299:             confidence: "medium",
300:           },
301:         ],
302:         source: "category",
303:         reasoning: `General ${category} fertilization guidelines`,
304:       };
305:     }
306: 
307:     return undefined;
308:   }
309: 
310:   private static parseWaterAmount(
311:     amount: string | number
312:   ): { amount: number } | null {
313:     if (typeof amount === "number") {
314:       return { amount };
315:     }
316: 
317:     if (typeof amount === "string") {
318:       const rangeMatch = amount.match(/(\d+(?:\.\d+)?)-(\d+(?:\.\d+)?)/);
319:       if (rangeMatch) {
320:         const min = parseFloat(rangeMatch[1]);
321:         const max = parseFloat(rangeMatch[2]);
322:         return { amount: Math.round((min + max) / 2) };
323:       }
324: 
325:       const singleMatch = amount.match(/(\d+(?:\.\d+)?)/);
326:       if (singleMatch) {
327:         return { amount: parseFloat(singleMatch[1]) };
328:       }
329:     }
330: 
331:     return null;
332:   }
333: 
334:   static async getQuickCompletionOptions(
335:     plant: PlantRecord,
336:     taskType: CareActivityType,
337:     isForDashboard = false
338:   ): Promise<QuickCompleteOption[] | null> {
339:     try {
340:       const variety = await varietyService.getVariety(plant.varietyId);
341:       if (!variety) return null;
342: 
343:       const currentStage = calculateCurrentStage(
344:         plant.plantedDate,
345:         variety.growthTimeline
346:       );
347: 
348:       switch (taskType) {
349:         case "water":
350:           return this.getWateringQuickOptions(
351:             plant,
352:             variety,
353:             currentStage,
354:             isForDashboard
355:           );
356:         case "fertilize":
357:           return this.getFertilizingQuickOptions(variety, currentStage);
358:         case "observe":
359:           return [
360:             {
361:               label: "Quick: Health Check",
362:               values: { notes: "Quick health observation" },
363:             },
364:           ];
365:         default:
366:           return null;
367:       }
368:     } catch (error) {
369:       console.error("Failed to get quick completion options:", error);
370:       return null;
371:     }
372:   }
373: 
374:   private static async getWateringQuickOptions(
375:     plant: PlantRecord,
376:     variety: VarietyRecord,
377:     currentStage: GrowthStage,
378:     isForDashboard = false
379:   ): Promise<QuickCompleteOption[]> {
380:     const options: QuickCompleteOption[] = [];
381: 
382:     const wateringDefaults = this.getWateringDefaults(variety, currentStage);
383: 
384:     if (wateringDefaults) {
385:       options.push({
386:         label: `Quick: ${wateringDefaults.suggestedAmount}${wateringDefaults.unit}`,
387:         values: {
388:           waterValue: wateringDefaults.suggestedAmount,
389:           waterUnit: wateringDefaults.unit,
390:           notes: `${
391:             wateringDefaults.source === "protocol" ? "Protocol" : "Category"
392:           } suggestion for ${currentStage} stage`,
393:         },
394:       });
395: 
396:       if (!isForDashboard) {
397:         const lightAmount = Math.round(wateringDefaults.suggestedAmount * 0.75);
398:         const heavyAmount = Math.round(wateringDefaults.suggestedAmount * 1.25);
399: 
400:         if (
401:           lightAmount !== wateringDefaults.suggestedAmount &&
402:           lightAmount > 0
403:         ) {
404:           options.push({
405:             label: `Light: ${lightAmount}${wateringDefaults.unit}`,
406:             values: {
407:               waterValue: lightAmount,
408:               waterUnit: wateringDefaults.unit,
409:               notes: `Light watering for ${currentStage} stage`,
410:             },
411:           });
412:         }
413: 
414:         if (heavyAmount !== wateringDefaults.suggestedAmount) {
415:           options.push({
416:             label: `Heavy: ${heavyAmount}${wateringDefaults.unit}`,
417:             values: {
418:               waterValue: heavyAmount,
419:               waterUnit: wateringDefaults.unit,
420:               notes: `Deep watering for ${currentStage} stage`,
421:             },
422:           });
423:         }
424:       }
425:     }
426: 
427:     if (!isForDashboard) {
428:       try {
429:         const recentWatering = await careService.getLastActivityByType(
430:           plant.id,
431:           "water"
432:         );
433:         if (recentWatering && recentWatering.details.type === "water") {
434:           const lastAmount = recentWatering.details.amount as unknown as {
435:             value: number;
436:             unit: "oz" | "ml" | "cups" | "liters" | "gallons";
437:           };
438:           if (lastAmount && lastAmount.value > 0) {
439:             const isDifferent = !options.some(
440:               (opt) =>
441:                 opt.values.waterValue === lastAmount.value &&
442:                 opt.values.waterUnit === lastAmount.unit
443:             );
444: 
445:             if (isDifferent) {
446:               options.push({
447:                 label: `Repeat: ${lastAmount.value}${lastAmount.unit}`,
448:                 values: {
449:                   waterValue: lastAmount.value,
450:                   waterUnit: lastAmount.unit,
451:                   notes: `Based on your last watering`,
452:                 },
453:               });
454:             }
455:           }
456:         }
457:       } catch (error) {
458:         console.error("Error getting watering history:", error);
459:       }
460:     }
461: 
462:     return options.slice(0, isForDashboard ? 1 : 3);
463:   }
464: 
465:   private static async getFertilizingQuickOptions(
466:     variety: VarietyRecord,
467:     currentStage: GrowthStage
468:   ): Promise<QuickCompleteOption[]> {
469:     const options: QuickCompleteOption[] = [];
470: 
471:     const fertilizerDefaults = this.getFertilizerDefaults(
472:       variety,
473:       currentStage
474:     );
475: 
476:     if (fertilizerDefaults && fertilizerDefaults.products.length > 0) {
477:       fertilizerDefaults.products.slice(0, 2).forEach((product, index) => {
478:         const label = index === 0 ? `Quick: ${product.name}` : product.name;
479:         options.push({
480:           label,
481:           values: {
482:             product: product.name,
483:             dilution: product.dilution,
484:             amount: product.amount,
485:             notes: `${
486:               fertilizerDefaults.source === "protocol" ? "Protocol" : "Category"
487:             } suggestion for ${currentStage} stage`,
488:           },
489:         });
490:       });
491:     }
492: 
493:     return options;
494:   }
495: }

================
File: src/types/scheduling.ts
================
 1: export type FertilizationMethod =
 2:   | "soil-drench"
 3:   | "foliar-spray"
 4:   | "top-dress"
 5:   | "mix-in-soil";
 6: 
 7: export interface QuickCompleteOption {
 8:   id: string;
 9:   label: string;
10:   amount: string;
11: }
12: 
13: export interface UpcomingTask {
14:   id: string;
15:   plantId: string;
16:   plantName: string;
17:   type: string;
18:   taskName: string;
19:   dueDate: Date;
20:   priority: "low" | "medium" | "high" | "overdue";
21:   category: "watering" | "fertilizing" | "observation" | "maintenance";
22: }
23: 
24: export interface FertilizerDetails {
25:   type: string;
26:   product: string;
27:   amount: string;
28:   dilution: string;
29:   method: FertilizationMethod;
30:   notes: string;
31: }

================
File: src/setupTests.ts
================
 1: import "@testing-library/jest-dom";
 2: 
 3: 
 4: 
 5: 
 6: 
 7: 
 8: 
 9: 
10: 
11: 
12: 
13: 
14: 
15: 
16: 
17: 
18: 
19: 
20: 
21: 
22: 
23: 
24: 
25: 
26: 
27: 
28: Object.defineProperty(window, "matchMedia", {
29:   writable: true,
30:   value: jest.fn().mockImplementation((query) => ({
31:     matches: false,
32:     media: query,
33:     onchange: null,
34:     addListener: jest.fn(),
35:     removeListener: jest.fn(),
36:     addEventListener: jest.fn(),
37:     removeEventListener: jest.fn(),
38:     dispatchEvent: jest.fn(),
39:   })),
40: });
41: 
42: 
43: if (!global.structuredClone) {
44:   global.structuredClone = (obj: any) => JSON.parse(JSON.stringify(obj));
45: }
46: 
47: 
48: if (!global.crypto) {
49:   global.crypto = {
50:     randomUUID: () => "test-uuid-" + Math.random().toString(36).slice(2),
51:   } as any;
52: }
53: 
54: 
55: Object.defineProperty(global, "import", {
56:   value: {
57:     meta: {
58:       env: {
59:         VITE_FIREBASE_API_KEY: "test-api-key",
60:         VITE_FIREBASE_AUTH_DOMAIN: "test-project.firebaseapp.com",
61:         VITE_FIREBASE_PROJECT_ID: "test-project",
62:         VITE_FIREBASE_STORAGE_BUCKET: "test-project.appspot.com",
63:         VITE_FIREBASE_MESSAGING_SENDER_ID: "123456789",
64:         VITE_FIREBASE_APP_ID: "test-app-id",
65:         DEV: false,
66:       },
67:     },
68:   },
69: });

================
File: src/__tests__/components/Dashboard.test.tsx
================
  1: import { screen, waitFor, render } from "@testing-library/react";
  2: import userEvent from "@testing-library/user-event";
  3: import { MemoryRouter } from "react-router-dom";
  4: import { User } from "firebase/auth";
  5: import { Dashboard } from "@/pages/dashboard";
  6: import { PlantRecord } from "@/types/database";
  7: 
  8: 
  9: jest.mock("@/hooks/useFirebaseAuth", () => ({
 10:   useFirebaseAuth: jest.fn(),
 11: }));
 12: 
 13: jest.mock("@/hooks/useFirebasePlants", () => ({
 14:   useFirebasePlants: jest.fn(),
 15: }));
 16: 
 17: const mockLogActivity = jest.fn();
 18: jest.mock("@/hooks/useFirebaseCareActivities", () => ({
 19:   useFirebaseCareActivities: () => ({
 20:     logActivity: mockLogActivity,
 21:   }),
 22: }));
 23: 
 24: jest.mock("@/components/Navigation", () => ({
 25:   __esModule: true,
 26:   default: () => <div data-testid="navigation">Navigation</div>,
 27: }));
 28: 
 29: jest.mock("@/components/ui/OfflineIndicator", () => ({
 30:   OfflineIndicator: () => (
 31:     <div data-testid="offline-indicator">Offline Indicator</div>
 32:   ),
 33: }));
 34: 
 35: jest.mock("react-hot-toast", () => ({
 36:   __esModule: true,
 37:   default: {
 38:     success: jest.fn(),
 39:     error: jest.fn(),
 40:   },
 41: 
 42:   toast: {
 43:     success: jest.fn(),
 44:     error: jest.fn(),
 45:   },
 46: }));
 47: 
 48: import { useFirebaseAuth } from "@/hooks/useFirebaseAuth";
 49: import { useFirebasePlants } from "@/hooks/useFirebasePlants";
 50: 
 51: const mockUseFirebaseAuth = useFirebaseAuth as jest.Mock;
 52: const mockUseFirebasePlants = useFirebasePlants as jest.Mock;
 53: 
 54: const mockNavigate = jest.fn();
 55: jest.mock("react-router-dom", () => ({
 56:   ...jest.requireActual("react-router-dom"),
 57:   useNavigate: () => mockNavigate,
 58: }));
 59: 
 60: 
 61: const renderWithRouter = (
 62:   ui: React.ReactElement,
 63:   { initialEntries = ["/"] } = {}
 64: ) => {
 65:   return render(
 66:     <MemoryRouter initialEntries={initialEntries}>{ui}</MemoryRouter>
 67:   );
 68: };
 69: 
 70: const createMockFirebaseUser = (overrides?: Partial<User>): User =>
 71:   ({
 72:     uid: "test-user-id",
 73:     email: "test@example.com",
 74:     emailVerified: true,
 75:     displayName: "Test User",
 76:     isAnonymous: false,
 77:     metadata: {
 78:       creationTime: "2024-01-01T00:00:00.000Z",
 79:       lastSignInTime: "2024-01-01T00:00:00.000Z",
 80:     },
 81:     providerData: [],
 82:     refreshToken: "mock-refresh-token",
 83:     tenantId: null,
 84:     delete: jest.fn(),
 85:     getIdToken: jest.fn(),
 86:     getIdTokenResult: jest.fn(),
 87:     reload: jest.fn(),
 88:     toJSON: jest.fn(),
 89:     phoneNumber: null,
 90:     photoURL: null,
 91:     providerId: "firebase",
 92:     ...overrides,
 93:   } as User);
 94: 
 95: const createMockPlant = (overrides: Partial<PlantRecord>): PlantRecord => ({
 96:   id: `plant-${Math.random()}`,
 97:   varietyId: "tomato-1",
 98:   varietyName: "Cherry Tomato",
 99:   name: "My Tomato",
100:   plantedDate: new Date("2024-05-10T00:00:00.000Z"),
101:   location: "Indoor",
102:   container: "5 Gallon Grow Bag",
103:   soilMix: "standard-mix",
104:   isActive: true,
105:   createdAt: new Date(),
106:   updatedAt: new Date(),
107:   ...overrides,
108: });
109: 
110: describe("Dashboard", () => {
111:   beforeEach(() => {
112:     jest.clearAllMocks();
113:     mockUseFirebaseAuth.mockReturnValue({
114:       user: createMockFirebaseUser(),
115:       loading: false,
116:       error: null,
117:       signIn: jest.fn(),
118:       signUp: jest.fn(),
119:       signOut: jest.fn(),
120:       resetPassword: jest.fn(),
121:     });
122:     mockUseFirebasePlants.mockReturnValue({
123:       plants: [],
124:       loading: false,
125:       error: null,
126:       createPlant: jest.fn(),
127:       updatePlant: jest.fn(),
128:       deletePlant: jest.fn(),
129:     });
130:     mockLogActivity.mockResolvedValue(undefined);
131:   });
132: 
133:   describe("Loading State", () => {
134:     it("displays loading state when Firebase plants hook is loading", () => {
135:       mockUseFirebasePlants.mockReturnValue({
136:         plants: [],
137:         loading: true,
138:         error: null,
139:         createPlant: jest.fn(),
140:         updatePlant: jest.fn(),
141:         deletePlant: jest.fn(),
142:       });
143: 
144:       renderWithRouter(<Dashboard />);
145: 
146:       expect(screen.getByText("Loading...")).toBeInTheDocument();
147:     });
148:   });
149: 
150:   describe("Authentication", () => {
151:     it("displays user information when authenticated", () => {
152:       mockUseFirebasePlants.mockReturnValue({
153:         plants: [createMockPlant({ id: "p1" })],
154:         loading: false,
155:         error: null,
156:         createPlant: jest.fn(),
157:         updatePlant: jest.fn(),
158:         deletePlant: jest.fn(),
159:       });
160: 
161:       renderWithRouter(<Dashboard />);
162: 
163:       expect(screen.getByText("SmartGarden")).toBeInTheDocument();
164:       expect(screen.getByText("Welcome, Test User")).toBeInTheDocument();
165:       expect(
166:         screen.getByRole("button", { name: "Sign Out" })
167:       ).toBeInTheDocument();
168:     });
169: 
170:     it("calls signOut when sign out button is clicked", async () => {
171:       const mockSignOut = jest.fn();
172:       mockUseFirebaseAuth.mockReturnValue({
173:         user: createMockFirebaseUser(),
174:         loading: false,
175:         error: null,
176:         signIn: jest.fn(),
177:         signUp: jest.fn(),
178:         signOut: mockSignOut,
179:         resetPassword: jest.fn(),
180:       });
181: 
182:       renderWithRouter(<Dashboard />);
183: 
184:       const signOutButton = screen.getByRole("button", { name: "Sign Out" });
185:       await userEvent.click(signOutButton);
186: 
187:       expect(mockSignOut).toHaveBeenCalledTimes(1);
188:     });
189:   });
190: 
191:   describe("Empty State / Welcome", () => {
192:     it("displays welcome message when no plants exist", () => {
193:       renderWithRouter(<Dashboard />);
194: 
195:       expect(screen.getByText("Welcome to SmartGarden!")).toBeInTheDocument();
196:       expect(
197:         screen.getByText(
198:           "Start your gardening journey by adding your first plant. Track growth, log care activities, and get personalized recommendations."
199:         )
200:       ).toBeInTheDocument();
201:       expect(
202:         screen.getByRole("button", { name: " Add Your First Plant" })
203:       ).toBeInTheDocument();
204:     });
205: 
206:     it("navigates to add plant page when 'Add Your First Plant' is clicked", async () => {
207:       renderWithRouter(<Dashboard />);
208:       const addPlantButton = screen.getByRole("button", {
209:         name: " Add Your First Plant",
210:       });
211:       await userEvent.click(addPlantButton);
212: 
213:       expect(mockNavigate).toHaveBeenCalledWith("/add-plant");
214:     });
215:   });
216: 
217:   describe("Plant Grouping and Bulk Actions", () => {
218:     const groupedPlants = [
219:       createMockPlant({ id: "p1", name: "Tomato 1" }),
220:       createMockPlant({ id: "p2", name: "Tomato 2" }),
221:     ];
222: 
223:     it("should render a plant group card and allow bulk logging", async () => {
224:       mockUseFirebasePlants.mockReturnValue({
225:         plants: groupedPlants,
226:         loading: false,
227:         error: null,
228:       });
229: 
230:       const user = userEvent.setup();
231:       renderWithRouter(<Dashboard />);
232: 
233: 
234:       await waitFor(() => {
235:         expect(screen.getByText("Cherry Tomato")).toBeInTheDocument();
236:       });
237: 
238:       const groupCardText = await screen.findByText("2 plants");
239:       expect(groupCardText).toBeInTheDocument();
240: 
241: 
242:       const logAllButton = await screen.findByRole("button", {
243:         name: /Log All/i,
244:       });
245:       await user.click(logAllButton);
246: 
247: 
248:       const waterAllButton = await screen.findByRole("button", {
249:         name: /Water All/i,
250:       });
251:       await user.click(waterAllButton);
252: 
253: 
254:       await waitFor(() => {
255:         expect(screen.getByText(" Water All Plants")).toBeInTheDocument();
256:       });
257: 
258: 
259:       const amountInput = screen.getByLabelText(/Amount \(oz\)/i);
260:       await user.clear(amountInput);
261:       await user.type(amountInput, "100");
262: 
263:       const submitButton = screen.getByRole("button", {
264:         name: /Log Activity for All 2 Plants/i,
265:       });
266:       await user.click(submitButton);
267: 
268: 
269:       await waitFor(() => {
270:         expect(mockLogActivity).toHaveBeenCalledTimes(2);
271:         expect(mockLogActivity).toHaveBeenCalledWith(
272:           expect.objectContaining({
273:             plantId: "p1",
274:             type: "water",
275:             details: expect.objectContaining({
276:               amount: { value: 100, unit: "oz" },
277:             }),
278:           })
279:         );
280:         expect(mockLogActivity).toHaveBeenCalledWith(
281:           expect.objectContaining({
282:             plantId: "p2",
283:             type: "water",
284:             details: expect.objectContaining({
285:               amount: { value: 100, unit: "oz" },
286:             }),
287:           })
288:         );
289:       });
290: 
291: 
292:       expect(screen.queryByText(" Water All Plants")).not.toBeInTheDocument();
293:     });
294:   });
295: });

================
File: src/__tests__/components/PlantRegistrationForm.test.tsx
================
  1: import { render, screen, waitFor } from "@testing-library/react";
  2: import userEvent from "@testing-library/user-event";
  3: import { PlantRegistrationForm } from "@/components/plant/PlantRegistrationForm";
  4: import { useFirebasePlants } from "@/hooks/useFirebasePlants";
  5: import { varietyService } from "@/types/database";
  6: import toast from "react-hot-toast";
  7: 
  8: 
  9: jest.mock("@/hooks/useFirebasePlants");
 10: jest.mock("@/types/database");
 11: jest.mock("react-hot-toast");
 12: 
 13: 
 14: jest.mock("@/components/plant/SoilMixtureSelector", () => ({
 15:   __esModule: true,
 16:   default: ({
 17:     onMixtureChange,
 18:     selectedMixture,
 19:   }: {
 20:     onMixtureChange: (mixture: string) => void;
 21:     selectedMixture?: string;
 22:   }) => (
 23:     <div data-testid="soil-mixture-selector">
 24:       <button
 25:         onClick={() => onMixtureChange("test-mixture")}
 26:         data-testid="select-soil-mixture"
 27:       >
 28:         Select Soil Mixture
 29:       </button>
 30:       {selectedMixture && (
 31:         <span data-testid="selected-mixture">{selectedMixture}</span>
 32:       )}
 33:     </div>
 34:   ),
 35: }));
 36: 
 37: jest.mock("@/components/plant/ReminderPreferencesSection", () => ({
 38:   __esModule: true,
 39:   default: ({
 40:     onChange,
 41:     preferences,
 42:   }: {
 43:     onChange: (preferences: Record<string, boolean>) => void;
 44:     preferences: Record<string, boolean>;
 45:   }) => (
 46:     <div data-testid="reminder-preferences">
 47:       <button
 48:         onClick={() =>
 49:           onChange({ ...preferences, watering: !preferences.watering })
 50:         }
 51:         data-testid="toggle-watering"
 52:       >
 53:         Toggle Watering
 54:       </button>
 55:     </div>
 56:   ),
 57: }));
 58: 
 59: jest.mock("@/components/plant/CustomVarietyForm", () => ({
 60:   CustomVarietyForm: ({
 61:     onSuccess,
 62:     onCancel,
 63:   }: {
 64:     onSuccess: (varietyId: string) => void;
 65:     onCancel: () => void;
 66:   }) => (
 67:     <div data-testid="custom-variety-form">
 68:       <button
 69:         onClick={() => onSuccess("new-variety-id")}
 70:         data-testid="save-custom-variety"
 71:       >
 72:         Save Custom Variety
 73:       </button>
 74:       <button onClick={onCancel} data-testid="cancel-custom-variety">
 75:         Cancel
 76:       </button>
 77:     </div>
 78:   ),
 79: }));
 80: 
 81: jest.mock("@/components/ui/LoadingSpinner", () => ({
 82:   LoadingSpinner: () => <div data-testid="loading-spinner">Loading...</div>,
 83: }));
 84: 
 85: jest.mock("react-router-dom", () => ({
 86:   ...jest.requireActual("react-router-dom"),
 87:   useNavigate: () => jest.fn(),
 88: }));
 89: 
 90: const mockCreatePlant = jest.fn();
 91: const mockVarieties = [
 92:   {
 93:     id: "tomato-1",
 94:     name: "Cherry Tomato",
 95:     category: "fruiting-plants" as const,
 96:     growthTimeline: {
 97:       germination: 7,
 98:       seedling: 14,
 99:       vegetative: 28,
100:       maturation: 60,
101:     },
102:     isCustom: false,
103:     createdAt: new Date(),
104:   },
105:   {
106:     id: "basil-1",
107:     name: "Sweet Basil",
108:     category: "herbs" as const,
109:     growthTimeline: {
110:       germination: 5,
111:       seedling: 10,
112:       vegetative: 21,
113:       maturation: 45,
114:     },
115:     isCustom: false,
116:     createdAt: new Date(),
117:   },
118: ];
119: 
120: describe("PlantRegistrationForm", () => {
121:   const user = userEvent.setup();
122: 
123:   beforeEach(() => {
124:     jest.clearAllMocks();
125: 
126:     (useFirebasePlants as jest.Mock).mockReturnValue({
127:       createPlant: mockCreatePlant,
128:     });
129: 
130:     (varietyService.getAllVarieties as jest.Mock).mockResolvedValue(
131:       mockVarieties
132:     );
133:     mockCreatePlant.mockResolvedValue("new-plant-id");
134: 
135:     (toast.success as jest.Mock).mockImplementation(() => {});
136:     (toast.error as jest.Mock).mockImplementation(() => {});
137:   });
138: 
139:   const renderForm = (props = {}) => {
140:     return render(<PlantRegistrationForm {...props} />);
141:   };
142: 
143:   describe("Initial Rendering", () => {
144:     it("renders loading state initially", () => {
145:       renderForm();
146:       expect(
147:         screen.getByText("Loading plant varieties...")
148:       ).toBeInTheDocument();
149:     });
150: 
151:     it("renders form after varieties load", async () => {
152:       renderForm();
153: 
154:       await waitFor(() => {
155:         expect(screen.getByText("Register Your Plant")).toBeInTheDocument();
156:       });
157: 
158:       expect(screen.getByLabelText(/plant variety/i)).toBeInTheDocument();
159:       expect(screen.getByLabelText(/planting date/i)).toBeInTheDocument();
160:     });
161:   });
162: 
163:   describe("Quantity Management", () => {
164:     beforeEach(async () => {
165:       renderForm();
166:       await waitFor(() => {
167:         expect(screen.getByText("Register Your Plant")).toBeInTheDocument();
168:       });
169: 
170: 
171:       const growBagButton = screen.getByTestId("container-type-grow-bag");
172:       await user.click(growBagButton);
173:     });
174: 
175:     it("allows increasing and decreasing quantity", async () => {
176:       await waitFor(() => {
177:         expect(screen.getByTestId("quantity-input")).toBeInTheDocument();
178:       });
179: 
180:       const quantityInput = screen.getByTestId("quantity-input");
181:       const incrementButton = screen.getByLabelText("Increase quantity");
182:       const decrementButton = screen.getByLabelText("Decrease quantity");
183: 
184:       expect(quantityInput).toHaveValue(1);
185:       expect(decrementButton).toBeDisabled();
186: 
187:       await user.click(incrementButton);
188:       expect(quantityInput).toHaveValue(2);
189:       expect(decrementButton).not.toBeDisabled();
190: 
191:       await user.click(decrementButton);
192:       expect(quantityInput).toHaveValue(1);
193:       expect(decrementButton).toBeDisabled();
194:     });
195:   });
196: 
197: 
198: 
199: 
200:   describe("Container Selection", () => {
201:     beforeEach(async () => {
202:       renderForm();
203:       await waitFor(() => {
204:         expect(screen.getByText("Register Your Plant")).toBeInTheDocument();
205:       });
206:     });
207: 
208:     it("shows container type options", () => {
209:       expect(screen.getByTestId("container-type-grow-bag")).toBeInTheDocument();
210:       expect(screen.getByTestId("container-type-pot")).toBeInTheDocument();
211:       expect(
212:         screen.getByTestId("container-type-cell-tray")
213:       ).toBeInTheDocument();
214:       expect(
215:         screen.getByTestId("container-type-raised-bed")
216:       ).toBeInTheDocument();
217:     });
218: 
219:     it("auto-selects container size when container type is selected", async () => {
220:       const growBagButton = screen.getByTestId("container-type-grow-bag");
221:       await user.click(growBagButton);
222: 
223:       await waitFor(() => {
224:         expect(screen.getByText("Container Size *")).toBeInTheDocument();
225:       });
226: 
227: 
228:       await waitFor(() => {
229:         const sizeSelect = screen.getByDisplayValue(
230:           "1 Gallon"
231:         ) as HTMLSelectElement;
232:         expect(sizeSelect).toBeInTheDocument();
233:         expect(sizeSelect.value).toBe("1-gallon");
234:       });
235:     });
236:   });
237: 
238:   describe("Form Validation", () => {
239:     beforeEach(async () => {
240:       renderForm();
241:       await waitFor(() => {
242:         expect(screen.getByText("Register Your Plant")).toBeInTheDocument();
243:       });
244:     });
245: 
246:     it("should prevent future planting dates", async () => {
247:       const dateInput = screen.getByLabelText(/planting date/i);
248: 
249:       const tomorrow = new Date();
250:       tomorrow.setDate(tomorrow.getDate() + 1);
251:       const futureDate = tomorrow.toISOString().split("T")[0];
252: 
253:       await user.clear(dateInput);
254:       await user.type(dateInput, futureDate);
255: 
256: 
257:       await user.click(screen.getByLabelText(/plant variety/i));
258: 
259:       await waitFor(() => {
260:         expect(
261:           screen.getByText(
262:             "Planting date must be within the past year and not in the future"
263:           )
264:         ).toBeInTheDocument();
265:       });
266:     });
267:     it("enables form submission when all required fields are filled", async () => {
268: 
269:       const varietySelect = screen.getByLabelText(/plant variety/i);
270:       await user.selectOptions(varietySelect, "tomato-1");
271: 
272: 
273:       const growBagButton = screen.getByTestId("container-type-grow-bag");
274:       await user.click(growBagButton);
275: 
276: 
277:       await waitFor(() => {
278:         const sizeSelect = screen.getByDisplayValue("1 Gallon");
279:         expect(sizeSelect).toBeInTheDocument();
280: 
281:         expect((sizeSelect as HTMLSelectElement).value).toBe("1-gallon");
282:       });
283: 
284: 
285:       const selectSoilButton = screen.getByTestId("select-soil-mixture");
286:       await user.click(selectSoilButton);
287: 
288: 
289:       await waitFor(() => {
290:         const submitButton = screen.getByRole("button", {
291:           name: /register plant/i,
292:         });
293:         expect(submitButton).toBeEnabled();
294:       });
295:     });
296:   });
297: 
298:   describe("Form Submission", () => {
299: 
300:     const fillForm = async () => {
301:       await user.selectOptions(
302:         screen.getByLabelText(/plant variety/i),
303:         "tomato-1"
304:       );
305:       await user.click(screen.getByTestId("container-type-grow-bag"));
306:       await waitFor(() => {
307:         expect(screen.getByDisplayValue("1 Gallon")).toBeInTheDocument();
308:       });
309:       await user.click(screen.getByTestId("select-soil-mixture"));
310:     };
311: 
312: 
313:     beforeEach(async () => {
314:       renderForm();
315:       await waitFor(() => {
316:         expect(screen.getByText("Register Your Plant")).toBeInTheDocument();
317:       });
318:     });
319: 
320:     it.skip("handles submission errors gracefully", async () => {});
321: 
322:     it("shows loading state during submission", async () => {
323: 
324:       let resolveCreatePlant: (value: string) => void;
325:       const createPlantPromise = new Promise<string>((resolve) => {
326:         resolveCreatePlant = resolve;
327:       });
328:       mockCreatePlant.mockReturnValueOnce(createPlantPromise);
329: 
330:       await fillForm();
331:       const submitButton = screen.getByRole("button", {
332:         name: /Register Plant/i,
333:       });
334:       await user.click(submitButton);
335: 
336: 
337:       expect(screen.getByText(/registering.../i)).toBeInTheDocument();
338:       expect(submitButton).toBeDisabled();
339: 
340: 
341:       resolveCreatePlant!("plant-id");
342: 
343: 
344:       await waitFor(() => {
345:         expect(screen.queryByText(/registering.../i)).not.toBeInTheDocument();
346:       });
347:     });
348:   });
349: 
350:   describe("Accessibility", () => {
351:     beforeEach(async () => {
352:       renderForm();
353:       await waitFor(() => {
354:         expect(screen.getByText("Register Your Plant")).toBeInTheDocument();
355:       });
356:     });
357: 
358:     it("has proper form labels", () => {
359:       expect(screen.getByLabelText(/plant variety/i)).toBeInTheDocument();
360:       expect(screen.getByLabelText(/planting date/i)).toBeInTheDocument();
361:     });
362: 
363:     it("has proper ARIA attributes for buttons", () => {
364:       const growBagButton = screen.getByTestId("container-type-grow-bag");
365:       expect(growBagButton).toHaveAttribute("type", "button");
366:     });
367:   });
368: });

================
File: src/__tests__/database/varietyService.test.ts
================
  1: import { varietyService } from "../../types/database";
  2: import {
  3:   initializeDatabase,
  4:   resetDatabaseInitializationFlag,
  5: } from "../../db/seedData";
  6: import { seedVarieties } from "../../data/seedVarieties";
  7: import { db, PlantCategory } from "@/types";
  8: 
  9: describe("varietyService", () => {
 10: 
 11: 
 12:   beforeEach(async () => {
 13:     try {
 14:       await db.varieties.clear();
 15:       await initializeDatabase();
 16:     } catch (error) {
 17:       console.error("ERROR IN TEST SETUP (beforeEach):", error);
 18:       throw error;
 19:     }
 20:     resetDatabaseInitializationFlag();
 21:     await db.varieties.clear();
 22:     await initializeDatabase();
 23:   });
 24: 
 25:   describe("Data Seeding and Integrity", () => {
 26:     it("should seed all varieties from the data file without duplicates", async () => {
 27:       const allVarieties = await varietyService.getAllVarieties();
 28: 
 29: 
 30:       expect(allVarieties.length).toBe(seedVarieties.length);
 31: 
 32: 
 33:       const varietyNames = allVarieties.map((v) => v.name);
 34:       const uniqueNames = new Set(varietyNames);
 35:       expect(uniqueNames.size).toBe(varietyNames.length);
 36:     });
 37: 
 38:     it("should prevent adding a variety with a duplicate name", async () => {
 39:       const existingVariety = await varietyService.getVarietyByName(
 40:         "Sugar Snap Peas"
 41:       );
 42:       expect(existingVariety).toBeDefined();
 43: 
 44:       const newId = await varietyService.addVariety({
 45:         name: "Sugar Snap Peas",
 46:         category: "fruiting-plants",
 47:         growthTimeline: {
 48:           germination: 1,
 49:           seedling: 1,
 50:           vegetative: 1,
 51:           maturation: 1,
 52:           rootDevelopment: 1,
 53:         },
 54:       });
 55: 
 56: 
 57:       expect(newId).toBe(existingVariety!.id);
 58: 
 59: 
 60:       const allVarieties = await varietyService.getAllVarieties();
 61:       expect(allVarieties.length).toBe(seedVarieties.length);
 62:     });
 63:   });
 64: 
 65:   describe("Service Functionality", () => {
 66:     it("should retrieve a specific variety by name", async () => {
 67:       const variety = await varietyService.getVarietyByName(
 68:         "Baby's Leaf Spinach"
 69:       );
 70:       expect(variety).toBeDefined();
 71:       expect(variety?.name).toBe("Baby's Leaf Spinach");
 72:       expect(variety?.category).toBe("leafy-greens");
 73:     });
 74: 
 75:     it("should retrieve all varieties for a specific category", async () => {
 76:       const herbs = await varietyService.getVarietiesByCategory("herbs");
 77:       const herbNames = herbs.map((v) => v.name);
 78: 
 79:       expect(herbs.length).toBeGreaterThan(0);
 80:       expect(herbNames).toContain("Rosemary");
 81:       expect(herbNames).toContain("English Thyme");
 82: 
 83: 
 84:       herbs.forEach((herb) => {
 85:         expect(herb.category).toBe("herbs");
 86:       });
 87:     });
 88: 
 89:     it("should return an empty array for a category with no varieties", async () => {
 90: 
 91:       const flowers = await varietyService.getVarietiesByCategory(
 92:         "flowers" as PlantCategory
 93:       );
 94:       expect(flowers).toEqual([]);
 95:     });
 96:   });
 97: 
 98:   describe("Protocol and Timeline Validation", () => {
 99:     it("should have valid growth timelines for all seeded varieties", async () => {
100:       const allVarieties = await varietyService.getAllVarieties();
101:       expect(allVarieties.length).toBeGreaterThan(0);
102: 
103:       allVarieties.forEach((variety) => {
104:         expect(variety.growthTimeline).toBeDefined();
105:         expect(variety.growthTimeline.germination).toBeGreaterThanOrEqual(0);
106:         expect(variety.growthTimeline.seedling).toBeGreaterThanOrEqual(0);
107:         expect(variety.growthTimeline.vegetative).toBeGreaterThanOrEqual(0);
108:         expect(variety.growthTimeline.maturation).toBeGreaterThan(0);
109:       });
110:     });
111: 
112:     it("should have a productiveLifespan for all everbearing varieties", async () => {
113:       const allVarieties = await varietyService.getAllVarieties();
114:       const everbearingVarieties = allVarieties.filter((v) => v.isEverbearing);
115: 
116:       expect(everbearingVarieties.length).toBeGreaterThan(0);
117: 
118:       everbearingVarieties.forEach((variety) => {
119:         expect(variety.productiveLifespan).toBeDefined();
120:         expect(variety.productiveLifespan!).toBeGreaterThan(0);
121:       });
122:     });
123: 
124:     it("should have comprehensive protocols for complex plants like Albion Strawberries", async () => {
125:       const strawberries = await varietyService.getVarietyByName(
126:         "Albion Strawberries"
127:       );
128:       expect(strawberries?.protocols?.lighting).toBeDefined();
129:       expect(strawberries?.protocols?.watering).toBeDefined();
130:       expect(strawberries?.protocols?.fertilization).toBeDefined();
131:       expect(strawberries?.protocols?.environment).toBeDefined();
132:       expect(strawberries?.protocols?.soilMixture).toBeDefined();
133:       expect(strawberries?.protocols?.specialRequirements).toBeDefined();
134:       expect(
135:         strawberries?.protocols?.specialRequirements?.length
136:       ).toBeGreaterThan(0);
137:     });
138: 
139:     it("should have valid soil mixture percentages for varieties with soil protocols", async () => {
140:       const allVarieties = await varietyService.getAllVarieties();
141:       const varietiesWithSoilMix = allVarieties.filter(
142:         (v) => v.protocols?.soilMixture?.components
143:       );
144: 
145:       expect(varietiesWithSoilMix.length).toBeGreaterThan(0);
146: 
147:       varietiesWithSoilMix.forEach((variety) => {
148:         const components = variety.protocols!.soilMixture!.components!;
149:         const totalPercentage = Object.values(components).reduce(
150:           (sum, pct) => sum + pct,
151:           0
152:         );
153:         expect(totalPercentage).toBeCloseTo(100, 1);
154:       });
155:     });
156:   });
157: });

================
File: src/pages/dashboard/TaskItem.tsx
================
  1: import React, { useState } from "react";
  2: import { useNavigate } from "react-router-dom";
  3: import { Button } from "@/components/ui/Button";
  4: import { StatusBadge } from "@/components/ui/StatusBadge";
  5: import { UpcomingTask } from "@/types/scheduling";
  6: import { CheckCircle2, Clock } from "lucide-react";
  7: import {
  8:   QuickCompleteOption,
  9:   QuickCompletionValues,
 10: } from "@/services/smartDefaultsService";
 11: 
 12: interface TaskItemProps {
 13:   task: UpcomingTask;
 14:   onQuickComplete?: (
 15:     taskId: string,
 16:     values: QuickCompletionValues
 17:   ) => Promise<void>;
 18:   onBypass?: (taskId: string, reason: string) => Promise<void>;
 19:   className?: string;
 20: }
 21: 
 22: const TaskItem: React.FC<TaskItemProps> = ({
 23:   task,
 24:   onQuickComplete,
 25:   onBypass,
 26:   className = "",
 27: }) => {
 28:   const navigate = useNavigate();
 29:   const [isLoading, setIsLoading] = useState(false);
 30:   const [showBypassDialog, setShowBypassDialog] = useState(false);
 31:   const [bypassReason, setBypassReason] = useState("");
 32:   const [bypassSubmitted, setBypassSubmitted] = useState(false);
 33: 
 34:   const handleTaskClick = () => {
 35:     navigate(`/plants/${task.plantId}`);
 36:   };
 37: 
 38:   const handleQuickComplete = async (option: QuickCompleteOption) => {
 39:     if (!onQuickComplete) return;
 40: 
 41:     setIsLoading(true);
 42:     try {
 43:       await onQuickComplete(task.id, option.values);
 44:     } catch (error) {
 45:       console.error("Failed to quick complete task:", error);
 46:     } finally {
 47:       setIsLoading(false);
 48:     }
 49:   };
 50: 
 51:   const handleBypass = async () => {
 52:     if (!onBypass || !bypassReason.trim()) return;
 53: 
 54:     setIsLoading(true);
 55:     try {
 56:       await onBypass(task.id, bypassReason);
 57: 
 58:       setBypassSubmitted(true);
 59: 
 60:       setTimeout(() => {
 61:         setShowBypassDialog(false);
 62:         setBypassReason("");
 63:         setBypassSubmitted(false);
 64:       }, 1500);
 65:     } catch (error) {
 66:       console.error("Failed to bypass task:", error);
 67:     } finally {
 68:       setIsLoading(false);
 69:     }
 70:   };
 71: 
 72:   const getTaskIcon = (taskName: string) => {
 73:     const name = taskName.toLowerCase();
 74:     if (name.includes("water")) return "";
 75:     if (name.includes("fertiliz")) return "";
 76:     if (name.includes("observe") || name.includes("health")) return "";
 77:     return "";
 78:   };
 79: 
 80:   const getPriorityColor = (priority: string) => {
 81:     switch (priority) {
 82:       case "high":
 83:         return "text-red-600";
 84:       case "medium":
 85:         return "text-yellow-600";
 86:       case "low":
 87:         return "text-green-600";
 88:       default:
 89:         return "text-muted-foreground";
 90:     }
 91:   };
 92: 
 93:   const getStatusFromPriority = (priority: string) => {
 94:     switch (priority) {
 95:       case "high":
 96:         return "critical" as const;
 97:       case "medium":
 98:         return "attention" as const;
 99:       case "low":
100:         return "healthy" as const;
101:       default:
102:         return "new" as const;
103:     }
104:   };
105: 
106:   return (
107:     <div className={`bg-card rounded-lg border p-4 ${className}`}>
108:       <div className="flex items-start justify-between">
109:         <div className="flex items-start space-x-3 flex-1">
110:           <div className="text-2xl">{getTaskIcon(task.task)}</div>
111:           <div className="flex-1 min-w-0" onClick={handleTaskClick}>
112:             <div className="flex items-center gap-2 mb-1">
113:               <h4 className="font-medium text-foreground">{task.plantName}</h4>
114:               <StatusBadge
115:                 status={getStatusFromPriority(task.priority)}
116:                 size="sm"
117:               />
118:             </div>
119:             <p className="text-sm text-muted-foreground mb-1">{task.task}</p>
120:             <p className="text-xs text-muted-foreground mb-1">
121:               Stage: {task.plantStage}
122:             </p>
123:             <p className={`text-xs ${getPriorityColor(task.priority)}`}>
124:               {task.dueIn}
125:             </p>
126:           </div>
127: 
128:           <div className="flex flex-col gap-2 ml-4">
129:             {task.quickCompleteOptions &&
130:               task.quickCompleteOptions.length > 0 && (
131:                 <div className="flex flex-wrap gap-1">
132:                   {task.quickCompleteOptions.map((option, index) => (
133:                     <Button
134:                       key={index}
135:                       size="sm"
136:                       variant="outline"
137:                       onClick={() => handleQuickComplete(option)}
138:                       disabled={isLoading}
139:                       className="text-xs"
140:                     >
141:                       {option.label}
142:                     </Button>
143:                   ))}
144:                 </div>
145:               )}
146: 
147:             <div className="flex gap-2">
148:               <Button
149:                 size="sm"
150:                 variant="ghost"
151:                 onClick={() => setShowBypassDialog(true)}
152:                 disabled={isLoading}
153:                 className="text-xs"
154:               >
155:                 Bypass
156:               </Button>
157:               <Button
158:                 size="sm"
159:                 variant="outline"
160:                 onClick={() =>
161:                   navigate(
162:                     `/log-care?plant=${task.plantId}&type=${
163:                       task.task.toLowerCase().includes("water")
164:                         ? "water"
165:                         : "fertilize"
166:                     }`
167:                   )
168:                 }
169:                 disabled={isLoading}
170:               >
171:                 Log Manually
172:               </Button>
173:             </div>
174:           </div>
175:         </div>
176:       </div>
177: 
178:       {showBypassDialog && (
179:         <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
180:           <div className="bg-background rounded-lg p-6 w-full max-w-md">
181:             {bypassSubmitted ? (
182:               <div className="text-center">
183:                 <CheckCircle2 className="w-16 h-16 text-green-500 mx-auto mb-4" />
184:                 <h3 className="text-lg font-semibold mb-2 text-green-700">
185:                   Task Bypassed
186:                 </h3>
187:                 <p className="text-sm text-muted-foreground">
188:                   Your preferences are being learned for better recommendations.
189:                 </p>
190:               </div>
191:             ) : (
192:               <>
193:                 <h3 className="text-lg font-semibold mb-4">
194:                   Bypass "{task.task}" for {task.plantName}
195:                 </h3>
196:                 <p className="text-sm text-muted-foreground mb-4">
197:                   Why are you skipping this task? This helps us improve future
198:                   recommendations.
199:                 </p>
200:                 <textarea
201:                   value={bypassReason}
202:                   onChange={(e) => setBypassReason(e.target.value)}
203:                   placeholder="e.g., plant looks healthy, watered recently, weather too cold..."
204:                   className="w-full h-24 p-3 border rounded-md resize-none text-sm"
205:                   disabled={isLoading}
206:                 />
207:                 <div className="flex gap-2 mt-4">
208:                   <Button
209:                     onClick={() => {
210:                       setShowBypassDialog(false);
211:                       setBypassReason("");
212:                     }}
213:                     variant="outline"
214:                     disabled={isLoading}
215:                     className="flex-1"
216:                   >
217:                     Cancel
218:                   </Button>
219:                   <Button
220:                     onClick={handleBypass}
221:                     disabled={!bypassReason.trim() || isLoading}
222:                     className="flex-1"
223:                   >
224:                     {isLoading ? (
225:                       <div className="flex items-center gap-2">
226:                         <Clock className="w-4 h-4 animate-spin" />
227:                         <span>Submitting...</span>
228:                       </div>
229:                     ) : (
230:                       "Submit Bypass"
231:                     )}
232:                   </Button>
233:                 </div>
234:               </>
235:             )}
236:           </div>
237:         </div>
238:       )}
239:     </div>
240:   );
241: };
242: 
243: export default TaskItem;

================
File: src/pages/plants/Plants.tsx
================
  1: import React, { useState } from "react";
  2: import { useNavigate } from "react-router-dom";
  3: import { useFirebasePlants } from "@/hooks/useFirebasePlants";
  4: import { Card, CardContent } from "@/components/ui/Card";
  5: import { Button } from "@/components/ui/Button";
  6: import { LoadingSpinner } from "@/components/ui/LoadingSpinner";
  7: import { Input } from "@/components/ui/Input";
  8: import Navigation from "@/components/Navigation";
  9: import PlantGroupCard from "@/components/plant/PlantGroupCard";
 10: import PlantInfoCard from "@/components/plant/PlantInfoCard";
 11: import BulkActivityModal from "@/components/plant/BulkActivityModal";
 12: import { groupPlantsByConditions, PlantGroup } from "@/utils/plantGrouping";
 13: 
 14: const Plants: React.FC = () => {
 15:   const navigate = useNavigate();
 16:   const { plants, loading, error } = useFirebasePlants();
 17: 
 18:   const [searchTerm, setSearchTerm] = useState("");
 19:   const [viewMode, setViewMode] = useState<"groups" | "individual">("groups");
 20:   const [bulkModalOpen, setBulkModalOpen] = useState(false);
 21:   const [selectedPlantIds, setSelectedPlantIds] = useState<string[]>([]);
 22:   const [selectedActivityType, setSelectedActivityType] = useState<string>("");
 23:   const [selectedGroup, setSelectedGroup] = useState<PlantGroup | null>(null);
 24: 
 25:   if (loading) {
 26:     return (
 27:       <div className="min-h-screen flex items-center justify-center">
 28:         <LoadingSpinner />
 29:       </div>
 30:     );
 31:   }
 32: 
 33:   if (error) {
 34:     return (
 35:       <div className="min-h-screen flex items-center justify-center">
 36:         <div className="text-center">
 37:           <p className="text-destructive mb-4">Error loading plants: {error}</p>
 38:           <Button onClick={() => window.location.reload()}>Try Again</Button>
 39:         </div>
 40:       </div>
 41:     );
 42:   }
 43: 
 44:   const plantGroups = groupPlantsByConditions(plants);
 45: 
 46: 
 47:   const filteredPlants = plants.filter(
 48:     (plant) =>
 49:       (plant.name?.toLowerCase() || "").includes(searchTerm.toLowerCase()) ||
 50:       (plant.varietyName?.toLowerCase() || "").includes(
 51:         searchTerm.toLowerCase()
 52:       )
 53:   );
 54: 
 55:   // Fixed: Match PlantGroupCard interface - only 2 parameters
 56:   const handleBulkLogActivity = (plantIds: string[], activityType: string) => {
 57:     // Find the group to get additional data if needed
 58:     const group = plantGroups.find((g) =>
 59:       g.plants.some((plant) => plantIds.includes(plant.id))
 60:     );
 61: 
 62:     setSelectedPlantIds(plantIds);
 63:     setSelectedActivityType(activityType);
 64:     setSelectedGroup(group || null);
 65:     setBulkModalOpen(true);
 66:   };
 67: 
 68:   const handleIndividualLogActivity = (
 69:     plantId: string,
 70:     activityType: string
 71:   ) => {
 72:     navigate(`/log-care?plantId=${plantId}&activityType=${activityType}`);
 73:   };
 74: 
 75:   const closeBulkModal = () => {
 76:     setBulkModalOpen(false);
 77:     setSelectedPlantIds([]);
 78:     setSelectedActivityType("");
 79:     setSelectedGroup(null);
 80:   };
 81: 
 82:   return (
 83:     <div className="min-h-screen bg-background">
 84:       <Navigation />
 85:       <div className="container mx-auto px-4 py-8">
 86:         <div className="flex justify-between items-center mb-6">
 87:           <h1 className="text-2xl font-bold">My Plants</h1>
 88:           <Button onClick={() => navigate("/add-plant")}>Add Plant</Button>
 89:         </div>
 90: 
 91:         <div className="flex gap-4 mb-6">
 92:           <Input
 93:             placeholder="Search plants..."
 94:             value={searchTerm}
 95:             onChange={(e) => setSearchTerm(e.target.value)}
 96:             className="max-w-sm"
 97:           />
 98:           <div className="flex gap-2">
 99:             <Button
100:               variant={viewMode === "groups" ? "primary" : "outline"}
101:               onClick={() => setViewMode("groups")}
102:             >
103:               Groups
104:             </Button>
105:             <Button
106:               variant={viewMode === "individual" ? "primary" : "outline"}
107:               onClick={() => setViewMode("individual")}
108:             >
109:               Individual
110:             </Button>
111:           </div>
112:         </div>
113: 
114:         {plants.length === 0 ? (
115:           <Card>
116:             <CardContent className="text-center py-8">
117:               <h3 className="text-lg font-semibold mb-2">No plants yet</h3>
118:               <p className="text-muted-foreground mb-4">
119:                 Add your first plant to get started!
120:               </p>
121:               <Button onClick={() => navigate("/add-plant")}>Add Plant</Button>
122:             </CardContent>
123:           </Card>
124:         ) : (
125:           <div className="space-y-4">
126:             {viewMode === "groups" ? (
127:               <div className="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
128:                 {plantGroups.map((group) => (
129:                   <PlantGroupCard
130:                     key={group.id}
131:                     group={group}
132:                     onBulkLogActivity={handleBulkLogActivity}
133:                   />
134:                 ))}
135:               </div>
136:             ) : (
137:               <div className="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
138:                 {filteredPlants.map((plant) => (
139:                   <PlantInfoCard
140:                     key={plant.id}
141:                     plant={plant}
142:                     onLogCare={handleIndividualLogActivity}
143:                     showQuickActions={true}
144:                   />
145:                 ))}
146:               </div>
147:             )}
148:           </div>
149:         )}
150:       </div>
151: 
152:       <BulkActivityModal
153:         isOpen={bulkModalOpen}
154:         onClose={closeBulkModal}
155:         plantIds={selectedPlantIds}
156:         activityType={selectedActivityType}
157:         plantCount={selectedPlantIds.length}
158:         varietyName={selectedGroup?.varietyName || ""}
159:       />
160:     </div>
161:   );
162: };
163: 
164: export default Plants;

================
File: package.json
================
 1: {
 2:   "name": "smartgarden-app",
 3:   "private": true,
 4:   "version": "0.0.0",
 5:   "type": "module",
 6:   "scripts": {
 7:     "dev": "vite --config vite.config.ts",
 8:     "test:e2e:debug": "node tests/e2e/helpers/debug-setup.js",
 9:     "dev:api": "node dev-server.js",
10:     "dev:client": "vite",
11:     "dev:watch": "concurrently \"npm run dev\" \"npm run test:watch\"",
12:     "build": "tsc -b && vite build",
13:     "lint": "eslint . --ext ts,tsx",
14:     "preview": "vite preview",
15:     "test": "jest --passWithNoTests",
16:     "test:watch": "jest --watchAll --passWithNoTests",
17:     "test:coverage": "jest --coverage --passWithNoTests",
18:     "test:ci": "jest --ci --coverage --watchAll=false --passWithNoTests",
19:     "test:e2e": "playwright test",
20:     "test:e2e:ui": "playwright test --ui",
21:     "test:all": "npm run test:ci && npm run test:e2e"
22:   },
23:   "dependencies": {
24:     "@hookform/resolvers": "^5.1.1",
25:     "@radix-ui/react-dialog": "^1.1.14",
26:     "@radix-ui/react-slot": "^1.2.3",
27:     "@radix-ui/react-tabs": "^1.1.12",
28:     "@tanstack/react-query": "^5.80.7",
29:     "clsx": "^2.1.1",
30:     "date-fns": "^4.1.0",
31:     "dexie": "^4.0.11",
32:     "dexie-react-hooks": "^1.1.7",
33:     "firebase": "^11.9.1",
34:     "lucide-react": "^0.468.0",
35:     "react": "^19.1.0",
36:     "react-dom": "^19.1.0",
37:     "react-hook-form": "^7.57.0",
38:     "react-hot-toast": "^2.5.2",
39:     "react-router-dom": "^7.6.2",
40:     "tailwind-merge": "^3.3.1",
41:     "ts-node": "^10.9.2",
42:     "util": "^0.12.5",
43:     "uuid": "^11.1.0",
44:     "vite-plugin-pwa": "^1.0.0",
45:     "workbox-window": "^7.3.0",
46:     "zod": "^3.25.64"
47:   },
48:   "devDependencies": {
49:     "@eslint/js": "^9.25.0",
50:     "@playwright/test": "^1.53.0",
51:     "@testing-library/jest-dom": "^6.6.3",
52:     "@testing-library/react": "^16.3.0",
53:     "@testing-library/user-event": "^14.6.1",
54:     "@types/jest": "^29.5.14",
55:     "@types/react": "^19.1.2",
56:     "@types/react-dom": "^19.1.2",
57:     "@types/testing-library__jest-dom": "^5.14.9",
58:     "@types/uuid": "^10.0.0",
59:     "@vitejs/plugin-react": "^4.4.1",
60:     "autoprefixer": "^10.4.21",
61:     "concurrently": "^9.2.0",
62:     "cors": "^2.8.5",
63:     "eslint": "^9.25.0",
64:     "eslint-plugin-react-hooks": "^5.2.0",
65:     "eslint-plugin-react-refresh": "^0.4.19",
66:     "express": "^4.21.2",
67:     "fake-indexeddb": "^6.0.1",
68:     "globals": "^16.0.0",
69:     "identity-obj-proxy": "^3.0.0",
70:     "jest": "^29.7.0",
71:     "jest-axe": "^10.0.0",
72:     "jest-environment-jsdom": "^29.7.0",
73:     "postcss": "^8.5.5",
74:     "tailwindcss": "^3.4.17",
75:     "ts-jest": "^29.4.0",
76:     "typescript": "~5.8.3",
77:     "typescript-eslint": "^8.30.1",
78:     "vite": "^6.3.5"
79:   }
80: }

================
File: src/__tests__/services/careSchedulingService.test.ts
================
  1: import { CareSchedulingService } from "@/services/careSchedulingService";
  2: import { plantService, varietyService, VarietyRecord } from "@/types/database";
  3: 
  4: import {
  5:   initializeDatabase,
  6:   resetDatabaseInitializationFlag,
  7: } from "../../db/seedData";
  8: import { subDays } from "date-fns";
  9: import { restoreDate } from "../../setupTests";
 10: import { useFirebasePlants } from "@/hooks/useFirebasePlants";
 11: 
 12: jest.mock("@/hooks/useFirebasePlants");
 13: 
 14: describe("CareSchedulingService", () => {
 15:   let testVariety: VarietyRecord;
 16: 
 17:   beforeEach(async () => {
 18: 
 19:     resetDatabaseInitializationFlag();
 20: 
 21:     (useFirebasePlants as jest.Mock).mockClear();
 22: 
 23:     const { db } = await import("@/types/database");
 24:     await db.plants.clear();
 25:     await db.varieties.clear();
 26:     await initializeDatabase();
 27: 
 28: 
 29:     const variety = await varietyService.getVarietyByName("Astro Arugula");
 30:     if (!variety) {
 31:       throw new Error(
 32:         "Test setup failed: Could not find 'Astro Arugula' seed variety."
 33:       );
 34:     }
 35:     testVariety = variety;
 36:   });
 37: 
 38:   afterEach(() => {
 39:     restoreDate();
 40:   });
 41: 
 42:   describe("Reminder Filtering", () => {
 43:     it("filters tasks based on reminder preferences", async () => {
 44:       const plantWithSelectiveReminders = await plantService.addPlant({
 45:         varietyId: testVariety.id,
 46:         varietyName: testVariety.name,
 47:         plantedDate: subDays(new Date(), 10),
 48:         location: "Indoor",
 49:         container: "4 inch pot",
 50:         isActive: true,
 51:         reminderPreferences: {
 52:           watering: false,
 53:           fertilizing: true,
 54:           observation: true,
 55:           lighting: false,
 56:           pruning: true,
 57:         },
 58:       });
 59: 
 60:       const tasks = await CareSchedulingService.getUpcomingTasks();
 61:       const plantTasks = tasks.filter(
 62:         (task) => task.plantId === plantWithSelectiveReminders
 63:       );
 64:       const wateringTasks = plantTasks.filter((task) =>
 65:         task.task.toLowerCase().includes("water")
 66:       );
 67:       const observationTasks = plantTasks.filter((task) =>
 68:         task.task.toLowerCase().includes("health")
 69:       );
 70: 
 71:       expect(wateringTasks).toHaveLength(0);
 72:       expect(observationTasks.length).toBeGreaterThan(0);
 73:     });
 74: 
 75:     it("shows all tasks when no reminder preferences are set", async () => {
 76:       const plantWithoutPreferences = await plantService.addPlant({
 77:         varietyId: testVariety.id,
 78:         varietyName: testVariety.name,
 79:         plantedDate: subDays(new Date(), 10),
 80:         location: "Indoor",
 81:         container: "4 inch pot",
 82:         isActive: true,
 83:       });
 84: 
 85:       const tasks = await CareSchedulingService.getUpcomingTasks();
 86:       const plantTasks = tasks.filter(
 87:         (task) => task.plantId === plantWithoutPreferences
 88:       );
 89: 
 90:       expect(plantTasks.length).toBeGreaterThan(0);
 91:       const hasWateringTask = plantTasks.some((task) =>
 92:         task.task.toLowerCase().includes("water")
 93:       );
 94:       const hasObservationTask = plantTasks.some((task) =>
 95:         task.task.toLowerCase().includes("health")
 96:       );
 97:       expect(hasWateringTask).toBe(true);
 98:       expect(hasObservationTask).toBe(true);
 99:     });
100: 
101: 
102:     it("handles plants with all reminders disabled", async () => {
103:       const plantWithNoReminders = await plantService.addPlant({
104:         varietyId: testVariety.id,
105:         varietyName: testVariety.name,
106:         plantedDate: subDays(new Date(), 10),
107:         location: "Indoor",
108:         container: "4 inch pot",
109:         isActive: true,
110:         reminderPreferences: {
111:           watering: false,
112:           fertilizing: false,
113:           observation: false,
114:           lighting: false,
115:           pruning: false,
116:         },
117:       });
118: 
119:       const tasks = await CareSchedulingService.getUpcomingTasks();
120:       const plantTasks = tasks.filter(
121:         (task) => task.plantId === plantWithNoReminders
122:       );
123:       expect(plantTasks).toHaveLength(0);
124:     });
125:   });
126: 
127: 
128: 
129: });

================
File: src/components/plant/PlantRegistrationForm.tsx
================
  1: import { useState, useEffect } from "react";
  2: import { useForm } from "react-hook-form";
  3: import { zodResolver } from "@hookform/resolvers/zod";
  4: import { z } from "zod";
  5: import { Button } from "../ui/Button";
  6: import { Card, CardContent } from "../ui/Card";
  7: import { Input } from "../ui/Input";
  8: import { varietyService, VarietyRecord } from "@/types/database";
  9: import { CustomVarietyForm } from "./CustomVarietyForm";
 10: import toast from "react-hot-toast";
 11: import SoilMixtureSelector from "./SoilMixtureSelector";
 12: import { Switch } from "@/components/ui/Switch";
 13: import ReminderPreferencesSection from "@/components/plant/ReminderPreferencesSection";
 14: import { useFirebasePlants } from "@/hooks/useFirebasePlants";
 15: import { LoadingSpinner } from "../ui/LoadingSpinner";
 16: 
 17: type ContainerOption = {
 18:   label: string;
 19:   icon: string;
 20:   defaultSetup: string;
 21:   sizes: ReadonlyArray<{
 22:     value: string;
 23:     label: string;
 24:   }>;
 25: };
 26: 
 27: const plantSchema = z.object({
 28:   varietyId: z.string().min(1, "Please select a variety"),
 29:   plantedDate: z.string().refine((date) => {
 30:     const selectedDate = new Date(date);
 31:     const today = new Date();
 32:     const oneYearAgo = new Date();
 33:     oneYearAgo.setFullYear(today.getFullYear() - 1);
 34: 
 35:     return selectedDate <= today && selectedDate >= oneYearAgo;
 36:   }, "Planting date must be within the past year and not in the future"),
 37:   location: z.boolean(),
 38:   containerType: z.string().min(1, "Please select a container type"),
 39:   containerSize: z.string().min(1, "Please specify container size"),
 40:   quantity: z
 41:     .number()
 42:     .min(1, "Quantity must be at least 1")
 43:     .max(999, "Quantity cannot exceed 999"),
 44:   setupType: z.enum(["multiple-containers", "same-container"]),
 45:   customBagShape: z.string().optional(),
 46:   customDiameter: z.string().optional(),
 47:   customBagHeight: z.string().optional(),
 48:   customBagWidth: z.string().optional(),
 49:   customBagLength: z.string().optional(),
 50:   customWidth: z.string().optional(),
 51:   customLength: z.string().optional(),
 52:   customDepth: z.string().optional(),
 53:   soilMix: z.string().min(1, "Please select a soil mixture"),
 54:   notes: z.string().optional(),
 55: });
 56: 
 57: type PlantFormData = z.infer<typeof plantSchema>;
 58: 
 59: interface PlantRegistrationFormProps {
 60:   onSuccess?: () => void;
 61:   onCancel?: () => void;
 62: }
 63: 
 64: interface FormErrors {
 65:   [key: string]: { message?: string } | undefined;
 66: }
 67: 
 68: const containerOptions = {
 69:   "grow-bag": {
 70:     label: "Grow Bag",
 71:     icon: "",
 72:     defaultSetup: "multiple-containers",
 73:     sizes: [
 74:       { value: "1-gallon", label: "1 Gallon" },
 75:       { value: "2-gallon", label: "2 Gallon" },
 76:       { value: "3-gallon", label: "3 Gallon" },
 77:       { value: "5-gallon", label: "5 Gallon" },
 78:       { value: "7-gallon", label: "7 Gallon" },
 79:       { value: "10-gallon", label: "10 Gallon" },
 80:       { value: "15-gallon", label: "15 Gallon" },
 81:       { value: "30-gallon", label: "30 Gallon" },
 82:       { value: "custom", label: "Custom Size" },
 83:     ],
 84:   },
 85:   pot: {
 86:     label: "Pot",
 87:     icon: "",
 88:     defaultSetup: "multiple-containers",
 89:     sizes: [
 90:       { value: "4-inch", label: "4 inch" },
 91:       { value: "5-inch", label: "5 inch" },
 92:       { value: "6-inch", label: "6 inch" },
 93:       { value: "8-inch", label: "8 inch" },
 94:       { value: "10-inch", label: "10 inch" },
 95:       { value: "12-inch", label: "12 inch" },
 96:       { value: "custom", label: "Custom Size" },
 97:     ],
 98:   },
 99:   "cell-tray": {
100:     label: "Seed Starting Cell Tray",
101:     icon: "",
102:     defaultSetup: "same-container",
103:     sizes: [
104:       { value: "72-cell", label: "72 Cell Tray" },
105:       { value: "50-cell", label: "50 Cell Tray" },
106:       { value: "32-cell", label: "32 Cell Tray" },
107:       { value: "custom", label: "Custom Cell Count" },
108:     ],
109:   },
110:   "raised-bed": {
111:     label: "Raised Bed",
112:     icon: "",
113:     defaultSetup: "same-container",
114:     sizes: [{ value: "custom-dimensions", label: "Custom Dimensions" }],
115:   },
116: } as const;
117: 
118: export function PlantRegistrationForm({
119:   onSuccess,
120:   onCancel,
121: }: PlantRegistrationFormProps) {
122:   const { createPlant } = useFirebasePlants();
123: 
124:   const [varieties, setVarieties] = useState<VarietyRecord[]>([]);
125:   const [isLoading, setIsLoading] = useState(false);
126:   const [isLoadingVarieties, setIsLoadingVarieties] = useState(true);
127:   const [submitError, setSubmitError] = useState<string | null>(null);
128:   const [showCustomVarietyForm, setShowCustomVarietyForm] = useState(false);
129:   const [reminderPreferences, setReminderPreferences] = useState({
130:     watering: true,
131:     fertilizing: true,
132:     observation: true,
133:     lighting: false,
134:     pruning: false,
135:   });
136: 
137:   const {
138:     register,
139:     handleSubmit,
140:     watch,
141:     setValue,
142:     reset,
143:     formState: { errors, isValid, isSubmitting },
144:   } = useForm<PlantFormData>({
145:     resolver: zodResolver(plantSchema),
146:     mode: "onChange",
147:     defaultValues: {
148:       location: false,
149:       quantity: 1,
150:       setupType: "multiple-containers",
151:       plantedDate: new Date().toISOString().split("T")[0],
152:       notes: "",
153:     },
154:   });
155: 
156:   const selectedVarietyId = watch("varietyId");
157:   const containerType = watch("containerType");
158: 
159:   const setupType = watch("setupType");
160:   const quantity = watch("quantity");
161: 
162:   useEffect(() => {
163:     loadVarieties();
164:   }, []);
165: 
166:   useEffect(() => {
167:     if (containerType) {
168:       const option =
169:         containerOptions[containerType as keyof typeof containerOptions];
170:       if (option) {
171:         setValue("setupType", option.defaultSetup, { shouldValidate: true });
172: 
173:         setValue("containerSize", option.sizes[0].value, {
174:           shouldValidate: true,
175:         });
176:       }
177:     }
178:   }, [containerType, setValue]);
179: 
180:   const loadVarieties = async () => {
181:     try {
182:       setIsLoadingVarieties(true);
183:       const varietyList = await varietyService.getAllVarieties();
184:       console.log(varietyList);
185:       setVarieties(varietyList);
186:     } catch (error) {
187:       console.error("Failed to load varieties:", error);
188:       toast.error("Failed to load plant varieties");
189:     } finally {
190:       setIsLoadingVarieties(false);
191:     }
192:   };
193: 
194:   const selectedVariety = varieties.find((v) => v.id === selectedVarietyId);
195:   const plantCategory = selectedVariety?.category;
196: 
197:   const getVarietyDisplayName = (variety: VarietyRecord) => {
198:     return variety.isCustom ? `${variety.name} (Custom)` : variety.name;
199:   };
200: 
201:   const onSubmit = async (data: PlantFormData) => {
202:     try {
203:       setIsLoading(true);
204:       setSubmitError(null);
205: 
206:       const variety = varieties.find((v) => v.id === data.varietyId);
207:       if (!variety) {
208:         throw new Error("Selected variety not found");
209:       }
210: 
211:       const varietyName = variety.name;
212:       const locationString = data.location ? "Outdoor" : "Indoor";
213: 
214: 
215:       let containerDescription = "";
216:       const containerOption =
217:         containerOptions[data.containerType as keyof typeof containerOptions];
218: 
219:       if (
220:         data.containerSize === "custom" ||
221:         data.containerSize === "custom-dimensions"
222:       ) {
223:         containerDescription = buildCustomContainerDescription(
224:           data,
225:           containerOption
226:         );
227:       } else {
228:         const sizeOption = containerOption?.sizes.find(
229:           (s) => s.value === data.containerSize
230:         );
231:         const singleDescription = `${sizeOption?.label || data.containerSize} ${
232:           containerOption?.label || data.containerType
233:         }`;
234: 
235:         const isMultipleContainers = data.setupType === "multiple-containers";
236:         if (data.quantity > 1 && !isMultipleContainers) {
237:           containerDescription = `${singleDescription} (${data.quantity} plants)`;
238:         } else {
239:           containerDescription = singleDescription;
240:         }
241:       }
242: 
243:       const baseName = varietyName;
244: 
245:       const plantPromises = [];
246:       for (let i = 0; i < data.quantity; i++) {
247:         let plantName = baseName;
248: 
249:         if (data.quantity > 1) {
250:           const isMultipleContainers = data.setupType === "multiple-containers";
251:           if (isMultipleContainers) {
252:             plantName = `${baseName} #${i + 1}`;
253:           } else {
254:             plantName = `${baseName} (Plant ${i + 1})`;
255:           }
256:         }
257: 
258: 
259:         plantPromises.push(
260:           createPlant({
261:             varietyId: data.varietyId,
262:             varietyName: varietyName,
263:             name: plantName,
264:             plantedDate: new Date(data.plantedDate),
265:             location: locationString,
266:             container: containerDescription,
267:             soilMix: data.soilMix,
268:             isActive: true,
269:             notes: data.notes ? [data.notes] : [""],
270:             reminderPreferences,
271:             quantity: data.quantity,
272:             setupType: data.setupType,
273:           })
274:         );
275:       }
276: 
277:       // Wait for all plants to be created
278:       await Promise.all(plantPromises);
279: 
280:       toast.success(`Successfully registered ${data.quantity} plant(s)! `);
281:       reset();
282:       onSuccess?.();
283:     } catch (error) {
284:       console.error("Failed to register plant:", error);
285:       const errorMessage =
286:         error instanceof Error ? error.message : "Failed to register plant";
287:       setSubmitError(errorMessage);
288:       toast.error(errorMessage);
289:     } finally {
290:       setIsLoading(false);
291:     }
292:   };
293: 
294:   const buildCustomContainerDescription = (
295:     data: PlantFormData,
296:     containerOption: ContainerOption | undefined
297:   ) => {
298:     if (data.containerType === "grow-bag" && data.customBagShape) {
299:       if (data.customBagShape === "round") {
300:         return `${data.customDiameter}"D x ${data.customBagHeight}"H ${
301:           containerOption?.label || "Grow Bag"
302:         }`;
303:       } else {
304:         return `${data.customBagWidth}"W x ${data.customBagLength}"L x ${
305:           data.customBagHeight
306:         }"H ${containerOption?.label || "Grow Bag"}`;
307:       }
308:     } else if (data.containerType === "raised-bed") {
309:       return `${data.customWidth}"W x ${data.customLength}"L x ${data.customDepth}"D Raised Bed`;
310:     } else if (data.containerType === "pot") {
311:       return `${data.customDiameter}" ${containerOption?.label || "Pot"}`;
312:     }
313:     return "Custom Container";
314:   };
315: 
316:   const renderFormField = (
317:     id: keyof PlantFormData,
318:     label: string,
319:     type: "text" | "date" | "select" | "textarea" | "number" = "text",
320:     placeholder?: string,
321:     required: boolean = false
322:   ) => {
323:     const error = (errors as FormErrors)[id];
324: 
325:     return (
326:       <div>
327:         <label
328:           htmlFor={id}
329:           className="block text-sm font-medium text-foreground mb-2"
330:         >
331:           {label} {label && required && "*"}
332:         </label>
333: 
334:         {type === "select" && id === "varietyId" ? (
335:           <div className="space-y-2">
336:             <select
337:               {...register(id)}
338:               id={id}
339:               className={`w-full p-3 border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-accent focus:border-accent ${
340:                 error ? "border-red-500" : "border-border"
341:               }`}
342:               disabled={isLoadingVarieties}
343:             >
344:               <option value="">
345:                 {isLoadingVarieties
346:                   ? "Loading varieties..."
347:                   : "Select a variety"}
348:               </option>
349:               {varieties.map((variety) => (
350:                 <option key={variety.id} value={variety.id}>
351:                   {getVarietyDisplayName(variety)}
352:                 </option>
353:               ))}
354:             </select>
355:             <Button
356:               type="button"
357:               variant="outline"
358:               size="sm"
359:               onClick={() => setShowCustomVarietyForm(true)}
360:               className="text-sm"
361:             >
362:               + Add Custom Variety
363:             </Button>
364:           </div>
365:         ) : type === "select" && id === "containerType" ? (
366:           <div className="grid grid-cols-2 gap-3">
367:             {Object.entries(containerOptions).map(([key, option]) => (
368:               <button
369:                 key={key}
370:                 type="button"
371:                 onClick={() =>
372:                   setValue("containerType", key, { shouldValidate: true })
373:                 }
374:                 className={`p-4 border-2 rounded-lg text-left transition-all ${
375:                   watch("containerType") === key
376:                     ? "border-accent bg-accent/10"
377:                     : "border-border hover:border-accent/50"
378:                 }`}
379:                 data-testid={`container-type-${key}`}
380:               >
381:                 <div className="flex items-center space-x-2">
382:                   <span className="text-xl">{option.icon}</span>
383:                   <span className="font-medium">{option.label}</span>
384:                 </div>
385:               </button>
386:             ))}
387:           </div>
388:         ) : type === "select" && id === "containerSize" ? (
389:           renderContainerSizeSelect(error)
390:         ) : type === "textarea" ? (
391:           <textarea
392:             {...register(id)}
393:             id={id}
394:             placeholder={placeholder}
395:             rows={3}
396:             className={`w-full p-3 border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-accent focus:border-accent resize-none ${
397:               error ? "border-red-500" : "border-border"
398:             }`}
399:           />
400:         ) : type === "number" ? (
401:           <Input
402:             {...register(id, { valueAsNumber: true })}
403:             id={id}
404:             type="number"
405:             placeholder={placeholder}
406:             min={1}
407:             max={999}
408:             className={error ? "border-red-500" : ""}
409:           />
410:         ) : (
411:           <Input
412:             {...register(id)}
413:             id={id}
414:             type={type}
415:             placeholder={placeholder}
416:             className={error ? "border-red-500" : ""}
417:           />
418:         )}
419: 
420:         {error && (
421:           <p className="mt-1 text-sm text-red-600" role="alert">
422:             {error.message}
423:           </p>
424:         )}
425:       </div>
426:     );
427:   };
428: 
429:   const renderContainerSizeSelect = (
430:     error: FormErrors[keyof PlantFormData]
431:   ) => {
432:     const selectedContainerType =
433:       containerType as keyof typeof containerOptions;
434:     if (!selectedContainerType || !containerOptions[selectedContainerType]) {
435:       return (
436:         <p className="text-sm text-muted-foreground">
437:           Please select a container type first
438:         </p>
439:       );
440:     }
441: 
442:     const options = containerOptions[selectedContainerType];
443: 
444:     return (
445:       <div className="space-y-3">
446:         <select
447:           {...register("containerSize")}
448:           className={`w-full p-3 border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-accent focus:border-accent ${
449:             error ? "border-red-500" : "border-border"
450:           }`}
451:         >
452:           <option value="">Select size</option>
453:           {options.sizes.map((size) => (
454:             <option key={size.value} value={size.value}>
455:               {size.label}
456:             </option>
457:           ))}
458:         </select>
459: 
460:         {renderCustomSizeFields()}
461:       </div>
462:     );
463:   };
464: 
465:   const renderCustomSizeFields = () => {
466:     const size = watch("containerSize");
467:     if (size !== "custom" && size !== "custom-dimensions") return null;
468: 
469:     if (containerType === "grow-bag") {
470:       return (
471:         <div className="space-y-3 p-3 bg-muted/50 rounded-lg">
472:           <div>
473:             <label className="block text-sm font-medium mb-1">Bag Shape</label>
474:             <select
475:               {...register("customBagShape")}
476:               className="w-full p-2 border rounded bg-background"
477:             >
478:               <option value="">Select shape</option>
479:               <option value="round">Round</option>
480:               <option value="rectangular">Rectangular</option>
481:             </select>
482:           </div>
483: 
484:           {watch("customBagShape") === "round" ? (
485:             <>
486:               <div>
487:                 <label className="block text-sm font-medium mb-1">
488:                   Diameter (inches)
489:                 </label>
490:                 <Input
491:                   {...register("customDiameter")}
492:                   type="number"
493:                   placeholder="e.g., 12"
494:                 />
495:               </div>
496:               <div>
497:                 <label className="block text-sm font-medium mb-1">
498:                   Height (inches)
499:                 </label>
500:                 <Input
501:                   {...register("customBagHeight")}
502:                   type="number"
503:                   placeholder="e.g., 8"
504:                 />
505:               </div>
506:             </>
507:           ) : watch("customBagShape") === "rectangular" ? (
508:             <>
509:               <div>
510:                 <label className="block text-sm font-medium mb-1">
511:                   Width (inches)
512:                 </label>
513:                 <Input
514:                   {...register("customBagWidth")}
515:                   type="number"
516:                   placeholder="e.g., 24"
517:                 />
518:               </div>
519:               <div>
520:                 <label className="block text-sm font-medium mb-1">
521:                   Length (inches)
522:                 </label>
523:                 <Input
524:                   {...register("customBagLength")}
525:                   type="number"
526:                   placeholder="e.g., 36"
527:                 />
528:               </div>
529:               <div>
530:                 <label className="block text-sm font-medium mb-1">
531:                   Height (inches)
532:                 </label>
533:                 <Input
534:                   {...register("customBagHeight")}
535:                   type="number"
536:                   placeholder="e.g., 12"
537:                 />
538:               </div>
539:             </>
540:           ) : null}
541:         </div>
542:       );
543:     }
544: 
545:     if (containerType === "raised-bed") {
546:       return (
547:         <div className="space-y-3 p-3 bg-muted/50 rounded-lg">
548:           <div>
549:             <label className="block text-sm font-medium mb-1">
550:               Width (inches)
551:             </label>
552:             <Input
553:               {...register("customWidth")}
554:               type="number"
555:               placeholder="e.g., 48"
556:             />
557:           </div>
558:           <div>
559:             <label className="block text-sm font-medium mb-1">
560:               Length (inches)
561:             </label>
562:             <Input
563:               {...register("customLength")}
564:               type="number"
565:               placeholder="e.g., 96"
566:             />
567:           </div>
568:           <div>
569:             <label className="block text-sm font-medium mb-1">
570:               Depth (inches)
571:             </label>
572:             <Input
573:               {...register("customDepth")}
574:               type="number"
575:               placeholder="e.g., 12"
576:             />
577:           </div>
578:         </div>
579:       );
580:     }
581: 
582:     if (containerType === "pot") {
583:       return (
584:         <div className="p-3 bg-muted/50 rounded-lg">
585:           <label className="block text-sm font-medium mb-1">
586:             Diameter (inches)
587:           </label>
588:           <Input
589:             {...register("customDiameter")}
590:             type="number"
591:             placeholder="e.g., 14"
592:           />
593:         </div>
594:       );
595:     }
596: 
597:     return null;
598:   };
599: 
600:   const getQuantityHelperText = () => {
601:     const isMultipleContainers = setupType === "multiple-containers";
602:     const isSameContainer = setupType === "same-container";
603: 
604:     if (isMultipleContainers) {
605:       return "Number of separate containers (1 plant each)";
606:     } else if (isSameContainer) {
607:       return "Number of plants in the same container";
608:     }
609:     return "Number of containers/plants";
610:   };
611: 
612:   if (showCustomVarietyForm) {
613:     return (
614:       <CustomVarietyForm
615:         onSuccess={(varietyId) => {
616:           setValue("varietyId", varietyId, { shouldValidate: true });
617:           setShowCustomVarietyForm(false);
618:           loadVarieties();
619:         }}
620:         onCancel={() => setShowCustomVarietyForm(false)}
621:       />
622:     );
623:   }
624: 
625:   if (isLoadingVarieties) {
626:     return (
627:       <Card className="w-full max-w-2xl mx-auto">
628:         <CardContent className="flex items-center justify-center p-8">
629:           <div className="flex items-center space-x-3">
630:             <LoadingSpinner size="sm" />
631:             <span>Loading plant varieties...</span>
632:           </div>
633:         </CardContent>
634:       </Card>
635:     );
636:   }
637: 
638:   return (
639:     <div className="space-y-6">
640:       {}
641:       <div className="text-center">
642:         <div className="text-4xl mb-4"></div>
643:         <h2 className="text-2xl font-bold text-foreground mb-2">
644:           Register Your Plant
645:         </h2>
646:         <p className="text-muted-foreground">
647:           Fill in the details below to start tracking your plant's growth
648:           journey
649:         </p>
650:       </div>
651: 
652:       {}
653:       <Card className="shadow-lg border-0 bg-card/50 backdrop-blur">
654:         <CardContent className="p-6">
655:           <form
656:             onSubmit={handleSubmit(onSubmit)}
657:             className="space-y-6"
658:             data-testid="plant-registration-form"
659:           >
660:             {submitError && (
661:               <div
662:                 className="p-4 bg-red-50 border border-red-200 rounded-lg"
663:                 role="alert"
664:               >
665:                 <div className="flex items-center gap-2">
666:                   <span className="text-red-500"></span>
667:                   <p className="text-sm text-red-600 font-medium">
668:                     {submitError}
669:                   </p>
670:                 </div>
671:               </div>
672:             )}
673: 
674:             {}
675:             <div className="space-y-4 p-4 bg-gradient-to-br from-primary/5 to-primary/10 rounded-lg border border-primary/20">
676:               <h3 className="font-semibold text-foreground flex items-center gap-2">
677:                 <span className="text-lg"></span>
678:                 Plant Information
679:               </h3>
680:               {renderFormField(
681:                 "varietyId",
682:                 "Plant Variety",
683:                 "select",
684:                 "",
685:                 true
686:               )}
687:               {renderFormField(
688:                 "plantedDate",
689:                 "Planting Date",
690:                 "date",
691:                 "",
692:                 true
693:               )}
694:             </div>
695: 
696:             {/* Location Section */}
697:             <div className="space-y-4 p-4 bg-gradient-to-br from-accent/5 to-accent/10 rounded-lg border border-accent/20">
698:               <h3 className="font-semibold text-foreground flex items-center gap-2">
699:                 <span className="text-lg"></span>
700:                 Growing Location
701:               </h3>
702:               <div>
703:                 <label className="block text-sm font-medium text-foreground mb-3">
704:                   Location
705:                 </label>
706:                 <div className="flex items-center justify-center space-x-4 p-4 bg-background/50 rounded-lg">
707:                   <label className="flex items-center space-x-3 cursor-pointer">
708:                     <span className="text-sm font-medium text-foreground">
709:                       Indoor
710:                     </span>
711:                     <Switch
712:                       checked={watch("location")}
713:                       onCheckedChange={(checked) =>
714:                         setValue("location", checked, { shouldValidate: true })
715:                       }
716:                       aria-label="Location toggle between indoor and outdoor"
717:                     />
718:                     <span className="text-sm font-medium text-foreground">
719:                       Outdoor
720:                     </span>
721:                   </label>
722:                 </div>
723:               </div>
724:             </div>
725: 
726:             {}
727:             <div className="space-y-4 p-4 bg-gradient-to-br from-emerald-500/5 to-emerald-500/10 rounded-lg border border-emerald-500/20">
728:               <h3 className="font-semibold text-foreground flex items-center gap-2">
729:                 <span className="text-lg"></span>
730:                 Container Setup
731:               </h3>
732: 
733:               <div>
734:                 <label className="block text-sm font-medium text-foreground mb-3">
735:                   Container Type *
736:                 </label>
737:                 {renderFormField("containerType", "", "select")}
738:               </div>
739: 
740:               {containerType && (
741:                 <div>
742:                   <label className="block text-sm font-medium text-foreground mb-3">
743:                     Container Size *
744:                   </label>
745:                   {renderFormField("containerSize", "", "select")}
746:                 </div>
747:               )}
748: 
749:               <div className="space-y-3">
750:                 <div>
751:                   <label className="block text-sm font-medium text-foreground mb-3">
752:                     Setup Type
753:                   </label>
754:                   <div className="grid grid-cols-1 gap-3">
755:                     <label className="flex items-center space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-background/50 transition-colors">
756:                       <input
757:                         type="radio"
758:                         value="multiple-containers"
759:                         {...register("setupType")}
760:                         className="w-4 h-4 text-accent border-gray-300 focus:ring-accent"
761:                       />
762:                       <div>
763:                         <div className="font-medium">Multiple Containers</div>
764:                         <div className="text-sm text-muted-foreground">
765:                           Each plant gets its own container
766:                         </div>
767:                       </div>
768:                     </label>
769:                     <label className="flex items-center space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-background/50 transition-colors">
770:                       <input
771:                         type="radio"
772:                         value="same-container"
773:                         {...register("setupType")}
774:                         className="w-4 h-4 text-accent border-gray-300 focus:ring-accent"
775:                       />
776:                       <div>
777:                         <div className="font-medium">Same Container</div>
778:                         <div className="text-sm text-muted-foreground">
779:                           Multiple plants share one container
780:                         </div>
781:                       </div>
782:                     </label>
783:                   </div>
784:                 </div>
785: 
786:                 <div>
787:                   <label
788:                     htmlFor="quantity"
789:                     className="block text-sm font-medium text-foreground mb-3"
790:                   >
791:                     Quantity *
792:                   </label>
793:                   <div className="flex items-center space-x-3">
794:                     <Button
795:                       type="button"
796:                       variant="outline"
797:                       size="sm"
798:                       onClick={() =>
799:                         setValue("quantity", Math.max(1, quantity - 1), {
800:                           shouldValidate: true,
801:                         })
802:                       }
803:                       disabled={quantity <= 1}
804:                       className="w-10 h-10 p-0"
805:                       aria-label="Decrease quantity"
806:                     >
807:                       -
808:                     </Button>
809:                     <div className="flex-1">
810:                       <Input
811:                         {...register("quantity", { valueAsNumber: true })}
812:                         id="quantity"
813:                         type="number"
814:                         placeholder="1"
815:                         min={1}
816:                         max={999}
817:                         className={errors.quantity ? "border-red-500" : ""}
818:                         aria-label="Plant quantity"
819:                         data-testid="quantity-input"
820:                       />
821:                     </div>
822:                     <Button
823:                       type="button"
824:                       variant="outline"
825:                       size="sm"
826:                       onClick={() =>
827:                         setValue("quantity", Math.min(999, quantity + 1), {
828:                           shouldValidate: true,
829:                         })
830:                       }
831:                       disabled={quantity >= 999}
832:                       className="w-10 h-10 p-0"
833:                       aria-label="Increase quantity"
834:                     >
835:                       +
836:                     </Button>
837:                   </div>
838:                   {errors.quantity && (
839:                     <p className="mt-1 text-sm text-red-600" role="alert">
840:                       {errors.quantity.message}
841:                     </p>
842:                   )}
843:                   <p className="text-xs text-muted-foreground mt-1 bg-background/50 p-2 rounded">
844:                     {getQuantityHelperText()}
845:                   </p>
846:                 </div>
847:               </div>
848:             </div>
849: 
850:             {}
851:             <div className="space-y-4 p-4 bg-gradient-to-br from-amber-500/5 to-amber-500/10 rounded-lg border border-amber-500/20">
852:               <h3 className="font-semibold text-foreground flex items-center gap-2">
853:                 <span className="text-lg"></span>
854:                 Soil & Care Preferences
855:               </h3>
856: 
857:               <div>
858:                 <SoilMixtureSelector
859:                   selectedMixture={watch("soilMix")}
860:                   onMixtureChange={(mixture) =>
861:                     setValue("soilMix", mixture, { shouldValidate: true })
862:                   }
863:                   plantCategory={plantCategory}
864:                 />
865:                 {errors.soilMix && (
866:                   <p className="mt-1 text-sm text-red-600" role="alert">
867:                     {errors.soilMix.message}
868:                   </p>
869:                 )}
870:               </div>
871: 
872:               <ReminderPreferencesSection
873:                 preferences={reminderPreferences}
874:                 onChange={setReminderPreferences}
875:               />
876:             </div>
877: 
878:             {}
879:             <div className="space-y-4 p-4 bg-gradient-to-br from-slate-500/5 to-slate-500/10 rounded-lg border border-slate-500/20">
880:               <h3 className="font-semibold text-foreground flex items-center gap-2">
881:                 <span className="text-lg"></span>
882:                 Additional Notes
883:               </h3>
884:               {renderFormField(
885:                 "notes",
886:                 "Notes",
887:                 "textarea",
888:                 "Add any additional notes about this plant, growing conditions, or special care instructions...",
889:                 false
890:               )}
891:             </div>
892: 
893:             {}
894:             <div className="flex gap-3 pt-6 border-t border-border">
895:               {onCancel && (
896:                 <Button
897:                   type="button"
898:                   variant="outline"
899:                   onClick={onCancel}
900:                   className="flex-1"
901:                   disabled={isLoading}
902:                 >
903:                   Cancel
904:                 </Button>
905:               )}
906:               <Button
907:                 type="submit"
908:                 disabled={!isValid || isSubmitting || isLoading}
909:                 className="flex-1 bg-primary hover:bg-primary/90"
910:                 size="lg"
911:                 aria-label="Register Plant"
912:               >
913:                 {isLoading ? (
914:                   <div className="flex items-center space-x-2">
915:                     <LoadingSpinner size="sm" />
916:                     <span>Registering...</span>
917:                   </div>
918:                 ) : (
919:                   <div className="flex items-center space-x-2">
920:                     <span></span>
921:                     <span>Register Plant{quantity > 1 ? "s" : ""}</span>
922:                   </div>
923:                 )}
924:               </Button>
925:             </div>
926:           </form>
927:         </CardContent>
928:       </Card>
929:     </div>
930:   );
931: }

================
File: src/utils/growthStage.ts
================
  1: import { GrowthStage } from "../types";
  2: import { addDays, differenceInDays } from "date-fns";
  3: import { VarietyRecord } from "@/types/database";
  4: 
  5: export interface GrowthStageInfo {
  6:   stage: GrowthStage;
  7:   startDay: number;
  8:   endDay: number;
  9:   description: string;
 10: }
 11: 
 12: export interface VarietyTimeline {
 13:   germination: number;
 14:   seedling: number;
 15:   vegetative: number;
 16:   maturation: number;
 17: }
 18: 
 19: 
 20: 
 21: 
 22: 
 23: 
 24: 
 25: 
 26: 
 27: export function calculateCurrentStageWithVariety(
 28:   anchorDate: Date,
 29:   variety: VarietyRecord | undefined | null,
 30:   currentDate: Date = new Date(),
 31:   startingStage: GrowthStage = "germination"
 32: ): GrowthStage {
 33:   if (!variety || !variety.growthTimeline) {
 34:     console.warn(
 35:       " calculateCurrentStageWithVariety: Invalid variety data, defaulting to vegetative."
 36:     );
 37:     return "vegetative";
 38:   }
 39: 
 40:   const daysSinceAnchor = differenceInDays(currentDate, anchorDate);
 41:   if (daysSinceAnchor < 0) return startingStage;
 42: 
 43:   const timeline = variety.growthTimeline;
 44:   const stageOrder: GrowthStage[] = [
 45:     "germination",
 46:     "seedling",
 47:     "vegetative",
 48:     "flowering",
 49:     "maturation",
 50:     "ongoing-production",
 51:     "harvest",
 52:   ];
 53: 
 54:   const stageDurations: Record<string, number> = {
 55:     germination: timeline.germination,
 56:     seedling: timeline.seedling,
 57:     vegetative: timeline.vegetative,
 58: 
 59:     flowering:
 60:       timeline.maturation -
 61:       (timeline.germination + timeline.seedling + timeline.vegetative),
 62:     maturation: 0,
 63:   };
 64: 
 65:   let cumulativeDays = 0;
 66:   const currentStageIndex = stageOrder.indexOf(startingStage);
 67: 
 68:   for (let i = currentStageIndex; i < stageOrder.length; i++) {
 69:     const stage = stageOrder[i];
 70:     const duration = stageDurations[stage];
 71: 
 72:     if (daysSinceAnchor < cumulativeDays + duration) {
 73:       return stage;
 74:     }
 75:     cumulativeDays += duration;
 76:   }
 77: 
 78:   if (variety.isEverbearing) {
 79:     const effectiveLifespan = variety.productiveLifespan ?? 730;
 80:     if (daysSinceAnchor < effectiveLifespan) {
 81:       return "ongoing-production";
 82:     }
 83:   }
 84: 
 85:   return "harvest";
 86: }
 87: 
 88: 
 89: 
 90: 
 91: 
 92: 
 93: 
 94: 
 95: 
 96: export function calculateCurrentStage(
 97:   plantedDate: Date,
 98:   timeline: VarietyTimeline,
 99:   currentDate: Date = new Date()
100: ): GrowthStage {
101:   const daysSincePlanting = differenceInDays(currentDate, plantedDate);
102: 
103:   if (daysSincePlanting < 0) return "germination";
104:   if (daysSincePlanting < timeline.germination) return "germination";
105:   if (daysSincePlanting < timeline.germination + timeline.seedling)
106:     return "seedling";
107:   if (
108:     daysSincePlanting <
109:     timeline.germination + timeline.seedling + timeline.vegetative
110:   )
111:     return "vegetative";
112:   if (daysSincePlanting < timeline.maturation) return "flowering";
113: 
114:   return "harvest";
115: }
116: 
117: 
118: 
119: 
120: 
121: 
122: 
123: export function getNextStage(currentStage: GrowthStage): GrowthStage | null {
124:   const stages: GrowthStage[] = [
125:     "germination",
126:     "seedling",
127:     "vegetative",
128:     "flowering",
129:     "maturation",
130:     "ongoing-production",
131:     "harvest",
132:   ];
133:   const currentIndex = stages.indexOf(currentStage);
134: 
135:   if (currentIndex === -1 || currentIndex >= stages.length - 1) {
136:     return null;
137:   }
138: 
139:   return stages[currentIndex + 1];
140: }
141: 
142: 
143: 
144: 
145: export function getStageProgress(
146:   plantedDate: Date,
147:   timeline: VarietyTimeline,
148:   currentDate: Date = new Date()
149: ): number {
150:   const daysSincePlanting = differenceInDays(currentDate, plantedDate);
151:   const currentStage = calculateCurrentStage(
152:     plantedDate,
153:     timeline,
154:     currentDate
155:   );
156: 
157:   let stageStart = 0;
158:   let stageEnd = timeline.germination;
159: 
160:   switch (currentStage) {
161:     case "seedling":
162:       stageStart = timeline.germination;
163:       stageEnd = timeline.germination + timeline.seedling;
164:       break;
165:     case "vegetative":
166:       stageStart = timeline.germination + timeline.seedling;
167:       stageEnd = timeline.germination + timeline.seedling + timeline.vegetative;
168:       break;
169:     case "flowering":
170:       stageStart =
171:         timeline.germination + timeline.seedling + timeline.vegetative;
172:       stageEnd = timeline.maturation;
173:       break;
174:     case "maturation":
175:     case "ongoing-production":
176:     case "harvest":
177:       return 100;
178:   }
179: 
180:   const stageProgress =
181:     ((daysSincePlanting - stageStart) / (stageEnd - stageStart)) * 100;
182:   return Math.min(Math.max(stageProgress, 0), 100);
183: }
184: 
185: export function estimateStageTransition(
186:   plantedDate: Date,
187:   timeline: VarietyTimeline,
188:   targetStage: GrowthStage
189: ): Date {
190:   let daysToTarget = 0;
191: 
192:   switch (targetStage) {
193:     case "seedling":
194:       daysToTarget = timeline.germination;
195:       break;
196:     case "vegetative":
197:       daysToTarget = timeline.germination + timeline.seedling;
198:       break;
199:     case "flowering":
200:       daysToTarget =
201:         timeline.germination + timeline.seedling + timeline.vegetative;
202:       break;
203:     case "maturation":
204:     case "ongoing-production":
205:     case "harvest":
206:       daysToTarget = timeline.maturation;
207:       break;
208:   }
209: 
210:   return addDays(plantedDate, daysToTarget);
211: }
212: 
213: export function formatStageProgress(progress: number): string {
214:   return `${Math.round(progress)}%`;
215: }

================
File: src/App.tsx
================
 1: import { Routes, Route } from "react-router-dom";
 2: import { useFirebaseAuth } from "./hooks/useFirebaseAuth";
 3: import { useAppInitialization } from "./hooks/useAppInitialization";
 4: import { useDarkMode } from "./hooks/useDarkMode";
 5: import LogCare from "./pages/care/LogCare";
 6: import { Dashboard } from "./pages/dashboard";
 7: import Plants from "./pages/plants/Plants";
 8: import PlantDetail from "./pages/plants/PlantDetail";
 9: import { AuthForm } from "./components/AuthForm";
10: import AddPlant from "./pages/plants/AddPlant";
11: 
12: const App = () => {
13:   const { user, loading } = useFirebaseAuth();
14:   useDarkMode();
15:   useAppInitialization();
16: 
17: 
18:   console.log(" App.tsx - Auth State:", {
19:     user: user ? { uid: user.uid, email: user.email } : null,
20:     loading,
21:     hasUser: !!user,
22:   });
23: 
24:   if (loading) {
25:     console.log(" App.tsx - Showing loading state");
26:     return (
27:       <div className="min-h-screen flex items-center justify-center">
28:         <div>Loading...</div>
29:       </div>
30:     );
31:   }
32: 
33:   if (!user) {
34:     console.log(" App.tsx - No user, showing AuthForm");
35:     return <AuthForm />;
36:   }
37: 
38:   console.log(" App.tsx - User authenticated, showing main app");
39:   return (
40:     <div className="min-h-screen bg-gray-50">
41:       <Routes>
42:         <Route path="/" element={<Dashboard />} />
43:         <Route path="/plants" element={<Plants />} />
44:         <Route path="/plants/:plantId" element={<PlantDetail />} />
45:         <Route path="/add-plant" element={<AddPlant />} />
46:         <Route path="/log-care" element={<LogCare />} />
47:         <Route path="/log-care/:plantId" element={<LogCare />} />
48:       </Routes>
49:     </div>
50:   );
51: };
52: 
53: export default App;

================
File: jest.config.ts
================
 1: import type { Config } from "jest";
 2: 
 3: const config: Config = {
 4:   preset: "ts-jest",
 5:   testEnvironment: "jsdom",
 6:   setupFilesAfterEnv: ["<rootDir>/src/setupTests.ts"],
 7:   setupFiles: ["<rootDir>/src/jest.polyfills.ts"],
 8:   moduleNameMapper: {
 9:     "^@/(.*)$": "<rootDir>/src/$1",
10:     "^@/components/(.*)$": "<rootDir>/src/components/$1",
11:     "^@/pages/(.*)$": "<rootDir>/src/pages/$1",
12:     "^@/hooks/(.*)$": "<rootDir>/src/hooks/$1",
13:     "^@/services/(.*)$": "<rootDir>/src/services/$1",
14:     "^@/types/(.*)$": "<rootDir>/src/types/$1",
15:     "^@/utils/(.*)$": "<rootDir>/src/utils/$1",
16:     "^@/data/(.*)$": "<rootDir>/src/data/$1",
17:     "^@/db/(.*)$": "<rootDir>/src/db/$1",
18: 
19:     "^@/services/firebase/config$":
20:       "<rootDir>/src/services/firebase/__mocks__/config.ts",
21:   },
22:   collectCoverageFrom: [
23:     "src/**/*.{ts,tsx}",
24:     "!src/**/*.d.ts",
25:     "!src/main.tsx",
26:     "!src/vite-env.d.ts",
27:     "!src/setupTests.ts",
28:   ],
29:   testMatch: [
30:     "<rootDir>/src/**/__tests__/**/*.{js,jsx,ts,tsx}",
31:     "<rootDir>/src/**/*.(test|spec).{js,jsx,ts,tsx}",
32:   ],
33:   testPathIgnorePatterns: [
34:     "/__tests__/utils/testHelpers.tsx",
35:     "/__tests__/utils/plantFactory.ts",
36:     "/__tests__/e2e/",
37:     "/node_modules/",
38:     "/.*\\.spec\\.ts$",
39:     "/__tests__/e2e/plant-registration.spec.ts",
40:   ],
41:   transform: {
42:     "^.+\\.tsx?$": ["ts-jest", { tsconfig: "tsconfig.json" }],
43:   },
44:   moduleFileExtensions: ["ts", "tsx", "js", "jsx", "json"],
45:   transformIgnorePatterns: ["node_modules/(?!(uuid)/)"],
46: };
47: 
48: export default config;

================
File: src/services/careSchedulingService.ts
================
  1: import {
  2:   plantService,
  3:   careService,
  4:   varietyService,
  5:   PlantRecord,
  6: } from "@/types/database";
  7: import { GrowthStage } from "@/types/core";
  8: import {
  9:   calculateCurrentStage,
 10:   calculateCurrentStageWithVariety,
 11: } from "@/utils/growthStage";
 12: import { getPlantDisplayName } from "@/utils/plantDisplay";
 13: import { UpcomingTask } from "@/types/scheduling";
 14: import { addDays, differenceInDays } from "date-fns";
 15: import { DynamicSchedulingService } from "./dynamicSchedulingService";
 16: 
 17: export class CareSchedulingService {
 18:   public static async getUpcomingTasks(): Promise<UpcomingTask[]> {
 19:     try {
 20:       const plants = await plantService.getActivePlants();
 21:       const allTasks: UpcomingTask[] = [];
 22: 
 23:       for (const plant of plants) {
 24:         const plantTasks = await this.getTasksForPlant(plant);
 25: 
 26:         const filteredTasks = plantTasks.filter((task) => {
 27:           if (!plant.reminderPreferences) return true;
 28: 
 29:           const taskTypeMap: Record<
 30:             string,
 31:             keyof typeof plant.reminderPreferences
 32:           > = {
 33:             "Check water level": "watering",
 34:             Water: "watering",
 35:             Fertilize: "fertilizing",
 36:             Observe: "observation",
 37:             "Check lighting": "lighting",
 38:             Prune: "pruning",
 39:             "Health check": "observation",
 40:           };
 41: 
 42:           const preferenceKey = taskTypeMap[task.task];
 43:           return preferenceKey
 44:             ? plant.reminderPreferences[preferenceKey]
 45:             : true;
 46:         });
 47: 
 48:         allTasks.push(...filteredTasks);
 49:       }
 50: 
 51:       return allTasks.sort((a, b) => a.dueDate.getTime() - b.dueDate.getTime());
 52:     } catch (error) {
 53:       console.error("Error getting upcoming tasks:", error);
 54:       return [];
 55:     }
 56:   }
 57: 
 58:   public static async getTasksForPlant(
 59:     plant: PlantRecord
 60:   ): Promise<UpcomingTask[]> {
 61:     try {
 62:       const variety = await varietyService.getVariety(plant.varietyId);
 63:       if (!variety) return [];
 64: 
 65:       const currentStage = calculateCurrentStageWithVariety(
 66:         plant.plantedDate,
 67:         variety
 68:       );
 69: 
 70:       const tasks: UpcomingTask[] = [];
 71: 
 72:       const wateringTask = await this.createWateringTask(plant, currentStage);
 73:       if (wateringTask) tasks.push(wateringTask);
 74: 
 75:       const observationTask = await this.createObservationTask(
 76:         plant,
 77:         currentStage
 78:       );
 79:       if (observationTask) tasks.push(observationTask);
 80: 
 81:       return tasks;
 82:     } catch (error) {
 83:       console.error(`Error processing tasks for plant ${plant.id}:`, error);
 84:       return [];
 85:     }
 86:   }
 87: 
 88:   public static async createWateringTask(
 89:     plant: PlantRecord,
 90:     currentStage: GrowthStage
 91:   ): Promise<UpcomingTask | null> {
 92:     const lastWatering = await careService.getLastActivityByType(
 93:       plant.id,
 94:       "water"
 95:     );
 96: 
 97:     let nextDueDate: Date;
 98: 
 99:     if (lastWatering) {
100:       nextDueDate = await DynamicSchedulingService.getNextDueDateForTask(
101:         plant.id,
102:         "water",
103:         lastWatering.date
104:       );
105:     } else {
106:       const daysSincePlanting = differenceInDays(new Date(), plant.plantedDate);
107:       nextDueDate =
108:         daysSincePlanting > 1 ? new Date() : addDays(plant.plantedDate, 1);
109:     }
110: 
111:     if (nextDueDate <= addDays(new Date(), 2)) {
112:       const daysOverdue = differenceInDays(new Date(), nextDueDate);
113: 
114:       return {
115:         id: `water-${plant.id}`,
116:         plantId: plant.id,
117:         plantName: getPlantDisplayName(plant),
118:         task: "Check water level",
119:         type: "water",
120:         dueIn: this.formatDueIn(nextDueDate),
121:         priority: this.calculatePriority(daysOverdue),
122:         plantStage: currentStage,
123:         dueDate: nextDueDate,
124:         canBypass: true,
125:       };
126:     }
127: 
128:     return null;
129:   }
130: 
131:   public static async createObservationTask(
132:     plant: PlantRecord,
133:     currentStage: GrowthStage
134:   ): Promise<UpcomingTask | null> {
135:     const lastObservation = await careService.getLastActivityByType(
136:       plant.id,
137:       "observe"
138:     );
139: 
140:     let nextDueDate: Date;
141: 
142:     if (lastObservation) {
143:       nextDueDate = await DynamicSchedulingService.getNextDueDateForTask(
144:         plant.id,
145:         "observe",
146:         lastObservation.date
147:       );
148:     } else {
149:       nextDueDate = addDays(plant.plantedDate, 3);
150:     }
151: 
152:     if (nextDueDate <= addDays(new Date(), 1)) {
153:       const daysOverdue = differenceInDays(new Date(), nextDueDate);
154: 
155:       return {
156:         id: `observe-${plant.id}`,
157:         plantId: plant.id,
158:         plantName: getPlantDisplayName(plant),
159:         task: "Health check",
160:         type: "observe",
161:         dueIn: this.formatDueIn(nextDueDate),
162:         priority: this.calculatePriority(daysOverdue),
163:         plantStage: currentStage,
164:         dueDate: nextDueDate,
165:         canBypass: true,
166:       };
167:     }
168: 
169:     return null;
170:   }
171: 
172:   public static async getNextTaskForPlant(
173:     plantId: string
174:   ): Promise<UpcomingTask | null> {
175:     const plants = await plantService.getActivePlants();
176:     const plant = plants.find((p) => p.id === plantId);
177: 
178:     if (!plant) return null;
179: 
180:     const tasks = await this.getTasksForPlant(plant);
181: 
182:     if (plant.reminderPreferences) {
183:       const filteredTasks = tasks.filter((task) => {
184:         const taskTypeMap: Record<
185:           string,
186:           keyof typeof plant.reminderPreferences
187:         > = {
188:           "Check water level": "watering",
189:           Water: "watering",
190:           Fertilize: "fertilizing",
191:           Observe: "observation",
192:           "Health check": "observation",
193:           "Check lighting": "lighting",
194:           Prune: "pruning",
195:         };
196:         const preferenceKey = taskTypeMap[task.task];
197:         return preferenceKey ? plant.reminderPreferences[preferenceKey] : true;
198:       });
199: 
200:       if (filteredTasks.length === 0) return null;
201:       return filteredTasks.sort(
202:         (a, b) => a.dueDate.getTime() - b.dueDate.getTime()
203:       )[0];
204:     }
205: 
206:     if (tasks.length === 0) return null;
207:     return tasks.sort((a, b) => a.dueDate.getTime() - b.dueDate.getTime())[0];
208:   }
209: 
210:   private static formatDueIn(dueDate: Date): string {
211:     const now = new Date();
212:     const diffDays = differenceInDays(dueDate, now);
213: 
214:     if (diffDays < 0) {
215:       return `${Math.abs(diffDays)} days overdue`;
216:     } else if (diffDays === 0) {
217:       return "Due today";
218:     } else if (diffDays === 1) {
219:       return "Due tomorrow";
220:     } else {
221:       return `Due in ${diffDays} days`;
222:     }
223:   }
224: 
225:   private static calculatePriority(
226:     daysOverdue: number
227:   ): "low" | "medium" | "high" {
228:     if (daysOverdue >= 2) return "high";
229:     if (daysOverdue >= 0) return "medium";
230:     return "low";
231:   }
232: }

================
File: src/pages/plants/PlantDetail.tsx
================
  1: import React, { useState, useEffect } from "react";
  2: import { useParams, useNavigate } from "react-router-dom";
  3: import { Button } from "@/components/ui/Button";
  4: import { LoadingSpinner } from "@/components/ui/LoadingSpinner";
  5: import { FirebasePlantService } from "@/services/firebase/plantService";
  6: import { useFirebaseAuth } from "@/hooks/useFirebaseAuth";
  7: import { useFirebaseCareActivities } from "@/hooks/useFirebaseCareActivities";
  8: import {
  9:   varietyService,
 10:   PlantRecord,
 11:   VarietyRecord,
 12:   GrowthStage,
 13: } from "@/types";
 14: import CareHistory from "@/components/plant/CareHistory";
 15: import PlantReminderSettings from "@/components/plant/PlantReminderSettings";
 16: import { getPlantDisplayName } from "@/utils/plantDisplay";
 17: import PlantInfoCard from "@/components/plant/PlantInfoCard";
 18: import NextActivityCard from "@/components/plant/NextActivityCard";
 19: import { toast } from "react-hot-toast";
 20: import { StageUpdateModal } from "@/components/plant/StageUpdateModal";
 21: import { StageManagementService } from "@/services/StageManagementService";
 22: import { useDynamicStage } from "@/hooks/useDynamicStage";
 23: import { Badge } from "@/components/ui/Badge";
 24: import { ArrowLeft } from "lucide-react";
 25: 
 26: const PlantDetail: React.FC = () => {
 27:   const { plantId } = useParams<{ plantId: string }>();
 28:   const navigate = useNavigate();
 29:   const { user } = useFirebaseAuth();
 30: 
 31:   const [plant, setPlant] = useState<PlantRecord | null>(null);
 32:   const [variety, setVariety] = useState<VarietyRecord | null>(null);
 33:   const [isLoading, setIsLoading] = useState(true);
 34:   const [error, setError] = useState<string | null>(null);
 35:   const [showReminderSettings, setShowReminderSettings] = useState(false);
 36:   const [isStageModalOpen, setIsStageModalOpen] = useState(false);
 37: 
 38:   const { activities: careHistory } = useFirebaseCareActivities(plantId);
 39:   const plantStage = useDynamicStage(plant!);
 40: 
 41:   useEffect(() => {
 42:     if (user) {
 43:       console.log("User UID type check:", {
 44:         uid: user.uid,
 45:         type: typeof user.uid,
 46:         isFunction: typeof user.uid === "function",
 47:       });
 48:     }
 49:   }, [user]);
 50:   useEffect(() => {
 51:     console.log(" DEBUG - user object:", user);
 52:     console.log(" DEBUG - user.uid:", user?.uid);
 53:     console.log(" DEBUG - typeof user.uid:", typeof user?.uid);
 54: 
 55:     if (!plantId) {
 56:       setError("No plant ID provided");
 57:       setIsLoading(false);
 58:       return;
 59:     }
 60: 
 61:     if (!user?.uid) {
 62:       setError("User not authenticated");
 63:       setIsLoading(false);
 64:       return;
 65:     }
 66: 
 67: 
 68:     if (typeof user.uid !== "string") {
 69:       console.error(" user.uid is not a string:", user.uid, typeof user.uid);
 70:       setError("Invalid user authentication");
 71:       setIsLoading(false);
 72:       return;
 73:     }
 74: 
 75:     setIsLoading(true);
 76:     setError(null);
 77: 
 78:     const unsubscribe = FirebasePlantService.subscribeToPlantsChanges(
 79:       user.uid,
 80:       (plants) => {
 81:         const foundPlant = plants.find((p) => p.id === plantId);
 82:         if (foundPlant) {
 83:           setPlant(foundPlant);
 84:           if (foundPlant.varietyId) {
 85:             varietyService
 86:               .getVariety(foundPlant.varietyId)
 87:               .then((varietyData) => setVariety(varietyData || null))
 88:               .catch(console.error);
 89:           }
 90:         } else {
 91:           setError("Plant not found");
 92:         }
 93:         setIsLoading(false);
 94:       },
 95:       { includeInactive: true }
 96:     );
 97: 
 98:     return () => unsubscribe();
 99:   }, [plantId, user?.uid]);
100: 
101:   const handleConfirmStageChange = async (newStage: GrowthStage) => {
102:     if (!plant || !user) return;
103:     try {
104:       toast.loading("Updating stage and recalculating schedule...");
105:       await StageManagementService.confirmNewStage(
106:         plant.id,
107:         newStage,
108:         user.uid
109:       );
110:       toast.dismiss();
111:       toast.success("Plant stage updated successfully!");
112:     } catch (e) {
113:       toast.dismiss();
114:       const errorMessage =
115:         e instanceof Error ? e.message : "An unknown error occurred.";
116:       toast.error(`Failed to update stage: ${errorMessage}`);
117:       console.error(e);
118:     } finally {
119:       setIsStageModalOpen(false);
120:     }
121:   };
122: 
123:   const handlePlantUpdate = async (updates: Partial<PlantRecord>) => {
124:     if (!plantId) return;
125:     try {
126:       await FirebasePlantService.updatePlant(plantId, updates);
127:     } catch (error) {
128:       console.error("Failed to update plant:", error);
129:     }
130:   };
131: 
132:   const handleLogCare = (activityType?: string) => {
133:     const params = new URLSearchParams();
134:     if (plantId) params.set("plantId", plantId);
135:     if (activityType) params.set("type", activityType);
136:     navigate(`/log-care?${params.toString()}`);
137:   };
138: 
139:   if (isLoading) {
140:     return (
141:       <div className="min-h-screen flex items-center justify-center">
142:         <LoadingSpinner />
143:       </div>
144:     );
145:   }
146: 
147:   if (error || !plant) {
148:     return (
149:       <div className="min-h-screen flex flex-col items-center justify-center p-4">
150:         <div className="text-center max-w-md">
151:           <span className="text-6xl mb-4 block"></span>
152:           <h2 className="text-xl font-semibold text-foreground mb-2">
153:             {error || "Plant not found"}
154:           </h2>
155:           <p className="text-muted-foreground mb-4">
156:             We couldn't load the details for this plant.
157:           </p>
158:           <Button
159:             onClick={() => navigate("/")}
160:             className="bg-primary hover:bg-primary/90"
161:           >
162:             <span className="mr-2"></span>
163:             Go to Dashboard
164:           </Button>
165:         </div>
166:       </div>
167:     );
168:   }
169: 
170:   return (
171:     <>
172:       <div className="min-h-screen bg-background pb-20">
173:         <div className="sticky top-0 z-40 bg-card/95 backdrop-blur supports-[backdrop-filter]:bg-card/60 border-b border-border">
174:           <div className="flex items-center justify-between p-4 max-w-2xl mx-auto">
175:             <Button
176:               variant="ghost"
177:               size="sm"
178:               onClick={() => navigate("/")}
179:               className="text-muted-foreground hover:text-foreground"
180:             >
181:               <ArrowLeft className="h-4 w-4 mr-2" />
182:               Back
183:             </Button>
184:             <Button
185:               variant="ghost"
186:               size="sm"
187:               onClick={() => setShowReminderSettings(!showReminderSettings)}
188:               className="text-muted-foreground hover:text-foreground"
189:             >
190:               <span className="mr-2"></span>
191:               Settings
192:             </Button>
193:           </div>
194:         </div>
195: 
196:         <div className="p-4 max-w-2xl mx-auto space-y-6">
197:           <div className="text-center">
198:             <h1 className="text-3xl font-bold text-foreground">
199:               {getPlantDisplayName(plant)}
200:             </h1>
201:             <p className="text-md text-muted-foreground mt-1">
202:               {plant.varietyName}
203:             </p>
204:           </div>
205: 
206:           <div className="flex items-center justify-center gap-2">
207:             <Badge variant="secondary" className="capitalize text-sm">
208:               {plantStage.replace("-", " ")}
209:             </Badge>
210:             <Button
211:               variant="outline"
212:               size="sm"
213:               onClick={() => setIsStageModalOpen(true)}
214:             >
215:               Update Stage
216:             </Button>
217:           </div>
218: 
219:           <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
220:             <PlantInfoCard plant={plant} showQuickActions={false} />
221:             <NextActivityCard plantId={plant.id} onTaskClick={handleLogCare} />
222:           </div>
223: 
224:           {showReminderSettings && (
225:             <PlantReminderSettings plant={plant} onUpdate={handlePlantUpdate} />
226:           )}
227: 
228:           <CareHistory careHistory={careHistory} />
229:         </div>
230:       </div>
231: 
232:       <StageUpdateModal
233:         isOpen={isStageModalOpen}
234:         plant={plant}
235:         currentStage={plantStage}
236:         onConfirm={handleConfirmStageChange}
237:         onClose={() => setIsStageModalOpen(false)}
238:       />
239:     </>
240:   );
241: };
242: 
243: export default PlantDetail;

================
File: src/types/database.ts
================
  1: import Dexie, { Table } from "dexie";
  2: import { v4 as uuidv4 } from "uuid";
  3: import {
  4:   GrowthStage,
  5:   PlantCategory,
  6:   CareActivityType,
  7:   QualityRating,
  8:   HealthAssessment,
  9:   VolumeUnit,
 10:   ApplicationMethod,
 11:   WateringMethod,
 12: } from "./core";
 13: import { VarietyProtocols, GrowthTimeline } from "./protocols";
 14: import { generateUUID } from "@/utils/cn";
 15: 
 16: export interface BaseRecord {
 17:   id: string;
 18:   createdAt: Date;
 19:   updatedAt?: Date;
 20: }
 21: 
 22: export interface PlantRecord extends BaseRecord {
 23:   varietyId: string;
 24:   varietyName: string;
 25:   name?: string;
 26:   plantedDate: Date;
 27:   location: string;
 28:   container: string;
 29:   soilMix?: string;
 30:   isActive: boolean;
 31:   notes?: string[];
 32:   quantity?: number;
 33:   setupType?: "multiple-containers" | "same-container";
 34: 
 35:   confirmedStage?: GrowthStage;
 36: 
 37:   stageConfirmedDate?: Date;
 38:   growthRateModifier?: number;
 39:   reminderPreferences?: {
 40:     watering?: boolean;
 41:     fertilizing?: boolean;
 42:     observation?: boolean;
 43:     lighting?: boolean;
 44:     pruning?: boolean;
 45:   };
 46: }
 47: 
 48: export interface VarietyRecord extends BaseRecord {
 49:   name: string;
 50:   normalizedName: string;
 51:   category: PlantCategory;
 52:   description?: string;
 53:   growthTimeline: GrowthTimeline;
 54:   protocols?: VarietyProtocols;
 55:   isEverbearing?: boolean;
 56:   productiveLifespan?: number;
 57:   isCustom?: boolean;
 58: }
 59: 
 60: export interface CareActivityDetails {
 61:   type: CareActivityType;
 62:   waterAmount?: number;
 63:   waterUnit?: VolumeUnit;
 64:   moistureLevel?: {
 65:     before: number;
 66:     after: number;
 67:     scale: "1-10" | "visual";
 68:   };
 69:   method?: WateringMethod;
 70:   runoffObserved?: boolean;
 71: 
 72: 
 73:   product?: string;
 74:   dilution?: string;
 75:   amount?: string | { value: number; unit: VolumeUnit };
 76:   applicationMethod?: ApplicationMethod;
 77: 
 78: 
 79:   healthAssessment?: HealthAssessment;
 80:   observations?: string;
 81:   photos?: string[];
 82: 
 83: 
 84:   quality?: QualityRating;
 85:   harvestMethod?: string;
 86: 
 87: 
 88:   fromContainer?: string;
 89:   toContainer?: string;
 90:   reason?: string;
 91: 
 92: 
 93:   temperature?: number;
 94:   humidity?: number;
 95:   lightLevel?: number;
 96:   weatherConditions?: string;
 97: 
 98: 
 99:   notes?: string;
100: }
101: 
102: 
103: export interface CareActivityRecord extends BaseRecord {
104:   plantId: string;
105:   type: CareActivityType;
106:   date: Date;
107:   details: CareActivityDetails;
108: }
109: 
110: 
111: export interface TaskBypassRecord extends BaseRecord {
112:   taskId: string;
113:   plantId: string;
114:   taskType: CareActivityType;
115:   reason: string;
116:   scheduledDate: Date;
117:   bypassDate: Date;
118:   plantStage: GrowthStage;
119:   userId?: string;
120: }
121: 
122: export interface TaskCompletionRecord extends BaseRecord {
123:   plantId: string;
124:   taskType: CareActivityType;
125:   scheduledDate: Date;
126:   actualCompletionDate: Date;
127:   varianceDays: number;
128:   careActivityId: string;
129:   plantStage: GrowthStage;
130: }
131: 
132: export interface ScheduledTask extends BaseRecord {
133:   plantId: string;
134:   taskType: CareActivityType;
135:   dueDate: Date;
136:   status: "pending" | "completed" | "bypassed";
137:   priority?: "low" | "medium" | "high";
138:   description?: string;
139: }
140: 
141: 
142: export type CareRecord = CareActivityRecord;
143: export type BypassLogRecord = TaskBypassRecord;
144: 
145: 
146: class SmartGardenDatabase extends Dexie {
147:   plants!: Table<PlantRecord>;
148:   varieties!: Table<VarietyRecord>;
149:   careActivities!: Table<CareActivityRecord>;
150:   taskBypasses!: Table<TaskBypassRecord>;
151:   taskCompletions!: Table<TaskCompletionRecord>;
152:   scheduledTasks!: Table<ScheduledTask>;
153: 
154:   constructor() {
155:     super("SmartGardenDatabase");
156: 
157:     this.version(7).stores({
158:       plants: "++id, varietyId, isActive, plantedDate, growthRateModifier",
159:       varieties: "++id, &normalizedName, name, category",
160:       careActivities: "++id, plantId, type, date",
161:       taskBypasses: "++id, taskId, plantId, taskType, bypassDate",
162:       scheduledTasks:
163:         "++id, plantId, [plantId+status], [dueDate+status], taskType",
164:       taskCompletions:
165:         "++id, plantId, taskType, [scheduledDate+actualCompletionDate], scheduledDate, actualCompletionDate",
166:     });
167:     this.version(6).stores({
168: 
169:       plants: "++id, varietyId, isActive, plantedDate",
170:       varieties: "++id, &normalizedName, name, category",
171:       careActivities: "++id, plantId, type, date",
172:       taskBypasses: "++id, taskId, plantId, taskType, bypassDate",
173:       scheduledTasks:
174:         "++id, plantId, [plantId+status], [dueDate+status], taskType",
175: 
176:       taskCompletions:
177:         "++id, plantId, taskType, scheduledDate, actualCompletionDate",
178: 
179:     });
180: 
181: 
182:     this.version(5).stores({
183:       plants: "++id, varietyId, isActive, plantedDate",
184:       varieties: "++id, &normalizedName, name, category",
185:       careActivities: "++id, plantId, type, date",
186:       taskBypasses: "++id, taskId, plantId, taskType, bypassDate",
187:       taskCompletions: null,
188:       scheduledTasks:
189:         "++id, plantId, [plantId+status], [dueDate+status], taskType",
190:     });
191:   }
192: }
193: 
194: export const db = new SmartGardenDatabase();
195: 
196: 
197: export const plantService = {
198:   async addPlant(
199:     plant: Omit<PlantRecord, "id" | "createdAt" | "updatedAt">
200:   ): Promise<string> {
201:     const id = generateUUID();
202:     const now = new Date();
203:     const fullPlant: PlantRecord = {
204:       ...plant,
205:       id,
206:       createdAt: now,
207:       updatedAt: now,
208:     };
209: 
210:     try {
211:       await db.plants.add(fullPlant);
212:       return id;
213:     } catch (error) {
214:       console.error("Failed to add plant:", error);
215:       throw error;
216:     }
217:   },
218: 
219:   async getActivePlants(): Promise<PlantRecord[]> {
220:     const allPlants = await db.plants.toArray();
221:     return allPlants.filter((plant) => plant.isActive === true);
222:   },
223: 
224:   async getPlant(id: string): Promise<PlantRecord | undefined> {
225:     return db.plants.get(id);
226:   },
227: 
228:   async updatePlant(
229:     id: string,
230:     updates: Partial<Omit<PlantRecord, "id" | "createdAt">>
231:   ): Promise<void> {
232:     const updateData = {
233:       ...updates,
234:       updatedAt: new Date(),
235:     };
236:     await db.plants.update(id, updateData);
237:   },
238: 
239:   async deletePlant(id: string): Promise<void> {
240:     const updateData = { isActive: false, updatedAt: new Date() };
241:     await db.plants.update(id, updateData);
242:   },
243: };
244: 
245: export const varietyService = {
246: 
247:   async addVariety(
248:     variety: Omit<
249:       VarietyRecord,
250:       "id" | "createdAt" | "updatedAt" | "normalizedName"
251:     >
252:   ): Promise<string> {
253:     const normalizedName = variety.name.toLowerCase();
254:     const existingVariety = await db.varieties
255:       .where("normalizedName")
256:       .equals(normalizedName)
257:       .first();
258: 
259:     if (existingVariety) {
260:       console.warn(
261:         `Variety "${variety.name}" already exists. Returning existing ID.`
262:       );
263:       return existingVariety.id;
264:     }
265: 
266:     const id = uuidv4();
267:     const now = new Date();
268:     const fullVariety: VarietyRecord = {
269:       ...variety,
270:       id,
271:       normalizedName,
272:       createdAt: now,
273:       updatedAt: now,
274:     };
275: 
276:     try {
277:       await db.varieties.add(fullVariety);
278:       return id;
279:     } catch (error) {
280:       console.error("Failed to add variety:", error);
281:       throw error;
282:     }
283:   },
284: 
285:   async getVariety(id: string): Promise<VarietyRecord | undefined> {
286:     return db.varieties.get(id);
287:   },
288: 
289:   async getAllVarieties(): Promise<VarietyRecord[]> {
290:     const allVarieties = await db.varieties.toArray();
291:     const uniqueVarieties = new Map<string, VarietyRecord>();
292: 
293:     for (const variety of allVarieties) {
294: 
295:       const normalizedName =
296:         variety.normalizedName || variety.name.toLowerCase();
297:       if (!uniqueVarieties.has(normalizedName)) {
298:         uniqueVarieties.set(normalizedName, variety);
299:       }
300:     }
301: 
302:     const sortedVarieties = Array.from(uniqueVarieties.values());
303:     sortedVarieties.sort((a, b) => a.name.localeCompare(b.name));
304: 
305:     return sortedVarieties;
306:   },
307: 
308:   async getVarietiesByCategory(
309:     category: PlantCategory
310:   ): Promise<VarietyRecord[]> {
311:     return db.varieties.where("category").equals(category).toArray();
312:   },
313: 
314:   async getVarietyByName(name: string): Promise<VarietyRecord | undefined> {
315:     const normalizedName = name.toLowerCase();
316:     return db.varieties.where("normalizedName").equals(normalizedName).first();
317:   },
318: };
319: 
320: export const careService = {
321:   async addCareActivity(
322:     activity: Omit<CareActivityRecord, "id" | "createdAt" | "updatedAt">
323:   ): Promise<string> {
324:     const id = generateUUID();
325:     const now = new Date();
326:     const fullActivity: CareActivityRecord = {
327:       ...activity,
328:       id,
329:       createdAt: now,
330:       updatedAt: now,
331:     };
332: 
333:     try {
334:       await db.careActivities.add(fullActivity);
335:       return id;
336:     } catch (error) {
337:       console.error("Failed to add care activity:", error);
338:       throw error;
339:     }
340:   },
341: 
342:   async getLastActivityByType(
343:     plantId: string,
344:     type: CareActivityType
345:   ): Promise<CareActivityRecord | null> {
346:     const activities = await db.careActivities
347:       .where("plantId")
348:       .equals(plantId)
349:       .and((activity) => activity.type === type)
350:       .reverse()
351:       .sortBy("date");
352: 
353:     return activities.length > 0 ? activities[0] : null;
354:   },
355: 
356:   async getPlantCareHistory(plantId: string): Promise<CareActivityRecord[]> {
357:     return db.careActivities
358:       .where("plantId")
359:       .equals(plantId)
360:       .reverse()
361:       .sortBy("date");
362:   },
363: 
364:   async getRecentActivities(limit: number = 10): Promise<CareActivityRecord[]> {
365:     return db.careActivities.orderBy("date").reverse().limit(limit).toArray();
366:   },
367: };

================
File: src/db/seedData.ts
================
  1: import { db } from "@/types/database";
  2: import { seedVarieties, SeedVariety } from "@/data/seedVarieties";
  3: import {
  4:   GrowthTimeline,
  5:   VarietyProtocols,
  6:   StageSpecificWateringProtocol,
  7:   StageSpecificFertilizationProtocol,
  8:   StageSpecificLightingProtocol,
  9: } from "@/types/protocols";
 10: import { GrowthStage } from "@/types/core";
 11: import { generateUUID } from "@/utils/cn";
 12: 
 13: export let isDatabaseInitialized = false;
 14: export const resetDatabaseInitializationFlag = () => {
 15:   isDatabaseInitialized = false;
 16: };
 17: 
 18: 
 19: const stageNameMapping: { [key: string]: GrowthStage } = {
 20:   germination: "germination",
 21:   germinationEmergence: "germination",
 22:   slipProduction: "germination",
 23:   seedling: "seedling",
 24:   establishment: "seedling",
 25:   vegetative: "vegetative",
 26:   vegetativeGrowth: "vegetative",
 27:   vegetativeVining: "vegetative",
 28:   rootDevelopment: "vegetative",
 29:   flowering: "flowering",
 30:   flowerBudFormation: "flowering",
 31:   fruiting: "fruiting",
 32:   fruitingHarvesting: "fruiting",
 33:   podSetMaturation: "fruiting",
 34:   maturation: "maturation",
 35:   tuberDevelopment: "maturation",
 36:   ongoing: "ongoing-production",
 37:   ongoingProduction: "ongoing-production",
 38:   harvest: "harvest",
 39: };
 40: 
 41: const convertWateringProtocol = (
 42:   wateringProtocol: StageSpecificWateringProtocol
 43: ): VarietyProtocols["watering"] => {
 44:   const result: Partial<VarietyProtocols["watering"]> = {};
 45:   for (const [stage, stageData] of Object.entries(wateringProtocol)) {
 46:     const canonicalStage = stageNameMapping[stage];
 47:     if (canonicalStage && stageData) {
 48:       result[canonicalStage] = stageData;
 49:     }
 50:   }
 51:   return result as VarietyProtocols["watering"];
 52: };
 53: 
 54: const convertFertilizationProtocol = (
 55:   fertilizationProtocol: StageSpecificFertilizationProtocol
 56: ): VarietyProtocols["fertilization"] => {
 57:   const result: Partial<VarietyProtocols["fertilization"]> = {};
 58:   for (const [stage, stageData] of Object.entries(fertilizationProtocol)) {
 59:     const canonicalStage = stageNameMapping[stage];
 60:     if (canonicalStage && stageData) {
 61:       result[canonicalStage] = stageData;
 62:     }
 63:   }
 64:   return result as VarietyProtocols["fertilization"];
 65: };
 66: 
 67: const convertLightingProtocol = (
 68:   lightingProtocol: StageSpecificLightingProtocol
 69: ): VarietyProtocols["lighting"] => {
 70:   const result: Partial<VarietyProtocols["lighting"]> = {};
 71:   for (const [stage, stageData] of Object.entries(lightingProtocol)) {
 72:     const canonicalStage = stageNameMapping[stage];
 73:     if (canonicalStage && stageData) {
 74:       result[canonicalStage] = stageData;
 75:     }
 76:   }
 77:   return result as VarietyProtocols["lighting"];
 78: };
 79: 
 80: const convertSeedVarietyToVarietyRecord = (variety: SeedVariety) => {
 81:   const timelineData = variety.growthTimeline;
 82: 
 83:   const growthTimeline: GrowthTimeline = {
 84:     germination:
 85:       timelineData.germination ??
 86:       timelineData.germinationEmergence ??
 87:       timelineData.slipProduction ??
 88:       timelineData.caneEstablishment ??
 89:       0,
 90:     seedling: timelineData.seedling ?? timelineData.establishment ?? 7,
 91:     vegetative:
 92:       timelineData.vegetative ??
 93:       timelineData.vegetativeGrowth ??
 94:       timelineData.vegetativeVining ??
 95:       21,
 96:     maturation:
 97:       timelineData.maturation ??
 98:       timelineData.fruiting ??
 99:       timelineData.fruitingHarvesting ??
100:       timelineData.podSetMaturation ??
101:       timelineData.floweringFruiting ??
102:       timelineData.ongoing ??
103:       timelineData.tuberDevelopment ??
104:       60,
105:     rootDevelopment: timelineData.rootDevelopment ?? 14,
106:   };
107: 
108:   let protocols: VarietyProtocols | undefined;
109:   if (variety.protocols) {
110:     protocols = {
111:       watering: variety.protocols.watering
112:         ? convertWateringProtocol(variety.protocols.watering)
113:         : undefined,
114:       fertilization: variety.protocols.fertilization
115:         ? convertFertilizationProtocol(variety.protocols.fertilization)
116:         : undefined,
117:       lighting: variety.protocols.lighting
118:         ? convertLightingProtocol(variety.protocols.lighting)
119:         : undefined,
120:       environment: variety.protocols.environment,
121:       soilMixture: variety.protocols.soilMixture,
122:       container: variety.protocols.container,
123:       succession: variety.protocols.succession,
124:       specialRequirements: variety.protocols.specialRequirements,
125:     };
126:   }
127: 
128:   return {
129:     name: variety.name,
130:     normalizedName: variety.name.toLowerCase(),
131:     category: variety.category,
132:     growthTimeline,
133:     protocols,
134:     isEverbearing: variety.isEverbearing,
135:     productiveLifespan: variety.productiveLifespan,
136:     isCustom: false,
137:   };
138: };
139: 
140: export const initializeDatabase = async (): Promise<void> => {
141:   if (isDatabaseInitialized) {
142:     return;
143:   }
144: 
145:   try {
146:     const existingCount = await db.varieties.count();
147:     if (existingCount > 0) {
148:       console.log(" Database already seeded.");
149:       isDatabaseInitialized = true;
150:       return;
151:     }
152: 
153:     console.log(" Initializing database with seed data...");
154: 
155:     const uniqueVarieties = new Map<string, SeedVariety>();
156:     for (const variety of seedVarieties) {
157:       if (!uniqueVarieties.has(variety.name.toLowerCase())) {
158:         uniqueVarieties.set(variety.name.toLowerCase(), variety);
159:       }
160:     }
161: 
162: 
163: 
164: 
165:     const varietyRecords = Array.from(uniqueVarieties.values()).map(
166:       (variety) => {
167:         const converted = convertSeedVarietyToVarietyRecord(variety);
168:         return {
169:           id: generateUUID(),
170:           ...converted,
171:           createdAt: new Date(),
172:           updatedAt: new Date(),
173:         };
174:       }
175:     );
176: 
177:     await db.varieties.bulkAdd(varietyRecords);
178: 
179: 
180:     isDatabaseInitialized = true;
181:     console.log(
182:       ` Successfully seeded ${uniqueVarieties.size} unique varieties`
183:     );
184:   } catch (error) {
185:     if (error instanceof Error && error.name === "BulkError") {
186: 
187: 
188:       console.warn(
189:         "Seeding encountered a bulk error, likely due to duplicate keys already existing. This is safe to ignore in most development scenarios."
190:       );
191:       isDatabaseInitialized = true;
192:     } else {
193:       isDatabaseInitialized = false;
194:       console.error(" Error initializing database:", error);
195:       throw error;
196:     }
197:   }
198: };

================
File: src/pages/care/CareLogForm.tsx
================
  1: import { useState, useEffect } from "react";
  2: import { useForm } from "react-hook-form";
  3: import { zodResolver } from "@hookform/resolvers/zod";
  4: import { z } from "zod";
  5: import { useSearchParams } from "react-router-dom";
  6: import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/Card";
  7: import { Button } from "@/components/ui/Button";
  8: import { LoadingSpinner } from "@/components/ui/LoadingSpinner";
  9: import { useFirebasePlants } from "@/hooks/useFirebasePlants";
 10: import { useFirebaseCareActivities } from "@/hooks/useFirebaseCareActivities";
 11: import {
 12:   varietyService,
 13:   VarietyRecord,
 14:   CareActivityDetails,
 15: } from "@/types/database";
 16: import { calculateCurrentStageWithVariety } from "@/utils/growthStage";
 17: import { GrowthStage } from "@/types";
 18: import {
 19:   Droplets,
 20:   Beaker,
 21:   Eye,
 22:   Camera,
 23:   FileText,
 24:   Calendar,
 25:   Info,
 26: } from "lucide-react";
 27: import { getMethodDisplay } from "@/utils/fertilizationUtils";
 28: import { ApplicationMethod } from "@/types/core";
 29: import { FertilizationScheduleItem } from "@/types";
 30: 
 31: const careFormSchema = z
 32:   .object({
 33:     plantId: z.string().min(1, "Please select a plant"),
 34:     type: z.enum(["water", "fertilize", "observe", "photo", "note"]),
 35:     date: z.string().min(1, "Date is required"),
 36:     waterValue: z.number().optional(),
 37:     waterUnit: z.enum(["oz", "ml", "cups", "L"]).optional(),
 38:     moistureBefore: z.number().min(1).max(10).optional(),
 39:     moistureAfter: z.number().min(1).max(10).optional(),
 40:     fertilizeAmount: z.string().optional(),
 41:     fertilizeType: z.string().optional(),
 42:     fertilizeDilution: z.string().optional(),
 43:     notes: z.string().optional(),
 44:   })
 45:   .refine(
 46:     (data) => {
 47:       if (data.type === "water") {
 48:         return data.waterValue !== undefined && data.waterValue !== null;
 49:       }
 50:       return true;
 51:     },
 52:     {
 53:       message: "Water amount is required for watering activities.",
 54:       path: ["waterValue"],
 55:     }
 56:   );
 57: 
 58: type CareFormData = z.infer<typeof careFormSchema>;
 59: 
 60: interface CareLogFormProps {
 61:   onSuccess?: () => void;
 62:   onCancel?: () => void;
 63:   preselectedPlantId?: string;
 64:   preselectedActivityType?: "water" | "fertilize" | "observe";
 65: }
 66: 
 67: interface FertilizerProduct {
 68:   name: string;
 69:   dilution?: string;
 70:   amount?: string;
 71:   frequency?: string;
 72:   method?: ApplicationMethod;
 73: }
 74: 
 75: 
 76: const getProtocolForStage = (
 77: 
 78:   protocols: any,
 79:   stage: GrowthStage
 80: 
 81: ): any | null => {
 82:   if (!protocols) return null;
 83: 
 84:   if (protocols[stage]) return protocols[stage];
 85: 
 86:   const stageMappings: { [key in GrowthStage]?: string[] } = {
 87:     vegetative: ["vegetativeGrowth", "vegetativeVining"],
 88:     flowering: ["flowerBudFormation"],
 89:     harvest: ["fruitingHarvesting", "podSetMaturation"],
 90:     "ongoing-production": ["ongoingProduction"],
 91:     germination: ["germinationEmergence", "slipProduction"],
 92:     seedling: ["establishment"],
 93:   };
 94: 
 95:   const possibleKeys = stageMappings[stage] || [];
 96:   for (const key of possibleKeys) {
 97:     if (protocols[key]) {
 98:       return protocols[key];
 99:     }
100:   }
101: 
102:   return null;
103: };
104: 
105: const formatAmountText = (amount: string) => {
106:   return amount.split(",").map((part, index, array) => (
107:     <span key={index}>
108:       {part.trim()}
109:       {index < array.length - 1 && <br />}
110:     </span>
111:   ));
112: };
113: 
114: export function CareLogForm({
115:   onSuccess,
116:   onCancel,
117:   preselectedPlantId,
118:   preselectedActivityType,
119: }: CareLogFormProps) {
120:   const { plants, loading: plantsLoading } = useFirebasePlants();
121:   const { logActivity } = useFirebaseCareActivities();
122:   const [isLoading, setIsLoading] = useState(false);
123:   const [submitError, setSubmitError] = useState<string | null>(null);
124:   const [showDetailedTracking, setShowDetailedTracking] = useState(false);
125:   const [plantVariety, setPlantVariety] = useState<VarietyRecord | null>(null);
126:   const [currentStage, setCurrentStage] = useState<GrowthStage>("germination");
127:   const [availableFertilizers, setAvailableFertilizers] = useState<
128:     FertilizerProduct[]
129:   >([]);
130:   const [selectedFertilizer, setSelectedFertilizer] =
131:     useState<FertilizerProduct | null>(null);
132:   const [searchParams] = useSearchParams();
133: 
134:   const plantIdFromParams =
135:     preselectedPlantId || searchParams.get("plantId") || "";
136:   const activityTypeFromParams =
137:     preselectedActivityType ||
138:     (searchParams.get("type") as "water" | "fertilize" | "observe") ||
139:     "water";
140: 
141:   const {
142:     register,
143:     handleSubmit,
144:     watch,
145:     formState: { errors },
146:     reset,
147:     setValue,
148:   } = useForm<CareFormData>({
149:     resolver: zodResolver(careFormSchema),
150:     defaultValues: {
151:       plantId: "",
152:       type: activityTypeFromParams,
153:       date: new Date().toISOString().split("T")[0],
154:       waterValue: undefined,
155:       waterUnit: "oz",
156:     },
157:   });
158: 
159:   const activityType = watch("type");
160:   const selectedPlantId = watch("plantId");
161:   const selectedFertilizerType = watch("fertilizeType");
162: 
163:   useEffect(() => {
164:     if (!plantsLoading && plants.length > 0 && plantIdFromParams) {
165:       const plantExists = plants.some(
166:         (plant) => plant.id === plantIdFromParams
167:       );
168:       if (plantExists) {
169:         setValue("plantId", plantIdFromParams);
170:       }
171:     }
172:   }, [plantsLoading, plants, plantIdFromParams, setValue]);
173: 
174:   useEffect(() => {
175:     const loadPlantData = async () => {
176:       if (!selectedPlantId) {
177:         setPlantVariety(null);
178:         setCurrentStage("germination");
179:         setAvailableFertilizers([]);
180:         return;
181:       }
182: 
183:       const plant = plants.find((p) => p.id === selectedPlantId);
184:       if (!plant) return;
185: 
186:       try {
187:         const variety = await varietyService.getVariety(plant.varietyId);
188:         setPlantVariety(variety || null);
189: 
190:         if (variety) {
191:           const stage = calculateCurrentStageWithVariety(
192:             plant.plantedDate,
193:             variety
194:           );
195:           setCurrentStage(stage);
196: 
197:           if (
198:             activityType === "fertilize" &&
199:             variety.protocols?.fertilization
200:           ) {
201:             const fertilizingProtocol = getProtocolForStage(
202:               variety.protocols.fertilization,
203:               stage
204:             );
205:             if (
206:               fertilizingProtocol?.schedule &&
207:               Array.isArray(fertilizingProtocol.schedule)
208:             ) {
209:               const products: FertilizerProduct[] =
210:                 fertilizingProtocol.schedule.map(
211:                   (item: FertilizationScheduleItem) => ({
212:                     name: item.details.product,
213:                     dilution: item.details.dilution,
214:                     amount: item.details.amount,
215:                     method: item.details.method,
216:                   })
217:                 );
218:               setAvailableFertilizers(products);
219: 
220:               if (products.length === 1) {
221:                 const firstProduct = products[0];
222:                 setValue("fertilizeType", firstProduct.name);
223:                 setSelectedFertilizer(firstProduct);
224:               }
225:             } else {
226:               setAvailableFertilizers([]);
227:             }
228:           }
229:         }
230:       } catch (error) {
231:         console.error("Failed to load plant variety:", error);
232:         setPlantVariety(null);
233:       }
234:     };
235: 
236:     loadPlantData();
237:   }, [selectedPlantId, plants, activityType, setValue]);
238: 
239:   useEffect(() => {
240:     if (selectedFertilizerType) {
241:       const fertilizer = availableFertilizers.find(
242:         (f) => f.name === selectedFertilizerType
243:       );
244:       setSelectedFertilizer(fertilizer || null);
245: 
246:       if (fertilizer) {
247:         if (fertilizer.dilution) {
248:           setValue("fertilizeDilution", fertilizer.dilution);
249:         }
250:         if (fertilizer.amount) {
251:           setValue("fertilizeAmount", fertilizer.amount);
252:         }
253:       }
254:     } else {
255:       setSelectedFertilizer(null);
256:     }
257:   }, [selectedFertilizerType, availableFertilizers, setValue]);
258: 
259:   const onSubmit = async (data: CareFormData) => {
260:     try {
261:       setIsLoading(true);
262:       setSubmitError(null);
263: 
264:       let activityDetails: Partial<CareActivityDetails> = {
265:         type: data.type,
266:       };
267: 
268:       switch (data.type) {
269:         case "water":
270:           activityDetails = {
271:             type: "water",
272:             amount: {
273:               value: data.waterValue!,
274:               unit: data.waterUnit!,
275:             },
276: 
277:             ...(showDetailedTracking &&
278:             data.moistureBefore &&
279:             data.moistureAfter
280:               ? {
281:                   moistureReading: {
282:                     before: data.moistureBefore,
283:                     after: data.moistureAfter,
284:                   },
285:                 }
286:               : {}),
287:           };
288:           break;
289:         case "fertilize":
290:           activityDetails = {
291:             type: "fertilize",
292:             product: data.fertilizeType,
293:             dilution: data.fertilizeDilution,
294:             amount: data.fertilizeAmount,
295:             applicationMethod: selectedFertilizer?.method,
296:           };
297:           break;
298:         case "observe":
299:         case "photo":
300:         case "note":
301:           activityDetails = {
302:             type: data.type,
303:           };
304:           break;
305:       }
306: 
307:       if (data.notes) {
308:         activityDetails.notes = data.notes;
309:       }
310: 
311:       await logActivity({
312:         plantId: data.plantId,
313:         type: data.type,
314:         date: new Date(data.date),
315:         details: activityDetails as CareActivityDetails,
316:       });
317: 
318:       reset();
319:       onSuccess?.();
320:     } catch (error) {
321:       console.error("Failed to log care activity:", error);
322:       setSubmitError("Failed to log care activity. Please try again.");
323:     } finally {
324:       setIsLoading(false);
325:     }
326:   };
327: 
328:   const getActivityIcon = (type: string) => {
329:     switch (type) {
330:       case "water":
331:         return <Droplets className="h-4 w-4" />;
332:       case "fertilize":
333:         return <Beaker className="h-4 w-4" />;
334:       case "observe":
335:         return <Eye className="h-4 w-4" />;
336:       case "photo":
337:         return <Camera className="h-4 w-4" />;
338:       case "note":
339:         return <FileText className="h-4 w-4" />;
340:       default:
341:         return <Droplets className="h-4 w-4" />;
342:     }
343:   };
344: 
345:   const getActivityLabel = (type: string) => {
346:     switch (type) {
347:       case "water":
348:         return "Watering";
349:       case "fertilize":
350:         return "Fertilizing";
351:       case "observe":
352:         return "Health Check";
353:       case "photo":
354:         return "Photo Log";
355:       case "note":
356:         return "General Note";
357:       default:
358:         return "Activity";
359:     }
360:   };
361: 
362:   const renderWateringProtocol = () => {
363:     if (!plantVariety?.protocols?.watering) return null;
364: 
365:     const wateringProtocol = getProtocolForStage(
366:       plantVariety.protocols.watering,
367:       currentStage
368:     );
369:     if (!wateringProtocol) return null;
370: 
371:     return (
372:       <div className="mt-4 p-3 bg-muted/50 dark:bg-muted/30 border border-border rounded-lg">
373:         <div className="flex items-center gap-2 mb-2">
374:           <Info className="h-4 w-4 text-muted-foreground" />
375:           <span className="text-sm font-medium text-foreground">
376:             Protocol for {currentStage} stage:
377:           </span>
378:         </div>
379:         <div className="space-y-2 text-sm text-muted-foreground">
380:           {wateringProtocol.trigger && (
381:             <div>
382:               <span className="font-medium text-foreground">
383:                 When to water:
384:               </span>{" "}
385:               {wateringProtocol.trigger.moistureLevel}
386:             </div>
387:           )}
388:           {wateringProtocol.target && (
389:             <div>
390:               <span className="font-medium text-foreground">
391:                 Target moisture:
392:               </span>{" "}
393:               {wateringProtocol.target.moistureLevel}
394:             </div>
395:           )}
396:           {wateringProtocol.volume && (
397:             <div>
398:               <span className="font-medium text-foreground">Amount:</span>{" "}
399:               {formatAmountText(wateringProtocol.volume.amount)}
400:               {wateringProtocol.volume.frequency && (
401:                 <span className="block mt-1">
402:                   <span className="font-medium text-foreground">
403:                     Frequency:
404:                   </span>{" "}
405:                   {wateringProtocol.volume.frequency}
406:                 </span>
407:               )}
408:             </div>
409:           )}
410:           {wateringProtocol.notes && wateringProtocol.notes.length > 0 && (
411:             <div>
412:               <span className="font-medium text-foreground">Notes:</span>
413:               <ul className="list-disc list-inside ml-2 space-y-1 mt-1">
414:                 {wateringProtocol.notes.map((note: string, index: number) => (
415:                   <li key={index}>{note}</li>
416:                 ))}
417:               </ul>
418:             </div>
419:           )}
420:         </div>
421:       </div>
422:     );
423:   };
424: 
425:   const renderWateringFields = () => {
426:     return (
427:       <Card className="border-border shadow-sm">
428:         <CardHeader className="pb-3">
429:           <CardTitle className="flex items-center gap-2 text-base">
430:             <Droplets className="h-4 w-4" />
431:             Watering Details
432:           </CardTitle>
433:         </CardHeader>
434:         <CardContent className="pt-0 space-y-4">
435:           {renderWateringProtocol()}
436: 
437:           <div className="grid grid-cols-2 gap-3">
438:             <div>
439:               <label
440:                 htmlFor="waterValue"
441:                 className="block text-sm font-medium text-foreground mb-2"
442:               >
443:                 Water Amount *
444:               </label>
445:               <input
446:                 id="waterValue"
447:                 type="number"
448:                 step="0.1"
449:                 placeholder="Amount"
450:                 {...register("waterValue", { valueAsNumber: true })}
451:                 className="w-full p-3 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-ring focus:border-ring"
452:               />
453:               {errors.waterValue && (
454:                 <p className="mt-1 text-sm text-red-600" role="alert">
455:                   {errors.waterValue.message}
456:                 </p>
457:               )}
458:             </div>
459:             <div>
460:               <label className="block text-sm font-medium text-foreground mb-2">
461:                 Unit
462:               </label>
463:               <select
464:                 {...register("waterUnit")}
465:                 className="w-full p-3 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-ring focus:border-ring"
466:               >
467:                 <option value="oz">oz</option>
468:                 <option value="ml">ml</option>
469:                 <option value="cups">cups</option>
470:                 <option value="L">L</option>
471:               </select>
472:             </div>
473:           </div>
474: 
475:           {showDetailedTracking && (
476:             <div className="grid grid-cols-2 gap-3 pt-4 border-t border-border">
477:               <div>
478:                 <label className="block text-sm font-medium text-foreground mb-2">
479:                   Moisture Before (1-10)
480:                 </label>
481:                 <input
482:                   type="number"
483:                   min={1}
484:                   max={10}
485:                   placeholder="1-10"
486:                   {...register("moistureBefore", { valueAsNumber: true })}
487:                   className="w-full p-3 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-ring focus:border-ring"
488:                 />
489:               </div>
490:               <div>
491:                 <label className="block text-sm font-medium text-foreground mb-2">
492:                   Moisture After (1-10)
493:                 </label>
494:                 <input
495:                   type="number"
496:                   min={1}
497:                   max={10}
498:                   placeholder="1-10"
499:                   {...register("moistureAfter", { valueAsNumber: true })}
500:                   className="w-full p-3 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-ring focus:border-ring"
501:                 />
502:               </div>
503:             </div>
504:           )}
505: 
506:           <div className="flex items-center gap-2">
507:             <input
508:               type="checkbox"
509:               id="detailed-tracking"
510:               checked={showDetailedTracking}
511:               onChange={(e) => setShowDetailedTracking(e.target.checked)}
512:               className="rounded border-border"
513:             />
514:             <label
515:               htmlFor="detailed-tracking"
516:               className="text-sm text-foreground"
517:             >
518:               Track moisture levels
519:             </label>
520:           </div>
521:         </CardContent>
522:       </Card>
523:     );
524:   };
525: 
526:   const renderFertilizationProtocol = () => {
527:     if (!plantVariety?.protocols?.fertilization) return null;
528: 
529:     const fertilizingProtocol = getProtocolForStage(
530:       plantVariety.protocols.fertilization,
531:       currentStage
532:     );
533:     if (!fertilizingProtocol) return null;
534: 
535:     return (
536:       <div className="mt-4 p-3 bg-muted/50 dark:bg-muted/30 border border-border rounded-lg">
537:         <div className="flex items-center gap-2 mb-2">
538:           <Info className="h-4 w-4 text-muted-foreground" />
539:           <span className="text-sm font-medium text-foreground">
540:             Protocol for {currentStage} stage:
541:           </span>
542:         </div>
543:         <div className="space-y-2 text-sm text-muted-foreground">
544:           {fertilizingProtocol.timing && (
545:             <div>
546:               <span className="font-medium text-foreground">Timing:</span>{" "}
547:               {fertilizingProtocol.timing}
548:             </div>
549:           )}
550:           {selectedFertilizer && (
551:             <div className="space-y-1">
552:               {selectedFertilizer.frequency && (
553:                 <div>
554:                   <span className="font-medium text-foreground">
555:                     Frequency:
556:                   </span>{" "}
557:                   {selectedFertilizer.frequency}
558:                 </div>
559:               )}
560:               {selectedFertilizer.method && (
561:                 <div>
562:                   <span className="font-medium text-foreground">Method:</span>{" "}
563:                   {getMethodDisplay(selectedFertilizer.method)}
564:                 </div>
565:               )}
566:             </div>
567:           )}
568:           {fertilizingProtocol.notes &&
569:             fertilizingProtocol.notes.length > 0 && (
570:               <div>
571:                 <span className="font-medium text-foreground">Notes:</span>
572:                 <ul className="list-disc list-inside ml-2 space-y-1 mt-1">
573:                   {fertilizingProtocol.notes.map(
574:                     (note: string, index: number) => (
575:                       <li key={index}>{note}</li>
576:                     )
577:                   )}
578:                 </ul>
579:               </div>
580:             )}
581:         </div>
582:       </div>
583:     );
584:   };
585: 
586:   const renderFertilizingFields = () => {
587:     return (
588:       <Card className="border-border shadow-sm">
589:         <CardHeader className="pb-3">
590:           <CardTitle className="flex items-center gap-2 text-base">
591:             <Beaker className="h-4 w-4" />
592:             Fertilizer Details
593:           </CardTitle>
594:         </CardHeader>
595:         <CardContent className="pt-0 space-y-4">
596:           {renderFertilizationProtocol()}
597: 
598:           <div>
599:             <label
600:               htmlFor="fertilizeType"
601:               className="block text-sm font-medium text-foreground mb-2"
602:             >
603:               Fertilizer Product *
604:             </label>
605:             <select
606:               {...register("fertilizeType")}
607:               id="fertilizeType"
608:               className="w-full p-3 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-ring focus:border-ring"
609:             >
610:               <option value="">Choose a fertilizer...</option>
611:               {availableFertilizers.map((fertilizer, index) => (
612:                 <option key={index} value={fertilizer.name}>
613:                   {fertilizer.name}
614:                   {fertilizer.method &&
615:                     ` (${getMethodDisplay(fertilizer.method)})`}
616:                 </option>
617:               ))}
618:               <option value="custom">Custom/Other</option>
619:             </select>
620:             {errors.fertilizeType && (
621:               <p className="mt-1 text-sm text-red-600" role="alert">
622:                 {errors.fertilizeType.message}
623:               </p>
624:             )}
625:           </div>
626: 
627:           {selectedFertilizerType === "custom" && (
628:             <div>
629:               <label className="block text-sm font-medium text-foreground mb-2">
630:                 Custom Fertilizer Name *
631:               </label>
632:               <input
633:                 type="text"
634:                 placeholder="e.g., General Purpose, Bloom Booster"
635:                 {...register("fertilizeType")}
636:                 className="w-full p-3 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-ring focus:border-ring"
637:               />
638:             </div>
639:           )}
640: 
641:           <div className="grid grid-cols-2 gap-3">
642:             <div>
643:               <label
644:                 htmlFor="dilution"
645:                 className="block text-sm font-medium text-foreground mb-2"
646:               >
647:                 Dilution
648:               </label>
649:               <input
650:                 id="dilution"
651:                 type="text"
652:                 placeholder="e.g., 2 Tbsp/gal"
653:                 {...register("fertilizeDilution")}
654:                 className="w-full p-3 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-ring focus:border-ring"
655:               />
656:             </div>
657:             <div>
658:               <label
659:                 htmlFor="fertilizeAmount"
660:                 className="block text-sm font-medium text-foreground mb-2"
661:               >
662:                 Amount *
663:               </label>
664:               <input
665:                 id="fertilizeAmount"
666:                 type="text"
667:                 placeholder="e.g., light application"
668:                 {...register("fertilizeAmount")}
669:                 className="w-full p-3 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-ring focus:border-ring"
670:               />
671:               {errors.fertilizeAmount && (
672:                 <p className="mt-1 text-sm text-red-600" role="alert">
673:                   {errors.fertilizeAmount.message}
674:                 </p>
675:               )}
676:             </div>
677:           </div>
678: 
679:           {selectedFertilizer && (
680:             <div className="p-3 bg-muted/50 dark:bg-muted/30 border border-border rounded-lg">
681:               <div className="flex items-center gap-2 mb-2">
682:                 <Info className="h-4 w-4 text-muted-foreground" />
683:                 <span className="text-sm font-medium text-foreground">
684:                   Recommended Settings
685:                 </span>
686:               </div>
687:               <div className="space-y-1 text-sm text-muted-foreground">
688:                 {selectedFertilizer.frequency && (
689:                   <div>
690:                     <span className="font-medium text-foreground">
691:                       Frequency:
692:                     </span>{" "}
693:                     {selectedFertilizer.frequency}
694:                   </div>
695:                 )}
696:                 {selectedFertilizer.method && (
697:                   <div>
698:                     <span className="font-medium text-foreground">Method:</span>{" "}
699:                     {getMethodDisplay(selectedFertilizer.method)}
700:                   </div>
701:                 )}
702:                 {selectedFertilizer.amount && (
703:                   <div>
704:                     <span className="font-medium text-foreground">Amount:</span>{" "}
705:                     {selectedFertilizer.amount}
706:                   </div>
707:                 )}
708:                 {selectedFertilizer.dilution && (
709:                   <div>
710:                     <span className="font-medium text-foreground">
711:                       Dilution:
712:                     </span>{" "}
713:                     {selectedFertilizer.dilution}
714:                   </div>
715:                 )}
716:               </div>
717:             </div>
718:           )}
719: 
720:           {selectedFertilizer?.method === "soil-drench" && (
721:             <div className="p-3 bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 rounded-lg">
722:               <div className="flex items-start gap-2">
723:                 <Droplets className="h-4 w-4 text-blue-600 mt-0.5" />
724:                 <div className="text-sm">
725:                   <p className="font-medium text-blue-900 dark:text-blue-100">
726:                     Water Required
727:                   </p>
728:                   <p className="text-blue-700 dark:text-blue-300 mt-1">
729:                     This application method requires water. Consider combining
730:                     with regular watering if due soon to prevent overwatering.
731:                   </p>
732:                 </div>
733:               </div>
734:             </div>
735:           )}
736:         </CardContent>
737:       </Card>
738:     );
739:   };
740: 
741:   const renderActivitySpecificFields = () => {
742:     switch (activityType) {
743:       case "water":
744:         return renderWateringFields();
745:       case "fertilize":
746:         return renderFertilizingFields();
747:       default:
748:         return null;
749:     }
750:   };
751: 
752:   if (plantsLoading) {
753:     return (
754:       <Card className="border-border shadow-sm">
755:         <CardContent className="pt-6">
756:           <div className="flex items-center justify-center py-8">
757:             <LoadingSpinner />
758:             <span className="ml-2">Loading plants...</span>
759:           </div>
760:         </CardContent>
761:       </Card>
762:     );
763:   }
764:   const sortedPlants = [...plants].sort((a, b) => {
765:     const nameA = a.name || a.varietyName;
766:     const nameB = b.name || b.varietyName;
767:     return nameA.localeCompare(nameB);
768:   });
769:   return (
770:     <Card className="border-border shadow-sm">
771:       <CardHeader className="pb-3">
772:         <CardTitle className="flex items-center gap-2 text-base">
773:           {getActivityIcon(activityType)}
774:           {getActivityLabel(activityType)} Log
775:         </CardTitle>
776:       </CardHeader>
777:       <CardContent className="pt-0">
778:         <form onSubmit={handleSubmit(onSubmit)} className="space-y-6">
779:           {submitError && (
780:             <div className="p-3 bg-red-50 border border-red-200 rounded-lg">
781:               <p className="text-sm text-red-600" role="alert">
782:                 {submitError}
783:               </p>
784:             </div>
785:           )}
786: 
787:           <Card className="border-border shadow-sm">
788:             <CardHeader className="pb-3">
789:               <CardTitle className="flex items-center gap-2 text-base">
790:                 <Calendar className="h-4 w-4" />
791:                 Basic Information
792:               </CardTitle>
793:             </CardHeader>
794:             <CardContent className="pt-0 space-y-4">
795:               <div className="grid grid-cols-1 gap-4">
796:                 <div>
797:                   <label
798:                     htmlFor="plant-select"
799:                     className="block text-sm font-medium text-foreground mb-2"
800:                   >
801:                     Plant *
802:                   </label>
803:                   <select
804:                     id="plant-select"
805:                     {...register("plantId")}
806:                     className="w-full p-3 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-ring focus:border-ring"
807:                   >
808:                     <option value="">Choose a plant...</option>
809:                     {sortedPlants.map((plant) => (
810:                       <option key={plant.id} value={plant.id}>
811:                         {plant.name
812:                           ? `${plant.name} (${plant.varietyName})`
813:                           : plant.varietyName}
814:                         {plant.location && ` - ${plant.location}`}
815:                       </option>
816:                     ))}
817:                   </select>
818:                   {errors.plantId && (
819:                     <p className="mt-1 text-sm text-red-600" role="alert">
820:                       {errors.plantId.message}
821:                     </p>
822:                   )}
823:                 </div>
824: 
825:                 <div>
826:                   <label
827:                     htmlFor="type"
828:                     className="block text-sm font-medium text-foreground mb-2"
829:                   >
830:                     Activity Type *
831:                   </label>
832:                   <select {...register("type")} id="type" className="...">
833:                     <option value="water"> Watering</option>
834:                     <option value="fertilize"> Fertilizing</option>
835:                     <option value="observe"> Health Check</option>
836:                     <option value="photo"> Photo Log</option>
837:                     <option value="note"> General Note</option>
838:                   </select>
839:                   {errors.type && (
840:                     <p className="mt-1 text-sm text-red-600" role="alert">
841:                       {errors.type.message}
842:                     </p>
843:                   )}
844:                 </div>
845: 
846:                 <div>
847:                   <label className="block text-sm font-medium text-foreground mb-2">
848:                     Date *
849:                   </label>
850:                   <input
851:                     type="date"
852:                     {...register("date")}
853:                     className="w-full p-3 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-ring focus:border-ring"
854:                   />
855:                   {errors.date && (
856:                     <p className="mt-1 text-sm text-red-600" role="alert">
857:                       {errors.date.message}
858:                     </p>
859:                   )}
860:                 </div>
861:               </div>
862:             </CardContent>
863:           </Card>
864: 
865:           {renderActivitySpecificFields()}
866: 
867:           <Card className="border-border shadow-sm">
868:             <CardHeader className="pb-3">
869:               <CardTitle className="flex items-center gap-2 text-base">
870:                 <FileText className="h-4 w-4" />
871:                 Additional Notes
872:               </CardTitle>
873:             </CardHeader>
874:             <CardContent className="pt-0">
875:               <div>
876:                 <label
877:                   htmlFor="notes"
878:                   className="block text-sm font-medium text-foreground mb-2"
879:                 >
880:                   Notes (Optional)
881:                 </label>
882:                 <textarea
883:                   id="notes"
884:                   {...register("notes")}
885:                   rows={3}
886:                   placeholder="Add any additional observations or notes about this care activity..."
887:                   className="w-full p-3 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-ring focus:border-ring resize-none"
888:                 />
889:               </div>
890:             </CardContent>
891:           </Card>
892: 
893:           <div className="flex gap-3 pt-6 border-t border-border">
894:             {onCancel && (
895:               <Button
896:                 type="button"
897:                 variant="outline"
898:                 onClick={onCancel}
899:                 className="flex-1"
900:                 disabled={isLoading}
901:               >
902:                 Cancel
903:               </Button>
904:             )}
905:             <Button
906:               type="submit"
907:               disabled={isLoading}
908:               className="flex-1"
909:               size="lg"
910:             >
911:               {isLoading ? (
912:                 <div className="flex items-center gap-2">
913:                   <LoadingSpinner size="sm" />
914:                   <span>Logging...</span>
915:                 </div>
916:               ) : (
917:                 <div className="flex items-center gap-2">
918:                   <span></span>
919:                   <span>Log Activity</span>
920:                 </div>
921:               )}
922:             </Button>
923:           </div>
924:         </form>
925:       </CardContent>
926:     </Card>
927:   );
928: }

================
File: src/pages/dashboard/index.tsx
================
  1: import { useState, useEffect } from "react";
  2: import Navigation from "@/components/Navigation";
  3: import { Button } from "@/components/ui/Button";
  4: import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/Card";
  5: import { OfflineIndicator } from "@/components/ui/OfflineIndicator";
  6: import { useFirebaseAuth } from "@/hooks/useFirebaseAuth";
  7: import { useFirebasePlants } from "@/hooks/useFirebasePlants";
  8: import { useFirebaseCareActivities } from "@/hooks/useFirebaseCareActivities";
  9: import { useNavigate } from "react-router-dom";
 10: import { groupPlantsByConditions, PlantGroup } from "@/utils/plantGrouping";
 11: import PlantGroupCard from "@/components/plant/PlantGroupCard";
 12: import BulkActivityModal from "@/components/plant/BulkActivityModal";
 13: import { useScheduledTasks } from "@/hooks/useScheduledTasks";
 14: import FertilizationDashboardSection from "@/components/fertilization/FertilizationDashboardSection";
 15: import toast from "react-hot-toast";
 16: import { QuickCompletionValues } from "@/services/smartDefaultsService";
 17: import { DynamicSchedulingService } from "@/services/dynamicSchedulingService";
 18: import { CareActivityDetails } from "@/types";
 19: 
 20: export const Dashboard = () => {
 21:   const { plants, loading } = useFirebasePlants();
 22:   const { user, signOut } = useFirebaseAuth();
 23:   const { logActivity } = useFirebaseCareActivities();
 24:   const navigate = useNavigate();
 25:   const [plantGroups, setPlantGroups] = useState<PlantGroup[]>([]);
 26: 
 27: 
 28:   const {
 29:     getUpcomingFertilizationTasks,
 30:     tasks,
 31:     loading: scheduleLoading,
 32:     error,
 33:   } = useScheduledTasks();
 34: 
 35:   const upcomingFertilization = getUpcomingFertilizationTasks(7);
 36: 
 37:   const handleTaskComplete = async (
 38:     taskId: string,
 39:     quickData?: QuickCompletionValues
 40:   ) => {
 41:     try {
 42:       const task = upcomingFertilization.find((t) => t.id === taskId);
 43:       if (!task) {
 44:         toast.error("Task not found");
 45:         return;
 46:       }
 47: 
 48:       const actualCompletionDate = new Date();
 49: 
 50: 
 51:       const fertilizationDetails: Extract<
 52:         CareActivityDetails,
 53:         { type: "fertilize" }
 54:       > = {
 55:         type: "fertilize",
 56:         product: quickData?.product || task.details.product,
 57:         amount: quickData?.amount || task.details.amount,
 58:         dilution: quickData?.dilution || task.details.dilution,
 59:         method: task.details.method,
 60:         notes: quickData?.notes || `Completed task: ${task.taskName}`,
 61:       };
 62: 
 63:       const newCareActivity = await logActivity({
 64:         plantId: task.plantId,
 65:         type: "fertilize",
 66:         date: actualCompletionDate,
 67:         details: fertilizationDetails,
 68:       });
 69: 
 70: 
 71:       if (!newCareActivity) {
 72:         throw new Error("Failed to get new care activity record.");
 73:       }
 74: 
 75: 
 76:       await DynamicSchedulingService.recordTaskCompletion(
 77:         task.plantId,
 78:         task.taskType,
 79:         task.dueDate,
 80:         actualCompletionDate,
 81:         newCareActivity.id,
 82:         task.sourceProtocol.stage
 83:       );
 84: 
 85:       toast.success("Fertilization logged and learning patterns updated!");
 86:     } catch (error) {
 87:       console.error("Failed to complete task:", error);
 88:       toast.error("Failed to complete task");
 89:     }
 90:   };
 91: 
 92:   const handleTaskBypass = async (taskId: string, reason?: string) => {
 93:     try {
 94: 
 95:       const task = upcomingFertilization.find((t) => t.id === taskId);
 96:       if (!task) {
 97:         toast.error("Task not found");
 98:         return;
 99:       }
100: 
101: 
102:       await logActivity({
103:         plantId: task.plantId,
104:         type: "observe",
105:         date: new Date(),
106:         details: {
107:           type: "observe",
108:           notes: `Bypassed fertilization task: ${task.taskName}${
109:             reason ? ` - Reason: ${reason}` : ""
110:           }`,
111:         },
112:       });
113: 
114: 
115: 
116: 
117:       toast.success("Task bypassed");
118:     } catch (error) {
119:       console.error("Failed to bypass task:", error);
120:       toast.error("Failed to bypass task");
121:     }
122:   };
123: 
124:   const handleTaskLogActivity = (taskId: string) => {
125: 
126:     const task = upcomingFertilization.find((t) => t.id === taskId);
127:     if (!task) {
128:       toast.error("Task not found");
129:       return;
130:     }
131: 
132: 
133:     navigate(`/care/log?plantId=${task.plantId}&type=fertilize`);
134:   };
135: 
136: 
137:   const [bulkModalOpen, setBulkModalOpen] = useState(false);
138:   const [selectedPlantIds, setSelectedPlantIds] = useState<string[]>([]);
139:   const [selectedActivityType, setSelectedActivityType] = useState("");
140:   const [selectedGroup, setSelectedGroup] = useState<PlantGroup | null>(null);
141: 
142:   useEffect(() => {
143:     if (plants && plants.length > 0) {
144:       const groups = groupPlantsByConditions(plants);
145:       setPlantGroups(groups);
146:     } else {
147:       setPlantGroups([]);
148:     }
149:   }, [plants]);
150: 
151:   const handleBulkLogActivity = (plantIds: string[], activityType: string) => {
152:     const group = plantGroups.find((g) =>
153:       g.plants.some((p) => plantIds.includes(p.id))
154:     );
155: 
156:     setSelectedPlantIds(plantIds);
157:     setSelectedActivityType(activityType);
158:     setSelectedGroup(group || null);
159:     setBulkModalOpen(true);
160:   };
161: 
162:   const closeBulkModal = () => {
163:     setBulkModalOpen(false);
164:     setSelectedPlantIds([]);
165:     setSelectedActivityType("");
166:     setSelectedGroup(null);
167:   };
168: 
169:   if (loading) {
170:     return (
171:       <div className="min-h-screen bg-background flex items-center justify-center">
172:         <div className="text-foreground">Loading...</div>
173:       </div>
174:     );
175:   }
176: 
177:   return (
178:     <>
179:       <div className="container mx-auto p-4 pb-20 max-w-md">
180:         <OfflineIndicator />
181:         <div className="min-h-screen bg-background pb-20">
182:           {}
183:           <div className="bg-card border-b border-border sticky top-0 z-40">
184:             <div className="max-w-6xl mx-auto px-4 py-4">
185:               <div className="flex justify-between items-center">
186:                 <div className="flex items-center gap-3">
187:                   <div className="text-2xl"></div>
188:                   <div>
189:                     <h1 className="text-xl font-semibold text-foreground">
190:                       SmartGarden
191:                     </h1>
192:                     <p className="text-sm text-muted-foreground">
193:                       Welcome, {user?.displayName || user?.email}
194:                     </p>
195:                   </div>
196:                 </div>
197:                 <div className="flex items-center gap-2">
198:                   <Button variant="outline" onClick={signOut}>
199:                     Sign Out
200:                   </Button>
201:                 </div>
202:               </div>
203:             </div>
204:           </div>
205: 
206:           {}
207:           <div className="max-w-6xl mx-auto px-4 py-6 space-y-8">
208:             {}
209:             <div className="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
210:               <Card className="mt-4">
211:                 <CardContent className="p-4">
212:                   <h3 className="font-semibold mb-3">
213:                      Fertilization Tasks (Debug)
214:                   </h3>
215:                   {scheduleLoading && <p>Loading fertilization tasks...</p>}
216:                   {error && <p className="text-red-600">Error: {error}</p>}
217:                   {!scheduleLoading && !error && (
218:                     <div>
219:                       <p className="mb-2">Found {tasks.length} total tasks</p>
220:                       {tasks.length === 0 ? (
221:                         <p className="text-muted-foreground">
222:                           No fertilization tasks found
223:                         </p>
224:                       ) : (
225:                         <div className="space-y-2">
226:                           {tasks.map((task) => (
227:                             <div key={task.id} className="border p-3 rounded">
228:                               <p className="font-medium">{task.taskName}</p>
229:                               <p className="text-sm">
230:                                 Product: {task.details.product}
231:                               </p>
232:                               <p className="text-sm">
233:                                 Due: {task.dueDate.toLocaleDateString()}
234:                               </p>
235:                               <p className="text-sm">Status: {task.status}</p>
236:                               <p className="text-sm">
237:                                 Plant ID: {task.plantId}
238:                               </p>
239:                             </div>
240:                           ))}
241:                         </div>
242:                       )}
243:                     </div>
244:                   )}
245:                 </CardContent>
246:               </Card>
247: 
248:               <Card className="bg-gradient-to-br from-primary/10 to-primary/5 border-primary/20">
249:                 <CardHeader className="pb-3">
250:                   <CardTitle className="text-lg flex items-center gap-2">
251:                     <span className="text-xl"></span>
252:                     Total Plants
253:                   </CardTitle>
254:                 </CardHeader>
255:                 <CardContent>
256:                   <p className="text-3xl font-bold text-primary">
257:                     {plants?.length || 0}
258:                   </p>
259:                   <p className="text-sm text-muted-foreground">
260:                     Plants registered
261:                   </p>
262:                 </CardContent>
263:               </Card>
264: 
265:               <Card className="bg-gradient-to-br from-accent/10 to-accent/5 border-accent/20">
266:                 <CardHeader className="pb-3">
267:                   <CardTitle className="text-lg flex items-center gap-2">
268:                     <span className="text-xl"></span>
269:                     Today's Tasks
270:                   </CardTitle>
271:                 </CardHeader>
272:                 <CardContent>
273:                   <p className="text-3xl font-bold text-accent">0</p>
274:                   <p className="text-sm text-muted-foreground">Tasks due</p>
275:                 </CardContent>
276:               </Card>
277: 
278:               <Card className="bg-gradient-to-br from-emerald-500/10 to-emerald-500/5 border-emerald-500/20 sm:col-span-2 lg:col-span-1">
279:                 <CardHeader className="pb-3">
280:                   <CardTitle className="text-lg flex items-center gap-2">
281:                     <span className="text-xl"></span>
282:                     Garden Health
283:                   </CardTitle>
284:                 </CardHeader>
285:                 <CardContent>
286:                   <p className="text-3xl font-bold text-emerald-600">Great</p>
287:                   <p className="text-sm text-muted-foreground">
288:                     All systems green
289:                   </p>
290:                 </CardContent>
291:               </Card>
292:             </div>
293: 
294:             {}
295:             {plantGroups.length === 0 && (
296:               <Card className="bg-gradient-to-br from-card to-muted/30">
297:                 <CardContent className="text-center py-12">
298:                   <div className="text-6xl mb-4"></div>
299:                   <h3 className="text-xl font-semibold mb-2 text-foreground">
300:                     Welcome to SmartGarden!
301:                   </h3>
302:                   <p className="text-muted-foreground mb-6 max-w-md mx-auto">
303:                     Start your gardening journey by adding your first plant.
304:                     Track growth, log care activities, and get personalized
305:                     recommendations.
306:                   </p>
307:                   <Button
308:                     onClick={() => navigate("/add-plant")}
309:                     size="lg"
310:                     className="bg-primary hover:bg-primary/90"
311:                   >
312:                     <span className="mr-2"></span>
313:                     Add Your First Plant
314:                   </Button>
315:                 </CardContent>
316:               </Card>
317:             )}
318: 
319:             {}
320:             {plantGroups.length > 0 && (
321:               <div className="space-y-4">
322:                 <div className="flex justify-between items-center">
323:                   <h2 className="text-xl font-semibold text-foreground flex items-center gap-2">
324:                     <span className="text-2xl"></span>
325:                     Your Plants
326:                   </h2>
327:                   <div className="flex gap-2">
328:                     <Button
329:                       variant="outline"
330:                       onClick={() => navigate("/plants")}
331:                       size="sm"
332:                     >
333:                       View All
334:                     </Button>
335:                     <Button
336:                       onClick={() => navigate("/add-plant")}
337:                       className="bg-primary hover:bg-primary/90"
338:                     >
339:                       <span className="mr-2"></span>
340:                       Add Plant
341:                     </Button>
342:                   </div>
343:                 </div>
344: 
345:                 {}
346:                 <div className="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
347:                   {plantGroups.slice(0, 6).map((group) => (
348:                     <PlantGroupCard
349:                       key={group.id}
350:                       group={group}
351:                       onBulkLogActivity={handleBulkLogActivity}
352:                     />
353:                   ))}
354:                 </div>
355: 
356:                 {}
357:                 {plantGroups.length > 6 && (
358:                   <div className="text-center pt-4">
359:                     <Button
360:                       variant="outline"
361:                       onClick={() => navigate("/plants")}
362:                     >
363:                       View All {plantGroups.length} Plant Groups
364:                     </Button>
365:                   </div>
366:                 )}
367:               </div>
368:             )}
369:           </div>
370:           {upcomingFertilization.length > 0 && (
371:             <FertilizationDashboardSection
372:               tasks={upcomingFertilization}
373:               onTaskComplete={handleTaskComplete}
374:               onTaskBypass={handleTaskBypass}
375:               onTaskLogActivity={handleTaskLogActivity}
376:             />
377:           )}
378:           {}
379:           <Navigation />
380:         </div>
381:       </div>
382: 
383:       {}
384:       <BulkActivityModal
385:         isOpen={bulkModalOpen}
386:         onClose={closeBulkModal}
387:         plantIds={selectedPlantIds}
388:         activityType={selectedActivityType}
389:         plantCount={selectedPlantIds.length}
390:         varietyName={selectedGroup?.varietyName || ""}
391:       />
392:     </>
393:   );
394: };




================================================================
End of Codebase
================================================================
